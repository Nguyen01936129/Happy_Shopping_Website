(self.miniJsonp=self.miniJsonp||[]).push([[592],{37764:function(e,t,r){var n;n=(e,t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,R,C)=>(()=>{var D={757:(e,t,r)=>{e.exports=r(666)},439:(e,t,r)=>{"use strict";r.d(t,{t:()=>a});var n=r(661),o=r.n(n),a=o().t.bind(o())},187:e=>{"use strict";var t,r="object"==typeof Reflect?Reflect:null,n=r&&"function"==typeof r.apply?r.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};t=r&&"function"==typeof r.ownKeys?r.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var o=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,e.exports.once=function(e,t){return new Promise((function(r,n){function o(r){e.removeListener(t,a),n(r)}function a(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}E(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&E(e,"error",t,{once:!0})}(e,o)}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function i(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function u(e,t,r,n){var o,a,c,u;if(s(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),c=a[t]),void 0===c)c=a[t]=r,++e._eventsCount;else if("function"==typeof c?c=a[t]=n?[r,c]:[c,r]:n?c.unshift(r):c.push(r),(o=i(e))>0&&c.length>o&&!c.warned){c.warned=!0;var d=new Error("Possible EventEmitter memory leak detected. "+c.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");d.name="MaxListenersExceededWarning",d.emitter=e,d.type=t,d.count=c.length,u=d,console&&console.warn&&console.warn(u)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=d.bind(n);return o.listener=r,n.wrapFn=o,o}function p(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):_(o,o.length)}function f(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function _(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function E(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function o(a){n.once&&e.removeEventListener(t,o),r(a)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||o(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return i(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var o="error"===e,a=this._events;if(void 0!==a)o=o&&void 0===a.error;else if(!o)return!1;if(o){var c;if(t.length>0&&(c=t[0]),c instanceof Error)throw c;var s=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw s.context=c,s}var i=a[e];if(void 0===i)return!1;if("function"==typeof i)n(i,this,t);else{var u=i.length,d=_(i,u);for(r=0;r<u;++r)n(d[r],this,t)}return!0},a.prototype.addListener=function(e,t){return u(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return u(this,e,t,!0)},a.prototype.once=function(e,t){return s(t),this.on(e,l(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,l(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,a,c;if(s(t),void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){c=r[a].listener,o=a;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,c||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,a=Object.keys(r);for(n=0;n<a.length;++n)"removeListener"!==(o=a[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return p(this,e,!0)},a.prototype.rawListeners=function(e){return p(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},a.prototype.listenerCount=f,a.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new P(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=d(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=d(e[o],e,a);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(l).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},327:e=>{for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);e.exports=function(e,r){var n=r||0,o=t;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var r=new Uint8Array(16);e.exports=function(){return t(r),r}}else{var n=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),n[t]=e>>>((3&t)<<3)&255;return n}}},171:(e,t,r)=>{var n=r(217),o=r(327);e.exports=function(e,t,r){var a=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var c=(e=e||{}).random||(e.rng||n)();if(c[6]=15&c[6]|64,c[8]=63&c[8]|128,t)for(var s=0;s<16;++s)t[a+s]=c[s];return t||o(c)}},241:e=>{"use strict";e.exports=T},782:e=>{"use strict";e.exports=p},830:e=>{"use strict";e.exports=f},292:e=>{"use strict";e.exports=_},423:e=>{"use strict";e.exports=a},209:e=>{"use strict";e.exports=g},411:e=>{"use strict";e.exports=b},123:e=>{"use strict";e.exports=C},770:e=>{"use strict";e.exports=R},914:e=>{"use strict";e.exports=y},674:e=>{"use strict";e.exports=o},378:e=>{"use strict";e.exports=i},464:e=>{"use strict";e.exports=u},428:e=>{"use strict";e.exports=c},661:e=>{"use strict";e.exports=d},444:e=>{"use strict";e.exports=s},598:e=>{"use strict";e.exports=n},550:e=>{"use strict";e.exports=O},383:t=>{"use strict";t.exports=e},252:e=>{"use strict";e.exports=l},655:e=>{"use strict";e.exports=m},944:e=>{"use strict";e.exports=S},975:e=>{"use strict";e.exports=h},947:e=>{"use strict";e.exports=v},855:e=>{"use strict";e.exports=t},672:e=>{"use strict";e.exports=r},455:e=>{"use strict";e.exports=E}},P={};function I(e){var t=P[e];if(void 0!==t)return t.exports;var r=P[e]={exports:{}};return D[e](r,r.exports,I),r.exports}I.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return I.d(t,{a:t}),t},I.d=(e,t)=>{for(var r in t)I.o(t,r)&&!I.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},I.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),I.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var A={};return(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}I.r(A),I.d(A,{$tracker:()=>Lm,BadRequest:()=>Ue,Blacklist:()=>Be,CancelOrderWarning:()=>Ke,ChatbotProvider:()=>GO,CustomError:()=>Ve,EventBus:()=>MT,ExceptionName:()=>yt,FileReaderError:()=>Je,Forbidden:()=>Fe,HTTPError:()=>Ze,InternalServerError:()=>Ge,Limiting:()=>qe,LiveReportPoint:()=>dt,LiveSecretKey:()=>pt,MarkName:()=>gt,NoLiveKeyMap:()=>Tt,NoLiveReportPoint:()=>lt,NoLiveSecretKey:()=>ft,NotFound:()=>Le,ReportComponent:()=>bt,ReportPoint:()=>Lt,TemporyError:()=>$e,Unauthoried:()=>Me,UnprocessableEntity:()=>je,UntrustedNetwork:()=>We,UnverifiedPhoneNumber:()=>ze,Webview:()=>Qe,addMediaFile:()=>JS,addOnDealItemDetailCleaner:()=>Yu,addOnDealRuleCleaner:()=>qu,agentConversationEntitiesSelector:()=>ar,agentConversationSchema:()=>S,allMessageIdsSelector:()=>qf,allProductsSearchStatusSelector:()=>Uv,allProductsSelector:()=>Bv,authorizedShopsCountSelector:()=>Kn,autoTranslation:()=>N_,batchRemoveDraft:()=>SE,batchUpdateRecord:()=>Dr,blockUserRequested:()=>ro,bundleDealItemDetailCleaner:()=>Wu,bundleDealRuleCleaner:()=>Ku,cancelReasonsSelector:()=>Rv,captchaSignatureSelector:()=>yn,captchaVisibleSelector:()=>bn,changeConversationStatusRequested:()=>ii,changeConversationStatusRequestedSaga:()=>Kd,chatbotImageSelector:()=>TO,chatbotIntentsReportRequest:()=>BO,chatbotOrderCleaner:()=>Zh,chatbotReducer:()=>Ov,checkUserPermissionRequested:()=>Za,checkUserPermissionSucceeded:()=>ec,clearApiCache:()=>fe,clearMediaFile:()=>$S,clearReportRequested:()=>Kv,closeChatbotMediaPreview:()=>VO,closeMediaPreviewModalRequested:()=>sh,closeModal:()=>Yr,collectAsyncTask:()=>Ft,collectChatbotReportTask:()=>Fm,collectComponentTask:()=>Gt,collectLoadTask:()=>jt,configTrackerUser:()=>wm,contactsEntitiesSelector:()=>Er,contactsSchema:()=>h,conversationBeenDeletedSelector:()=>xs,conversationDirectionSelector:()=>ns,conversationEntitiesSelector:()=>or,conversationHttpStatusSelector:()=>rs,conversationIdsSelector:()=>zc,conversationLastMessageSelector:()=>Qf,conversationOperateRequested:()=>di,conversationReducer:()=>rp,conversationSchema:()=>s,conversationsLengthLevelSelector:()=>Sr,conversationsSelector:()=>os,converstionSyncUpdatesSaga:()=>vl,copySucceedFeedback:()=>Kp,csSocket:()=>qT,csSocketConnectedSelector:()=>YS,csSocketLoginedSelector:()=>BS,curConvsMessageSelector:()=>p_,curMessagesRelatedSelector:()=>Vf,curTabFocusedSelector:()=>Gn,currentAllMessageShortcutsSelector:()=>D_,currentBuyerIdSelector:()=>Es,currentBuyerOffersSelector:()=>iE,currentBuyerOrdersSelector:()=>Av,currentBuyerSelector:()=>Ds,currentBuyerShopIdSelector:()=>Ps,currentBuyerShopSelector:()=>cp,currentConversationAutoTranslationSelectors:()=>ms,currentConversationBuyerIdSelectors:()=>vs,currentConversationCanReadSelector:()=>ts,currentConversationIdSelector:()=>es,currentConversationMaxOptionHideTimeSelectors:()=>gs,currentConversationSelector:()=>_s,currentConversationShopIdSelectors:()=>Os,currentConversationShopRegionSelectors:()=>hs,currentConversationShopSelectors:()=>Ss,currentConversationStatusSelectors:()=>Ts,currentConversationToNameSelector:()=>ks,currentConversationTranslationAccessSelector:()=>ws,currentDraftSelector:()=>bE,currentFaqHistorySeletor:()=>xf,currentFaqSessionInfoSelector:()=>gO,currentFetchResultSelector:()=>Vv,currentGroupIdSelector:()=>b_,currentGroupTypeSelector:()=>T_,currentOfferPaginationSelector:()=>sE,currentOffersFetchResultSelector:()=>cE,currentOrderFetchResultSelector:()=>Pv,currentPendingOffersCountSelector:()=>Gs,currentPreviewMediaIdSelector:()=>oh,currentShopIdSelector:()=>Cs,currentUserDistributionStatusSelector:()=>Ln,currentUserIdSelector:()=>En,currentUserRoleSelector:()=>Mn,currentUserSelector:()=>Pn,currentUserShopIdSelector:()=>kn,currentUserShopSelector:()=>Un,defaultPagination:()=>Fp,degradeConversationIdsSelector:()=>us,deleteConfigDurationSelector:()=>mn,deleteConfigSelector:()=>gn,deleteConversationRequested:()=>Bs,deleteConversationSucceeded:()=>Ys,deleteMediaFile:()=>XS,deleteRecord:()=>Cr,distributionAccountStatusSelector:()=>M_,draftHashSelector:()=>mE,draftReducer:()=>TE,entitiesSelector:()=>rr,entityReducer:()=>kr,entryPointSelector:()=>$f,exceptionTag:()=>Rt,failedMessageIdsSelector:()=>Kf,fakeConversationSucceeded:()=>qs,faqHistoryHashSelector:()=>wf,faqHistoryMessagesSelector:()=>a_,faqHistoryhttpStatusSelector:()=>Af,faqIdSelector:()=>Nf,faqSessionInfoSelector:()=>mO,feedStoryEntitiesSelector:()=>pr,feedStorySchema:()=>f,feedbackRequested:()=>KE,feedbackSelector:()=>FS,feedbackSucceeded:()=>zE,fetch:()=>it,fetchConversationsRequested:()=>Ws,fetchConversationsRequestedSaga:()=>wd,fetchConversationsSucceeded:()=>Ks,fetchDegradeConversationsDetail:()=>ui,fetchDegradeConversationsDetailSaga:()=>Nd,fetchFaqSessionSucceed:()=>YO,fetchMessagePreview:()=>Id,fetchSettings:()=>q_,fetchSettingsRequested:()=>G_,fetchSettingsStatusSelector:()=>lh,fetchShopAuth:()=>xp,fetchShopAuthRequested:()=>up,fetchShopDetailInfo:()=>_p,fetchShopSettings:()=>Dh,fetchShopTranslationSettings:()=>gh,fetchShopsByIds:()=>Np,fetchShopsRequested:()=>ip,fetchUserOrderDetail:()=>ua,fetchUserOrderDetailRequested:()=>Jo,fetchUserOrderDetailSucceeded:()=>Xo,fetchedShopIdsSelector:()=>op,filterSelector:()=>ls,filteredConversationsSelector:()=>ps,flashSaleItemDetailCleaner:()=>zu,forceLogoutRequested:()=>xa,formatOffer:()=>pO,formatSinglePrice:()=>Fu,generatePersist:()=>kT,getChatbotSdk:()=>LO,getConversation:()=>bs,getConversationDetailRequested:()=>Qs,getConversationFakingMessages:()=>t_,getConversationIds:()=>wT,getConversationPendingOffersCountSelector:()=>Fs,getConversationShopId:()=>ys,getConversationShopRegion:()=>Hs,getConversations:()=>Rs,getConvsMessagesRelatedSelector:()=>Bf,getDraft:()=>gE,getGuide:()=>ho,getGuideFailed:()=>Eo,getGuideRequested:()=>fo,getGuideSucceeded:()=>_o,getMessageSelector:()=>Ff,getMessagesSelector:()=>Hf,getPendingOffersCountRequested:()=>bi,getRouterPath:()=>te,getShopUnreadCountByIds:()=>wp,getToastInformation:()=>qp,getTranslation:()=>$t,handle401ErrorRequested:()=>rt,handleChatbotUrl:()=>Hm,handleChatbotUrlKey:()=>Bm,handleConnect:()=>kE,handleLoginSucceededLogic:()=>Ga,handleOrderForApi:()=>Qm,handleUnreadCountChangeAction:()=>cn,handledOrderForRender:()=>Ym,hasDeletePermissionSelector:()=>Tn,hasMoreLatestMessageSelector:()=>Jf,hasMoreOlderMessageSelector:()=>zf,hasReplyPermissionSelector:()=>vn,hasVideoPermissionSelector:()=>On,heartbeat:()=>$,history:()=>ee,inScrollToMessageSelector:()=>O_,initMDAPSdk:()=>Bt,inlocationSelector:()=>$c,isCBSellerSelector:()=>wn,isCSSocketShared:()=>QT,isError:()=>et,isMainPageSelector:()=>jn,isNavigateToUnreadMessageSelector:()=>Ms,isScChatSelector:()=>Yn,isShared:()=>z,isSubAccountSelector:()=>An,itemDetailCleaner:()=>Vu,itemListDetailCleaner:()=>Bu,keywordSelector:()=>ds,legacyMessageShortcutsCountSelector:()=>U_,listsHashSelector:()=>Ns,loadingSelector:()=>_n,localeSelector:()=>In,locationMessage:()=>_i,login:()=>Fa,loginCSSocket:()=>WT,loginRequested:()=>Ia,loginSocket:()=>X,loginSucceeded:()=>Aa,loginSuccessSelector:()=>Qn,logout:()=>Hc,logoutHandler:()=>Fc,logoutRequested:()=>wa,logoutSucceeded:()=>Na,markMessagesRequested:()=>Zs,markMessagesRequestedSaga:()=>Vd,markMessagesSucceeded:()=>ei,mdapConfig:()=>Nt,mediaListSelector:()=>KS,mediaMapSelector:()=>WS,mediaMessagesSelector:()=>c_,mediaPreviewModalReducer:()=>uh,mediaPreviewerReducer:()=>eh,memoize:()=>Jm,messageEntitiesSelector:()=>cr,messageFillStatusMapSelector:()=>Yf,messageHasNextSelector:()=>Xf,messageHttpStatusSelector:()=>kf,messageOffersSelector:()=>l_,messageSchema:()=>c,messageShortcutGroupContentSelector:()=>m_,messageShortcutGroupEntitiesSelector:()=>lr,messageShortcutGroupHttpStatusSelector:()=>g_,messageShortcutGroupSelector:()=>v_,messageShortcutsSchema:()=>_,messageShortcutsSelector:()=>y_,messageShortcutsStatusSelector:()=>k_,messageSourceIdsSelector:()=>d_,messageSourceSelector:()=>u_,messageTimeStyleSelector:()=>x_,messagesLengthLevelSelector:()=>hr,messagesRelatedMapSelector:()=>Uf,messagesSelector:()=>e_,missedReadNoticeCountSelector:()=>Xc,modalReducer:()=>Qr,modalSelector:()=>Lr,muteConversationRequested:()=>gi,myShopSelector:()=>ap,navigateToUnreadMessageIdSelector:()=>Ls,networkJudge:()=>VT,networkStatusSelector:()=>hn,newMessageFlagSelector:()=>Cn,newbieSelector:()=>Sn,normalize:()=>T,noticesCountSelector:()=>VS,offerCleaner:()=>$u,offerDetailCleaner:()=>Xu,offerHttpStatusSelector:()=>tE,offerSchema:()=>d,offerSelector:()=>oE,offersSelector:()=>rE,offlineMessagesSelector:()=>Mf,openedMenuSelector:()=>Bn,orderCleaner:()=>Xh,orderEntitiesSelector:()=>ir,orderHttpStatusSelector:()=>Cv,orderLogisticsCleaner:()=>$h,orderSchema:()=>i,orderSelector:()=>yv,personalMessageShortcutsSelector:()=>R_,pinConversationRequested:()=>ri,previewMediasSelector:()=>s_,productCleaner:()=>zm,productEntitiesSelector:()=>ur,productSchema:()=>u,productSelector:()=>wv,productsSelector:()=>Nv,rateCardEntitiesSelector:()=>fr,rateCardSelector:()=>f_,rateCardsSchema:()=>E,readMessage:()=>da,readRequestIdsSelector:()=>Jc,reconnectFlagSelector:()=>HS,redirectConversationRequested:()=>TT,reduxReset:()=>uE,relatedOfferIdsSelector:()=>nE,removeAllDraft:()=>EE,removeSingleDraft:()=>_E,replyToMessageIdSelector:()=>E_,replyToMessageSelector:()=>h_,reportApiTime:()=>Yt,reportArraySelector:()=>Yv,reportReducer:()=>oT,reportRequested:()=>Wv,resendMessagePayloadSelector:()=>Rn,resetConversationRequested:()=>ci,resetNavigateToUnreadMessageId:()=>Ti,resetSearchParams:()=>ni,resultsSelector:()=>Is,reverseMessagesSelector:()=>r_,saveDraft:()=>hE,scrollToMessageIdSelector:()=>S_,searchConversationHttpStatusSelector:()=>As,searchConversationsRequested:()=>Nl,searchConversationsSucceeded:()=>xl,searchMoreResults:()=>li,searchShopsRequested:()=>fp,selectHydrated:()=>m,selectVideoInfoByKey:()=>jf,selectVideoInfoKeyByVid:()=>Gf,sellerRecommendGroupsFetchStatusSelector:()=>Hv,sellerRecommendGroupsSelector:()=>jv,sellerRecommendProductFetchStatusSelector:()=>Fv,sellerRecommendProductsSelector:()=>Mv,sendingMessageIdsSelector:()=>Wf,setChatSource:()=>oa,setConversationBeenDeleted:()=>mi,setCurrentConversationCanRead:()=>oi,setNavigateToUnreadMessage:()=>Oi,setNavigateToUnreadMessageId:()=>vi,setTextBoxHeight:()=>jc,setToastInformation:()=>zp,setToastInformationSaga:()=>tf,settingsFetchStatusSelector:()=>w_,settingsNeedForceUpdateSelectors:()=>I_,settingsReducer:()=>Z_,settingsSelector:()=>P_,settingsStatusSelector:()=>A_,shopAccessSelector:()=>Us,shopReducer:()=>Bp,shopSchema:()=>p,shopSelector:()=>np,shopService:()=>H,shopStatisticsMapSelector:()=>Nn,shopStatisticsSelector:()=>xn,shopTranslationSettingsSelector:()=>dh,shoppingCartItemDetailCleaner:()=>Ju,shopsEntitiesSelector:()=>_r,shopsUnreadConversationCountSelector:()=>qr,shouldPersistItem:()=>UT,showAutoHangupModalSelector:()=>zn,showCartReminder:()=>SO,showChatWindowSelector:()=>Vn,showChatbotImage:()=>HO,showConversationDetailSelector:()=>Hn,showConversationRequested:()=>ai,showConversationSucceeded:()=>si,showEntrySelector:()=>Wn,showFaqHistory:()=>hO,showFeedStory:()=>EO,showMediaPreviewModalRequested:()=>ch,showMediaPreviewModalSelector:()=>nh,showModal:()=>Br,showOffer:()=>fO,showOrder:()=>lO,showProduct:()=>dO,showSearchedConversationRequested:()=>fi,showShop:()=>hp,showUser:()=>dc,showUserRequested:()=>uc,showVoucher:()=>_O,showWarningMessageIdsSelector:()=>n_,socket:()=>J,socketReducer:()=>GS,socketSuccessSelector:()=>qn,sortedConversationsSelector:()=>fs,stickerEntitiesSelector:()=>sr,stickerSchema:()=>l,systemRecommendProductFetchStatusSelector:()=>Gv,systemRecommendProductsSelector:()=>Lv,takeEveryWithCancel:()=>CT,teamMessageShortcutsSelector:()=>C_,textBoxHeightSelector:()=>Fn,timerHandler:()=>Zv,toBottomHasConflictSelector:()=>Zf,toMessageIdSelector:()=>__,toastReducer:()=>pf,toastSelector:()=>Yp,totalUnreadConversationsCountSelector:()=>Wr,translatePreferenceReducer:()=>wh,unreadCountActions:()=>Kr,unreadCountReducer:()=>fn,unreadMessageIdsSelector:()=>i_,unreadMessagesSelector:()=>o_,updateCSSocketStatus:()=>DS,updateCaptchaSignature:()=>wc,updateCaptchaSignatureSaga:()=>xc,updateCaptchaSignatureSucceeded:()=>Nc,updateCaptchaVisible:()=>Ac,updateChatEntryStatus:()=>sa,updateChatWindowStatus:()=>Zo,updateChatWindowStatusSaga:()=>pa,updateChatWindowStatusSucceeded:()=>ea,updateChatbotFrom:()=>jO,updateConversationDetailStatus:()=>ta,updateConversationDetailStatusSaga:()=>fa,updateConversationDetailStatusSucceeded:()=>ra,updateConversationFilter:()=>$s,updateConversationListsHash:()=>nt,updateConversationTimestamp:()=>Xs,updateCurTabFocused:()=>Oc,updateCurTabFocusedSaga:()=>Tc,updateCurTabFocusedSucceeded:()=>vc,updateDelPermission:()=>tc,updateEntities:()=>yr,updateFetchConversationsDirection:()=>Js,updateFetchStatus:()=>yh,updateFetchedShopIds:()=>dp,updateGuide:()=>Ao,updateGuideRequested:()=>Do,updateGuideSucceeded:()=>Po,updateIsMainPage:()=>hc,updateLocationMode:()=>Ei,updateLoginSuccessStatus:()=>aa,updateNetworkStatus:()=>zo,updateNoticesCount:()=>SS,updateOpenedMenu:()=>na,updateOrReplaceAction:()=>AT,updateReadRequestData:()=>ti,updateReconnectFlag:()=>FE,updateRecord:()=>Rr,updateSearchParams:()=>kl,updateSettingPreferenceStatus:()=>Rh,updateShopFilter:()=>lp,updateShopTranslationSettings:()=>bh,updateShopTranslationSettingsRecord:()=>Ch,updateShowAutoHangupModal:()=>$o,updateSocketSuccessStatus:()=>ca,updateStatusSelector:()=>ph,updateTimeNowSelector:()=>Zc,updateTotalUnreadConversationsCount:()=>nn,updateUnreadCount:()=>rn,updateUser:()=>ia,updateUserRequested:()=>Ko,updateVoucherStatus:()=>id,userEntitiesSelector:()=>nr,userReducer:()=>Kc,userSchema:()=>a,userSelector:()=>Dn,videoMapSelector:()=>Lf,visitShopSellerCenterRequested:()=>pp,voucherCleaner:()=>sd,voucherEntitiesSelector:()=>dr,voucherHttpStatusSelector:()=>Tv,voucherSelector:()=>gv,vouchersSchema:()=>O,vouchersSelector:()=>mv,watchBlock:()=>co,watchCSChatChannel:()=>AS,watchCSChatReconnect:()=>wS,watchCaptcha:()=>kc,watchChannel:()=>vS,watchChatbotSagas:()=>vv,watchCheck:()=>nc,watchConversationSagas:()=>ep,watchFeedback:()=>XE,watchGuides:()=>Oo,watchLogin:()=>Ha,watchReportSagas:()=>nT,watchSearch:()=>Ml,watchSettingsSagas:()=>$_,watchShopSagas:()=>Hp,watchShow:()=>lc,watchSocketSagas:()=>jS,watchTab:()=>mc,watchToastSagas:()=>lf,watchTranslationSagas:()=>Nh,watchTranslationSettings:()=>Ih,watchUncontrolledSagas:()=>yT,watchUnreadSagas:()=>pn,watchUpdate:()=>_a,watchUpdateGuides:()=>wo,watchUserSagas:()=>qc});var t=I(383);function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){e(t,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var o=function(e,r,o){return new t.schema.Entity(e,n({},r),n({},o))},a=o("users"),c=o("messages"),s=o("conversations"),i=o("orders"),u=o("products"),d=o("offers"),l=o("stickers"),p=o("shops"),f=o("feedStories"),_=o("messageShortcuts"),E=o("rateCards"),S=o("agentConversations"),h=o("contacts",{},{idAttribute:"account_id"}),O=o("vouchers"),v={users:a,messages:c,conversations:s,orders:i,offers:d,products:u,stickers:l,shops:p,feedStories:f,messageShortcuts:_,rateCards:E,agentConversations:S,contacts:h,vouchers:O};const T=function(e,r){var n=v[e]||o(e);return r instanceof Array?(0,t.normalize)(r,[n]):(0,t.normalize)(r,n)};var m=function(e,r,n){try{var o=v[e];return r instanceof Array?(0,t.denormalize)(r,[o],n.entityReducer):null==r?void 0:(0,t.denormalize)(r,o,n.entityReducer)}catch(e){return}};function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){if(e){if("string"==typeof e)return g(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,s=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(s)throw o}}return a}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R=I(855);function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function D(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function P(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){D(a,n,o,c,s,"next",e)}function s(e){D(a,n,o,c,s,"throw",e)}c(void 0)}))}}var w=I(757),N=I.n(w),x=I(672),k=I(598),U=I.n(k);function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),e}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function F(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?G(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var H=new(function(){function t(){M(this,t),this.shopsMap={}}var r;return j(t,[{key:"updateShopMap",value:function(e){this.shopsMap=F(F({},this.shopsMap),e)}},{key:"getRegion",value:(r=P(N().mark((function t(r,n){var o,a,c,s;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=11;break}if(a=null===(o=this.shopsMap[n])||void 0===o?void 0:o.country){t.next=8;break}return t.next=5,it({resource:"shop",id:n,params:{need_cache:1,cache_expires:600}});case 5:return c=t.sent,this.updateShopMap(e({},c.id,c)),t.abrupt("return",c.country);case 8:return t.abrupt("return",a);case 11:if(s=(0,R.getRuntimeRegion)().toUpperCase(),!["KR","CN"].includes(s)&&!r){t.next=14;break}return t.abrupt("return","GLOBAL");case 14:return t.abrupt("return",s);case 15:case"end":return t.stop()}}),t,this)}))),function(e,t){return r.apply(this,arguments)})}]),t}());"live"!==(0,R.getRuntimeServer)()&&(window.shopService=H);var V,B=I(674),Y=I.n(B);function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Q(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var W=(0,R.checkIsScChat)();V=W?"scminichat":"pmminichat";var K=new(Y())({shouldShared:W,name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_seller-push-ws")}),z=K.isShared,J=K.socket;J.dispatch||(J.dispatch=function(){return{}});var X=function(e){return z?J.emit("login",q(q({},e),{},{app_id:V}),!0):new Promise((function(t){J.emit("login",q(q({},e),{},{app_id:V}),(function(e){return t(JSON.parse(e))}))}))},$=function(e){var t=e.noticesCount,r=e.readMissedCount,n=e.csSocketLogined,o=e.csSocketConnected,a={app_id:V,noticesCount:t,readMissedCount:r,csSocketLogined:n,csSocketConnected:o},c="".concat(V,"|").concat(t,"|").concat(r,"|").concat(n,"|").concat(o);return z?J.heartbeat({emitEvent:"heartbeat",args:a,pollingTime:6e4,remedyTime:9e4,separator:"|"}):J.emit("heartbeat",c)},Z=I(423),ee=(0,I(428).createBrowserHistory)({basename:"/chateasy"}),te=function(){var e=ee.location,t=e&&e.pathname;return t&&t.startsWith("/")?t.split("/")[1]:t},re=((0,R.getRuntimeRegion)()||"").toUpperCase(),ne="live"===(0,R.getRuntimeServer)(),oe=(0,Z.createFetchUtils)({locale:re,isLiveEnv:ne,onSecuritySdkError:function(e){return console.log("[onSecuritySdkError]",e)}}),ae=oe.initSecuritySdk,ce=oe.post;function se(e,t){return ie.apply(this,arguments)}function ie(){return(ie=P(N().mark((function e(t,r){var n,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.headers,o=r.body,e.next=3,ce(t,JSON.parse(o),{headers:n,antiFraudConfig:{deviceFingerPrint:{dataFormatter:function(e){return{re_policy:{dfp_access_f:e}}}},apiProtection:{signatureLevel:1}}});case 3:return a=e.sent,e.abrupt("return",a.__raw);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}ae({history:ee});var de=I(444),le=I.n(de);window.__CHANGE_FETCH__||(window.fetch=le(),window.__CHANGE_FETCH__=!0);var pe="CHAT_API",fe=function(){window.caches&&window.caches.delete(pe)};function _e(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=P(N().mark((function e(t,r){var n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=new URL(t),o=n.searchParams,a=o.get("need_cache"),c=o.get("force_update"),s=o.get("_ts"),i=r.method&&"get"===r.method.toLowerCase(),u="&csrf_token=".concat(encodeURIComponent(o.get("csrf_token")||"")),d="&force_update=".concat(String(c)),l=t.replace(u,"").replace(d,"").replace(s||"",""),!(i&&a&&window.caches)){e.next=44;break}return e.next=13,window.caches.open(pe);case 13:return p=e.sent,e.next=16,p.match(l);case 16:if(f=e.sent,_=Date.now(),!f){e.next=25;break}if(!(_<Number(f.headers.get("cache-expires")))||c){e.next=23;break}return e.abrupt("return",f);case 23:return e.next=25,p.delete(l);case 25:return e.next=27,window.fetch(t,r);case 27:if(E=e.sent,S=E.clone(),200!==E.status){e.next=41;break}return h=ue(E.headers.entries()),O={},v=Number(o.get("cache_expires"))||3600,T=_+1e3*v,e.next=36,E.blob();case 36:m=e.sent,h.forEach((function(e){O[e[0]]=e[1]})),O["cache-expires"]=T,g=new Response(m,{headers:new Headers(O)});try{p.put(l,g)}catch(e){window.caches.delete(pe)}case 41:return e.abrupt("return",S);case 44:return e.abrupt("return",window.fetch(t,r));case 45:e.next=50;break;case 47:return e.prev=47,e.t0=e.catch(0),e.abrupt("return",window.fetch(t,r));case 50:case"end":return e.stop()}}),e,null,[[0,47]])})))).apply(this,arguments)}var Se,he,Oe,ve=I(378),Te=I.n(ve),me=I(464),ge=I.n(me);!function(e){e[e.ONE=1]="ONE",e[e.TWO=2]="TWO",e[e.THREE=3]="THREE",e[e.FOUR=4]="FOUR"}(Oe||(Oe={}));var be=(e(Se={},Oe.ONE,"70c74f4e-dcda-483e-826b-19dd2c42e799"),e(Se,Oe.TWO,"29ffec18-c614-4645-8f1c-686e22d2e26a"),e(Se,Oe.THREE,"04229e76-1ba3-4ac9-8a4e-68d46a3881a2"),e(Se,Oe.FOUR,"a3769a87-35cf-45e9-a5a7-2b4016c52e92"),Se),ye=(e(he={},Oe.ONE,"396c15ad-6d3e-4018-98be-cef58cb45cd0"),e(he,Oe.TWO,"607c871d-b766-4c6f-ba89-b6c6ca32b156"),e(he,Oe.THREE,"42990074-9a73-4459-b749-f3110d222a72"),e(he,Oe.FOUR,"5702b6f3-62a3-44d2-abe8-fece100a8bf4"),he);function Re(e,t){var r=t.url,n=t.method,o=t.token,a=t.ctoken,c=t.extra,s=function(e){return"live"===(0,R.getRuntimeServer)()?ye[e]:be[e]}(e);switch(e){case 1:return function(e,t,r){if(r){var n=r.plat,o=r.fromID,a=r.reqID,c=r.toID,s=r.timestamp,i=r.type,u=r.strinput,d="key=".concat(t,"&plat=").concat(n,"&ver=v1.2&fromID=").concat(o,"&reqID=").concat(a,"&toID=").concat(c,"&timestamp=").concat(s,"&type=").concat(i,"&strinput=").concat(u);return ge()(d).toString()}return Te()(e+t).toString()}(r,s,c);case 2:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,n);case 3:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,o);case 4:return function(e,t,r){return Te()(e+t+r).toString()}(r,s,a);default:return""}}var Ce=function(e){var t=e.url,r=e.method,n=e.token,o=e.ctoken,a=void 0===o?"":o,c=e.version,s=e.fromID,i=e.payload,u=void 0===i?"{}":i,d=e.timestamp,l=JSON.parse(u),p=l.to_id,f=l.request_id,_=l.type,E=l.content,S=void 0===E?{}:E;return{url:t,method:r,token:n,ctoken:a,extra:{plat:c,fromID:s,reqID:f,toID:p,timestamp:d,type:_,strinput:"text"===_&&S.text?S.text:""}}};function De(e,t){return De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},De(e,t)}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}function Ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ae(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?Ie(e):t}function we(e){return we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},we(e)}function Ne(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xe(e,t,r){return xe=Ne()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&De(o,r.prototype),o},xe.apply(null,arguments)}function ke(e){var t="function"==typeof Map?new Map:void 0;return ke=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return xe(e,arguments,we(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),De(n,e)},ke(e)}var Ue=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.message=e,n}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),Me=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return j(r,[{key:"handler",value:function(){(0,R.removeItem)("mini-session"),R.LS.removeItem("mini-session")}}]),r}(ke(Error));const Le=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error));var je=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o.errors=n,o}return r}(ke(Error)),Ge=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n.handler=n.handler.bind(Ie(n)),n}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),Fe=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n){var o;return M(this,r),(o=t.call(this,e)).name=o.constructor.name,o}return j(r,[{key:"handler",value:function(){}}]),r}(ke(Error)),He=I(439).t,Ve=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n.handler=n.handler.bind(Ie(n)),n}return j(r,[{key:"handler",value:function(){var e="";switch(this.error.error_code){case"unauthorized_for_shop":e="forward.error.unauthorized_for_shop";break;case"target_subaccount_unauthorized_for_shop":e="forward.error.target_subaccount_unauthorized_for_shop";break;case"target_group_unauthorized_for_shop":e="forward.error.target_group_unauthorized_for_shop";break;case"conversation_not_belong_to_you":e="forward.error.conversation_not_belong_to_you";break;case"conversation_not_dispatch":e="forward.error.conversation_not_dispatch";break;case"cannot_move_conversation_to_yourself":e="forward.error.cannot_move_conversation_to_yourself";break;case"target_subaccount_not_online":e="forward.error.target_subaccount_not_online";break;case"subaccount_conversation_not_found":e="forward.error.subaccount_conversation_not_found";break;case"conversation_closed":e="forward.error.conversation_closed";break;case"user_have_delete_disable":e="forward.error.user_deleted";break;case"user_has_pending_order":e="conversation_detail.workstation.block_fail_modal.title"}return{show:!0,type:"fail",message:He(e)}}}]),r}(ke(Error)),Be=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n,o){var a;return M(this,r),(a=t.call(this,e)).name=a.constructor.name,a}return r}(ke(Error)),Ye=I(439).t,Qe=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).name=n.constructor.name,n.error=e,n}return j(r,[{key:"handler",value:function(){var e;switch(this.error.error_code){case"send_rating_card_too_frequently":e="conversation_detail.message_list.rating_card_duplicate";break;case"rating_card_rated":case"rating_card_expired":e="rate_card.submit.fail";break;default:e="common.server_error.warning_tips"}return{message:Ye(e),show:!0,type:"fail"}}}]),r}(ke(Error)),qe=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error)),We=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e.message)).name=n.constructor.name,n.message=e.message,n}return r}(ke(Error)),Ke=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n}return r}(ke(Error));const ze=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e,n,o){var a;return M(this,r),(a=t.call(this,e)).name=a.constructor.name,a.errors=n,a.data=o,a}return r}(ke(Error)),Je=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this,e)).name=n.constructor.name,n.message=e,n}return r}(ke(Error));var Xe,$e=function(e){Pe(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=we(e);if(t){var o=we(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ae(this,r)}}(r);function r(e){var n;return M(this,r),(n=t.call(this)).message=e,n}return r}(ke(Error)),Ze=function(e){switch(e){case 400:return Ue;case 401:return Me;case 403:return Fe;case 404:return Le;case 422:return je;case 429:return qe;case 451:return We;case 452:return $e;case 491:return Ve;case 492:return Be;case 493:return Qe;case 494:return Ke;case 495:return ze;case 500:return Ge;default:return Error}},et=function(e){return"".concat(e).startsWith("4")||"".concat(e).startsWith("5")},tt=I(252);!function(e){e.HANDLE_401_ERROR_REQUESTED="HANDLE_401_ERROR_REQUESTED",e.UPDATE_CONVERSATION_LISTS_HASH="UPDATE_CONVERSATION_LISTS_HASH"}(Xe||(Xe={}));var rt=(0,tt.createActions)(e({},Xe.HANDLE_401_ERROR_REQUESTED,(function(e){return{resource:e.resource}}))).handle401ErrorRequested,nt=(0,tt.createActions)(e({},Xe.UPDATE_CONVERSATION_LISTS_HASH,(function(){return{}}))).updateConversationListsHash;function ot(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function at(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ot(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ct=(0,R.checkIsScChat)(),st=(0,R.getRuntimeVersion)();function it(e){return ut.apply(this,arguments)}function ut(){return ut=P(N().mark((function t(r){var n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,D,I,A,w,k,M,L,j,G,F,V,B,Y;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.shared,o=void 0!==n&&n,a=r.url,c=r.ssl,s=void 0===c||c,i=r.server,u=r.subServer,d=r.version,l=void 0===d?"v1.2":d,p=r.parent,f=r.parentId,_=r.resource,E=r.id,S=r.suffix,h=r.method,O=void 0===h?"GET":h,v=r.credentials,T=void 0===v?"include":v,m=r.extension,g=r.params,b=void 0===g?{}:g,D=r.payload,I=r.headers,A=void 0===I?{}:I,w=r.namespace,k=void 0===w?"mini":w,M=r.cleaner,L=void 0===M?function(e){return e}:M,j="mini-session",G="mini-session",F=function(){return!!z&&x.store.getState().userReducer.isMainPage},V=function(){if("sc"===S)return E;if("auth"===_)return f;if(b.shop_id)return b.shop_id;if(D)try{return JSON.parse(D).shop_id}catch(e){}},B=function(){var t=P(N().mark((function t(r){var n,c,d,h,v,g,P,I,w,M,j,G,B,Y,Q,q,W,K,z,X,$,Z,ee,te,re,ne,oe,ae,ce,ie,ue,de,le,pe,fe;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=U().get("CTOKEN"),d=(c=r||{}).token,h=c.version,v=c.user,g=(v=void 0===v?{}:v).id,P=v.type,I=0,w=0,M=0,Y="",Q={},t.next=11,H.getRegion("subaccount"===P,V());case 11:if(q=t.sent,W=d&&"include"===T||!i?{Authorization:"Bearer ".concat(d),"x-shop-region":q}:{},!i&&(i=(0,R.getApiServer)()),a?G=a:(K=[s?"https:/":"http:/",i,u,l,k,p,f,_,E,S].filter(Boolean).join("/"),z=m?"".concat(K,".").concat(m):K,(X=r&&r.user&&r.user.uid)&&(b._uid=X),st&&(b._v=st),n&&(b.csrf_token=n),b._api_source=ct?"sc":"pcmall",B=Object.entries(b).filter((function(e){var t=y(e,2),r=(t[0],t[1]);return r||0===r})).map((function(e){var t=y(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),G=[z,B].filter(Boolean).join("?"),$=[k,p,f,_,E,S].filter(Boolean).join("/"),Z=m?"/".concat($,".").concat(m):"/".concat($),Q._uid=X||"",Q._v=st||"",ee=Object.entries(Q).map((function(e){var t=y(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&"),Y=[Z,ee].join("?")),t.prev=15,!(void 0!==E&&parseInt(E)<=0&&!G.includes("message_shortcuts/group")||void 0!==f&&parseInt(f)<=0)){t.next=19;break}throw new Error;case 19:return te={},re=Date.now(),(ne="POST"===O&&"messages"===_&&!S)&&(oe=Ce({url:Y,method:O,version:st,token:W.Authorization||"",fromID:g,payload:D,timestamp:re}),te={ts:re,"x-v":h||"","x-s":Re(h,oe)}),ae={method:O,credentials:T,headers:at(at(at({},W),te),A),body:D},ce=ne?se:_e,t.next=28,ce(G,ae);case 28:ie=t.sent,I=ie.status,t.t0=I,t.next=204===t.t0?33:404===t.t0?35:452===t.t0?37:500===t.t0?39:502===t.t0?41:43;break;case 33:return ue=null,t.abrupt("break",47);case 35:return ue={message:"Resource not found"},t.abrupt("break",47);case 37:return ue={message:"Tempory Error"},t.abrupt("break",47);case 39:return ue={message:"Internal server error"},t.abrupt("break",47);case 41:return ue={message:"Bad Gateway"},t.abrupt("break",47);case 43:return 200===I&&(w=parseInt(ie.headers.get("total")),M=parseInt(ie.headers.get("per-page"))),t.next=46,ie.json();case 46:ue=t.sent;case 47:if([200,204].includes(I)&&"report_upload"===_&&D&&(de=JSON.parse(D),le=de.vid,performance.mark("REPORT_UPLOAD_".concat(le))),200!==I){t.next=53;break}return pe=ue instanceof Array?e({total:w,perPage:M},_,ue.map((function(e){return L(e,ct)}))):L(ue,ct),o&&F()&&J.dispatch(R.CustomShareEvent.SHARE_API_DATA,at({type:R.ShareDataType.UNREAD},"object"===C(pe)?pe:{res:pe})),ne&&D&&(j=JSON.parse(D).request_id,(0,R.setItem)(j,re)),t.abrupt("return",pe);case 53:if(204!==I){t.next=55;break}return t.abrupt("return",null);case 55:if(!et(I)){t.next=69;break}if([400,404].includes(I),![429,451,491,493].includes(I)){t.next=62;break}throw new(Ze(I))(ue);case 62:if(401!==I){t.next=66;break}x.store.dispatch(rt({resource:_})),t.next=69;break;case 66:throw(fe=new(Ze(I))(ue.message,ue.errors||ue.error_code||ue.errcode,ue.data))&&400===I&&(fe._type_="client"),fe;case 69:t.next=75;break;case 71:throw t.prev=71,t.t1=t.catch(15),I||(t.t1.offlineError=!0),t.t1;case 75:case"end":return t.stop()}}),t,null,[[15,71]])})));return function(e){return t.apply(this,arguments)}}(),!o||F()){t.next=8;break}return t.abrupt("return");case 8:Y=null;try{Y=R.LS.getItem(G,!0)}catch(e){Y=null}if(Y){t.next=14;break}return t.next=13,(0,R.getItem)(j);case 13:Y=t.sent;case 14:return t.abrupt("return",B(Y));case 15:case"end":return t.stop()}}),t)}))),ut.apply(this,arguments)}var dt,lt,pt,ft,_t=function(e,t){if(window.requestIdleCallback)return window.requestIdleCallback(e,t);var r=Date.now();return setTimeout((function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-r))}})}),1)},Et=I(782),St=I(830),ht=I.n(St),Ot=I(292),vt=I.n(Ot),Tt={"18a6f08d7326025b60ded61f60c9ea20":"LOAD_HTML","0d2968a6996a60fee2db1270a70ef563":"LOAD_STATIC",ea02fc90bd3663f3179be7a1b7847a83:"APP_PREPARE","4e0b71ed91b3eacb1dfc4ec7f63b2966":"LOGIN_API","9d4a48b69fed6d1001e63ee668a05488":"LOGIN_SUCCEEDED","84fcedc144bfce212ae8db9f6ebb84ec":"SHOW_WEBCHAT"};dt={LOAD_HTML:"31b7f223943eee895738ce50e49a359a",LOAD_STATIC:"0ec7c5189cc4ada79908cfe5d6bd97ca",APP_PREPARE:"a61675f22b23600e51007c24a9b8aaf2",LOGIN_API:"75cbf76696b4f8d988de72cdfeb1877c",LOGIN_SUCCEEDED:"05c0e68ee42384c7e07e47fec4400e28",SHOW_WEBCHAT:"1b16553696a08e9f016235005a5a0678",VIDEO_UPLOAD:"334a26e8a6dc82c95a47430f8af2e198",SERVICE_DONE:"19f2ea17be2d1d80257667787e54c882",MESSAGE_SOCKET:"f76ebd29ea3ed4571c9ea48ca893ac14",READ_SOCKET:"37e5b36437f0166056d3312fcea2b592",LOGIN_FAILED:"df8a83f83c949bb6a2b84c6f0048e203",SOCKET_FAILED:"13ddf42d9169b2ce05feb84224d79057",SHARED_TABS:"94e8d83005c95982268ff1c8b036313e",CHATWS_SOCKET_FAILED:"9034ae776ecbdc29ec67fb0edf78011f"},lt={LOAD_HTML:"18a6f08d7326025b60ded61f60c9ea20",LOAD_STATIC:"0d2968a6996a60fee2db1270a70ef563",APP_PREPARE:"ea02fc90bd3663f3179be7a1b7847a83",LOGIN_API:"4e0b71ed91b3eacb1dfc4ec7f63b2966",LOGIN_SUCCEEDED:"9d4a48b69fed6d1001e63ee668a05488",SHOW_WEBCHAT:"84fcedc144bfce212ae8db9f6ebb84ec",VIDEO_UPLOAD:"cc0dbd7370b7ade934cfe7c01bbd4ae9",SERVICE_DONE:"26ba92fb54150fe3bd6f827bb08ce8c9",MESSAGE_SOCKET:"a01882e94fde5237ca815e13b0e2a88b",READ_SOCKET:"e46fdcb42cae43a7e6f49213f150fa8e",LOGIN_FAILED:"87df9f73fb8b93629ae8a08822cfcf77",SOCKET_FAILED:"3a74221d64cf853a5c3ca65c3c3339eb",SHARED_TABS:"22557ca0a2caca6bae43f1932f088d47",CHATWS_SOCKET_FAILED:"f729b9774aef5b67bfd37afc711bdd3f"},pt="b23651c629e54c7bc1c9a743f25dbb5825cb1ed4e7bb7f8a78cd788dfc769127",ft="2b74d02be173856bde260473166da16b83fcc18d18057ce8b4a73eab5f1c7280";var mt,gt={HTML_LOADED:"HTML_LOADED",STATIC_LOADED:"STATIC_LOADED",APP_PREPARED:"APP_PREPARED",LOGIN_API_RESPONSED:"LOGIN_API_RESPONSED",APP_RENDERING:"APP_RENDERING",RENDER_CONVERSATION_LIST:"RENDER_CONVERSATION_LIST",RENDER_MESSAGE_LIST:"RENDER_MESSAGE_LIST",RENDER_WELCOME_PAGE:"RENDER_WELCOME_PAGE"},bt={WELCOME_PAGE:"WELCOME_PAGE",MESSAGE_LIST:"MESSAGE_LIST",CONVERSATION_LIST:"CONVERSATION_LIST",APP:"APP"},yt={TYPE_ERROR:"TypeError",RANGE_ERROR:"RangeError",SYNTAX_ERROR:"SyntaxError",REFERENCE_ERROR:"ReferenceError",SAGA_ERROR:"Saga Error",ERROR_BOUNDARY:"Error Boundary",PRELOAD_ERROR:"Preload Error",SOCKET_LOGIN_FAILED:"Socket Login Failed",LOGIN_ERROR:"Login Error",PARAMETER_ERROR:"Parameter Error",API_UNCAUGHT_ERROR:"Api Uncaught Error",API_CLIENT_ERROR:"Api Client Error"},Rt={TYPE_ERROR:"type_error",RANGE_ERROR:"range_error",SYNTAX_ERROR:"syntax_error",REFERENCE_ERROR:"reference_error",ERROR_BOUNDARY:"error_boundary",PRELOAD_ERROR:"preload_error",SOCKET_LOGIN_FAILED:"socket_login_failed",LOGIN_ERROR:"login_error",PARAMETER_ERROR:"parameter_error",API_CLIENT_ERROR:"api_client_error",API_UNCAUGHT_ERROR:"api_uncaught_error"};function Ct(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Dt(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ct(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}window.__CHANGE_FETCH__||(window.fetch=le(),window.__CHANGE_FETCH__=!0);var Pt,It,At,wt,Nt=function(e){mt=e},xt=!1,kt=location.host.includes("shopee.cn"),Ut=(0,R.checkIsScChat)(),Mt=[],Lt="live"===(0,R.getRuntimeServer)()?dt:lt,jt=function(){try{var e=performance.getEntriesByName(gt.HTML_LOADED,"mark")[0].startTime,t=performance.getEntriesByName(gt.STATIC_LOADED,"mark")[0].startTime,r=performance.getEntriesByName(gt.APP_PREPARED,"mark")[0].startTime,n=performance.getEntriesByName(gt.LOGIN_API_RESPONSED,"mark")[0].startTime,o=performance.getEntriesByName(gt.APP_RENDERING,"mark")[0].startTime;Mt.push({id:Lt.LOAD_HTML,duration:window.__INDEX_HTML_LOADED__},{id:Lt.LOAD_STATIC,duration:Math.floor(t-e)},{id:Lt.APP_PREPARE,duration:Math.floor(r-t)},{id:Lt.LOGIN_API,duration:Math.floor(n-r)},{id:Lt.LOGIN_SUCCEEDED,duration:Math.floor(o-n)})}catch(e){}},Gt=function(e,t){try{var r=null,n=performance.getEntriesByName(gt.APP_RENDERING,"mark")[0].startTime;switch(e){case bt.WELCOME_PAGE:r=performance.getEntriesByName(gt.RENDER_WELCOME_PAGE,"mark")[0].startTime,Mt.push({id:Lt.RENDER_WELCOME_PAGE,duration:Math.floor(r-n)});break;case bt.MESSAGE_LIST:r=performance.getEntriesByName(gt.RENDER_MESSAGE_LIST,"mark")[0].startTime,Mt.push({id:Lt.RENDER_MESSAGE_LIST,duration:Math.floor(r-n)});break;case bt.CONVERSATION_LIST:r=performance.getEntriesByName(gt.RENDER_CONVERSATION_LIST,"mark")[0].startTime,Mt.push({id:Lt.RENDER_CONVERSATION_LIST,duration:Math.floor(r-n)})}Mt.push(t),_t(Ht,{timeout:2e3})}catch(e){}},Ft=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Mt.push({id:e,duration:t,extra:r}),_t(Ht,{timeout:2e3})};function Ht(e){for(;(e.timeRemaining()>5||e.didTimeout)&&Mt.length;){var t=Mt.shift(),r=t.id,n=t.duration,o=t.extra;r&&Yt(r,n,o),"live"!==(0,R.getRuntimeServer)()&&Tt[r]&&console.log("|-- 上报阶段: ",Tt[r],", 耗时为: ".concat(n))}Mt.length&&_t(Ht,{timeout:2e3})}var Vt,Bt=function(){if(!xt){var e=(0,R.getRuntimeServer)(),t="live"===e,r=(0,R.getRuntimeRegion)(),n=(0,R.getRuntimeVersion)();Pt=new Et.MdapSdk({app_name:"minichat",secret_key:t?pt:ft,environment:e,region:r,app_version:n,sample:t?.2:1}),It=new(ht())({path:[/[\\/]webchat[\\/]api[\\/].*[\\/](login|(conversations[\\/](\d+)[\\/]messages)|conversations|orders_by_buyer_id|vouchers|products|items|(offer[\\/]given)|read|(video[\\/](in_whitelist|preupload|report_upload|upload_status)))[\\?]/,"/webchat/api/v1.2/messages"]}),At=new(vt())({path:[/.*[\\/]chateasy[\\/].*\.(js|css)/]}),wt=new Et.CustomPlugin({}),Pt.use(It),Pt.use(At),Pt.use(wt),xt=!0}};function Yt(e,t,r){xt||Bt();var n={point_id:e,data:{userType:mt,localOrCn:void 0!==Vt?Vt:Vt=kt&&"CN"!==(0,R.getRuntimeRegion)().toUpperCase()?"cn":"local",chatHost:Ut?"seller":"pcmall"}};t&&(n=Dt(Dt({},n),{},{duration:t})),r&&(n.data=Dt(Dt({},n.data),r)),wt.sendData(n)}var Qt,qt=I(455),Wt=I.n(qt),Kt=I(944),zt=N().mark($t),Jt=[];Qt=[202,215];var Xt=function(e,t){var r=Qt.includes(e)?"c":"r",n=(t||"").toLocaleLowerCase(),o="".concat((0,R.getCDNUrl)(),"shopee-seller-live-sg/tsp/api/").concat(r,"_").concat(e,"_").concat(n,".json");return le()(o).then(function(){var e=P(N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};function $t(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.locale,r="live"===(0,R.getRuntimeServer)()||"live-test"===(0,R.getRuntimeServer)(),n=new(Wt())({name:"webchat"}),o={},s.next=6,n.create({locale:t,env:r?"live":"non-live",translation:{resources:Jt,collections:Qt}});case 6:if(a=s.sent,o=a.translation,!(0,R.checkEmptyObject)(o)){s.next=15;break}return c=[],Qt.concat(Jt).forEach((function(e){c.push(Xt(e,t))})),s.next=13,(0,Kt.all)(c);case 13:s.sent.forEach((function(e){Object.assign(o,e)}));case 15:return s.abrupt("return",o);case 16:case"end":return s.stop()}}),zt)}var Zt,er=I(975),tr=function(e){return e<=100?1:e<=500?2:e<=1e3?3:4},rr=function(e){return e.entityReducer},nr=(0,er.createSelector)(rr,(function(e){return e.users})),or=(0,er.createSelector)(rr,(function(e){return e.conversations})),ar=(0,er.createSelector)(rr,(function(e){return e.agentConversations})),cr=(0,er.createSelector)(rr,(function(e){return function(e){return(0,R.checkEmptyObject)(e)?{}:e}(e.messages)})),sr=(0,er.createSelector)(rr,(function(e){return e.stickers})),ir=(0,er.createSelector)(rr,(function(e){return e.orders})),ur=(0,er.createSelector)(rr,(function(e){return e.products})),dr=(0,er.createSelector)(rr,(function(e){return e.vouchers})),lr=(0,er.createSelector)(rr,(function(e){return e.messageShortcutsGroups})),pr=(0,er.createSelector)(rr,(function(e){return e.feedStories})),fr=(0,er.createSelector)(rr,(function(e){return e.rateCards})),_r=(0,er.createSelector)(rr,(function(e){return e.shops})),Er=(0,er.createSelector)(rr,(function(e){return e.contacts})),Sr=(0,er.createSelector)(or,ar,(function(e,t){var r=Object.keys(e).length+Object.keys(t).length;return tr(r)})),hr=(0,er.createSelector)(cr,(function(e){return tr(Object.keys(e).length)}));function Or(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Or(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Or(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_ENTITIES="UPDATE_ENTITIES",e.UPDATE_RECORD="UPDATE_RECORD",e.DELETE_RECORD="DELETE_RECORD",e.BATCH_UPDATE_RECORD="BATCH_UPDATE_RECORD"}(Zt||(Zt={}));const Tr=e({},Zt.UPDATE_ENTITIES,(function(t,r){var n=r.payload.entities;return Object.entries(n).reduce((function(t,r){var n=y(r,2),o=n[0],a=n[1];return"persist"!==o?("shops"===o&&H.updateShopMap(a),vr(vr({},t),{},e({},o,vr(vr({},t[o]),a)))):vr(vr({},t),{},e({},o,a))}),t)}));var mr,gr,br=(0,tt.createActions)((e(mr={},Zt.UPDATE_ENTITIES,(function(e){return{entities:e.entities}})),e(mr,Zt.UPDATE_RECORD,(function(e){return{name:e.name,id:e.id,record:e.record}})),e(mr,Zt.DELETE_RECORD,(function(e){return{name:e.name,id:e.id}})),e(mr,Zt.BATCH_UPDATE_RECORD,(function(e){return{name:e.name,records:e.records,checkProp:e.checkProp}})),mr)),yr=br.updateEntities,Rr=br.updateRecord,Cr=br.deleteRecord,Dr=br.batchUpdateRecord;function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ir(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const Ar=(e(gr={},Zt.UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=n.record;return Ir(Ir({},t),{},e({},o,Ir(Ir({},t[o]),{},e({},a,Ir(Ir({},t[o][a]),c)))))})),e(gr,Zt.DELETE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.id,c=t[o];return delete c[a],Ir(Ir({},t),{},e({},o,c))})),e(gr,Zt.BATCH_UPDATE_RECORD,(function(t,r){var n=r.payload,o=n.name,a=n.records,c=n.checkProp,s=Ir({},t[o]);return Object.keys(a).forEach((function(e){(!c||c&&a[e][c]>s[e][c])&&(s[e]=Ir(Ir({},s[e]),a[e]))})),Ir(Ir({},t),{},e({},o,s))})),gr);function wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Nr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xr,kr=(0,tt.handleActions)(Nr(Nr({},Tr),Ar),{users:{},messages:{},conversations:{},agentConversations:{},stickers:{},orders:{},offers:{},products:{},shops:{},rateCards:{},feedStories:{},persist:null,vouchers:{},messageShortcuts:{}});!function(e){e.SHOW_MODAL="SHOW_MODAL",e.CLOSE_MODAL="CLOSE_MODAL"}(xr||(xr={}));var Ur,Mr,Lr=(0,er.createSelector)((function(e){return e.modalReducer.show}),(function(e){return e.modalReducer.type}),(function(e,t){return{show:e,type:t}}));function jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?jr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fr,Hr,Vr=(0,tt.createActions)((e(Ur={},xr.SHOW_MODAL,(function(e){var t=e.type,r=e.title,n=void 0===r?"":r,o=e.content,a=e.actions,c=void 0===a?{}:a,s=e.additions;return{type:t,title:n,content:o,actions:c,additions:void 0===s?{}:s}})),e(Ur,xr.CLOSE_MODAL,(function(){return{}})),Ur)),Br=Vr.showModal,Yr=Vr.closeModal,Qr=(0,tt.handleActions)((e(Mr={},xr.SHOW_MODAL,(function(e,t){var r=t.payload,n=r.type,o=r.title;return{show:!0,type:n,content:r.content,title:o,actions:r.actions,additions:r.additions}})),e(Mr,xr.CLOSE_MODAL,(function(e){return Gr(Gr({},e),{},{show:!1})})),Mr),{show:!1,type:"",title:"",content:"",actions:{},additions:{}}),qr=function(e){return e.unreadCountReducer.shopsUnreadConversationCount},Wr=function(e){return e.unreadCountReducer.totalUnreadConversationsCount},Kr={MARK_AS_READ:"markAsRead",MARK_AS_UNREAD:"markASUnread",CLOSE_CONVERSATION:"closeConversation",RESTART_CONVERSATION:"restartConversation",DELETE_CONVERSATION:"deleteConversation",FORWARD_CONVERSATION:"forwardConversation",RECEIVE_UNREADABLE_MESSAGE:"receiveUnreadableMessage",REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT:"refreshTotalUnreadConversationCount",REFRESH_SHOPS_UNREAD_CONVERSATIONS_COUNT:"refreshShopsUnreadConversationsCount",REFRESH_SINGLE_SHOP_UNREAD_CONVERSATION_COUNT:"refreshSingleShopUnreadConversationCount",UPDATE_CONVERSATION:"updateConversation",MESSAGE_QUEUE_UPDATE:"messageQueueUpdate",MASS_READ:"mass_read",MASS_UNREAD:"mass_unread",MASS_CLOSE:"mass_close",ACTIVE_CONVERSATION:"activeConversation",CLEAR_CONVERSATION_COUNT:"clearConversationCount"};function zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Jr(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?zr(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.UPDATE_UNREAD_COUNT="UPDATE_UNREAD_COUNT",e.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT="UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_SINGLE_SHOP_UNREAD_COUNT="UPDATE_SINGLE_SHOP_UNREAD_COUNT",e.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT="UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT",e.UPDATE_REGION_UNREAD_COUNT="UPDATE_REGION_UNREAD_COUNT"}(Fr||(Fr={}));var Xr=N().mark(on),$r=N().mark(an),Zr=N().mark(cn),en=N().mark(sn),tn=(0,tt.createActions)((e(Hr={},Fr.UPDATE_UNREAD_COUNT,(function(e){return{type:e.type,conversation:e.conversation,messageQueueUpdate:e.messageQueueUpdate,shopId:e.shopId,shopIds:e.shopIds,source:e.source,count:e.count}})),e(Hr,Fr.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e){return{count:e.count}})),e(Hr,Fr.UPDATE_SINGLE_SHOP_UNREAD_COUNT,(function(e){return{shopId:e.shopId,num:e.num,action:e.action}})),e(Hr,Fr.UPDATE_SHOPS_UNREAD_CONVERSATIONS_COUNT,(function(e){return{shopUnreadCounts:e.shopUnreadCounts}})),Hr)),rn=tn.updateUnreadCount,nn=tn.updateTotalUnreadConversationsCount;function on(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Kt.put)(Rr({name:"conversations",id:e,record:{unread_count:t}}));case 2:case"end":return r.stop()}}),Xr)}function an(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.source,s.prev=1,r=t===R.UnreadSource.PRELOAD,n=t?{_s:t}:{},s.next=6,(0,Kt.call)(it,{shared:!r,parent:"conversation",resource:"unread-count",params:n});case 6:return o=s.sent,a=o.total_unread_count,s.next=10,(0,Kt.put)(nn({count:a}));case 10:return s.next=12,(0,Kt.select)(Yn);case 12:c=s.sent,r&&Lm({operation:R.TrackerOperation.IMPRESSION,trackerName:"impressionChatIcon",data:{ctx_url:window.location.href,has_unread_convo:!!a,unread_convo_cnt:a},page:c?"seller_center_chat":"minichat_page"}),s.next=18;break;case 16:s.prev=16,s.t0=s.catch(1);case 18:case"end":return s.stop()}}),$r,null,[[1,16]])}function cn(e){var t,r,n,o,a,c,s,i,u,d,l,p;return N().wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return t=e.payload,r=t.type,n=t.conversation,o=void 0===n?{}:n,t.shopId,t.shopIds,a=t.messageQueueUpdate,c=t.source,s=t.count,i=o.id,u=o.unread_count,o.shop_id,f.next=4,(0,Kt.select)(Wr);case 4:d=f.sent,f.t0=r,f.next=f.t0===Kr.FORWARD_CONVERSATION||f.t0===Kr.CLOSE_CONVERSATION||f.t0===Kr.DELETE_CONVERSATION||f.t0===Kr.UPDATE_CONVERSATION?8:f.t0===Kr.CLEAR_CONVERSATION_COUNT||f.t0===Kr.MARK_AS_READ?14:f.t0===Kr.ACTIVE_CONVERSATION?20:f.t0===Kr.MARK_AS_UNREAD?23:f.t0===Kr.RECEIVE_UNREADABLE_MESSAGE?28:f.t0===Kr.RESTART_CONVERSATION||f.t0===Kr.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT?34:f.t0===Kr.MESSAGE_QUEUE_UPDATE?37:f.t0===Kr.MASS_READ?41:f.t0===Kr.MASS_UNREAD?44:f.t0===Kr.MASS_CLOSE?47:50;break;case 8:if(0===u){f.next=13;break}return f.next=11,(0,Kt.put)(nn({count:d-1}));case 11:return f.next=13,(0,Kt.call)(on,i,0);case 13:case 19:case 22:case 27:case 33:case 36:case 40:case 43:case 46:case 49:case 50:return f.abrupt("break",51);case 14:if(!(u>0)){f.next=19;break}return f.next=17,(0,Kt.put)(nn({count:d-1}));case 17:return f.next=19,(0,Kt.call)(on,i,0);case 20:return f.next=22,(0,Kt.put)(nn({count:d+1}));case 23:return f.next=25,(0,Kt.put)(nn({count:d+1}));case 25:return f.next=27,(0,Kt.call)(on,i,u+1);case 28:if(0!==u){f.next=31;break}return f.next=31,(0,Kt.put)(nn({count:d+1}));case 31:return f.next=33,(0,Kt.call)(on,i,u+1);case 34:return f.next=36,(0,Kt.call)(an,{source:c});case 37:return p=(l=a).totalIncrease,l.shopsIncrease,f.next=40,(0,Kt.put)(nn({count:d+p}));case 41:return f.next=43,(0,Kt.put)(nn({count:d-s}));case 44:return f.next=46,(0,Kt.put)(nn({count:d+s}));case 47:return f.next=49,(0,Kt.put)(nn({count:d-s}));case 51:case"end":return f.stop()}}),Zr)}function sn(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(rn,cn);case 2:case"end":return e.stop()}}),en)}tn.updateSingleShopUnreadCount,tn.updateShopsUnreadConversationsCount;const un=e({},Fr.UPDATE_TOTAL_UNREAD_CONVERSATIONS_COUNT,(function(e,t){var r=t.payload.count;return Jr(Jr({},e),{},{totalUnreadConversationsCount:r<0?0:r})}));function dn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var ln,pn=[sn],fn=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dn(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},un),{totalUnreadConversationsCount:0}),_n=function(e){return e.userReducer.loading},En=function(e){return e.userReducer.currentUserId},Sn=function(e){return e.userReducer.newbie},hn=function(e){return e.userReducer.networkStatus},On=function(e){return e.userReducer.hasVideoPermission},vn=function(e){return e.userReducer.hasReplyPermission},Tn=function(e){return e.userReducer.hasDeletePermission},mn=function(e){return e.userReducer.deleteConfigDuration},gn=function(e){var t=e.userReducer;return{hasDeletePermission:t.hasDeletePermission,deleteConfigVersion:t.deleteConfigVersion,deleteConfigDuration:t.deleteConfigDuration}},bn=function(e){return e.userReducer.captchaVisible},yn=function(e){return e.userReducer.captchaSignature},Rn=function(e){return e.userReducer.resendMessagePayload},Cn=function(e){return e.userReducer.newMessageFlag},Dn=function(e){return(0,er.createSelector)(rr,(function(r){return(0,t.denormalize)(e,a,{users:r})}))},Pn=(0,er.createSelector)(nr,En,(function(e,r){return(0,t.denormalize)(r,a,{users:e})||{}})),In=(0,er.createSelector)(Pn,(function(e){return e&&e.locale})),An=(0,er.createSelector)(Pn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.type===R.AccountType.SUBACCOUNT})),wn=(0,er.createSelector)(Pn,(function(e){return!(0,R.checkEmptyObject)(e)&&e.is_cb})),Nn=function(e){return e.userReducer.shopStatisticsMap},xn=function(e,t){return(0,er.createSelector)(Nn,(function(r){return r["".concat(e,"-").concat(t)]||{}}))},kn=(0,er.createSelector)(Pn,An,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t?void 0:e.shop_id})),Un=(0,er.createSelector)(Pn,An,_r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return r?void 0:(0,t.denormalize)(e.shop_id,p,{shops:n})||{}})),Mn=(0,er.createSelector)(Pn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.role||""})),Ln=(0,er.createSelector)(Pn,(function(e){return e&&e.distribution_status||""})),jn=function(e){return e.userReducer.isMainPage},Gn=function(e){return e.userReducer.curTabFocused},Fn=function(e){return e.userReducer.textBoxHeight},Hn=function(e){return e.userReducer.showConversationDetail},Vn=function(e){return e.userReducer.showChatWindow},Bn=function(e){return e.userReducer.openedMenu},Yn=function(e){return e.userReducer.isScChat},Qn=function(e){return e.userReducer.loginSuccess},qn=function(e){return e.userReducer.socketSuccess},Wn=function(e){return e.userReducer.showEntry},Kn=(0,er.createSelector)(Pn,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.authorizedShopsCount||0})),zn=function(e){return e.userReducer.showAutoHangupModal};!function(e){e.BLOCK_USER_REQUESTED="BLOCK_USER_REQUESTED",e.CHECK_USER_PERMISSION_REQUESTED="CHECK_USER_PERMISSION_REQUESTED",e.CHECK_USER_PERMISSION_SUCCEEDED="CHECK_USER_PERMISSION_SUCCEEDED",e.CLOSE_HANGUP_TIPS_REQUESTED="CLOSE_HANGUP_TIPS_REQUESTED",e.SEND_FEEDBACK_REQUESTED="SEND_FEEDBACK_REQUESTED",e.GET_GUIDE_REQUESTED="GET_GUIDE_REQUESTED",e.GET_GUIDE_SUCCEEDED="GET_GUIDE_SUCCEEDED",e.GET_GUIDE_FAILED="GET_GUIDE_FAILED",e.SHOW_LOADING_SUCCEEDED="SHOW_LOADING_SUCCEEDED",e.SET_HAS_SESSION="SET_HAS_SESSION",e.SHOW_USER_REQUESTED="SHOW_USER_REQUESTED",e.FETCH_USER_ORDER_DETAIL_REQUESTED="FETCH_USER_ORDER_DETAIL_REQUESTED",e.FETCH_USER_ORDER_DETAIL_SUCCEEDED="FETCH_USER_ORDER_DETAIL_SUCCEEDED",e.FETCH_USER_PERFORMANCE_REQUESTED="FETCH_USER_PERFORMANCE_REQUESTED",e.FETCH_USER_PERFORMANCE_SUCCEED="FETCH_USER_PERFORMANCE_SUCCEED",e.UPDATE_USER_REQUESTED="UPDATE_USER_REQUESTED",e.UPDATE_NETWORK_STATUS="UPDATE_NETWORK_STATUS",e.UPDATE_CUR_TAB_FOCUSED="UPDATE_CUR_TAB_FOCUSED",e.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED="UPDATE_CUR_TAB_FOCUSED_SUCCEEDED",e.UPDATE_WORKSTATION_PANEL="UPDATE_WORKSTATION_PANEL",e.UPDATE_NEW_MESSAGE_FLAG="UPDATE_NEW_MESSAGE_FLAG",e.UPDATE_CHAT_WINDOW_STATUS="UPDATE_CHAT_WINDOW_STATUS",e.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED="UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED",e.UPDATE_CONVERSATION_DETAIL_STATUS="UPDATE_CONVERSATION_DETAIL_STATUS",e.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED="UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED",e.UPDATE_OPENED_MENU="UPDATE_OPENED_MENU",e.SET_CHAT_SOURCE="SET_CHAT_SOURCE",e.UPDATE_LOGIN_SUCCESS_STATUS="UPDATE_LOGIN_SUCCESS_STATUS",e.UPDATE_SOCKET_SUCCESS_STATUS="UPDATE_SOCKET_SUCCESS_STATUS",e.UPDATE_CHAT_ENTRY_STATUS="UPDATE_CHAT_ENTRY_STATUS",e.UPDATE_GUIDE_REQUESTED="UPDATE_GUIDE_REQUESTED",e.UPDATE_GUIDE_SUCCEEDED="UPDATE_GUIDE_SUCCEEDED",e.LOGIN_REQUESTED="LOGIN_REQUESTED",e.LOGIN_SUCCEEDED="LOGIN_SUCCEEDED",e.LOGOUT_REQUESTED="LOGOUT_REQUESTED",e.LOGOUT_SUCCEEDED="LOGOUT_SUCCEEDED",e.UPDATE_LOGIN_STATUS="UPDATE_LOGIN_STATUS",e.SHOW_TRANSLATION_GUIDE="SHOW_TRANSLATION_GUIDE",e.SHOW_REGION_FILTER_GUIDE="SHOW_REGION_FILTER_GUIDE",e.FORCE_LOGOUT_REQUESTED="FORCE_LOGOUT_REQUESTED",e.CONNECT_SOCKET="CONNECT_SOCKET",e.REPORT_ASYNC_TASK="REPORT_ASYNC_TASK",e.UPLOAD_FEEDBACK_VIDEO_REQUESTED="UPLOAD_FEEDBACK_VIDEO_REQUESTED",e.UPLOAD_FEEDBACK_VIDEO_STATUS="UPLOAD_FEEDBACK_VIDEO_STATUS",e.UPDATE_CAPTCHA_VISIBLE="UPDATE_CAPTCHA_VISIBLE",e.UPDATE_CAPTCHA_SIGNATURE="UPDATE_CAPTCHA_SIGNATURE",e.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED="UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED",e.SET_TEXT_BOX_HEIGHT="SET_TEXT_BOX_HEIGHT",e.UPDATE_RELATED_CAPACITY="UPDATE_RELATED_CAPACITY",e.UPDATE_IS_MAIN_PAGE="UPDATE_IS_MAIN_PAGE",e.UPDATE_DEL_PERMISSION="UPDATE_DEL_PERMISSION",e.GET_FEEDBACK_CLASSIFICATION_REQUESTED="GET_FEEDBACK_CLASSIFICATION_REQUESTED",e.GET_CLASSIFICATION_SUCCEED="GET_CLASSIFICATION_SUCCEED",e.UPDATE_SHOW_AUTO_HANGUP_MODAL="UPDATE_SHOW_AUTO_HANGUP_MODAL"}(ln||(ln={}));var Jn,Xn,$n=I(439).t,Zn=N().mark(ao),eo=N().mark(co),to=(0,tt.createActions)(e({},ln.BLOCK_USER_REQUESTED,(function(e){var t=e.buyerName,r=e.buyerId,n=e.block;return{buyerName:t,buyerId:r,block:void 0===n||n,shopId:e.shopId,conversationId:e.conversationId}}))),ro=to.blockUserRequested,no=function(e){return{type:"CONFIRM_MODAL",title:{key:"conversation_detail.workstation.block_fail_modal.title",vars:{username:e}},actions:{confirm:{label:{key:"common.confirm"}}}}},oo=function(e,t,r){return{toast:{show:!0,type:e?"fail":"warn",message:e?$n("common.server_error.warning_tips"):$n("conversation_detail.".concat(t?"blocked":"unblocked"),{username:r})}}};function ao(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.buyerName,n=t.buyerId,o=t.block,a=t.shopId,c=t.conversationId,i.prev=1,s=o?"PUT":"DELETE",i.next=5,(0,Kt.call)(it,{method:s,parent:"user",resource:"blocks",id:n,params:{shop_id:a}});case 5:return i.next=7,(0,Kt.put)(zp(oo(!1,o,r)));case 7:return i.next=9,(0,Kt.put)(Rr({name:"users",id:n,record:{is_blocked:o}}));case 9:return i.next=11,(0,Kt.put)(Rr({name:"conversations",id:c,record:{is_blocked:o}}));case 11:case 18:i.next=22;break;case 13:if(i.prev=13,i.t0=i.catch(1),!(i.t0 instanceof Ve&&o&&i.t0.handler().message)){i.next=20;break}return i.next=18,(0,Kt.put)(Br(no(r)));case 20:return i.next=22,(0,Kt.put)(zp(oo(!0)));case 22:case"end":return i.stop()}}),Zn,null,[[1,13]])}function co(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(ro,ao);case 2:case"end":return e.stop()}}),eo)}function so(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function io(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?so(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var uo=N().mark(ho),lo=N().mark(Oo),po=(0,tt.createActions)((e(Jn={},ln.GET_GUIDE_REQUESTED,(function(e){return{userId:e.userId,version:e.version}})),e(Jn,ln.GET_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),e(Jn,ln.GET_GUIDE_FAILED,(function(){return{}})),Jn)),fo=po.getGuideRequested,_o=po.getGuideSucceeded,Eo=po.getGuideFailed,So="newbie-completed-info";function ho(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.userId,n=t.version,c.prev=1,c.next=4,(0,R.getItem)(So);case 4:if(c.sent!=="".concat(r,"-").concat(n)){c.next=7;break}return c.abrupt("return",[]);case 7:return c.next=9,(0,Kt.call)(it,{resource:"newbie",suffix:"uncompleted"});case 9:return o=c.sent,a=o.newbie,c.next=13,(0,Kt.put)(_o({newbie:a}));case 13:if(!(a.findIndex((function(e){return(e.name||"").toLocaleLowerCase().includes("mini")}))<0)){c.next=17;break}return c.next=17,(0,R.setItem)(So,"".concat(r,"-").concat(n));case 17:return c.abrupt("return",a);case 20:return c.prev=20,c.t0=c.catch(1),c.next=24,(0,Kt.put)(Eo());case 24:return c.abrupt("return",[]);case 25:case"end":return c.stop()}}),uo,null,[[1,20]])}function Oo(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(fo,ho);case 2:case"end":return e.stop()}}),lo)}const vo=(e(Xn={},ln.GET_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return io(io({},e),{},{newbie:r})})),e(Xn,ln.GET_GUIDE_FAILED,(function(e){return io(io({},e),{},{newbie:[]})})),Xn);var To;function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function go(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mo(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bo=N().mark(Ao),yo=N().mark(wo);function Ro(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Co=(0,tt.createActions)((e(To={},ln.UPDATE_GUIDE_REQUESTED,(function(e){return{newbieId:e.newbieId}})),e(To,ln.UPDATE_GUIDE_SUCCEEDED,(function(e){return{newbie:e.newbie}})),To)),Do=Co.updateGuideRequested,Po=Co.updateGuideSucceeded;function Io(e,t){var r,n=ue(e),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ro(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ro(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(n);try{for(o.s();!(r=o.n()).done;){var a=r.value,c=a.children.findIndex((function(e){return e.id===t}));if(-1!==c){a.children.splice(c,1);break}}}catch(e){o.e(e)}finally{o.f()}return n}function Ao(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.newbieId,o.next=3,(0,Kt.select)(Sn);case 3:return r=o.sent,n=Io(r,t),o.next=7,(0,Kt.put)(Po({newbie:n}));case 7:return o.prev=7,o.next=10,(0,Kt.call)(it,{method:"PUT",resource:"newbie",id:t});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),bo,null,[[7,12]])}function wo(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Do,Ao);case 2:case"end":return e.stop()}}),yo)}const No=e({},ln.UPDATE_GUIDE_SUCCEEDED,(function(e,t){var r=t.payload.newbie;return go(go({},e),{},{newbie:r})}));var xo,ko,Uo=I(550),Mo=I.n(Uo),Lo=I(947),jo=I.n(Lo);function Go(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fo(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Go(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ho=N().mark(ia),Vo=N().mark(ua),Bo=N().mark(da),Yo=N().mark(pa),Qo=N().mark(fa),qo=N().mark(_a),Wo=(0,tt.createActions)((e(xo={},ln.UPDATE_USER_REQUESTED,(function(e){return{status:e.status}})),e(xo,ln.UPDATE_NETWORK_STATUS,(function(e){return{networkStatus:e.networkStatus}})),e(xo,ln.FETCH_USER_ORDER_DETAIL_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId}})),e(xo,ln.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(e){return{userId:e.userId,shopId:e.shopId,data:e.data}})),e(xo,ln.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e){return{showAutoHangupModal:e.showAutoHangupModal}})),e(xo,ln.UPDATE_CHAT_WINDOW_STATUS,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(xo,ln.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e){return{shouldShowWindow:e.shouldShowWindow}})),e(xo,ln.UPDATE_CONVERSATION_DETAIL_STATUS,(function(e){var t=e.shouldShowConversationDetail,r=e.needMark;return{shouldShowConversationDetail:t,needMark:void 0!==r&&r}})),e(xo,ln.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e){return{shouldShowConversationDetail:e.shouldShowConversationDetail}})),e(xo,ln.UPDATE_OPENED_MENU,(function(e){return{openedMenu:e}})),e(xo,ln.SET_CHAT_SOURCE,(function(e){return{isScChat:e.isScChat}})),e(xo,ln.UPDATE_LOGIN_SUCCESS_STATUS,(function(e){return{loginSuccess:e.loginSuccess}})),e(xo,ln.UPDATE_SOCKET_SUCCESS_STATUS,(function(e){return{socketSuccess:e.socketSuccess}})),e(xo,ln.UPDATE_CHAT_ENTRY_STATUS,(function(e){return{showEntry:e.showEntry}})),xo)),Ko=Wo.updateUserRequested,zo=Wo.updateNetworkStatus,Jo=Wo.fetchUserOrderDetailRequested,Xo=Wo.fetchUserOrderDetailSucceeded,$o=Wo.updateShowAutoHangupModal,Zo=Wo.updateChatWindowStatus,ea=Wo.updateChatWindowStatusSucceeded,ta=Wo.updateConversationDetailStatus,ra=Wo.updateConversationDetailStatusSucceeded,na=Wo.updateOpenedMenu,oa=Wo.setChatSource,aa=Wo.updateLoginSuccessStatus,ca=Wo.updateSocketSuccessStatus,sa=Wo.updateChatEntryStatus;function ia(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.status,r.prev=1,r.next=4,(0,Kt.call)(it,{method:"PUT",resource:"user",payload:JSON.stringify({distribution_status:t})});case 4:if(!(0,R.checkIsScChat)()||"working"!==t){r.next=9;break}return r.next=9,(0,Kt.put)(Wv({event_time:(Date.parse(new Date+"")/1e3).toString(),url:window.location.href}));case 9:r.next=15;break;case 11:return r.prev=11,r.t0=r.catch(1),r.next=15,(0,Kt.put)(zp({error:r.t0}));case 15:case"end":return r.stop()}}),Ho,null,[[1,11]])}function ua(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,a.prev=1,a.next=4,(0,Kt.call)(it,{parent:"users",parentId:r,resource:"get_user_shop_statistics_info",params:{shop_id:n}});case 4:return o=a.sent,a.next=7,(0,Kt.put)(Xo({userId:r,shopId:n,data:o}));case 7:a.next=11;break;case 9:a.prev=9,a.t0=a.catch(1);case 11:case"end":return a.stop()}}),Vo,null,[[1,9]])}function da(){var e,t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Kt.select)(_s);case 2:if(!(e=a.sent)){a.next=8;break}if(t=e.status,r=e.id,n=e.unread_count,o=e.latest_message_id,!("closed"!==t&&n>0)){a.next=8;break}return a.next=8,(0,Kt.put)(Zs({conversationId:r,isRead:!0,latestMessageId:o}));case 8:case"end":return a.stop()}}),Bo)}var la=!0;function pa(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.shouldShowWindow,r.next=3,(0,Kt.put)(ea({shouldShowWindow:t}));case 3:if(!t){r.next=15;break}return window.CsChat&&window.CsChat.minimizeCsChatWindow&&window.CsChat.minimizeCsChatWindow(),r.next=7,(0,Kt.call)(da);case 7:if(!la){r.next=13;break}return r.next=10,(0,Kt.spawn)(q_);case 10:return r.next=12,(0,Kt.call)(wd,{payload:{direction:"reset"}});case 12:la=!1;case 13:return r.next=15,Mo().call(jo().handleNewConversationMessageQueue());case 15:case"end":return r.stop()}}),Yo)}function fa(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=t.shouldShowConversationDetail,n=t.needMark,o.next=3,(0,Kt.put)(ra({shouldShowConversationDetail:r}));case 3:if(!n||!r){o.next=6;break}return o.next=6,(0,Kt.call)(da);case 6:case"end":return o.stop()}}),Qo)}function _a(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Ko,ia);case 2:return e.next=4,(0,Kt.takeEvery)(Jo,ua);case 4:return e.next=6,(0,Kt.takeEvery)(Zo,pa);case 6:return e.next=8,(0,Kt.takeEvery)(ta,fa);case 8:case"end":return e.stop()}}),qo)}const Ea=(e(ko={},ln.UPDATE_NETWORK_STATUS,(function(e,t){var r=t.payload.networkStatus;return Fo(Fo({},e),{},{networkStatus:r})})),e(ko,ln.FETCH_USER_ORDER_DETAIL_SUCCEEDED,(function(t,r){var n=r.payload,o=n.userId,a=n.shopId,c=n.data,s="".concat(o,"-").concat(a),i=t.shopStatisticsMap;return Fo(Fo({},t),{},{shopStatisticsMap:Fo(Fo({},i),{},e({},s,c))})})),e(ko,ln.UPDATE_SHOW_AUTO_HANGUP_MODAL,(function(e,t){var r=t.payload.showAutoHangupModal;return Fo(Fo({},e),{},{showAutoHangupModal:r})})),e(ko,ln.UPDATE_CHAT_WINDOW_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowWindow;return Fo(Fo({},e),{},{showChatWindow:r})})),e(ko,ln.UPDATE_CONVERSATION_DETAIL_STATUS_SUCCEEDED,(function(e,t){var r=t.payload.shouldShowConversationDetail;return Fo(Fo({},e),{},{showConversationDetail:r})})),e(ko,ln.UPDATE_OPENED_MENU,(function(e,t){var r=t.payload.openedMenu;return Fo(Fo({},e),{},{openedMenu:r})})),e(ko,ln.SET_CHAT_SOURCE,(function(e,t){var r=t.payload.isScChat;return Fo(Fo({},e),{},{isScChat:r})})),e(ko,ln.UPDATE_LOGIN_SUCCESS_STATUS,(function(e,t){var r=t.payload.loginSuccess;return Fo(Fo({},e),{},{loginSuccess:r})})),e(ko,ln.UPDATE_SOCKET_SUCCESS_STATUS,(function(e,t){var r=t.payload.socketSuccess;return Fo(Fo({},e),{},{socketSuccess:r})})),e(ko,ln.UPDATE_CHAT_ENTRY_STATUS,(function(e,t){var r=t.payload.showEntry;return Fo(Fo({},e),{},{showEntry:r})})),ko);var Sa,ha,Oa=I(171),va=I.n(Oa);function Ta(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ma(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ta(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ga,ba=N().mark(ka),ya=N().mark(Ma),Ra=N().mark(Ga),Ca=N().mark(Fa),Da=N().mark(Ha);ga=(0,R.checkIsScChat)();var Pa=(0,tt.createActions)((e(Sa={},ln.LOGIN_REQUESTED,(function(){return{}})),e(Sa,ln.LOGIN_SUCCEEDED,(function(e){return{currentUserId:e.currentUserId,status:e.status}})),e(Sa,ln.LOGOUT_REQUESTED,(function(){return{}})),e(Sa,ln.LOGOUT_SUCCEEDED,(function(){return{}})),e(Sa,ln.FORCE_LOGOUT_REQUESTED,(function(){return{}})),Sa)),Ia=Pa.loginRequested,Aa=Pa.loginSucceeded,wa=Pa.logoutRequested,Na=Pa.logoutSucceeded,xa=Pa.forceLogoutRequested;function ka(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Kt.call)(R.getItem,e);case 2:if(t.sent){t.next=6;break}return t.next=6,(0,Kt.call)(R.setItem,e,va()());case 6:case"end":return t.stop()}}),ba)}var Ua=function(e){return e instanceof Ge?"InternalServerError":e instanceof Fe?"Forbidden":e instanceof Me?"Unauthoried":"Other"};function Ma(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e=(0,R.getTranslationLocale)((0,R.getRuntimeLocale)()),r.next=3,(0,Kt.call)($t,{locale:e});case 3:return t=r.sent,r.next=6,(0,Kt.call)(R.changeLanguage,e,t);case 6:case"end":return r.stop()}}),ya)}var La=N().mark((function e(t){var r,n;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,R.getTranslationLocale)(t),e.prev=1,e.next=4,(0,Kt.call)($t,{locale:n});case 4:r=e.sent,e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,(0,Kt.call)($t,{locale:(0,R.getTranslationLocale)((0,R.getRuntimeLocale)())});case 11:r=e.sent;case 12:return e.next=14,(0,Kt.call)(R.changeLanguage,n,r);case 14:return e.next=16,(0,Kt.call)(R.updateTimeLocale,(0,R.getServiceLocale)(t));case 16:case"end":return e.stop()}}),e,null,[[1,7]])})),ja=N().mark((function e(t){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.call)(Ma);case 2:return e.next=4,(0,Kt.put)(sa({showEntry:!0}));case 4:return e.next=6,(0,Kt.put)(aa({loginSuccess:!1}));case 6:Ft(Lt.LOGIN_FAILED,0,{type:Ua(t)});case 7:case"end":return e.stop()}}),e)}));function Ga(e,t){var r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return p.prev=0,r=t.godToken,n=e.user,o=e.is_ccu_grey,a=n.id,c=n.type,s=n.locale,i=n.distribution_status,u=c===R.AccountType.SUBACCOUNT,window.__WEBCHAT_LOGIN__||u&&"working"===i&&(window.__WEBCHAT_LOGIN__=!0),p.next=8,(0,Kt.call)(La,s||"en");case 8:return performance.mark("APP_RENDERING"),jt(),Nt(c),wm(n),p.next=14,(0,Kt.put)(zo({networkStatus:"online"}));case 14:return window.addEventListener("online",(function(){x.store.dispatch(zo({networkStatus:"online"}))})),window.addEventListener("offline",(function(){x.store.dispatch(zo({networkStatus:"offline"}))})),p.next=18,(0,Kt.put)(aa({loginSuccess:!0}));case 18:return p.next=20,(0,Kt.put)(sa({showEntry:!0}));case 20:return d=T("users",n),l=d.entities,p.next=23,(0,Kt.put)(yr({entities:l}));case 23:return!r&&J.connect(),ga&&J.dispatch(R.CustomShareEvent.CALC_CONNECTIONS),p.next=27,(0,Kt.put)(Aa({currentUserId:a}));case 27:return u||!r&&!o&&qT.connect(),p.next=30,(0,Kt.put)(Za());case 30:return p.next=32,(0,Kt.spawn)(ka,"device_id");case 32:if(u){p.next=35;break}return p.next=35,(0,Kt.call)(Dh,gh({shopId:n.shop_id}));case 35:p.next=41;break;case 37:return p.prev=37,p.t0=p.catch(0),p.next=41,(0,Kt.call)(ja,p.t0);case 41:return p.prev=41,p.finish(41);case 43:case"end":return p.stop()}}),Ra,null,[[0,37,41,43]])}function Fa(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,performance.mark("APP_PREPARED"),e="",(t={method:"POST",subServer:"coreapi",resource:"login"}).params={source:ga?"sc":"pcmall"},((0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)())&&(t.parent="cbsc"),n.next=8,(0,Kt.call)(it,t);case 8:return r=n.sent,performance.mark("LOGIN_API_RESPONSED"),n.next=12,(0,R.setItem)("mini-session",r);case 12:return R.LS.setItem("mini-session",JSON.stringify(r)),n.abrupt("return",{session:r,params:{godToken:e}});case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,(0,Kt.call)(ja,n.t0);case 20:return n.prev=20,n.finish(20);case 22:case"end":return n.stop()}}),Ca,null,[[0,16,20,22]])}function Ha(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeLatest)(Ia,Fa);case 2:return e.next=4,(0,Kt.takeLatest)(wa,Hc);case 4:return e.next=6,(0,Kt.takeLatest)(xa,Fc);case 6:case"end":return e.stop()}}),Da)}const Va=(e(ha={},ln.LOGIN_SUCCEEDED,(function(e,t){var r=t.payload.currentUserId;return ma(ma({},e),{},{currentUserId:r})})),e(ha,ln.LOGOUT_SUCCEEDED,(function(e){return ma(ma({},e),{},{currentUserId:null,performance:{},closeHangupTips:!1,hasVideoPermission:!1,captchaVisible:!1,curTabFocused:!0})})),ha);var Ba,Ya,Qa,qa=I(241),Wa=I.n(qa),Ka=N().mark(rc),za=N().mark(nc);function Ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xa(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ja(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ja(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Qa=(0,R.checkIsScChat)();var $a=(0,tt.createActions)((e(Ba={},ln.CHECK_USER_PERMISSION_REQUESTED,(function(){return{}})),e(Ba,ln.CHECK_USER_PERMISSION_SUCCEEDED,(function(e){return{hasVideoPermission:e.hasVideoPermission,hasReplyPermission:e.hasReplyPermission,hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),e(Ba,ln.UPDATE_DEL_PERMISSION,(function(e){return{hasDeletePermission:e.hasDeletePermission,deleteConfigDuration:e.deleteConfigDuration,deleteConfigVersion:e.deleteConfigVersion}})),Ba)),Za=$a.checkUserPermissionRequested,ec=$a.checkUserPermissionSucceeded,tc=$a.updateDelPermission;function rc(){var e,t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return e={hasVideoPermission:!1,hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigDuration:0,deleteConfigVersion:0},d.prev=1,d.next=4,(0,Kt.call)(it,{subServer:"coreapi",parent:"user",resource:"global_config"});case 4:return t=d.sent,d.next=7,(0,Kt.select)(Pn);case 7:r=d.sent,n=r.id,o=r.type,a=r.country,e.hasVideoPermission=t.video,e.hasReplyPermission=t.reply,"seller"===o&&(c=t.delete_msg||{},e.deleteConfigVersion=c.config_version,s=(c.region_config||[]).find((function(e){return e.region===a})),s&&s.duration&&(e.hasDeletePermission=!0,e.deleteConfigDuration=s.duration)),i=null,u="live"===(0,R.getRuntimeServer)(),(t.privacy&&Qa||!u)&&(i=new(Wa())({projectId:"983743070955270818",env:"live",uid:n})),u||(window.CreateNewFullStorySdk=function(){return[n,i]},window.GetNecessaryInfo=function(){return{user:r}}),d.next=20;break;case 18:d.prev=18,d.t0=d.catch(1);case 20:return d.next=22,(0,Kt.put)(ec(Xa({},e)));case 22:case"end":return d.stop()}}),Ka,null,[[1,18]])}function nc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Za,rc);case 2:case"end":return e.stop()}}),za)}const oc=(e(Ya={},ln.CHECK_USER_PERMISSION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.hasVideoPermission,o=r.hasReplyPermission,a=r.hasDeletePermission,c=r.deleteConfigDuration,s=r.deleteConfigVersion;return Xa(Xa({},e),{},{hasVideoPermission:n,hasReplyPermission:o,hasDeletePermission:a,deleteConfigDuration:c,deleteConfigVersion:s})})),e(Ya,ln.UPDATE_DEL_PERMISSION,(function(e,t){var r=t.payload,n=r.hasDeletePermission,o=r.deleteConfigDuration,a=r.deleteConfigVersion;return Xa(Xa({},e),{},{hasDeletePermission:n,deleteConfigDuration:o,deleteConfigVersion:a})})),Ya);var ac,cc,sc=N().mark(dc),ic=N().mark(lc),uc=(0,tt.createActions)(e({},ln.SHOW_USER_REQUESTED,(function(e){return{userId:e.userId,shopId:e.shopId,buyerShopId:e.buyerShopId}}))).showUserRequested;function dc(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.buyerShopId,i.prev=1,i.next=4,(0,Kt.call)(it,{resource:"users",id:r,params:{shop_id:n,need_cache:1,cache_expires:1800}});case 4:a=i.sent,i.next=10;break;case 7:i.prev=7,i.t0=i.catch(1),a={id:r,shop_id:o};case 10:return c=T("users",a),s=c.entities,i.next=13,(0,Kt.put)(yr({entities:s}));case 13:return i.next=15,(0,Kt.put)(Jo({userId:r,shopId:n}));case 15:case"end":return i.stop()}}),sc,null,[[1,7]])}function lc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(uc,dc);case 2:case"end":return e.stop()}}),ic)}function pc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?pc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _c=N().mark(Tc),Ec=N().mark(mc),Sc=(0,tt.createActions)((e(ac={},ln.UPDATE_IS_MAIN_PAGE,(function(e){return{isMainPage:e.isMainPage}})),e(ac,ln.UPDATE_CUR_TAB_FOCUSED,(function(e){return{focused:e.focused}})),e(ac,ln.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e){return{focused:e.focused}})),ac)),hc=Sc.updateIsMainPage,Oc=Sc.updateCurTabFocused,vc=Sc.updateCurTabFocusedSucceeded;function Tc(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.payload.focused)){r.next=5;break}return J.dispatch(R.CustomShareEvent.TAB_FOCUSED),r.next=5,(0,Kt.put)(hc({isMainPage:!0}));case 5:return r.next=7,(0,Kt.put)(vc({focused:t}));case 7:case"end":return r.stop()}}),_c)}function mc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Oc,Tc);case 2:case"end":return e.stop()}}),Ec)}const gc=(e(cc={},ln.UPDATE_IS_MAIN_PAGE,(function(e,t){var r=t.payload.isMainPage;return fc(fc({},e),{},{isMainPage:r})})),e(cc,ln.UPDATE_CUR_TAB_FOCUSED_SUCCEEDED,(function(e,t){var r=t.payload.focused;return fc(fc({},e),{},{curTabFocused:r})})),cc);var bc,yc;function Rc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Cc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Rc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Dc=N().mark(xc),Pc=N().mark(kc),Ic=(0,tt.createActions)((e(bc={},ln.UPDATE_CAPTCHA_VISIBLE,(function(e){return{visible:e.visible,resendMessagePayload:e.resendMessagePayload}})),e(bc,ln.UPDATE_CAPTCHA_SIGNATURE,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),e(bc,ln.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e){var t=e.signature;return{signature:void 0===t?"":t}})),bc)),Ac=Ic.updateCaptchaVisible,wc=Ic.updateCaptchaSignature,Nc=Ic.updateCaptchaSignatureSucceeded;function xc(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(t=e.payload.signature)){a.next=12;break}return a.next=4,(0,Kt.select)(Rn);case 4:if(!(r=a.sent)){a.next=12;break}return a.next=8,(0,Kt.select)(Ff(r.messageId));case 8:return n=a.sent,o={message:n,conversationId:r.conversationId},a.next=12,Mo().put(jo().resendMessageRequested({payload:o}));case 12:return a.next=14,(0,Kt.put)(Nc({signature:t}));case 14:case"end":return a.stop()}}),Dc)}function kc(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(wc,xc);case 2:case"end":return e.stop()}}),Pc)}const Uc=(e(yc={},ln.UPDATE_CAPTCHA_VISIBLE,(function(e,t){var r=t.payload,n=r.visible,o=r.resendMessagePayload;return Cc(Cc({},e),{},{captchaVisible:n,resendMessagePayload:o})})),e(yc,ln.UPDATE_CAPTCHA_SIGNATURE_SUCCEEDED,(function(e,t){var r=t.payload.signature;return Cc(Cc({},e),{},{captchaSignature:r})})),yc);function Mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jc=(0,tt.createActions)(e({},ln.SET_TEXT_BOX_HEIGHT,(function(e){return e}))).setTextBoxHeight;const Gc=e({},ln.SET_TEXT_BOX_HEIGHT,(function(e,t){var r=t.payload;return Lc(Lc({},e),{},{textBoxHeight:r})}));var Fc=N().mark((function e(){var t=arguments;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(!(t.length>0&&void 0!==t[0])||t[0])&&J.close(),e.next=4,(0,Kt.put)(Na());case 4:return e.next=6,(0,Kt.put)(uE());case 6:(0,R.removeItem)("mini-session"),(0,R.removeItem)("mini-sc_redirect");case 8:case"end":return e.stop()}}),e)})),Hc=N().mark((function e(){var t;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={server:(0,R.getSCApiServer)(),namespace:"",resource:"logout",suffixSlash:!0,params:{SPC_CDS:U().get("SPC_CDS"),SPC_CDS_VER:2}},(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?(t.version="cnsc",t.parent="selleraccount"):t.version="v1",e.next=5,(0,Kt.call)(it,t);case 5:return document.location.replace("https://".concat((0,R.getSellerCenterUrl)(),"/account/signin")),window.removeEventListener("online",(function(){x.store.dispatch(zo({networkStatus:"online"}))})),window.removeEventListener("offline",(function(){x.store.dispatch(zo({networkStatus:"offline"}))})),fe(),e.next=11,(0,Kt.call)(Fc);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0.handler?(0,Kt.call)(e.t0.handler):console.error("[Logout Failed] ",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])}));function Vc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bc(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Vc(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vc(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Yc,Qc,qc=[co,Oo,wo,_a,Ha,lc,nc,kc,mc],Wc={newbie:[],networkStatus:"online",hasVideoPermission:!1,currentUserId:null,currentUser:{},hasReplyPermission:!1,hasDeletePermission:!1,deleteConfigVersion:0,deleteConfigDuration:0,captchaVisible:!1,captchaSignature:"",resendMessagePayload:void 0,curTabFocused:!0,isMainPage:!0,shopStatisticsMap:{},textBoxHeight:R.MINI_MIN_TEXT_BOX_HEIGHT,showAutoHangupModal:!1,isScChat:!0,openedMenus:"",loginSuccess:!0,socketSuccess:!0,showChatWindow:!1,showConversationDetail:!0,showEntry:!1},Kc=(0,tt.handleActions)(Bc(Bc(Bc(Bc(Bc(Bc(Bc(Bc(Bc({},{}),oc),Uc),gc),Gc),vo),No),Ea),Va),Wc),zc=function(e){return e.conversationReducer.conversationIds},Jc=function(e){return e.conversationReducer.readRequestIds},Xc=function(e){return e.conversationReducer.missedReadNoticeCount},$c=function(e){return e.conversationReducer.inlocation},Zc=function(e){return e.conversationReducer.updateTimeNow},es=function(e){return e.conversationReducer.currentConversationId},ts=function(e){return e.conversationReducer.currentConversationCanRead},rs=function(e){return e.conversationReducer.status},ns=function(e){return e.conversationReducer.direction},os=(0,er.createSelector)(or,zc,(function(e,r){return((0,t.denormalize)(r,[s],{conversations:e})||[]).filter(Boolean)})),as=(0,er.createSelector)(os,es,(function(e,t){return e.filter((function(e){var r=e.id,n=e.unread_count;return e&&(n>0||r===t)}))})),cs=(0,er.createSelector)(os,(function(e){return e.filter((function(e){return e.pinned}))})),ss=(0,er.createSelector)(os,(function(e){return e.filter((function(e){return e.status&&"closed"===e.status}))})),is=(0,er.createSelector)(os,es,(function(e,t){return e.filter((function(e){var r=e.unreplied,n=e.id;return void 0===r||r||!r&&n===t}))})),us=(0,er.createSelector)(os,(function(e){return e.filter((function(e){return e.lack})).map((function(e){return e.id}))||[]})),ds=function(e){return e.conversationReducer.keyword},ls=function(e){return e.conversationReducer.filter},ps=(0,er.createSelector)(ls,os,as,cs,ss,is,(function(e,t,r,n,o,a){return{All:t,Unread:r,Pinned:n,Closed:o,Unreplied:a}[e]})),fs=(0,er.createSelector)(ps,(function(e){return e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)})).filter((function(e){return void 0===e.faking}))})),_s=(0,er.createSelector)(os,es,An,$c,nr,or,(function(e,r,n,o,c,i){var u=e.find((function(e){return e.id===r}))||{};if(o&&!u.id&&(u=(0,t.denormalize)(r,s,{conversations:i})||{}),!n&&u.lack){var d=u.to_id,l=(0,t.denormalize)(d,a,{users:c})||{},p={to_shop_id:l.shop_id,to_status:l.status,to_name:l.name||"-",to_avatar:l.avatar};return Object.assign(u,p)}return u})),Es=(0,er.createSelector)(_s,(function(e){return(e||{}).to_id||null})),Ss=(0,er.createSelector)(_s,_r,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),hs=(0,er.createSelector)(Ss,(function(e){return(null==e?void 0:e.country)||"SG"})),Os=(0,er.createSelector)(_s,(function(e){return e.shop_id})),vs=(0,er.createSelector)(_s,(function(e){return e.to_id})),Ts=(0,er.createSelector)(_s,(function(e){return e.status})),ms=(0,er.createSelector)(_s,(function(e){return e.auto_translation})),gs=(0,er.createSelector)(_s,(function(e){return e.max_general_option_hide_time})),bs=function(e){return(0,er.createSelector)(or,(function(r){return(0,t.denormalize)(e,s,{conversations:r})||{}}))},ys=function(e){return(0,er.createSelector)(bs(e),(function(e){return e.shop_id}))},Rs=function(e){return(0,er.createSelector)(os,(function(t){return e.map((function(e){return t.find((function(t){return t.id===e}))})).filter(Boolean)}))},Cs=(0,er.createSelector)(_s,(function(e){return(e||{}).shop_id||null})),Ds=(0,er.createSelector)(nr,_s,(function(e,r){return r?(0,t.denormalize)(r.to_id,a,{users:e}):{}})),Ps=(0,er.createSelector)(_s,(function(e){return(e||{}).to_shop_id||null})),Is=function(e){return e.conversationReducer.results},As=function(e){return e.conversationReducer.searchStatus},ws=(0,er.createSelector)(_s,(function(e){return e.translationAccess})),Ns=function(e){return e.conversationReducer.listsHash},xs=function(e){return e.conversationReducer.conversationBeenDeleted},ks=(0,er.createSelector)(_s,(function(e){return(e||{}).to_name})),Us=function(e){return e.conversationReducer.access},Ms=function(e){return e.conversationReducer.isNavigateToUnreadMessage},Ls=function(e){return e.conversationReducer.navigateToUnreadMessageId},js=function(e){return e.conversationReducer.pendingOffersCount},Gs=(0,er.createSelector)(_s,js,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0})),Fs=function(e){return(0,er.createSelector)(bs(e),js,(function(e,t){var r=e.shop_id,n=e.to_id;return t["".concat(r,"_").concat(n)]||0}))},Hs=function(e){return(0,er.createSelector)(ys(e),_r,(function(e,r){var n=(0,t.denormalize)(e,p,{shops:r})||{};return(null==n?void 0:n.country)||"SG"}))};!function(e){e.DELETE_CONVERSATION_REQUESTED="DELETE_CONVERSATION_REQUESTED",e.DELETE_CONVERSATION_SUCCEEDED="DELETE_CONVERSATION_SUCCEEDED",e.GET_CONVERSATION_DETAIL_REQUESTED="GET_CONVERSATION_DETAIL_REQUESTED",e.FAKE_CONVERSATION_SUCCEEDED="FAKE_CONVERSATION_SUCCEEDED",e.FETCH_CONVERSATIONS_REQUESTED="FETCH_CONVERSATIONS_REQUESTED",e.FETCH_CONVERSATIONS_SUCCEEDED="FETCH_CONVERSATIONS_SUCCEEDED",e.UPDATE_FETCH_CONVERSATIONS_STATUS="UPDATE_FETCH_CONVERSATIONS_STATUS",e.UPDATE_FETCH_CONVERSATIONS_DIRECTION="UPDATE_FETCH_CONVERSATIONS_DIRECTION",e.UPDATE_CONVERSATION_TIMESTAMP="UPDATE_CONVERSATION_TIMESTAMP",e.UPDATE_CONVERSATION_FILTER="UPDATE_CONVERSATION_FILTER",e.FORWARD_CONVERSATION_REQUESTED="FORWARD_CONVERSATION_REQUESTED",e.MASS_FORWARD_CONVERSATION_REQUESTED="MASS_FORWARD_CONVERSATION_REQUESTED",e.MARK_MESSAGES_REQUESTED="MARK_MESSAGES_REQUESTED",e.MARK_MESSAGES_SUCCEEDED="MARK_MESSAGES_SUCCEEDED",e.UPDATE_READ_REQUEST_DATA="UPDATE_READ_REQUEST_DATA",e.PIN_CONVERSATION_REQUESTED="PIN_CONVERSATION_REQUESTED",e.SEARCH_CONVERSATIONS_REQUESTED="SEARCH_CONVERSATIONS_REQUESTED",e.SEARCH_CONVERSATIONS_SUCCEEDED="SEARCH_CONVERSATIONS_SUCCEEDED",e.RESET_SEARCH_PARAMS="RESET_SEARCH_PARAMS",e.UPDATE_EXISTED_RESULT_ID_MAP="UPDATE_EXISTED_RESULT_ID_MAP",e.UPDATE_CURRENT_CONVERSATION_MODE="UPDATE_CURRENT_CONVERSATION_MODE",e.SET_CURRENT_CONVERSATION_MODE="SET_CURRENT_CONVERSATION_MODE",e.SEARCH_BY_COMBINED_API="SEARCH_BY_COMBINED_API",e.TOGGLE_MULTIPLE_SELECTION_MODE="TOGGLE_MULTIPLE_SELECTION_MODE",e.SET_SELECTED_CONVERSATION_LIST="SET_SELECTED_CONVERSATION_LIST",e.UPDATE_SELECTED_CONVERSATION_ID="UPDATE_SELECTED_CONVERSATION_ID",e.SELECTED_CONVERSATIONS_REQUESTED="SELECTED_CONVERSATIONS_REQUESTED",e.CONVERSATION_BATCH_OPERATE_REQUESTED="CONVERSATION_BATCH_OPERATE_REQUESTED",e.SET_CURRENT_CONVERSATION_CAN_READ="SET_CURRENT_CONVERSATION_CAN_READ",e.UPDATE_PREVIOUS_CONVERSATION_ID="UPDATE_PREVIOUS_CONVERSATION_ID",e.CLOSE_CONVERSATION_REQUESTED="CLOSE_CONVERSATION_REQUESTED",e.FETCH_GROUPS_REQUESTED="FETCH_GROUPS_REQUESTED",e.FETCH_MASS_GROUPS_REQUESTED="FETCH_MASS_GROUPS_REQUESTED",e.SHOW_CONVERSATION_REQUESTED="SHOW_CONVERSATION_REQUESTED",e.RESET_CONVERSATION_REQUESTED="RESET_CONVERSATION_REQUESTED",e.SHOW_CONVERSATION_SUCCEEDED="SHOW_CONVERSATION_SUCCEEDED",e.SHOW_NORMAL_CONVERSATION_SUCCEEDED="SHOW_NORMAL_CONVERSATION_SUCCEEDED",e.CHANGE_CONVERSATION_STATUS_REQUESTED="CHANGE_CONVERSATION_STATUS_REQUESTED",e.FETCH_DEGRADE_CONVERSATIONS_DETAIL="FETCH_DEGRADE_CONVERSATIONS_DETAIL",e.CONVERSATION_OPERATE_REQUESTED="CONVERSATION_OPERATE_REQUESTED",e.SEARCH_MORE_RESULTS="SEARCH_MORE_RESULTS",e.SEARCH_MORE_SUCCEED="SEARCH_MORE_SUCCEED",e.SET_SEARCH_STATUS="SET_SEARCH_STATUS",e.UPDATE_ACCESS="UPDATE_ACCESS",e.SHOW_SEARCHED_CONVERSATION_REQUESTED="SHOW_SEARCHED_CONVERSATION_REQUESTED",e.UPDATE_SEARCH_PARAMS="UPDATE_SEARCH_PARAMS",e.LOCATION_MESSAGE="LOCATION_MESSAGE",e.UPDATE_LOCATION_MODE="UPDATE_LOCATION_MODE",e.UPDATE_SYNC_TIME_NOW="UPDATE_SYNC_TIME_NOW",e.SET_CURRENT_CONVERSATION_TYPE="SET_CURRENT_CONVERSATION_TYPE",e.SET_CONVERSATION_BEEN_DELETED="SET_CONVERSATION_BEEN_DELETED",e.MUTE_CONVERSATION_REQUESTED="MUTE_CONVERSATION_REQUESTED",e.SET_NAVIGATE_TO_UNREAD_MESSAGE="SET_NAVIGATE_TO_UNREAD_MESSAGE",e.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID="SET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID="RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID",e.GET_PENDING_OFFERS_COUNT_REQUESTED="GET_PENDING_OFFERS_COUNT_REQUESTED",e.GET_PENDING_OFFERS_COUNT_SUCCEED="GET_PENDING_OFFERS_COUNT_SUCCEED",e.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED="GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED"}(Yc||(Yc={}));var Vs=(0,tt.createActions)((e(Qc={},Yc.DELETE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.DELETE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.GET_CONVERSATION_DETAIL_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.FAKE_CONVERSATION_SUCCEEDED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.FETCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.direction,r=void 0===t?"reset":t,n=e.noPending;return{direction:r,noPending:void 0!==n&&n,source:e.source}})),e(Qc,Yc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e){var t=e.conversationIds,r=e.conversationIdsMap,n=e.oldestReceivedMessageId,o=e.latestReceivedMessageId,a=e.oldestTimestampNano,c=e.latestTimestampNano,s=e.direction;return{conversationIds:t,conversationIdsMap:r,oldestReceivedMessageId:n,latestReceivedMessageId:o,direction:void 0===s?"reset":s,status:e.status,hasMore:e.hasMore,latestTimestampNano:c,oldestTimestampNano:a,persist:e.persist,shouldFetchByTimestamp:e.shouldFetchByTimestamp,maxLatestTimestampNano:e.maxLatestTimestampNano,maxLatestReceivedMessageId:e.maxLatestReceivedMessageId,syncFetchException:e.syncFetchException}})),e(Qc,Yc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e){return{status:e.status}})),e(Qc,Yc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e){return{direction:e.direction}})),e(Qc,Yc.UPDATE_CONVERSATION_TIMESTAMP,(function(e){return{latestTimestampNano:e.latestTimestampNano,oldestTimestampNano:e.oldestTimestampNano}})),e(Qc,Yc.UPDATE_CONVERSATION_FILTER,(function(e){return{filter:e.filter}})),e(Qc,Yc.FORWARD_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId,type:e.type,forwardId:e.forwardId}})),e(Qc,Yc.MASS_FORWARD_CONVERSATION_REQUESTED,(function(e){return{type:e.type,forwardId:e.forwardId,conversationIds:e.conversationIds}})),e(Qc,Yc.MARK_MESSAGES_REQUESTED,(function(e){return{conversationId:e.conversationId,isRead:e.isRead,latestMessageId:e.latestMessageId}})),e(Qc,Yc.MARK_MESSAGES_SUCCEEDED,(function(e){return{conversationId:e.conversationId,markType:e.markType}})),e(Qc,Yc.UPDATE_READ_REQUEST_DATA,(function(e){return{requestId:e.requestId,requestIds:e.requestIds,count:e.count}})),e(Qc,Yc.PIN_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.filter;return{keyword:r,filter:void 0===n?"all":n}})),e(Qc,Yc.RESET_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchFilter:e.searchFilter}})),e(Qc,Yc.UPDATE_EXISTED_RESULT_ID_MAP,(function(e){return{addedMap:e.addedMap}})),e(Qc,Yc.UPDATE_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode,conversationId:e.conversationId}})),e(Qc,Yc.SET_CURRENT_CONVERSATION_MODE,(function(e){return{mode:e.mode}})),e(Qc,Yc.SEARCH_BY_COMBINED_API,(function(){return{}})),e(Qc,Yc.TOGGLE_MULTIPLE_SELECTION_MODE,(function(e){return{mode:e.mode}})),e(Qc,Yc.SET_SELECTED_CONVERSATION_LIST,(function(e){return{list:e.list}})),e(Qc,Yc.UPDATE_SELECTED_CONVERSATION_ID,(function(e){return{id:e.id,selected:e.selected}})),e(Qc,Yc.SELECTED_CONVERSATIONS_REQUESTED,(function(e){return{type:e.type,id:e.id}})),e(Qc,Yc.CONVERSATION_BATCH_OPERATE_REQUESTED,(function(e){return{type:e.type}})),e(Qc,Yc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e){return{canRead:e.canRead}})),e(Qc,Yc.SHOW_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation,previousId:e.previousId,messageId:e.messageId,sourceInfo:e.sourceInfo}})),e(Qc,Yc.RESET_CONVERSATION_REQUESTED,(function(){return{}})),e(Qc,Yc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId;return{conversationId:t,previousId:void 0===r?null:r}})),e(Qc,Yc.CHANGE_CONVERSATION_STATUS_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.FETCH_DEGRADE_CONVERSATIONS_DETAIL,(function(e){return{conversationIds:e.conversationIds}})),e(Qc,Yc.CONVERSATION_OPERATE_REQUESTED,(function(e){return{type:e.type,extra:e.extra}})),e(Qc,Yc.SEARCH_MORE_RESULTS,(function(e){return{type:e.type,reset:e.reset}})),e(Qc,Yc.SEARCH_MORE_SUCCEED,(function(e){return{type:e.type,total:e.total,results:e.results,isFromCache:e.isFromCache,hasMore:e.hasMore,nextOffset:e.nextOffset}})),e(Qc,Yc.SET_SEARCH_STATUS,(function(e){return{type:e.type,status:e.status}})),e(Qc,Yc.UPDATE_ACCESS,(function(e){return{access:e.access}})),e(Qc,Yc.SHOW_SEARCHED_CONVERSATION_REQUESTED,(function(e){return{conversation:e.conversation}})),e(Qc,Yc.LOCATION_MESSAGE,(function(e){return{msgId:e.msgId,shopId:e.shopId}})),e(Qc,Yc.UPDATE_LOCATION_MODE,(function(e){return{inlocation:e.inlocation}})),e(Qc,Yc.UPDATE_SYNC_TIME_NOW,(function(e){return{timeNow:e.timeNow}})),e(Qc,Yc.SHOW_CONVERSATION_SUCCEEDED,(function(e){var t=e.conversationId,r=e.previousId,n=void 0===r?null:r,o=e.type;return{conversationId:t,previousId:n,type:void 0===o?R.ConversationTypeEnum.Normal:o}})),e(Qc,Yc.SET_CURRENT_CONVERSATION_TYPE,(function(e){var t=e.type;return{type:void 0===t?R.ConversationTypeEnum.Normal:t}})),e(Qc,Yc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e){return{isNavigateToUnreadMessage:e.isNavigateToUnreadMessage}})),e(Qc,Yc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return{navigateToUnreadMessageId:e.navigateToUnreadMessageId}})),e(Qc,Yc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(){})),e(Qc,Yc.SET_CONVERSATION_BEEN_DELETED,(function(e){return{conversationBeenDeleted:e.conversationBeenDeleted}})),e(Qc,Yc.MUTE_CONVERSATION_REQUESTED,(function(e){return{conversationId:e.conversationId}})),e(Qc,Yc.GET_PENDING_OFFERS_COUNT_REQUESTED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId}})),e(Qc,Yc.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{shopId:e.shopId,buyerId:e.buyerId,count:e.count}})),e(Qc,Yc.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e){return{records:e.records}})),Qc)),Bs=Vs.deleteConversationRequested,Ys=Vs.deleteConversationSucceeded,Qs=Vs.getConversationDetailRequested,qs=Vs.fakeConversationSucceeded,Ws=Vs.fetchConversationsRequested,Ks=Vs.fetchConversationsSucceeded,zs=Vs.updateFetchConversationsStatus,Js=Vs.updateFetchConversationsDirection,Xs=Vs.updateConversationTimestamp,$s=Vs.updateConversationFilter,Zs=(Vs.forwardConversationRequested,Vs.massForwardConversationRequested,Vs.markMessagesRequested),ei=Vs.markMessagesSucceeded,ti=Vs.updateReadRequestData,ri=Vs.pinConversationRequested,ni=(Vs.searchConversationsRequested,Vs.resetSearchParams),oi=(Vs.updateExistedResultIdMap,Vs.updateCurrentConversationMode,Vs.setCurrentConversationMode,Vs.searchByCombinedApi,Vs.toggleMultipleSelectionMode,Vs.setSelectedConversationList,Vs.updateSelectedConversationId,Vs.selectedConversationsRequested,Vs.conversationBatchOperateRequested,Vs.setCurrentConversationCanRead),ai=Vs.showConversationRequested,ci=Vs.resetConversationRequested,si=Vs.showConversationSucceeded,ii=Vs.changeConversationStatusRequested,ui=Vs.fetchDegradeConversationsDetail,di=Vs.conversationOperateRequested,li=Vs.searchMoreResults,pi=(Vs.searchMoreSucceed,Vs.setSearchStatus,Vs.updateAccess),fi=Vs.showSearchedConversationRequested,_i=Vs.locationMessage,Ei=Vs.updateLocationMode,Si=Vs.updateSyncTimeNow,hi=Vs.showNormalConversationSucceeded,Oi=Vs.setNavigateToUnreadMessage,vi=Vs.setNavigateToUnreadMessageId,Ti=Vs.resetNavigateToUnreadMessageId,mi=Vs.setConversationBeenDeleted,gi=Vs.muteConversationRequested,bi=Vs.getPendingOffersCountRequested,yi=Vs.getPendingOffersCountSucceed,Ri=Vs.getBatchPendingOffersCountSucceed,Ci=N().mark(Pi),Di=N().mark(Ii);function Pi(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.conversationId,c.prev=1,c.next=4,(0,Kt.select)(bs(t));case 4:return r=c.sent,n=r.shop_id,o=r.pinned,a={method:"PUT",parent:"conversations",parentId:t,resource:o?"unpin":"pin"},n&&(a.payload=JSON.stringify({shop_id:n})),c.next=11,(0,Kt.call)(it,a);case 11:c.next=17;break;case 13:return c.prev=13,c.t0=c.catch(1),c.next=17,(0,Kt.put)(zp({error:c.t0}));case 17:case"end":return c.stop()}}),Ci,null,[[1,13]])}function Ii(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(ri,Pi);case 2:case"end":return e.stop()}}),Di)}function Ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function wi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ai(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ai(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ni(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Ni(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ni(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ki,Ui=N().mark(Li),Mi=(e(ki={},R.ConversationTypeEnum.Agent,"receiveAgentMessageRequested"),e(ki,R.ConversationTypeEnum.Normal,"receiveMessageRequested"),ki);function Li(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,r=e.type,n=Mi[r],o.next=4,(0,Kt.spawn)(Bi,t.request_id);case 4:return o.next=6,Mo().put(jo()[n]({payload:{message:t}}));case 6:case"end":return o.stop()}}),Ui)}function ji(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Gi(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ji(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ji(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Fi=function(e){e.sort((function(e,t){return parseInt(t.latest_message_id)-parseInt(e.latest_message_id)}))},Hi=function(e,t){var r=e.last_message_time_nano,n=e.next_timestamp_nano;return t&&!n&&(n=t.next_message_time_nano),{nextTimestampNano:n,oldestTimestampNano:n,latestTimestampNano:r}},Vi=N().mark(Bi);function Bi(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,R.getItem)(e);case 2:(t=o.sent)&&(r=new Date,n=+r-+t,Ft(Lt.MESSAGE_SOCKET,n),(0,R.removeItem)(e));case 4:case"end":return o.stop()}}),Vi)}var Yi=I(439).t,Qi=R.MessageTypes.MSG_TYPE_TEXT,qi="mark_as_unreplied",Wi=N().mark(zi),Ki=N().mark(Ji);function zi(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.conversationId,n.prev=1,n.next=4,(0,Kt.select)(ys(t));case 4:return r=n.sent,n.next=7,(0,Kt.call)(it,{method:"DELETE",resource:"conversations",id:t,params:{shop_id:r}});case 7:n.next=13;break;case 9:return n.prev=9,n.t0=n.catch(1),n.next=13,(0,Kt.put)(zp({error:n.t0}));case 13:case"end":return n.stop()}}),Wi,null,[[1,9]])}function Ji(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Bs,zi);case 2:case"end":return e.stop()}}),Ki)}const Xi=e({},Yc.DELETE_CONVERSATION_SUCCEEDED,(function(t,r){var n=r.payload.conversationId,o=wi(wi({},t.conversationIdsMap),{},e({},n,!1)),a=new Set(t.conversationIds);a.delete(n);var c=Array.from(a),s=t.currentConversationId;return wi(wi({},t),{},{currentConversationId:s===n?null:s,conversationIds:c,conversationIdsMap:o})}));var $i,Zi=N().mark(au),eu=N().mark(cu),tu=N().mark(su),ru=N().mark(iu);function nu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ou(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?nu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function au(e){var t,r,n,o,a,c,s,i;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.conversation,r=e.sourceInfo,u.prev=1,u.next=4,(0,Kt.select)(An);case 4:return n=u.sent,o=t.id,a=t.to_id,u.next=8,(0,Kt.call)(it,{method:"POST",parent:"conversation",resource:"enter",payload:JSON.stringify(ou({conversation_id:o,to_id:a},r))});case 8:if(c=u.sent,s=c.faq_session_id,i=c.session_expiry_timestamp,n){u.next=14;break}return u.next=14,(0,Kt.put)(YO({conversationId:o,faqSessionId:s,sessionExpiryTime:i}));case 14:u.next=18;break;case 16:u.prev=16,u.t0=u.catch(1);case 18:case"end":return u.stop()}}),Zi,null,[[1,16]])}function cu(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,C,D,P,I,A,w,x,k;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.conversation,n=t.previousId,o=t.messageId,a=t.messageList,t.sourceInfo,N.prev=1,N.next=4,(0,Kt.select)(An);case 4:if(c=N.sent,i=(s=r).id,u=s.lack,c||!u){N.next=12;break}return N.next=9,(0,Kt.call)(Nd,{payload:{conversationIds:[i]}});case 9:return N.next=11,(0,Kt.select)(bs(i));case 11:r=N.sent;case 12:if(l=(d=r).faking,p=d.status,f=d.to_id,_=d.shop_id,E=d.latest_message_id,S=d.to_shop_id,h=d.unread_count,O=d.last_read_message_id,Lm({shopId:_,operation:R.TrackerOperation.IMPRESSION,trackerName:"impressionChatRoom",data:{convo_userid:f,conversation_id:i}}),c){N.next=24;break}return N.next=17,(0,Kt.call)(R.getItem,"mini-sc_redirect");case 17:return v=N.sent,T={},v&&(m=v.orderId,g=v.productId,b=v.conversationId,y=v.shopId,parseInt(i)===parseInt(b)&&(m?T={order_id:parseInt(m)}:g?T={product_id:parseInt(g)}:y&&(T={shop_id:parseInt(y)}))),N.next=22,(0,Kt.spawn)(au,{conversation:r,sourceInfo:T});case 22:N.next=26;break;case 24:return N.next=26,(0,Kt.spawn)(au,{conversation:r});case 26:return N.next=28,(0,Kt.select)(dh);case 28:if((C=N.sent)&&C[_]||!c){N.next=33;break}return N.next=33,(0,Kt.call)(Dh,gh({shopId:_}));case 33:return N.next=35,(0,Kt.put)(uc({userId:f,shopId:_,buyerShopId:S}));case 35:return N.next=37,(0,Kt.put)(Ti());case 37:return D="number"==typeof h&&h>0&&!o,N.next=40,(0,Kt.put)(Oi({isNavigateToUnreadMessage:D}));case 40:return N.next=42,(0,Kt.put)(si({conversationId:i,previousId:n}));case 42:return N.next=44,Mo().put(jo().fetchMessagesRequested({payload:{conversationId:i,messageId:o||(D?O:void 0),direction:o||D?"around":"older",messageList:a,reset:!0}}));case 44:return N.next=46,(0,Kt.put)(bi({shopId:_,buyerId:f}));case 46:return N.next=48,Mo().call(jo().handleCurrentConversationChange({payload:i}));case 48:if(P=N.sent,!(!l&&"closed"!==p&&h>0||P)){N.next=54;break}return I=P||E,N.next=54,(0,Kt.put)(Zs({conversationId:i,isRead:!0,latestMessageId:I}));case 54:if(A={},!c){N.next=63;break}return N.next=58,(0,Kt.call)(xp,{payload:{shopId:_}});case 58:return w=N.sent,x=w.auth_names,k=void 0===x?[]:x,N.next=63,(0,Kt.put)(pi({access:k}));case 63:return N.next=65,(0,Kt.select)(np(_));case 65:if(A=N.sent){N.next=70;break}return N.next=69,(0,Kt.call)(hp,{payload:{shopId:_}});case 69:A=N.sent;case 70:return N.next=72,(0,Kt.put)(Rr({name:"shops",id:_,record:ou({},A)}));case 72:return N.next=76,Mo().put(jo().messageSyncUpdate({payload:{conversation:r}}));case 76:return N.next=78,(0,Kt.put)(mi({conversationBeenDeleted:!1}));case 78:N.next=83;break;case 80:N.prev=80,N.t0=N.catch(1),console.log("*** Show Conversation Failed: ",N.t0);case 83:case"end":return N.stop()}}),eu,null,[[1,80]])}function su(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return(t=e.payload).type,r=t.conversationId,n=t.previousId,o.next=4,(0,Kt.put)(hi({conversationId:r,previousId:n}));case 4:case"end":return o.stop()}}),tu)}function iu(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeLatest)(ai,cu);case 2:return e.next=4,(0,Kt.takeEvery)(si,su);case 4:case"end":return e.stop()}}),ru)}const uu=(e($i={},Yc.SHOW_NORMAL_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationId;return r.previousId,ou(ou({},e),{},{currentConversationId:n})})),e($i,Yc.RESET_CONVERSATION_REQUESTED,(function(e){return ou(ou({},e),{},{currentConversationId:null})})),e($i,Yc.SET_NAVIGATE_TO_UNREAD_MESSAGE,(function(e,t){var r=t.payload.isNavigateToUnreadMessage;return ou(ou({},e),{},{isNavigateToUnreadMessage:r})})),e($i,Yc.SET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e,t){var r=t.payload.navigateToUnreadMessageId;return ou(ou({},e),{},{navigateToUnreadMessageId:r})})),e($i,Yc.RESET_NAVIGATE_TO_UNREAD_MESSAGE_ID,(function(e){return ou(ou({},e),{},{navigateToUnreadMessageId:""})})),$i),du=e({},Yc.UPDATE_CONVERSATION_FILTER,(R.ConversationTypeEnum.Normal,function(e,t){var r=t.payload.filter;return wi(wi({},e),{},{filter:r})}));function lu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pu(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fu,_u=["id","name","region","shop_id","sold","stock","status","original_price","actual_price","image","image_hash","promotion_label","raw_discount"],Eu={region:"country",status:"status",original_price:"original_prices",actual_price:"actual_prices",promotion_label:"promotion_label"},Su={id:"item_id",region:"region",actual_price:"price"},hu=pu(pu({},Su),{},{original_price:"price_before_discount",image_hash:"thumb_url"}),Ou=pu(pu({},Su),{},{original_price:"price_before_discount",shop_id:"shop_id"}),vu=pu(pu({},Su),{},{shop_id:"shop_id"}),Tu=pu(pu({},Su),{},{shop_id:"shop_id",original_price:"hidden_price_display"}),mu={id:"item_id",name:"name",actual_price:"price"},gu=["asking_price","buyer_id","conversation_id","create_at","discount","id","model_id","model_name","offer_price","product","product_id","product_deleted","products_count","region","shop_id","status","tax_applicable","tax_value","total_price"],bu=["discount","total_price","region","disclaimer"],yu=["product","product_deleted"],Ru={asking_price:"asking_price",create_at:"create_at",model_name:"model_name",offer_price:"offer_price",tax_value:"tax_value"},Cu=["claimed","code","country","type","id","is_used","name","expired","usage_progress","stock_out","rule_text","displayed_time","discount_text","show_usage_progress_bar","show_usage_progress_text","status","start_time","end_time","current_usage","total_usage"],Du={rule_text:"rule_text",displayed_time:"displayed_time",expired:"expired",stock_out:"stock_out",discount_text:"discount_text",show_usage_progress_bar:"show_usage_progress_bar",show_usage_progress_text:"show_usage_progress_text"},Pu=I(439).t;function Iu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Au(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Iu(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wu=R.ProductPromotionLabel.SHOW_DISCOUNT,Nu=R.ProductPromotionLabel.FLASH_SALES,xu=R.ProductPromotionLabel.CAMPAIGN,ku=R.ProductPromotionLabel.BUNDLE_DEAL,Uu=R.ProductPromotionLabel.ADD_ON_DEAL,Mu=R.ProductPromotionLabel.GIFT_WITH_PURCHASE,Lu=[wu,Nu,xu,ku,Uu,Mu],ju=(e(fu={},R.ProductStatusUsingString.DELETED,R.ProductStatusUsingNumber.DELETED),e(fu,R.ProductStatusUsingString.NORMAL,R.ProductStatusUsingNumber.NORMAL),e(fu,R.ProductStatusUsingString.BANNED,R.ProductStatusUsingNumber.BANNED),e(fu,R.ProductStatusUsingString.SOLD_OUT,R.ProductStatusUsingNumber.SOLD_OUT),e(fu,R.ProductStatusUsingString.DELISTED,R.ProductStatusUsingNumber.DELISTED),fu),Gu="???",Fu=function(e,t){if(!e)return e;var r=(0,R.formatPrice)(e,t);return r.includes("NaN")&&(r=r.replace("NaN",Gu)),r},Hu=function(e){var t=e.original_price,r=e.actual_price;return(t===r||r.includes(Gu))&&(e.original_price=""),e},Vu=function(e){var t={};return _u.forEach((function(r){var n=Eu[r];switch(n){case"country":t[r]=e[n];break;case"status":t[r]=ju[e[n]];break;case"original_prices":case"actual_prices":t[r]=function(e,t){var r=y(e,2),n=r[0],o=r[1];if(n===o)return Fu(n,t);var a=Fu(n,t),c=Fu(o,t);return a.includes(Gu)?a:c.includes(Gu)?c:"".concat(a," - ").concat(c)}(e[n],e.country);break;case"promotion_label":t[r]=function(e){var t=[];return Lu.forEach((function(r){if(e[r]){var n="common.label.".concat(r);r===wu?t.push({key:r,value:Pu(n,{discount:(0,R.formatDiscount)(e[r])})}):t.push({key:r,value:Pu(n)})}})),t}(e[n]);break;default:t[r]=e[r]}})),Hu(t)},Bu=function(e,t){var r={};return _u.forEach((function(n){var o=hu[n];switch(o){case"item_id":case"thumb_url":r[n]=e[o];break;case"region":r[n]=t;break;case"price_before_discount":case"price":r[n]=Fu(e[o],t);break;default:r[n]=e[n]}})),Hu(r)},Yu=function(e,t,r){var n={};return _u.forEach((function(o){var a=Ou[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price_before_discount":case"price":n[o]=Fu(e[a],t);break;default:n[o]=e[o]}})),Hu(n)},Qu=1e5,qu=function(e,t){var r=e.amount_spent;return e.amount_spent=Fu("".concat(r/Qu),t),e},Wu=function(e,t,r){var n={};return _u.forEach((function(o){var a=vu[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"price":n[o]=Fu(e[a],t);break;default:n[o]=e[o]}})),Hu(n)},Ku=function(e,t){var r=e.rule_type,n=e.discount_percentage,o=e.discount_value,a=e.fix_price;if(1===r)e.fix_price=Fu("".concat(a/Qu),t);else if(2===r){var c=n/Qu;"tw"===(t||"SG").toLowerCase()&&(c=10-c/10,Number.isInteger(c)||(c=c.toFixed(1))),e.discount_percentage=c}else e.discount_value=Fu("".concat(o/Qu),t);return e},zu=function(e,t,r){var n={};return _u.forEach((function(o){var a=Tu[o];switch(a){case"item_id":n[o]=e[a];break;case"region":n[o]=t;break;case"shop_id":n[o]=r;break;case"hidden_price_display":n[o]=(0,R.transPrice)(e[a],t);break;case"price":n[o]=Fu("".concat(e[a]/Qu),t);break;default:n[o]=e[o]}})),Hu(n)},Ju=function(e){var t={};return _u.forEach((function(r){var n,o=mu[r];switch(o){case"item_id":t[r]=e[o];break;case"name":t[r]=null!=e&&null!==(n=e.model)&&void 0!==n&&n.model_name?e.model.model_name:e[o];break;case"price":var a,c=null!=e&&null!==(a=e.model)&&void 0!==a&&a.price?e.model.price:e[o];t[r]=Fu(c,e.region);break;default:t[r]=e[r]}})),Hu(t)},Xu=function(e){var t=e.model_name;return t&&t.includes(",")&&(e.model_name=t.replace(/,/g," · ")),e},$u=function(e,t,r,n,o,a){var c={};return bu.forEach((function(t){switch(t){case"discount":c[t]=function(e,t,r){var n=e.offer_price,o=e.asking_price,a=Number(n)/Number(o);if(function(e,t){return e&&(0,R.isVisitingCNSC)()||"TW"===(null==t?void 0:t.toUpperCase())}(t,r)){var c=(10*a).toFixed(a<.05?2:1),s=Number.isInteger(Number(c))?Number.parseInt(c):c;return"".concat(s,"折")}var i=(100*(1-a)).toFixed(1),u=Number.parseInt(i),d=[0,100].includes(u)?u:i;return"".concat(d).concat(Pu("message.offer.discount"))}(e,n,r);break;case"total_price":c[t]=Fu(function(e){var t=e.offer_price,r=e.tax_value,n=e.products_count;return((Number(t)-Number(r))*n).toString()}(e),r);break;case"region":c[t]=r;break;case"disclaimer":c[t]=function(e,t){var r=e.offer_disclaimer;return(r.find((function(e){return(0,R.getTranslationLocale)(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}))||r.find((function(e){return"en"===e.language}))||{}).disclaimer}(e,a)}})),yu.forEach((function(t){switch(t){case"product":c[t]=Au(Au({},o),{},{original_price:"",actual_price:Fu(e.asking_price,r)});break;case"product_deleted":c[t]=function(e){var t=e.id,r=e.status;return!(!t||r!==R.ProductStatusUsingNumber.DELETED)}(o)}})),gu.forEach((function(n){if(!bu.includes(n)&&!yu.includes(n)){var o=Ru[n];switch(o){case"asking_price":case"offer_price":case"tax_value":c[n]=Fu(e[o],r);break;case"create_at":c[n]=(0,R.getFormattedTime)(e[o]);break;case"model_name":c[n]=function(e,t){if(t&&t.includes(",")){var r="detail"===e?" · ":" / ";return t.replace(/,/g,r)}return t}(t,e[o]);break;default:c[n]=e[n]}}})),c},Zu="message.voucher.rule",ed=function(e,t){return(0,R.formatPrice)(e,t,{withUnit:e>=1e4})},td=function(e){var t=e.country,r=e.min_basket_size,n=e.reward.max_capped_amount,o=ed(r,t),a=Pu("".concat(Zu,".min_spend"),{spend:o});return"number"==typeof n&&(a=Pu("".concat(Zu,".min_spend_max_cap"),{spend:o,cap:ed(n,t)})),a},rd=function(e){var t=e.country,r=e.reward,n=r.value,o=r.type,a=r.discount_type===R.DiscountType.PERCENTAGE?"".concat(n,"%").concat(" "+Pu("common.label.off")):(0,R.formatPrice)(n,t);return o===R.RewardType.COIN_CASHBACK&&(a="".concat(a," ").concat(Pu("conversation_detail.workstation.voucher_panel.coins_cashback"))),a},nd=function(e){return e.status===R.VoucherStatus.FINISHED},od=function(e){return e.current_usage>=e.total_usage},ad=function(e,t){var r=!t&&nd(e),n=e.status,o=e.start_time,a=e.end_time;return Pu("".concat("conversation_detail.workstation.voucher_panel",".").concat(r?R.VoucherStatus.ONGOING:n,"_time"),{time:n===R.VoucherStatus.SCHEDULED?(0,R.getFormattedTime)(o,"MM.DD.YYYY h:mm"):(0,R.getFormattedTime)(a,"MM.DD.YYYY")})},cd=function(e,t){var r=nd(e),n=od(e),o=e.is_used,a=e.usage_progress,c=e.country,s=o||r||n;return(a>=50||"id"===c.toLowerCase()&&(t||a>=25))&&!s},sd=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={},n=nd(e),o=od(e);return Cu.forEach((function(a){switch(Du[a]){case"rule_text":r[a]=td(e);break;case"displayed_time":r[a]=ad(e,t);break;case"expired":r[a]=n;break;case"stock_out":r[a]=o;break;case"discount_text":r[a]=rd(e);break;case"show_usage_progress_bar":r[a]=cd(e,!0);break;case"show_usage_progress_text":r[a]=cd(e,!1);break;default:r[a]=e[a]}})),r},id=function(e,t){var r=t.expired,n=t.stockOut,o=Au({},e);return r?(o.status="finished",{status:"finished",expired:r,displayed_time:ad(o,r),show_usage_progress_bar:cd(o,!0),show_usage_progress_text:cd(o,!1)}):n?(o.current_usage=o.total_usage,{current_usage:o.total_usage,stock_out:n,show_usage_progress_bar:cd(o,!0),show_usage_progress_text:cd(o,!1)}):{}};function ud(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ud(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ud(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var ld,pd=N().mark(_d),fd=N().mark(Ed);function _d(e,t,r,n,o){var a,c,s,i,u,d,l,p,f,_,E,S,h,O,v;return N().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=T("conversations",e),m.next=3,(0,Kt.select)(_s);case 3:return c=m.sent,m.next=6,(0,Kt.select)((function(e){return e.entityReducer}));case 6:return s=m.sent,i=s.conversations,u=void 0===i?{}:i,d=s.shops,l=void 0===d?{}:d,p=[],c&&c.faking?(f=c.id,p=wT(t,a.result,n,f)):p=wT(t,a.result,n),_=p.length<R.persistLimit?null:ue(p).splice(0,R.persistLimit),m.next=16,(0,Kt.put)(yr({entities:{persist:_}}));case 16:return m.next=18,(0,Kt.call)(AT,u,e,"conversations");case 18:return m.next=20,(0,Kt.spawn)(Ed,e);case 20:if(!(E=o&&o.length)){m.next=26;break}return m.next=24,(0,Kt.call)(AT,l,o,"shops");case 24:return m.next=26,(0,Kt.put)(dp({shopIds:o.map((function(e){return e.id}))}));case 26:return m.next=28,(0,Kt.put)(nt());case 28:if(!(S=kT(_,r,t))||!S.changed){m.next=40;break}if(O=S.lastConversationId,"older"!==n&&"reset"!==n){m.next=35;break}h=a.entities.conversations&&a.entities.conversations[O],m.next=39;break;case 35:return m.next=37,(0,Kt.select)(os);case 37:v=m.sent,h=v.find((function(e){return e.id===O}));case 39:h&&(E?S.oldestReceivedMessageId=h.latest_message_id:S.oldestTimestampNano=h.last_msg_time_nano);case 40:return m.abrupt("return",{persistObj:S,resultConversationIds:p});case 41:case"end":return m.stop()}}),pd)}function Ed(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_;return N().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(t=[],e.forEach((function(e){(0,R.hasTargetMessageOption)(e.last_message_option,R.MessageOption.MSG_OPT_RECALL)&&t.push({conversation_id:e.id,shop_id:e.shop_id})})),!t.length){E.next=27;break}return E.next=5,(0,Kt.call)(it,{method:"POST",parent:"conversation",resource:"last_msg_in_conversation_batch",payload:JSON.stringify({pairs:t})});case 5:if(r=E.sent,!(n=Object.keys(r)).length){E.next=27;break}o={};case 9:if(!n.length){E.next=24;break}if(!(a=n.shift())){E.next=22;break}return E.next=14,(0,Kt.select)(bs(a));case 14:if(c=E.sent,(0,R.hasTargetMessageOption)(c.last_message_option,R.MessageOption.MSG_OPT_RECALL)){E.next=17;break}return E.abrupt("continue",9);case 17:s=r[a],i=s.id,u=s.type,d=s.content,l=s.to_shop_id,p=s.created_at,f=(0,R.getChatBotParams)(s,{updateMaxGeneralOptionHideTime:c.shop_id!==l}),_=(0,R.getCrmPreviewParams)(s),o[a]=dd(dd({latest_message_id:i,latest_message_type:u,latest_message_content:d,last_message_time:p},f),_);case 22:E.next=9;break;case 24:if((0,R.checkEmptyObject)(o)){E.next=27;break}return E.next=27,(0,Kt.put)(Dr({name:"conversations",records:o}));case 27:case"end":return E.stop()}}),fd)}var Sd=N().mark(Id),hd=N().mark(Ad),Od=N().mark(wd),vd=N().mark(Nd),Td=N().mark(xd),md=N().mark(kd);function gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?gd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var yd=["pinned","unreplied"],Rd=function(e,t,r,n,o){var a={},c="older"===e?t:"latest"===e?r:"",s=yd.includes(n);return a.resource=s?"conversation/list":"conversations",a.params={next_timestamp_nano:c,direction:"latest"===e&&c?"latest":"older"},"unread"===n&&(a.params.unread_only=!0),s&&(a.params.type=n),new Promise((function(e,t){it(a).then((function(t){var r=t.conversations,n=void 0===r?[]:r,o=t.page_result;e([n,void 0===o?{}:o])})).catch((function(e){t(e)}))}))},Cd=function(e,t,r,n,o,a,c){var s="older"===t?r:"latest"===t?n:"",i={direction:"latest"===t?"latest":"older"};if(s&&(i.last_received_message_id=s),a)return e&&(i.shop_id=e),o&&["unread","pinned"].includes(o)&&(i.type=o),new Promise((function(e,t){it({parent:"subaccount",resource:"conversations",params:i}).then((function(t){var r=t.conversations;e(void 0===r?[]:r)})).catch((function(e){t(e)}))}))},Dd=function(e){return new Promise((function(t,r){it({subServer:"coreapi",parent:"conversation_list_by_ids",params:{conversation_ids:JSON.stringify(e)}}).then((function(e){var r=e.conversations;t(void 0===r?[]:r)})).catch((function(e){r(e)}))}))},Pd=function(e){return e=e.filter((function(e){return e})),new Promise((function(t){it({parent:"setting",resource:"auto_translations",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e.auto_translations;t(void 0===r?[]:r)})).catch((function(){t([])}))}))};function Id(t){var r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,R,C,D,P,I,A,w,x,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z;return N().wrap((function(J){for(;;)switch(J.prev=J.next){case 0:return r=t.list,n=t.needFetchOfferCount,o=void 0!==n&&n,a=t.conversationId,c=t.handleSave,J.next=3,(0,Kt.select)(An);case 3:s=J.sent,i=[],u=[],d=[],l=[],p={},f=0;case 7:if(!(f<r.length)){J.next=23;break}if(_=r[f],E=_.id,S=_.conversation_id,h=_.type,O=_.content,v=_.latest_message_type,T=_.latest_message_content,m=_.to_id,g=_.shop_id,b=v||h,y=T||O,R=S||E,o&&l.push({buyer_id:m,shop_id:g}),!["order","offer","voucher"].includes(b)){J.next=20;break}return J.next=16,(0,Kt.select)(ys(R));case 16:C=J.sent,D=!1,"order"===b&&s&&C!==y.shop_id&&(D=!0),D||(P="".concat(b,"_id"),I=y[P],A="order"===b?u:"offer"===b?i:d,0!==(w=y.shop_id)&&0!==parseInt(I)&&(A.push(e({shop_id:w},P,parseInt(I))),p[E]={type:b,itemId:I,conversationId:R}));case 20:f++,J.next=7;break;case 23:if(Object.keys(p).length||l.length){J.next=25;break}return J.abrupt("return");case 25:return x={},J.next=28,(0,Kt.select)(kn);case 28:if(k=J.sent){J.next=34;break}if(!a){J.next=34;break}return J.next=33,(0,Kt.select)(ys(a));case 33:k=J.sent;case 34:return k&&(x={params:{shop_id:k}}),J.prev=35,J.next=38,(0,Kt.call)(it,bd(bd({method:"POST",parent:"chat_preview",resource:"detail"},x),{},{payload:JSON.stringify({offer_preview_req:i,order_preview_req:u,voucher_preview_req:d,offer_count_req:l})}));case 38:U=J.sent,J.next=44;break;case 41:J.prev=41,J.t0=J.catch(35),U={};case 44:if(L=(M=U).vouchers,j=void 0===L?[]:L,G=M.offers,F=void 0===G?[]:G,H=M.orders,V=void 0===H?[]:H,B=M.buyer_offer_counts,Y=void 0===B?[]:B,j.length||F.length||V.length||Y.length){J.next=47;break}return J.abrupt("return");case 47:Q={},q=Object.keys(p),W=N().mark((function e(){var t,r,n,o,a,c,s,i,u;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=z[K],r=void 0,n=p[t],o=n.type,a=n.itemId,c=n.conversationId,e.next=5,(0,Kt.select)(Hs(c));case 5:s=e.sent,e.t0=o,e.next="voucher"===e.t0?9:"offer"===e.t0?12:"order"===e.t0?15:17;break;case 9:return i=j.find((function(e){return e.id===a})),r=i?bd(bd({},i),sd(i)):i,e.abrupt("break",17);case 12:return u=F.find((function(e){return e.id===a})),r=u?bd(bd({},u),{},{offer_price:Fu(u.offer_price,s)}):u,e.abrupt("break",17);case 15:return r=V.find((function(e){return e.id===a})),e.abrupt("break",17);case 17:r&&(Q[t]=r);case 18:case"end":return e.stop()}}),e)})),K=0,z=q;case 51:if(!(K<z.length)){J.next=56;break}return J.delegateYield(W(),"t1",53);case 53:K++,J.next=51;break;case 56:c&&c({records:Q,buyerOfferCounts:Y});case 57:case"end":return J.stop()}}),Sd,null,[[35,41]])}function Ad(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t={},r={},n.next=3,(0,Kt.call)(Id,{list:e,needFetchOfferCount:!0,handleSave:function(e){var n=e.records,o=e.buyerOfferCounts;Object.keys(n).forEach((function(e){t[e]={latest_message_content:n[e]}})),o.forEach((function(e){var t=e.shop_id,n=e.buyer_id,o=e.pending_count,a="".concat(t,"_").concat(n);r[a]=o}))}});case 3:return n.next=5,(0,Kt.put)(Dr({name:"conversations",records:t}));case 5:return n.next=7,(0,Kt.put)(Ri({records:r}));case 7:case"end":return n.stop()}}),hd)}function wd(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,C,D,P,I,A,w,x,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,de,le;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,r=t.direction,n=t.noPending,o=t.source,a="latest"===r,c=null,N.next=5,(0,Kt.select)(Yn);case 5:return s=N.sent,N.next=8,(0,Kt.select)(An);case 8:return i=N.sent,N.next=11,(0,Kt.select)(ls);case 11:if(u=N.sent.toLowerCase(),d=!i,l=o===R.ConversationSource.SYNC,"reset"!==r){N.next=19;break}return N.next=17,Mo().put(jo().resetConversationQueue({isLazy:!0}));case 17:return N.next=19,(0,Kt.put)(Ks({conversationIds:[],oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",oldestTimestampNano:"",latestTimestampNano:"",maxLatestTimestampNano:"",direction:"reset",hasMore:!0,status:R.DataFetchStatus.SUCCEED,persist:null,shouldFetchByTimestamp:d}));case 19:return N.next=21,(0,Kt.select)((function(e){return e.conversationReducer}));case 21:if(p=N.sent,f=p.oldestTimestampNano,_=p.latestTimestampNano,E=p.maxLatestTimestampNano,S=p.oldestReceivedMessageId,h=p.latestReceivedMessageId,O=p.maxLatestReceivedMessageId,v=p.hasMore,T=p.persist,m=p.conversationIds,g=p.status,b=p.syncFetchException,C=p.currentConversationId,D="reset"===r||(d?!f:!S)&&"older"===r,N.prev=35,"older"===r&&(d?"0"===f:!v)){N.next=156;break}if(n){N.next=40;break}return N.next=40,(0,Kt.put)(zs({status:D?R.DataFetchStatus.INIT_PENDING:R.DataFetchStatus.PENDING}));case 40:if(P=[],I={},!d){N.next=51;break}return N.next=45,(0,Kt.call)(Rd,r,f,_,u,o);case 45:A=N.sent,w=y(A,2),P=w[0],I=w[1],N.next=54;break;case 51:return N.next=53,(0,Kt.call)(Cd,c,r,S,h,u,i,o);case 53:P=N.sent;case 54:if(!(x=P.length)){N.next=152;break}if("reset"===r&&(!d||yd.includes(u))){N.next=66;break}if(k=P[x-1],U="older"===r,d?(M=U?f:_,L=U?k.next_timestamp_nano:k.last_message_time_nano):(M=U?S:h,L=k.latest_message_id),!M||!L){N.next=66;break}if(U?L<M:L>M){N.next=66;break}return N.next=65,(0,Kt.put)(Ks({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:h,conversationIds:m,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:_,shouldFetchByTimestamp:d}));case 65:return N.abrupt("return");case 66:if(s||i){N.next=76;break}return N.next=69,(0,Kt.select)(N_);case 69:if("enabled"===N.sent){N.next=76;break}return j=Array.from(new Set(P.map((function(e){return e.to_shop_id})))),N.next=74,(0,Kt.call)(Pd,j);case 74:G=N.sent,P=P.map((function(e){var t=G.find((function(t){return t.shop_id===e.to_shop_id}));return bd(bd({},e),{},{translationAccess:!!t&&t.is_auto_translation})}));case 76:if(F={},P.forEach((function(e){F[e.id]=!0})),Fi(P),H=P[0],V=Hi(H,I.next_cursor),B=H.latest_message_id,Y={status:R.DataFetchStatus.SUCCEED,direction:r,conversationIdsMap:F,shouldFetchByTimestamp:d,maxLatestReceivedMessageId:!O||O<B?B:O},!d){N.next=98;break}return Q=V.oldestTimestampNano,q=V.latestTimestampNano,N.next=87,(0,Kt.select)((function(e){return e.conversationReducer}));case 87:return W=N.sent,K=W.conversationIds,z=W.persist,N.next=92,(0,Kt.call)(_d,P,K,z,r);case 92:J=N.sent,X=J.persistObj,$=J.resultConversationIds,Y=Object.assign({},Y,{oldestTimestampNano:Q,latestTimestampNano:q,persist:X,conversationIds:$,maxLatestTimestampNano:!E||E<q?q:E}),N.next=118;break;case 98:return Z=[],ee=[],N.next=102,(0,Kt.select)(op);case 102:if(te=N.sent,P.forEach((function(e){!te.includes(e.shop_id)&&ee.push(e.shop_id)})),!ee.length){N.next=108;break}return N.next=107,(0,Kt.call)(Np,{shopIds:ue(new Set(ee))});case 107:Z=N.sent;case 108:return N.next=110,(0,Kt.select)((function(e){return e.conversationReducer}));case 110:return re=N.sent,ne=re.conversationIds,oe=re.persist,N.next=115,(0,Kt.call)(_d,P,ne,oe,r,Z);case 115:ae=N.sent,ce=P[x-1].latest_message_id,Y=Object.assign({},Y,{hasMore:!0,conversationIdsMap:F,persist:ae.persistObj,oldestReceivedMessageId:ce,latestReceivedMessageId:B,conversationIds:ae.resultConversationIds});case 118:if(!l){N.next=130;break}if(!C||!F[C]){N.next=130;break}return se=P.find((function(e){return e.id===C})),ie=(se||{}).latest_message_id,N.next=124,(0,Kt.select)(p_);case 124:if(de=N.sent,le=de.length?de[de.length-1].id:"",ie===le){N.next=130;break}return N.next=130,Mo().put(jo().fetchMessagesRequested({payload:{conversationId:null==se?void 0:se.id,reset:!0},isLazy:!0}));case 130:return N.next=132,(0,Kt.put)(Ks(Y));case 132:return N.next=134,(0,Kt.spawn)(Ad,P);case 134:if(!a){N.next=147;break}if(!d){N.next=143;break}if("0"===V.nextTimestampNano){N.next=141;break}return N.next=139,(0,Kt.put)(Ws({direction:r,noPending:!0}));case 139:N.next=141;break;case 141:N.next=145;break;case 143:return N.next=145,(0,Kt.put)(Ws({direction:r,noPending:!0}));case 145:N.next=150;break;case 147:if(!(Y.conversationIds.length<=20)){N.next=150;break}return N.next=150,(0,Kt.put)(Ws({direction:"older",noPending:!0}));case 150:N.next=154;break;case 152:return N.next=154,(0,Kt.put)(Ks({direction:r,status:R.DataFetchStatus.SUCCEED,hasMore:a,persist:T,oldestReceivedMessageId:S,latestReceivedMessageId:h,maxLatestReceivedMessageId:O,oldestTimestampNano:f,latestTimestampNano:_,maxLatestTimestampNano:E,shouldFetchByTimestamp:d,syncFetchException:l?b+1:0}));case 154:N.next=159;break;case 156:if(g===R.DataFetchStatus.INIT_FAILED){N.next=159;break}return N.next=159,(0,Kt.put)(zs({status:R.DataFetchStatus.SUCCEED}));case 159:N.next=170;break;case 161:if(N.prev=161,N.t0=N.catch(35),!(N.t0 instanceof $e||N.t0 instanceof Le)){N.next=168;break}return N.next=166,(0,Kt.put)(zs({status:R.DataFetchStatus.TEMPORY_ERROR}));case 166:N.next=170;break;case 168:return N.next=170,(0,Kt.put)(zs({status:D?R.DataFetchStatus.INIT_FAILED:R.DataFetchStatus.FAILED}));case 170:case"end":return N.stop()}}),Od,null,[[35,161]])}function Nd(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.payload.conversationIds,r=void 0===t?[]:t,c.prev=1,r.length){c.next=6;break}return c.next=5,(0,Kt.select)(us);case 5:r=c.sent;case 6:if(!r.length){c.next=16;break}return c.next=9,(0,Kt.call)(Dd,r.slice(0,20));case 9:if(n=c.sent,!(o=n.filter((function(e){return!e.lack}))).length){c.next=16;break}return a={},o.forEach((function(e){a[e.id]=e})),c.next=16,(0,Kt.put)(Dr({name:"conversations",records:a}));case 16:c.next=20;break;case 18:c.prev=18,c.t0=c.catch(1);case 20:case"end":return c.stop()}}),vd,null,[[1,18]])}function xd(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.shopId,n=t.buyerId,c.prev=1,c.next=4,(0,Kt.call)(it,{parent:"offer",resource:"count",params:{shop_id:r,buyer_id:n}});case 4:return o=c.sent,a=o.pending_count,c.next=8,(0,Kt.put)(yi({shopId:r,buyerId:n,count:a}));case 8:c.next=14;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,(0,Kt.put)(yi({shopId:r,buyerId:n,count:0}));case 14:case"end":return c.stop()}}),Td,null,[[1,10]])}function kd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Ws,wd);case 2:return e.next=4,(0,Kt.takeEvery)(ui,Nd);case 4:return e.next=6,(0,Kt.takeEvery)(bi,xd);case 6:case"end":return e.stop()}}),md)}const Ud=(e(ld={},Yc.FETCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.conversationIds,o=r.conversationIdsMap,a=void 0===o?{}:o,c=r.oldestReceivedMessageId,s=r.latestReceivedMessageId,i=r.direction,u=void 0===i?"reset":i,d=r.status,l=r.hasMore,p=r.oldestTimestampNano,f=r.latestTimestampNano,_=r.persist,E=r.shouldFetchByTimestamp,S=r.maxLatestReceivedMessageId,h=r.maxLatestTimestampNano,O=r.syncFetchException,v=void 0===O?0:O,T=bd(bd({},e),{},{status:d,hasMore:l,persist:_,conversationIds:n||e.conversationIds,conversationIdsMap:"reset"===u?a:bd(bd({},e.conversationIdsMap),a),direction:"latest"===u?u:"older",maxLatestReceivedMessageId:S,maxLatestTimestampNano:h,syncFetchException:v});switch(u){case"reset":E?(T.latestTimestampNano=f,T.oldestTimestampNano=p):(T.oldestReceivedMessageId=c,T.latestReceivedMessageId=s);break;case"latest":E?T.latestTimestampNano=f>e.latestTimestampNano?f:e.latestTimestampNano:T.latestReceivedMessageId=s;break;case"older":E?T.oldestTimestampNano=p:T.oldestReceivedMessageId=c}return T})),e(ld,Yc.UPDATE_FETCH_CONVERSATIONS_STATUS,(function(e,t){var r=t.payload.status;return wi(wi({},e),{},{status:r})})),e(ld,Yc.UPDATE_FETCH_CONVERSATIONS_DIRECTION,(function(e,t){var r=t.payload.direction;return wi(wi({},e),{},{direction:r})})),e(ld,Yc.UPDATE_CONVERSATION_TIMESTAMP,(function(e,t){var r=t.payload,n=r.latestTimestampNano,o=r.oldestTimestampNano;return bd(bd({},e),{},{latestTimestampNano:n,oldestTimestampNano:o})})),e(ld,Yc.GET_PENDING_OFFERS_COUNT_SUCCEED,(function(t,r){var n=r.payload,o=n.shopId,a=n.buyerId,c=n.count,s="".concat(o,"_").concat(a);return bd(bd({},t),{},{pendingOffersCount:bd(bd({},t.pendingOffersCount),{},e({},s,c))})})),e(ld,Yc.GET_BATCH_PENDING_OFFERS_COUNT_SUCCEED,(function(e,t){var r=t.payload.records;return bd(bd({},e),{},{pendingOffersCount:bd(bd({},e.pendingOffersCount),r)})})),ld),Md=e({},Yc.SET_CURRENT_CONVERSATION_CAN_READ,(function(e,t){var r=t.payload.canRead;return wi(wi({},e),{},{currentConversationCanRead:r})}));var Ld,jd=N().mark(Vd),Gd=N().mark(Bd);function Fd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hd(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fd(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fd(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Vd(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.conversationId,n=t.isRead,o=t.latestMessageId,v.prev=1,a=Date.now()+"",c=n?"read":"unread",v.next=6,(0,Kt.select)(bs(r));case 6:if(s=v.sent,i=s.shop_id,u=s.last_read_message_id,!n){v.next=16;break}return v.next=12,(0,Kt.select)(bs(r));case 12:if(d=v.sent,l=d.unread_count,u!==o||l){v.next=16;break}return v.abrupt("return");case 16:if(p=n?{last_read_message_id:o}:{},i&&(p.shop_id=i),!n){v.next=21;break}return v.next=21,(0,Kt.put)(ti({requestId:a}));case 21:return v.next=23,(0,Kt.call)(it,{method:"PUT",parent:"conversations",parentId:r,resource:c,params:{request_id:a},payload:JSON.stringify(Hd({},p))});case 23:if(!n){v.next=41;break}return v.next=26,(0,Kt.select)((function(e){return e.conversationReducer}));case 26:return f=v.sent,_=f.conversationMark,E="socket"===_[r],v.next=31,(0,Kt.put)(ei({conversationId:r,markType:E?"":"api"}));case 31:if(E){v.next=41;break}return v.next=34,(0,Kt.select)(bs(r));case 34:return S=v.sent,h=S.unread_count,O=S.shop_id,v.next=39,(0,Kt.put)(Rr({name:"conversations",id:r,record:{last_read_message_id:o,unread_count:0}}));case 39:return v.next=41,(0,Kt.put)(rn({type:Kr.MARK_AS_READ,conversation:{id:r,shop_id:O,unread_count:h}}));case 41:v.next=47;break;case 43:return v.prev=43,v.t0=v.catch(1),v.next=47,(0,Kt.put)(zp({error:v.t0}));case 47:case"end":return v.stop()}}),jd,null,[[1,43]])}function Bd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Zs,Vd);case 2:case"end":return e.stop()}}),Gd)}const Yd=(e(Ld={},Yc.MARK_MESSAGES_SUCCEEDED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.markType;return Hd(Hd({},t),{},{conversationMark:Hd(Hd({},t.conversationMark),{},e({},o,a))})})),e(Ld,Yc.UPDATE_READ_REQUEST_DATA,(function(e,t){var r=t.payload,n=r.requestId,o=r.requestIds,a=r.count,c=Hd({},e);return n&&(c.readRequestIds=[n].concat(e.readRequestIds)),o&&(c.readRequestIds=o),a&&(c.missedReadNoticeCount=a),c})),Ld);var Qd,qd=N().mark(Kd),Wd=N().mark(zd);function Kd(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.conversationId,a.prev=1,a.next=5,(0,Kt.select)(Yn);case 5:if(!a.sent){a.next=10;break}return a.next=10,(0,Kt.put)(Wv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 10:return a.next=12,(0,Kt.select)(bs(t));case 12:return r=a.sent,n=r.shop_id,o=r.status,a.next=17,(0,Kt.call)(it,{method:"PUT",resource:"conversations",id:t,suffix:"status",payload:JSON.stringify({shop_id:n,status:Qd[o]})});case 17:a.next=23;break;case 19:return a.prev=19,a.t0=a.catch(1),a.next=23,(0,Kt.put)(zp({error:a.t0}));case 23:case"end":return a.stop()}}),qd,null,[[1,19]])}function zd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(ii,Kd);case 2:case"end":return e.stop()}}),Wd)}!function(e){e.activated="closed",e.closed="activated"}(Qd||(Qd={}));var Jd=N().mark($d),Xd=N().mark(Zd);function $d(e){var t,r,n,o,a,c,s,i,u,d,l,p,f;return N().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=e.payload.conversationId,_.prev=1,_.next=4,(0,Kt.select)(bs(t));case 4:return r=_.sent,n=r.id,o=r.unread_count,a=r.shop_id,_.next=8,(0,Kt.select)(es);case 8:return c=_.sent,_.next=11,(0,Kt.call)(it,{resource:"conversations",id:t,params:{shop_id:a}});case 11:if(s=_.sent,i=s.flag,u=s.entry_point,d=s.unread_count,l=s.latest_message_id,n){_.next=19;break}return p=T("conversations",s),f=p.entities,_.next=17,(0,Kt.put)(yr({entities:f}));case 17:_.next=21;break;case 19:return _.next=21,(0,Kt.put)(Rr({name:"conversations",id:t,record:{flag:i,entry_point:u,unread_count:d}}));case 21:if(o||o===s.unread_count){_.next=24;break}return _.next=24,(0,Kt.put)(rn({conversation:s,type:Kr.ACTIVE_CONVERSATION}));case 24:if(t!==c){_.next=28;break}if(!(d>0)){_.next=28;break}return _.next=28,(0,Kt.put)(Zs({conversationId:t,isRead:!0,latestMessageId:l}));case 28:return _.abrupt("return",s);case 31:return _.prev=31,_.t0=_.catch(1),_.abrupt("return",{});case 34:case"end":return _.stop()}}),Jd,null,[[1,31]])}function Zd(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Qs,$d);case 2:case"end":return e.stop()}}),Xd)}function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?el(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):el(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const rl=e({},Yc.FAKE_CONVERSATION_SUCCEEDED,(function(e,t){var r=t.payload.conversationId;return tl(tl({},e),{},{conversationIds:[r].concat(e.conversationIds.filter((function(e){return r!==e})))})}));var nl=N().mark(il),ol=N().mark(ul);function al(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?al(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sl={restart:ii,delete:Bs,read:Zs,unread:Zs,pin:ri,unpin:ri,mute:gi,unmute:gi};function il(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,r=t.type,n=t.extra,o=sl[r],a.next=4,(0,Kt.put)(o(cl({},n)));case 4:case"end":return a.stop()}}),nl)}function ul(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(di,il);case 2:case"end":return e.stop()}}),ol)}function dl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ll(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?dl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}sl.close=ii;var pl={hasSCAccess:"login_sellercenter",hasEditOrderAccess:"webchat_order_edit",hasViewOrderAccess:"access_my_sale",hasViewProductAccess:"access_my_product",hasEditVoucherAccess:"my_marketing_voucher_edit",hasViewVoucherAccess:"my_marketing_voucher_access"},fl=function(e){var t={},r=e.length;return Object.keys(pl).forEach((function(n){t[n]=!r||e.includes(pl[n])})),t};const _l=e({},Yc.UPDATE_ACCESS,(function(e,t){var r=fl(t.payload.access);return ll(ll({},e),{},{access:r})}));var El=["combine","user","orderId","message","agent","agentMessage"];function Sl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ol=N().mark(vl);function vl(){var e,t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,(0,Kt.select)(Zc);case 2:return e=i.sent,i.prev=3,i.next=6,(0,Kt.call)(it,{subServer:"coreapi",parent:"conversation",resource:"updated_conversation_list",params:{last_update_time:e}});case 6:if(t=i.sent,r=t.conversations,n=t.page_result,!(r.length>0)){i.next=13;break}return o={},r.forEach((function(e){o[e.id]=e})),i.next=13,(0,Kt.put)(Dr({name:"conversations",records:o}));case 13:if(c=(a=n||{}).has_more,!(s=a.next_last_update_time)){i.next=17;break}return i.next=17,(0,Kt.put)(Si({timeNow:s}));case 17:if(!(c&&r.length>0)){i.next=20;break}return i.next=20,(0,Kt.call)(vl);case 20:i.next=29;break;case 22:if(i.prev=22,i.t0=i.catch(3),!(i.t0 instanceof Ve)){i.next=29;break}return i.next=27,(0,Kt.put)(Si({timeNow:"0"}));case 27:return i.next=29,(0,Kt.call)(wd,{payload:{direction:"reset"}});case 29:case"end":return i.stop()}}),Ol,null,[[3,22]])}const Tl=e({},Yc.UPDATE_SYNC_TIME_NOW,(function(e,t){var r=t.payload.timeNow;return hl(hl({},e),{},{updateTimeNow:r})}));var ml,gl,bl=N().mark(Rl),yl=N().mark(Cl);function Rl(e){var t,r,n,o,a,c,s;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.conversationId,i.prev=1,i.next=4,(0,Kt.select)(bs(t));case 4:return r=i.sent,n=r.shop_id,o=r.mute,i.next=9,(0,Kt.select)(An);case 9:return a=i.sent,c={biz_type:a?2:0},n&&(c.shop_id=n),s={method:"PUT",parent:"conversations",parentId:t,resource:o?"unmute":"mute",payload:JSON.stringify(c)},i.next=15,(0,Kt.call)(it,s);case 15:i.next=21;break;case 17:return i.prev=17,i.t0=i.catch(1),i.next=21,(0,Kt.put)(zp({error:i.t0}));case 21:case"end":return i.stop()}}),bl,null,[[1,17]])}function Cl(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(gi,Rl);case 2:case"end":return e.stop()}}),yl)}var Dl=N().mark(Ul),Pl=N().mark(Ml);function Il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Al(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Il(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var wl=(0,tt.createActions)((e(ml={},Yc.SEARCH_CONVERSATIONS_REQUESTED,(function(e){var t=e.keyword,r=void 0===t?"":t,n=e.shopId;return{keyword:r,shopId:void 0===n?"":n}})),e(ml,Yc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e){return{results:e.results,searchStatus:e.searchStatus}})),e(ml,Yc.UPDATE_SEARCH_PARAMS,(function(e){var t=e.keyword;return{keyword:void 0===t?"":t,searchStatus:e.searchStatus}})),ml)),Nl=wl.searchConversationsRequested,xl=wl.searchConversationsSucceeded,kl=wl.updateSearchParams;function Ul(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.keyword,r=[],n=t.trim(),s.next=5,(0,Kt.put)(kl({keyword:n,searchStatus:R.DataFetchStatus.INIT_PENDING}));case 5:if(!n){s.next=15;break}return o=n.toLocaleLowerCase(),s.next=9,(0,Kt.select)((function(e){return e.entityReducer}));case 9:return a=s.sent,c=a.shops,s.next=13,(0,Kt.select)(os);case 13:s.sent.forEach((function(e){(e.to_name||"").toLocaleLowerCase().includes(o)&&!e.faking&&r.push(Al(Al({},e),{},{shop_name:(c[e.shop_id]||{}).name}))}));case 15:return s.next=17,(0,Kt.put)(xl({results:r,searchStatus:R.DataFetchStatus.SUCCEED}));case 17:case"end":return s.stop()}}),Dl)}function Ml(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeLatest)(Nl,Ul);case 2:case"end":return e.stop()}}),Pl)}const Ll=(e(gl={},Yc.SEARCH_CONVERSATIONS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.results,o=r.searchStatus;return Al(Al({},e),{},{results:n,searchStatus:o})})),e(gl,Yc.UPDATE_SEARCH_PARAMS,(function(e,t){var r=t.payload,n=r.keyword,o=r.searchStatus;return Al(Al({},e),{},{keyword:n,searchStatus:o})})),gl);var jl,Gl=I(439).t;function Fl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Fl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Vl=N().mark(Ql),Bl=N().mark(ql);function Yl(e,t){return it({parent:"conversation",resource:"conversation_info",params:{shop_id:t,message_id:e}})}function Ql(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O;return N().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload,r=t.msgId,n=t.shopId,v.next=3,(0,Kt.select)(p_);case 3:return o=v.sent,a={},c=o.find((function(e){return e.id===r})),v.next=8,(0,Kt.put)(Ei({inlocation:!0}));case 8:if(!c){v.next=16;break}return s=c.conversation_id,v.next=12,(0,Kt.select)(bs(s));case 12:return a=v.sent,v.next=15,(0,Kt.call)(cu,{payload:{conversation:a,messageId:r,messageList:[]}});case 15:MT.emit("scrollToMessage",r);case 16:if(a.id){v.next=58;break}return v.prev=17,v.next=20,(0,Kt.all)([(0,Kt.call)(Yl,r,n),Mo().call(jo().fetchConversationMessagesSaga({payload:{msgId:r,shopId:n}}))]);case 20:if(i=v.sent,u=y(i,2),d=u[0],l=u[1],p=(d||{}).conversation_info,f=void 0===p?[]:p,_=(l||{}).get_messages,0!==(E=void 0===_?[]:_).length&&E.find((function(e){return e.id===r}))){v.next=28;break}throw new Error("message_not_found");case 28:if(!(a=f[0])){v.next=39;break}return S=T("conversations",a),h=S.entities,v.next=33,Mo().put(jo().deleteConversationMessageHash({payload:{conversationId:a.id}}));case 33:return v.next=35,(0,Kt.put)(yr({entities:h}));case 35:return v.next=37,(0,Kt.delay)(300);case 37:return v.next=39,(0,Kt.call)(cu,{payload:{conversation:a,messageId:r,messageList:E}});case 39:v.next=58;break;case 41:v.prev=41,v.t0=v.catch(17),O=Gl("common.server_error.warning_tips"),v.t1=v.t0.message,v.next="message_not_found"===v.t1?47:"conversation_not_found"===v.t1?49:55;break;case 47:return O=Gl("message.server_error.not_found"),v.abrupt("break",56);case 49:return O=Gl("conversation.server_error.deleted"),v.next=52,(0,Kt.put)(mi({conversationBeenDeleted:!0}));case 52:return v.next=54,(0,Kt.put)(ci());case 54:case 55:return v.abrupt("break",56);case 56:return v.next=58,(0,Kt.call)(tf,zp({toast:{show:!0,type:"fail",message:O}}));case 58:case"end":return v.stop()}}),Vl,null,[[17,41]])}function ql(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeLatest)(_i,Ql);case 2:case"end":return e.stop()}}),Bl)}const Wl=(e(jl={},Yc.UPDATE_LOCATION_MODE,(function(e,t){var r=t.payload.inlocation;return Hl(Hl({},e),{},{inlocation:r})})),e(jl,Yc.SET_CONVERSATION_BEEN_DELETED,(function(e,t){var r=t.payload.conversationBeenDeleted;return Hl(Hl({},e),{},{conversationBeenDeleted:r})})),jl);function Kl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zl(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Kl(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Kl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Jl,Xl,$l,Zl,ep=[Ji,iu,Ii,Bd,zd,kd,Zd,ul,Cl,Ml,ql],tp=(Jl={},El.forEach((function(e){Jl[e]={pageIndex:1,pageSize:20,hasMore:!0,nextOffset:"0"}})),Xl={},El.forEach((function(e){Xl[e]={status:"",results:[],total:0}})),{conversationIds:[],conversationIdsMap:{},maxLatestTimestampNano:"",latestTimestampNano:"",oldestTimestampNano:"",oldestReceivedMessageId:"",latestReceivedMessageId:"",maxLatestReceivedMessageId:"",currentConversationId:null,currentConversationCanRead:!0,filter:"All",keyword:"",draftHash:{},status:"",hasMore:!0,persist:null,results:[],direction:"",searchStatus:"",inlocation:!1,conversationBeenDeleted:!1,syncFetchException:0,conversationMark:{},readRequestIds:[],missedReadNoticeCount:0,access:fl([]),updateTimeNow:"0",isNavigateToUnreadMessage:!1,navigateToUnreadMessageId:"",pendingOffersCount:{}}),rp=(0,tt.handleActions)(zl(zl(zl(zl(zl(zl(zl(zl(zl(zl(zl({},Xi),uu),du),Md),Ud),rl),Yd),_l),Ll),Wl),Tl),tp),np=function(e){return(0,er.createSelector)(_r,(function(r){return(0,t.denormalize)(e,p,{shops:r})}))},op=function(e){return e.shopReducer.fetchedShopIds},ap=(0,er.createSelector)(_s,_r,(function(e,r){return(0,t.denormalize)(e.shop_id,p,{shops:r})||{}})),cp=(0,er.createSelector)(Ps,rr,(function(e,r){return(0,t.denormalize)(e,p,r)||{}}));!function(e){e.FETCH_SHOPS_REQUESTED="FETCH_SHOPS_REQUESTED",e.FETCH_SHOPS_SUCCEED="FETCH_SHOPS_SUCCEED",e.UPDATE_FETCH_SHOPS_STATUS="UPDATE_FETCH_SHOPS_STATUS",e.FETCH_SHOP_AUTH_REQUESTED="FETCH_SHOP_AUTH_REQUESTED",e.UPDATE_FETCHED_SHOP_IDS="UPDATE_FETCHED_SHOP_IDS",e.UPDATE_SHOP_FILTER="UPDATE_SHOP_FILTER",e.VISIT_SHOP_SELLER_CENTER_REQUESTED="VISIT_SHOP_SELLER_CENTER_REQUESTED",e.VISIT_MALL_REQUESTED="VISIT_MALL_REQUESTED",e.SEARCH_SHOPS_REQUESTED="SEARCH_SHOPS_REQUESTED",e.SEARCH_SHOPS_SUCCEED="SEARCH_SHOPS_SUCCEED",e.UPDATE_SEARCH_SHOPS_STATUS="UPDATE_SEARCH_SHOPS_STATUS",e.FETCH_SHOP_DETAIL_INFO="FETCH_SHOP_DETAIL_INFO",e.UPDATE_CURRENT_FETCH_SHOP_IDS="UPDATE_CURRENT_FETCH_SHOP_IDS",e.RESET_CURRENT_FETCH_SHOPS="RESET_CURRENT_FETCH_SHOPS"}($l||($l={}));var sp=(0,tt.createActions)((e(Zl={},$l.FETCH_SHOPS_REQUESTED,(function(){return{}})),e(Zl,$l.FETCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result}})),e(Zl,$l.UPDATE_FETCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Zl,$l.FETCH_SHOP_AUTH_REQUESTED,(function(e){return{shopId:e.shopId}})),e(Zl,$l.UPDATE_FETCHED_SHOP_IDS,(function(e){return{shopIds:e.shopIds}})),e(Zl,$l.UPDATE_SHOP_FILTER,(function(e){return{filter:e.filter}})),e(Zl,$l.VISIT_SHOP_SELLER_CENTER_REQUESTED,(function(e){return{url:e.url,shopId:e.shopId,orderId:e.orderId,itemId:e.itemId}})),e(Zl,$l.SEARCH_SHOPS_REQUESTED,(function(e){return{keyword:e.keyword}})),e(Zl,$l.SEARCH_SHOPS_SUCCEED,(function(e){return{pagination:e.pagination,result:e.result,keyword:e.keyword}})),e(Zl,$l.UPDATE_SEARCH_SHOPS_STATUS,(function(e){return{status:e.status}})),e(Zl,$l.FETCH_SHOP_DETAIL_INFO,(function(e){return{shopId:e.shopId}})),Zl)),ip=sp.fetchShopsRequested,up=(sp.fetchShopsSucceed,sp.updateFetchShopsStatus,sp.fetchShopAuthRequested),dp=sp.updateFetchedShopIds,lp=sp.updateShopFilter,pp=sp.visitShopSellerCenterRequested,fp=sp.searchShopsRequested,_p=(sp.searchShopsSucceed,sp.updateSearchShopsStatus,sp.fetchShopDetailInfo),Ep=N().mark(hp),Sp=N().mark(Op);function hp(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.shopId,a.prev=1,a.next=4,(0,Kt.select)(np(t));case 4:return r=a.sent,a.next=7,(0,Kt.call)(it,{resource:"shop",id:t,params:{need_cache:1,cache_expires:600}});case 7:return r=a.sent,n=T("shops",r),o=n.entities,a.next=11,(0,Kt.put)(yr({entities:o}));case 11:return a.next=13,(0,Kt.put)(dp({shopIds:[r.id]}));case 13:return a.abrupt("return",r);case 16:return a.prev=16,a.t0=a.catch(1),a.abrupt("return",{});case 19:case"end":return a.stop()}}),Ep,null,[[1,16]])}function Op(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(_p,hp);case 2:case"end":return e.stop()}}),Sp)}function vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?vp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const mp=e({},$l.UPDATE_SHOP_FILTER,(function(e,t){var r=t.payload.filter;return Tp(Tp({},e),{},{shopFilter:r})}));var gp,bp=N().mark(Rp),yp=N().mark(Cp);function Rp(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m,g,b,y,C;return N().wrap((function(D){for(;;)switch(D.prev=D.next){case 0:return t=e.payload,r=t.url,n=t.shopId,o=t.orderId,a=t.itemId,D.prev=1,D.next=4,(0,Kt.call)(it,{resource:"shop",id:n,suffix:"sc"});case 4:if(c=D.sent,s=c.sc_url,i=c.upgraded,u=c.region,!i){D.next=12;break}return d=window.open(),r?((l=r.split("/"))[2]=(0,R.getSellerCenterUrl)(u),p=l.join("/"),d.location=p.includes("?")?"".concat(p,"&cnsc_shop_id=").concat(n):"".concat(p,"?cnsc_shop_id=").concat(n)):d.location=o?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/sale/").concat(o,"?cnsc_shop_id=").concat(n):a?"https://".concat((0,R.getSellerCenterUrl)(u),"/portal/product/").concat(a,"?cnsc_shop_id=").concat(n):"https://".concat((0,R.getSellerCenterUrl)(u),"?cnsc_shop_id=").concat(n),D.abrupt("return");case 12:if(!s){D.next=25;break}if(f=s.split("?"),_=f[1].split("&").find((function(e){return e.startsWith("sig=")})),E=_.substring(4),S=f[0].split("."),h=S[S.length-1],O=window.open(),!r){D.next=22;break}return O.location=r.includes("?")?"".concat(r,"&sig=").concat(E):"".concat(r,"?sig=").concat(E),D.abrupt("return");case 22:o||a?o?(v="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/sale/").concat(o,"?sig=").concat(E),O.location=v):a&&(T="https://".concat((0,R.getSellerCenterUrl)(h),"/portal/product/").concat(a,"?sig=").concat(E),O.location=T):(m="https://".concat((0,R.getSellerCenterUrl)(h),"?sig=").concat(E),O.location=m),D.next=28;break;case 25:return g=qp(!1,{type:"permission-denied"}),D.next=28,(0,Kt.put)(zp({toast:g}));case 28:D.next=38;break;case 30:return D.prev=30,D.t0=D.catch(1),D.next=34,(0,Kt.select)(np(n));case 34:b=D.sent,y="https://".concat((0,R.getSellerCenterUrl)(b.country),"/portal/"),C=o?"sale/".concat(o):a?"product/".concat(a):"",window.open(y+C);case 38:case"end":return D.stop()}}),bp,null,[[1,30]])}function Cp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(pp,Rp);case 2:case"end":return e.stop()}}),yp)}function Dp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Dp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ip=N().mark(xp),Ap=N().mark(kp),wp=function(e){return new Promise((function(t){it({parent:"conversation",resource:"unread-counts",params:{shop_ids:JSON.stringify(e)}}).then((function(e){var r=e["unread-counts"];t(void 0===r?[]:r)})).catch((function(){t([])}))}))},Np=function(e){var t=e.shopIds,r={ids:JSON.stringify(t)};return new Promise((function(e){it({resource:"shops",params:r}).then((function(t){var r=t.shops;e(void 0===r?[]:r)})).catch((function(){e([])}))}))};function xp(e){var t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.shopId,n.prev=1,n.next=4,(0,Kt.call)(it,{parent:"shop",parentId:t,resource:"auth"});case 4:return r=n.sent,n.abrupt("return",r);case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",{});case 11:case"end":return n.stop()}}),Ip,null,[[1,8]])}function kp(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(up,xp);case 2:case"end":return e.stop()}}),Ap)}const Up=(e(gp={},$l.FETCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result;return Pp(Pp({},e),{},{fetchResult:Pp(Pp({},e.fetchResult),{},{pagination:n,result:o})})})),e(gp,$l.SEARCH_SHOPS_SUCCEED,(function(e,t){var r=t.payload,n=r.pagination,o=r.result,a=r.keyword;return Pp(Pp({},e),{},{searchResult:Pp(Pp({},e.searchResult),{},{pagination:n,result:o,keyword:a})})})),e(gp,$l.UPDATE_FETCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Pp(Pp({},e),{},{status:r})})),e(gp,$l.UPDATE_SEARCH_SHOPS_STATUS,(function(e,t){var r=t.payload.status;return Pp(Pp({},e),{},{searchStatus:r})})),e(gp,$l.UPDATE_FETCHED_SHOP_IDS,(function(e,t){var r=t.payload.shopIds,n=e.fetchedShopIds;return Pp(Pp({},e),{},{fetchedShopIds:ue(new Set(n.concat(r)))})})),gp);function Mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lp(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Mp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var jp,Gp,Fp={currentPage:0,perPage:20,hasMore:!0},Hp=[Op,kp,Cp],Vp={shopFilter:null,fetchedShopIds:[],fetchResult:{pagination:Lp({},Fp),result:[]},status:"",searchResult:{pagination:Lp({},Fp),result:[],keyword:""},searchStatus:""},Bp=(0,tt.handleActions)(Lp(Lp({},mp),Up),Vp),Yp=function(e){return e.toastReducer.toast},Qp=I(439).t,qp=function(e,t){var r={};if(t){switch(t.type){case"auto-reply":e?t.first&&"enabled"===t.action?(r.message=Qp("settings.enable_auto_reply_successfully"),r.show=!0):(r.message="",r.show=!1):(t.first&&"enabled"===t.action?r.message=Qp("settings.failed_to_enable_auto_reply"):r.message="enabled"===t.action?Qp("settings.failed_to_enable"):Qp("settings.failed_to_disable"),r.show=!0);break;case"message":r.message=e?"save"===t.action?Qp("settings.message.save_successfully"):"delete"===t.action?Qp("settings.message.delete_successfully"):Qp("settings.message.import_successfully"):"save"===t.action?Qp("settings.message.failed_to_save"):"delete"===t.action?Qp("settings.message.failed_to_delete"):Qp("settings.message.failed_to_import"),r.show=!0;break;case"message-tips":e?(r.message="",r.show=!1):(r.message="enabled"===t.action?Qp("settings.failed_to_enable"):Qp("settings.failed_to_disable"),r.show=!0);break;case"forward":e||(r.message=403===t.status?Qp("forward.exception",{forwardName:""}):Qp("forward.server_error"),r.show=!0);break;case"send-feedback":r.message=Qp("feedback_modal.error.failed_to_send"),r.show=!0;break;case"server-error-tips":r.message=Qp("common.server_error.warning_tips"),r.show=!0;break;case"conversation-closed-tip":r.message=Qp("conversation_detail.closed.warning_tips"),r.show=!0;break;case"permission-denied":r.message=Qp("common.permission_denied"),r.show=!0;break;case"claim-voucher":r.message=Qp(e?"voucher.claim.success":"voucher.claim.fail"),r.show=!0;break;case"private-image":r.message=Qp("common.image.expired"),r.show=!0;break;case"operation":"save"===t.action&&(r.message=Qp(e?"text.save_successfully":"text.save_failed")),r.show=!0;break;default:r.message=t.message,r.show=!0}r.type=e?"success":"fail"}return r};!function(e){e.COPY_SUCCEED_FEEDBACK="COPY_SUCCEED_FEEDBACK",e.SET_TOAST_INFORMATION="SET_TOAST_INFORMATION",e.SET_TOAST_INFORMATION_SUCCEEDED="SET_TOAST_INFORMATION_SUCCEEDED"}(jp||(jp={}));var Wp=(0,tt.createActions)((e(Gp={},jp.COPY_SUCCEED_FEEDBACK,(function(){return{}})),e(Gp,jp.SET_TOAST_INFORMATION,(function(e){return{type:e.type,error:e.error,toast:e.toast}})),e(Gp,jp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e){return{toast:e.toast}})),Gp)),Kp=Wp.copySucceedFeedback,zp=Wp.setToastInformation,Jp=Wp.setToastInformationSucceeded;function Xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $p(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xp(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xp(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Zp=N().mark(tf),ef=N().mark(rf);function tf(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,r=t.type,n=t.error,o=t.toast,c.next=3,(0,Kt.select)(Hn);case 3:if(!c.sent){c.next=11;break}return a=null,r&&(a=qp(!1,{type:r})),void 0!==n&&(a=n instanceof Ve||n instanceof Qe?n.handler():qp(!1,{type:"server-error-tips"})),o&&(a=o),c.next=11,(0,Kt.put)(Jp({toast:a}));case 11:case"end":return c.stop()}}),Zp)}function rf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(zp,tf);case 2:case"end":return e.stop()}}),ef)}const nf=e({},jp.SET_TOAST_INFORMATION_SUCCEEDED,(function(e,t){var r=t.payload.toast;return $p($p({},e),{},{toast:r})}));var of=I(439).t,af=N().mark(sf),cf=N().mark(uf);function sf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.put)(zp({toast:qp(!0,{message:of("common.successful_copied")})}));case 2:case"end":return e.stop()}}),af)}function uf(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(Kp,sf);case 2:case"end":return e.stop()}}),cf)}function df(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var lf=[rf,uf],pf=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?df(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):df(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},nf),{toast:{type:"",message:"",show:!1}});function ff(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _f(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ff(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ff(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}R.MessageTypes.MSG_TYPE_TEXT;var Ef,Sf,hf=R.MessageTypes.MSG_TYPE_OFFER,Of=R.MessageTypes.MSG_TYPE_ORDER,vf=R.MessageTypes.MSG_TYPE_PRODUCT,Tf=R.MessageTypes.MSG_TYPE_IMAGE,mf=R.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED,gf=R.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,bf=R.MessageTypes.MSG_TYPE_VIDEO,yf=R.MessageTypes.MSG_TYPE_NOTIFICATION,Rf=R.MessageTypes.MSG_TYPE_WEBVIEW,Cf=R.MessageTypes.MSG_TYPE_RATE_CARD,Df=R.MessageTypes.MSG_TYPE_RATE_CARDS,Pf=R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,If=[Of,vf],Af=function(e){return(e.messageReducer||{}).faqHistoryStatus},wf=function(e){return(e.messageReducer||{}).faqHistoryHash},Nf=function(e){return(e.messageReducer||{}).faqId},xf=(0,er.createSelector)(wf,Nf,(function(e,t){return e&&t&&e[t]||{all:[]}})),kf=function(e){return(e.messageReducer||{}).status},Uf=(0,er.createSelector)((function(e){return e}),(function(e){return(e.messageReducer||{}).messagesRelatedMap||{}})),Mf=function(e){return e.messageReducer.offlineMessages},Lf=function(e){var t;return(null===(t=e.messageReducer)||void 0===t?void 0:t.videoMap)||{}},jf=function(e){return(0,er.createSelector)(Lf,(function(t){return JSON.parse(JSON.stringify(t[e]||{}))}))},Gf=function(e){return(0,er.createSelector)(Lf,(function(t){return Object.keys(t).find((function(r){return t[r].vid===e}))}))},Ff=function(e){return(0,er.createSelector)(cr,(function(r){return(0,t.denormalize)(e,c,{messages:r})}))},Hf=function(e){return(0,er.createSelector)(cr,(function(r){return(0,t.denormalize)(e,[c],{messages:r})}))},Vf=(0,er.createSelector)(es,Uf,(function(e,t){return t[e]||{all:[]}})),Bf=function(e){return(0,er.createSelector)(Uf,(function(t){return t[e]||{all:[],sending:[],failed:[]}}))},Yf=function(e){return(e.messageReducer||{}).messageFillStatusMap||{}},Qf=Jm((function(e){return(0,er.createSelector)(Bf(e),bs(e),cr,(function(e,r,n){return function(e,r,n){var o=e.all||[],a=e.sending||[],s=e.failed||[],i=o.length,u=null;if(i){for(var d=0,l=null;d<i&&!l;){var p=e.all[d];(l=(0,t.denormalize)(p,c,{messages:n}))&&(l.type===R.MessageTypes.MSG_TYPE_SECURITY_TIPS||l.isFaking)&&(l=null),d++}l&&l.created_timestamp>Math.floor(r.last_message_time_nano/Math.pow(10,9))&&(u=(0,R.fillMessagePreview)(l))}if(!u){var f=r.latest_message_id,_=r.latest_message_content,E=r.latest_message_type,S=r.last_message_option,h=r.latest_message_source,O=r.last_message_time_nano;(u={id:f,content:_,type:E,message_option:S,source:h,to_shop_id:r.latest_message_to_shop_id}).created_at=new Date(O/1e6)+""}var v=u,T=v.id,m=v.message_option,g=a.includes(T)?R.MessageSendStatus.SENDING:s.includes(T)?R.MessageSendStatus.FAILED:u.send_status?R.MessageSendStatus.SUCCEED:null;return(0,R.hasTargetMessageOption)(m,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(g=R.MessageSendStatus.FAILED,u.type=Qi,u.content={text:Yi("common.blacklist.replaced_text")}),(0,R.hasTargetMessageOption)(m,R.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)&&(g=R.MessageSendStatus.FAILED),u.send_status=g,u}(e,r,n)}))})),qf=(0,er.createSelector)(Vf,(function(e){var t=ue(e.all||[]);return e.securityTipsMessageId&&t.push(e.securityTipsMessageId),t})),Wf=(0,er.createSelector)(Vf,(function(e){return e.sending||[]})),Kf=(0,er.createSelector)(Vf,(function(e){return e.failed||[]})),zf=(0,er.createSelector)(Vf,(function(e){return e.hasMoreOlderMessage})),Jf=(0,er.createSelector)(Vf,(function(e){return e.hasMoreLatestMessage})),Xf=(0,er.createSelector)(Vf,(function(e){return e.hasNext})),$f=function(e){return e.messageReducer.entryPoint},Zf=function(e){return e.messageReducer.toBottomHasConflict},e_=(0,er.createSelector)(cr,qf,(function(e,r){return((0,t.denormalize)(r,[c],{messages:e})||[]).filter(Boolean)})),t_=function(e){return(0,er.createSelector)(Bf(e),cr,(function(e,r){return((0,t.denormalize)(e.all,[c],{messages:r})||[]).filter((function(e){return null==e?void 0:e.isFaking}))}))},r_=(0,er.createSelector)(e_,(function(e){return e.reverse()})),n_=(0,er.createSelector)(r_,_s,(function(e,t){var r=0,n=[];return e.forEach((function(e,o){var a=(0,R.getMessageIsSend)(e,t);e.warning&&!a&&(o-r<10&&n.pop(),n.push(e.id),r=o)})),n})),o_=(0,er.createSelector)(_s,r_,(function(e,t){if(!e)return[];var r=e.last_read_message_id;return t.filter((function(t){var n=(0,R.getMessageIsSend)(t,e);return t&&!n&&(0,R.greaterThan)(t.id,r)&&t.type!==yf}))})),a_=(0,er.createSelector)(rr,xf,(function(e,r){var n=r.all;return(0,t.denormalize)(n,[c],e)})),c_=(0,er.createSelector)(a_,r_,(function(e,t){return(e&&e.length?e:t).filter((function(e){var t=(e||{}).type;return!(0,R.isDeletedMessage)(e)&&[Tf,bf,Pf].includes(t)}))})),s_=(0,er.createSelector)(c_,_s,Ss,Pn,Cs,(function(e,t,r,n,o){var a=r&&r.country||"sg",c=(0,R.getVideoServer)(a);return e.map((function(e){var r="",a=!1,s=(0,R.getMessageIsSend)(e,t);switch(e.type){case Tf:var i=e.content;r=1!==i.file_server_id&&i.url_hash?"".concat((0,R.getFileServer)()).concat(i.url_hash):i.url||i.localUrl,a=i.unknown_qr_code&&!s;break;case bf:var u=e.content;r=u.video_url?"".concat(c).concat(u.video_url):u.localVideoUrl;break;case Pf:var d=e.content;r=d.thumb_url?"".concat((0,R.getFileServer)()).concat(d.thumb_url):d.image_url}var l=e.id,p=e.type,f=e.request_id,_=e.content;return{type:p,id:l,url:r,unknownQrCode:a,trackerData:{shopid:o,account_type:n.role||"shopee_user",message_id:l===f?0:l,conversation_id:t.id,account_id:n.id,is_sender:s,video_original_duration:_.duration_seconds}}}))})),i_=(0,er.createSelector)(o_,(function(e){return e.length?e.map((function(e){return e.id})):[]})),u_=(0,er.createSelector)(_s,r_,(function(e,t){return e?t.filter(Boolean).reduce((function(e,t){var r=t.type,n=t.source_type,o=t.source_content,a=t.content;if(!n||r===hf||[-1,0].includes(o["".concat(n,"_id")]))return e;if(If.includes(r)&&o){var c="".concat(r,"_id");if(a[c]===o[c])return e}var s=e.lastSourceMessage,i=e.sourceList;if(!i.length)return{sourceList:i.concat(t),lastSourceMessage:t};if(n===vf){var u=null==o?void 0:o.product_id,d=s.source_content&&s.source_content.product_id;if(!u||d===u)return e}else if(n===Of){var l=null==o?void 0:o.order_id,p=s.source_content&&s.source_content.order_id;if(!l||[-1,0,p].includes(l))return e}return{sourceList:i.concat(t),lastSourceMessage:t}}),{sourceList:[],lastSourceMessage:null}).sourceList:[]})),d_=(0,er.createSelector)(u_,(function(e){return e.map((function(e){return e.id}))})),l_=(0,er.createSelector)(rr,e_,(function(e,r){var n=r.filter((function(e){return e&&e.type===hf})).map((function(e){return e.content.offer_id}));return(0,t.denormalize)(n,[d],e)})),p_=(0,er.createSelector)(r_,d_,Wf,Kf,_s,fr,l_,(function(e,t,r,n,o,a,c){return o?e.filter((function(e){if(!e)return!1;var t=e.content,r=e.type;return!(![mf,gf].includes(r)&&(!t||t&&0===Object.keys(t).length))})).map((function(e){var o=r.includes(e.id)?R.MessageSendStatus.SENDING:n.includes(e.id)?R.MessageSendStatus.FAILED:e.send_status?R.MessageSendStatus.SUCCEED:null,s=t.includes(e.id),i=Object.assign({},e,{send_status:o,hasMessageSource:s}),u=i,d=u.type,l=u.content,p=void 0===l?{}:l,f=u.message_option;switch(d){case hf:var _=c.find((function(e){return e&&e.id===p.offer_id}));i=Object.assign({},i,{textContent:_});break;case Cf:var E=a[p.card_id];E&&(i=Object.assign({},i,{textContent:E}));break;case Rf:var S=p,h=S.type,O=S.id,v=null;h===Df&&(v=a[O]),v&&(i=Object.assign({},i,{textContent:v}))}return(0,R.hasTargetMessageOption)(f,R.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(i=_f(_f({},i),{},{send_status:R.MessageSendStatus.FAILED,errorCode:R.MessageErrorCode.BLACKLIST})),i})):[]})),f_=function(e){return(0,er.createSelector)(fr,(function(r){return(0,t.denormalize)(e,E,{rateCards:r})}))},__=(0,er.createSelector)((function(e){var t;return null==e||null===(t=e.messageReducer)||void 0===t?void 0:t.reply}),(function(e){return e?e.toMessageId:{}})),E_=(0,er.createSelector)(es,__,(function(e,t){return t[e]||""})),S_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.scrollToMessageId},h_=(0,er.createSelector)(E_,cr,(function(e,r){return(0,t.denormalize)(e,c,{messages:r})})),O_=function(e){var t,r;return null===(t=e.messageReducer)||void 0===t||null===(r=t.reply)||void 0===r?void 0:r.inScrollToMessage},v_=function(e){return e.messageShortcutGroupReducer},T_=function(e){return e.messageShortcutGroupReducer&&e.messageShortcutGroupReducer.currentGroupType},m_=(0,er.createSelector)(v_,T_,(function(e,t){return e&&e[t]||{groups:[],status:""}})),g_=(0,er.createSelector)(m_,(function(e){return e.status})),b_=(0,er.createSelector)(m_,(function(e){return e.currentGroupId})),y_=(0,er.createSelector)(m_,(function(e){var t=e.groups,r=void 0===t?[]:t,n=e.currentGroupId,o=(r.find((function(e){return e.id===n}))||{}).message_shortcuts;return void 0===o?[]:o})),R_=(0,er.createSelector)(v_,(function(e){var t=(e&&e[R.MessageShortcutGroupType.PERSONAL]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),C_=(0,er.createSelector)(v_,(function(e){var t=(e&&e[R.MessageShortcutGroupType.TEAM]||{groups:[]}).groups;return(void 0===t?[]:t).reduce((function(e,t){var r=t.message_shortcuts,n=void 0===r?[]:r;return e.concat(n)}),[])})),D_=(0,er.createSelector)(R_,C_,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[].concat(ue(e),ue(t))})),P_=function(e){return e.settingsReducer.settings},I_=function(e){return e.settingsReducer.needForceUpdate},A_=function(e){return e.settingsReducer.status},w_=function(e){return e.settingsReducer.fetchStatus},N_=(0,er.createSelector)(P_,(function(e){return e.auto_translation_status||""})),x_=(0,er.createSelector)(P_,(function(e){return e.show_msg_time||"enabled"})),k_=(0,er.createSelector)(P_,(function(e){return e.message_shortcuts_status||""})),U_=(0,er.createSelector)(P_,(function(e){return e.legacy_message_shortcuts_count||0})),M_=(0,er.createSelector)(P_,(function(e){return e.distribution_account_status||"enabled"}));!function(e){e.FETCH_SETTINGS_REQUESTED="FETCH_SETTINGS_REQUESTED",e.FETCH_SETTINGS_SUCCEEDED="FETCH_SETTINGS_SUCCEEDED",e.FETCH_SETTINGS_STATUS="FETCH_SETTINGS_STATUS",e.UPDATE_SETTING_STATUS="UPDATE_SETTING_STATUS",e.UPDATE_SETTINGS_REQUESTED_BY_TYPE="UPDATE_SETTINGS_REQUESTED_BY_TYPE",e.UPDATE_SETTINGS_REQUESTED="UPDATE_SETTINGS_REQUESTED",e.UPDATE_SETTINGS_SUCCEEDED="UPDATE_SETTINGS_SUCCEEDED"}(Ef||(Ef={}));var L_,j_=(0,tt.createActions)((e(Sf={},Ef.FETCH_SETTINGS_REQUESTED,(function(){return{}})),e(Sf,Ef.FETCH_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,fetchStatus:e.fetchStatus,timestamp:e.timestamp,needForceUpdate:e.needForceUpdate}})),e(Sf,Ef.FETCH_SETTINGS_STATUS,(function(e){return{fetchStatus:e.fetchStatus}})),e(Sf,Ef.UPDATE_SETTING_STATUS,(function(e){return{status:e.status}})),e(Sf,Ef.UPDATE_SETTINGS_REQUESTED_BY_TYPE,(function(e){return e})),e(Sf,Ef.UPDATE_SETTINGS_REQUESTED,(function(e){return{params:e.params}})),e(Sf,Ef.UPDATE_SETTINGS_SUCCEEDED,(function(e){return{settings:e.settings,needForceUpdate:e.needForceUpdate}})),Sf)),G_=j_.fetchSettingsRequested,F_=j_.fetchSettingsSucceeded,H_=j_.fetchSettingsStatus;function V_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function B_(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?V_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):V_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}j_.updateSettingStatus,j_.updateSettingsRequestedByType,j_.updateSettingsRequested,j_.updateSettingsSucceeded;var Y_=N().mark(q_),Q_=N().mark(W_);function q_(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Kt.put)(H_({fetchStatus:R.DataFetchStatus.PENDING}));case 3:return t.next=5,(0,Kt.call)(it,{parent:"user",resource:"setting"});case 5:return e=t.sent,t.next=8,(0,Kt.put)(F_({settings:e,fetchStatus:R.DataFetchStatus.SUCCEED,timestamp:Date.now(),needForceUpdate:!1}));case 8:return t.abrupt("return",e);case 11:return t.prev=11,t.t0=t.catch(0),t.next=15,(0,Kt.put)(H_({fetchStatus:R.DataFetchStatus.FAILED}));case 15:return t.abrupt("return",{});case 16:case"end":return t.stop()}}),Y_,null,[[0,11]])}function W_(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeLatest)([G_],q_);case 2:case"end":return e.stop()}}),Q_)}const K_=(e(L_={},Ef.FETCH_SETTINGS_SUCCEEDED,(function(e,t){var r=t.payload,n=r.settings,o=r.fetchStatus,a=r.timestamp,c=r.needForceUpdate;return B_(B_({},e),{},{settings:n,fetchStatus:o,timestamp:a,needForceUpdate:c})})),e(L_,Ef.FETCH_SETTINGS_STATUS,(function(e,t){var r=t.payload.fetchStatus;return B_(B_({},e),{},{fetchStatus:r})})),L_);function z_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var J_,X_,$_=[W_],Z_=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?z_(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z_(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},K_),{settings:{},fetchStatus:""}),eE={currentPage:0,perPage:20,total:0,hasMore:!0},tE=function(e){return e.offerReducer.status},rE=(0,er.createSelector)(rr,(function(e){return e.offers||{}})),nE=function(e,t,r,n){return(0,er.createSelector)(rE,(function(o){return Object.values(o).filter((function(o){return o.product_id===n&&o.model_id===t&&o.conversation_id===e&&o.id!==r&&o.status===R.OfferStatus.PENDING}))}))},oE=function(e){return(0,er.createSelector)(rr,(function(r){return(0,t.denormalize)(e,d,r)}))},aE=function(e){return e.offerReducer.fetchResult},cE=function(e,t){return(0,er.createSelector)(aE,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:eE,result:[]}}))},sE=(0,er.createSelector)(aE,_s,(function(e,t){var r=t.shop_id,n=t.to_id,o=e["".concat(r,"_").concat(n)];return o?o.pagination:eE})),iE=(0,er.createSelector)(aE,_s,rr,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[d],n).filter((function(e){return e}))})),uE=(0,tt.createActions)({REDUX_RESET:function(){return{}}}).reduxReset;!function(e){e.REMOVE_SINGLE_DRAFT="REMOVE_SINGLE_DRAFT",e.REMOVE_ALL_DRAFT="REMOVE_ALL_DRAFT",e.BATCH_REMOVE_DRAFT="BATCH_REMOVE_DRAFT",e.SAVE_DRAFT="SAVE_DRAFT"}(J_||(J_={}));const dE=(e(X_={},J_.REMOVE_SINGLE_DRAFT,(function(e,t){var r=t.payload.conversationId,n=xi({},e.draftHash);return delete n[r],xi(xi({},e),{},{draftHash:n})})),e(X_,J_.REMOVE_ALL_DRAFT,(function(e){return xi(xi({},e),{},{draftHash:{}})})),e(X_,J_.BATCH_REMOVE_DRAFT,(function(e,t){var r=t.payload.conversationIds,n=void 0===r?[]:r,o=xi({},e.draftHash);return n.forEach((function(e){delete o[e]})),xi(xi({},e),{},{draftHash:o})})),X_),lE=e({},J_.SAVE_DRAFT,(function(e,t){var r=t.payload,n=r.conversationId,o=r.draft,a=xi({},e.draftHash);return a[n]=o,xi(xi({},e),{},{draftHash:a})}));var pE,fE=(0,tt.createActions)((e(pE={},J_.REMOVE_SINGLE_DRAFT,(function(e){return{conversationId:e.conversationId}})),e(pE,J_.REMOVE_ALL_DRAFT,(function(){return{}})),e(pE,J_.BATCH_REMOVE_DRAFT,(function(e){return{conversationIds:e.conversationIds}})),e(pE,J_.SAVE_DRAFT,(function(e){return{conversationId:e.conversationId,draft:e.draft}})),pE)),_E=fE.removeSingleDraft,EE=fE.removeAllDraft,SE=fE.batchRemoveDraft,hE=fE.saveDraft;function OE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?OE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var TE=(0,tt.handleActions)(vE(vE({},lE),dE),{draftHash:{}}),mE=function(e){return e.draftReducer.draftHash},gE=function(e){return(0,er.createSelector)(mE,(function(t){return t[e]}))},bE=(0,er.createSelector)(es,mE,(function(e,t){return e&&t[e]}));function yE(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function RE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function CE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?RE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var DE,PE=function(e,t,r){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=e.exceptionType,a=e.reconnectCount,c=void 0===a?0:a,s=e.exceptionReason,i=void 0===s?"":s,u={status:-1,userId:t,userType:r};if(o===R.SocketConnectionStatus.DISCONNECT){var d=c<=5?"s":c<=10?"m":"l";u=CE(CE({},u),{},{reconnectType:d,exceptionReason:i,exceptionType:o})}else u=CE(CE({},u),{},{exceptionType:o});Ft(Lt[n?"SOCKET_FAILED":"CHATWS_SOCKET_FAILED"],0,u)};!function(e){e.FEEDBACK_REQUESTED="FEEDBACK_REQUESTED",e.FEEDBACK_SUCCEEDED="FEEDBACK_SUCCEEDED",e.UPDATE_RECONNECT_FLAG="UPDATE_RECONNECT_FLAG",e.UPDATE_NOTICES_COUNT="UPDATE_NOTICES_COUNT",e.UPDATE_C_S_SOCKET_STATUS="UPDATE_C_S_SOCKET_STATUS"}(DE||(DE={}));var IE=I(439).t,AE=["type"];function wE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function NE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?wE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var xE,kE,UE=N().mark(jE),ME=N().mark(GE),LE=function(e){return KE({feedback:{status:e,network:!0,content:IE("common.toast.".concat(e))}})};function jE(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.__WEBCHAT_LOGIN__){e.next=19;break}return e.next=3,(0,Kt.select)(An);case 3:if(!e.sent){e.next=19;break}return e.next=7,(0,Kt.select)(Pn);case 7:if("working"!==(e.sent||{}).distribution_status){e.next=19;break}return e.prev=10,e.next=13,(0,Kt.call)(it,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_event",payload:JSON.stringify({event_type:"login"})});case 13:window.__WEBCHAT_LOGIN__=!1,e.next=19;break;case 16:e.prev=16,e.t0=e.catch(10),window.__WEBCHAT_LOGIN__=!1;case 19:case"end":return e.stop()}}),UE,null,[[10,16]])}function GE(e,t){return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=e,r.next=r.t0===R.ShareDataType.UNREAD?3:6;break;case 3:return r.next=5,(0,Kt.put)(nn({count:t.total_unread_count}));case 5:return r.abrupt("break",6);case 6:case"end":return r.stop()}}),ME)}var FE=(0,tt.createActions)(e({},DE.UPDATE_RECONNECT_FLAG,(function(e){return{flag:e.flag}}))).updateReconnectFlag;xE=N().mark((function e(t){var r;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(201!==(r=t.status)){e.next=8;break}return e.next=4,(0,Kt.put)(ca({socketSuccess:!0}));case 4:return e.next=6,(0,Kt.spawn)(jE);case 6:e.next=11;break;case 8:return Ft(Lt.SOCKET_FAILED,0,{status:r}),e.next=11,(0,Kt.put)(ca({socketSuccess:!1}));case 11:case"end":return e.stop()}}),e)})),kE=N().mark((function e(t){var r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,T,m;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.event,n=t.payload,"reportUPLPoint"!==r){e.next=9;break}return e.next=4,(0,R.getItem)("session");case 4:c=e.sent,s=c&&c.user,u=(i=s||{}).id,d=i.type,o=u,a=d;case 9:e.t0=r,e.next=e.t0===R.SocketConnectionStatus.CONNECT?12:e.t0===R.SocketConnectionStatus.DISCONNECT?38:e.t0===R.SocketConnectionStatus.RECONNECT_ERROR?43:e.t0===R.SocketConnectionStatus.RECONNECTING?49:e.t0===R.SocketConnectionStatus.RECONNECT?52:"emit"===e.t0?55:"close"===e.t0?60:"ack"===e.t0?63:"reportUPLPoint"===e.t0?65:"reportConnections"===e.t0?67:"setMainPage"===e.t0?69:"shareApiData"===e.t0?72:76;break;case 12:return e.next=14,(0,Kt.select)(HS);case 14:if(!e.sent){e.next=19;break}return l=1e3*Math.floor(30*Math.random()+1),e.next=19,(0,Kt.delay)(l);case 19:return e.next=21,(0,Kt.put)(zE({feedback:void 0}));case 21:return e.next=23,(0,R.getItem)("mini-session");case 23:if(p=e.sent,f=p&&p.p_token,_=p&&p.user,!f||!_){e.next=33;break}return e.next=29,(0,Kt.call)(X,{token:f,account_id:_.uid});case 29:if(E=e.sent,z){e.next=33;break}return e.next=33,(0,Kt.call)(xE,E);case 33:return e.next=35,(0,Kt.put)(FE({flag:!1}));case 35:return e.next=37,(0,Kt.put)(ca({socketSuccess:!0}));case 37:return e.abrupt("break",76);case 38:return e.next=40,(0,Kt.put)(FE({flag:!0}));case 40:return e.next=42,(0,Kt.put)(LE("error"));case 42:return e.abrupt("break",76);case 43:return e.next=45,(0,Kt.put)(LE("error"));case 45:return Ft(Lt.SOCKET_FAILED,0,{status:-1}),e.next=48,(0,Kt.put)(ca({socketSuccess:!1}));case 48:return e.abrupt("break",76);case 49:return e.next=51,(0,Kt.put)(LE("pending"));case 51:return e.abrupt("break",76);case 52:return e.next=54,(0,Kt.put)(LE("resolved"));case 54:return e.abrupt("break",76);case 55:if(h=(S=n).type,O=S.response,"login"!==h){e.next=59;break}return e.next=59,(0,Kt.call)(xE,O);case 59:return e.abrupt("break",76);case 60:return e.next=62,(0,Kt.call)(Fc,!1);case 62:return e.abrupt("break",76);case 63:return J.dispatch(R.CustomShareEvent.ACK),e.abrupt("break",76);case 65:return PE(n,o,a),e.abrupt("break",76);case 67:return Ft(Lt.SHARED_TABS,n),e.abrupt("break",76);case 69:return e.next=71,(0,Kt.put)(hc({isMainPage:n.isMainPage}));case 71:return e.abrupt("break",76);case 72:return T=(v=n).type,m=yE(v,AE),e.next=75,(0,Kt.call)(GE,T,m);case 75:return e.abrupt("break",76);case 76:case"end":return e.stop()}}),e)}));const HE=e({},DE.UPDATE_RECONNECT_FLAG,(function(e,t){var r=t.payload.flag;return NE(NE({},e),{},{reconnectFlag:r})}));var VE;function BE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YE(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?BE(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):BE(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var QE=N().mark(JE),qE=N().mark(XE),WE=(0,tt.createActions)((e(VE={},DE.FEEDBACK_REQUESTED,(function(e){return{feedback:e.feedback}})),e(VE,DE.FEEDBACK_SUCCEEDED,(function(e){return{feedback:e.feedback}})),VE)),KE=WE.feedbackRequested,zE=WE.feedbackSucceeded;function JE(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.feedback,r.next=3,(0,Kt.put)(zE({feedback:t}));case 3:return r.next=5,(0,Kt.delay)(2500);case 5:return r.next=7,(0,Kt.put)(zE({feedback:void 0}));case 7:case"end":return r.stop()}}),QE)}function XE(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Kt.actionChannel)(KE);case 2:e=n.sent;case 3:return n.next=6,(0,Kt.take)(e);case 6:return t=n.sent,r=t.payload,n.next=10,(0,Kt.call)(JE,{payload:r});case 10:n.next=3;break;case 12:case"end":return n.stop()}}),qE)}const $E=e({},DE.FEEDBACK_SUCCEEDED,(function(e,t){var r=t.payload.feedback;return YE(YE({},e),{},{feedback:r})}));var ZE=I(655);function eS(e){if(null==e)throw new TypeError("Cannot destructure undefined")}var tS=I(439).t,rS=N().mark(uS),nS=N().mark(dS);function oS(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return aS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aS(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}function aS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function cS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?cS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iS=function(e,t){var r,n,o=t.conversation,a=t.read,c=t.pinned,s=t.offer,i=t.status,u=t.userId,d=t.flag,l=t.cardId,p=t.mute;switch(e){case"conversations":r=d?{flag:d}:i?{status:i}:a?{last_read_message_id:o.latest_message_id,unread_count:0}:{unread_count:o.unread_count+1},void 0!==c&&(r={pinned:c}),void 0!==p&&(r={mute:p}),n=o.id;break;case"offers":r={status:i},n=s.id;break;case"users":r={distribution_status:i},n=u;break;case"rateCards":r={status:i},n=l}return Rr({name:e,id:n,record:r})};function uS(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v,m,g,b,y,C,D,P,I,A,w,k,U,M,L,j,G,F,H,V,B,Y,Q,q,W,K,z,J,X,$,Z,ee,te,re,ne,oe,ae,ce,se,ie,ue,de,le,pe,fe,_e,Ee,Se,he,Oe,ve,Te;return N().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.type,r=e.payload,N.next=3,(0,Kt.select)(En);case 3:return n=N.sent,N.next=6,(0,Kt.select)(es);case 6:if(o=N.sent,"notification"!==t){N.next=303;break}if(c=(a=r).type,s=a.user_id,i=a.from_id,u=a.content,d=u.flag,l=u.status,p=u.card_id,f=u.offer_id,_=u.shop_id,E=u.request_id,S=u.conversation_id,h=u.conversation_ids,O=void 0===h?[]:h,v=u.is_main_agent_change,m=u.msg_id,g=u.faq_session_id,b=u.expiry_time,y=u.is_auto_update,C={},D={},!S){N.next=17;break}return N.next=14,(0,Kt.select)(bs(S));case 14:C=N.sent,N.next=22;break;case 17:if(!f){N.next=22;break}return N.next=20,(0,Kt.select)(rE);case 20:P=N.sent,D=P[f];case 22:return I=C&&n===s,N.next=25,(0,Kt.select)(ls);case 25:A=N.sent,w="Unread"===A,N.t0=c,N.next="mark_as_read"===N.t0?30:"mark_as_unread"===N.t0?59:"delete_conversation"===N.t0?67:"update_offer_status"===N.t0?86:"update_conversation"===N.t0?100:"update_user_status"===N.t0?128:"update_conversation_flag"===N.t0?152:"force_logout"===N.t0?156:"update_rating_card_status"===N.t0?159:"pin_conversation"===N.t0?162:"unpin_conversation"===N.t0?165:"mass_read"===N.t0?171:"mass_unread"===N.t0?181:"mass_pin"===N.t0?191:"mass_unpin"===N.t0?197:"mass_activate"===N.t0?203:"mass_close"===N.t0?232:"video_upload"===N.t0?251:N.t0===qi||"mark_as_replied"===N.t0?260:"chat_delete_msg"===N.t0?268:"faq_session_update"===N.t0?289:"mute_conversation"===N.t0?293:"unmute_conversation"===N.t0?297:301;break;case 30:if(!I){N.next=58;break}return N.next=33,(0,Kt.select)((function(e){return e.conversationReducer}));case 33:return k=N.sent,U=k.conversationMark,M="api"===U[S],N.next=38,(0,Kt.put)(ei({conversationId:S,markType:M?"":"socket"}));case 38:return N.next=40,(0,Kt.select)(Jc);case 40:if(L=N.sent,j=L.findIndex((function(e){return e===E})),-1===j){N.next=51;break}return Ft(Lt.READ_SOCKET,Date.now()-E),N.next=46,(0,Kt.select)(Xc);case 46:return G=N.sent,j>0&&(G+=j),L=L.slice(j+1),N.next=51,(0,Kt.put)(ti({requestIds:L,count:G}));case 51:if(M){N.next=58;break}if(!C.unread_count){N.next=58;break}return N.next=56,(0,Kt.put)(iS("conversations",{conversation:C,read:!0}));case 56:return N.next=58,(0,Kt.put)(rn({type:Kr.MARK_AS_READ,conversation:C}));case 58:return N.abrupt("break",301);case 59:if(w&&(I=C&&n===s),!I){N.next=66;break}if(0!==C.unread_count){N.next=64;break}return N.next=64,(0,Kt.put)(iS("conversations",{conversation:C,read:!1}));case 64:return N.next=66,(0,Kt.put)(rn({type:Kr.MARK_AS_UNREAD,conversation:C}));case 66:return N.abrupt("break",301);case 67:return N.next=69,Mo().put(jo().deleteConversationMessageHash({payload:{conversationId:S},isLazy:!0}));case 69:return N.next=71,(0,Kt.put)(_E({conversationId:S}));case 71:return N.next=73,(0,Kt.put)(Ys({conversationId:S}));case 73:return N.next=75,(0,Kt.put)(Cr({name:"conversations",id:S}));case 75:return N.next=77,(0,Kt.select)(zc);case 77:if(!(N.sent.length<20)){N.next=81;break}return N.next=81,(0,Kt.put)(Ws({direction:"older"}));case 81:if(!C){N.next=85;break}return N.next=85,(0,Kt.put)(rn({type:Kr.DELETE_CONVERSATION,conversation:C}));case 85:return N.abrupt("break",301);case 86:if(!D||!l||l===R.OfferStatus.PENDING){N.next=99;break}return F=r.conversation_id,N.next=90,(0,Kt.select)(bs(F));case 90:return H=N.sent,N.next=93,(0,Kt.put)(iS("offers",{offer:D,status:l}));case 93:return N.next=95,(0,Kt.put)(bi({buyerId:D.buyer_id,shopId:D.shop_id}));case 95:if(V=H.latest_message_type,B=H.latest_message_content,V!==R.MessageTypes.MSG_TYPE_OFFER||(null==B?void 0:B.offer_id)!==f||(null==B?void 0:B.status)!==R.OfferStatus.PENDING){N.next=99;break}return N.next=99,(0,Kt.put)(Rr({name:"conversations",id:F,record:{latest_message_content:sS(sS({},B),{},{status:l})}}));case 99:return N.abrupt("break",301);case 100:if(!I){N.next=127;break}return eS(C),N.next=105,(0,Kt.put)(iS("conversations",{conversation:C,status:l}));case 105:if("closed"!==l){N.next=118;break}return N.next=108,(0,Kt.put)($S({conversationId:S}));case 108:return N.next=110,(0,Kt.put)(_E({conversationId:S}));case 110:return N.next=112,Mo().call(jo().deleteFakingMessages({payload:{conversationId:S}}));case 112:return N.next=114,(0,Kt.put)(rn({type:Kr.CLOSE_CONVERSATION,conversation:C}));case 114:return N.next=116,(0,Kt.put)(iS("conversations",{conversation:C,read:!0}));case 116:N.next=127;break;case 118:if("activated"!==l){N.next=127;break}return o===S&&Mo().put(jo().fetchMessagesRequested({payload:{conversationId:S,reset:!0},isLazy:!0})),N.next=123,(0,Kt.select)(zc);case 123:if(!N.sent.includes(S)){N.next=127;break}return N.next=127,(0,Kt.put)(Qs({conversationId:S}));case 127:return N.abrupt("break",301);case 128:return N.next=130,(0,Kt.select)(zn);case 130:if(Y=N.sent,n!==s){N.next=149;break}if(!y){N.next=140;break}if(Y){N.next=138;break}return N.next=136,(0,Kt.put)(Br({type:"CONFIRM_MODAL",title:tS("modal.title.auto_switch_to_hangup"),actions:{confirm:{label:tS("common.close"),handler:function(){x.store.dispatch(Yr()),x.store.dispatch($o({showAutoHangupModal:!1}))}}},additions:{content:tS("modal.content.auto_switch_to_hangup")}}));case 136:return N.next=138,(0,Kt.put)($o({showAutoHangupModal:!0}));case 138:N.next=146;break;case 140:if("working"!==l){N.next=146;break}if(!Y){N.next=146;break}return N.next=144,(0,Kt.put)(Yr());case 144:return N.next=146,(0,Kt.put)($o({showAutoHangupModal:!1}));case 146:if(!v){N.next=149;break}return N.next=149,(0,Kt.put)(Br({type:"CONFIRM_MODAL",title:tS("common.confirm"),additions:{content:{key:"modal.content.switch_status",vars:{status:tS("common.".concat("working"===l?"online":"offline"))}}},actions:{confirm:{label:tS("common.ok")}}}));case 149:return N.next=151,(0,Kt.put)(iS("users",{userId:s,status:l}));case 151:return N.abrupt("break",301);case 152:if(!I){N.next=155;break}return N.next=155,(0,Kt.put)(iS("conversations",{conversation:C,flag:d}));case 155:return N.abrupt("break",301);case 156:return N.next=158,(0,Kt.call)(Hc);case 158:return N.abrupt("break",301);case 159:return N.next=161,(0,Kt.put)(iS("rateCards",{cardId:p,status:l}));case 161:return N.abrupt("break",301);case 162:return N.next=164,(0,Kt.put)(iS("conversations",{conversation:C,pinned:!0}));case 164:return N.abrupt("break",301);case 165:return N.next=167,(0,Kt.put)(iS("conversations",{conversation:C,pinned:!1}));case 167:if(o!==S||"Pinned"!==A){N.next=170;break}return N.next=170,(0,Kt.put)(ci());case 170:return N.abrupt("break",301);case 171:if(!(Q=O.length)){N.next=180;break}return q={},O.forEach((function(e){q[e]={unread_count:0}})),N.next=177,(0,Kt.put)(Dr({name:"conversations",records:q}));case 177:return W=Object.assign({},{count:Q,type:Kr.MASS_READ},_?{shopId:_}:{}),N.next=180,(0,Kt.put)(rn(W));case 180:return N.abrupt("break",301);case 181:if(K=O.length,!O.length){N.next=190;break}return z={},O.forEach((function(e){z[e]={unread_count:1}})),N.next=187,(0,Kt.put)(Dr({name:"conversations",records:z}));case 187:return J=Object.assign({},{count:K,type:Kr.MASS_UNREAD},_?{shopId:_}:{}),N.next=190,(0,Kt.put)(rn(J));case 190:return N.abrupt("break",301);case 191:if(!O.length){N.next=196;break}return X={},O.forEach((function(e){X[e]={pinned:!0}})),N.next=196,(0,Kt.put)(Dr({name:"conversations",records:X}));case 196:return N.abrupt("break",301);case 197:if(!O.length){N.next=202;break}return $={},O.forEach((function(e){$[e]={pinned:!1}})),N.next=202,(0,Kt.put)(Dr({name:"conversations",records:$}));case 202:return N.abrupt("break",301);case 203:return N.next=205,(0,Kt.put)(Ws({direction:"latest"}));case 205:if(!O.length){N.next=231;break}Z={},ee=oS(O),N.prev=209,ee.s();case 211:if((te=ee.n()).done){N.next=219;break}if(re=te.value,Z[re]={status:"activated"},o!==re){N.next=217;break}return N.next=217,Mo().put(jo().fetchMessagesRequested({payload:{conversationId:o,reset:!0},isLazy:!0}));case 217:N.next=211;break;case 219:N.next=224;break;case 221:N.prev=221,N.t1=N.catch(209),ee.e(N.t1);case 224:return N.prev=224,ee.f(),N.finish(224);case 227:return N.next=229,(0,Kt.put)(Dr({name:"conversations",records:Z}));case 229:return N.next=231,(0,Kt.call)(handleNotifyBatchConversation);case 231:return N.abrupt("break",301);case 232:if(!O.length){N.next=250;break}return ne={},oe=[],N.next=238,(0,Kt.select)(Rs(O));case 238:return ae=N.sent,ce=ae.filter((function(e){return(null==e?void 0:e.unread_count)>0})),O.forEach((function(e){ne[e]={status:"closed",unread_count:0},oe.push((0,Kt.put)($S({conversationId:e}))),Mo().call(jo().deleteFakingMessages({payload:{conversationId:e}}))})),N.next=243,(0,Kt.all)(oe);case 243:return N.next=245,(0,Kt.put)(Dr({name:"conversations",records:ne}));case 245:return se=Object.assign({},{count:ce.length,type:Kr.MASS_CLOSE},_?{shopId:_}:{}),N.next=248,(0,Kt.put)(rn(se));case 248:return N.next=250,(0,Kt.put)(SE({conversationIds:O}));case 250:return N.abrupt("break",301);case 251:return ie=r.content,N.next=254,(0,Kt.select)(Gf(ie.vid));case 254:return ue=N.sent,N.next=257,(0,Kt.select)(jf(ue));case 257:return N.sent.status||(de=ie.status,le=ie.vid,"successful"===de&&(pe=performance.getEntriesByName("REPORT_UPLOAD_".concat(le),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(le)),fe=performance.getEntriesByName("SERVICE_DONE_".concat(le))[0].startTime-pe.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(le)),performance.clearMarks("SERVICE_DONE_".concat(le)),Ft(Lt.SERVICE_DONE,fe)),Mo().put(jo().updateVideoInfo({payload:{id:ue,info:{status:de,uploadResult:ie}}}))),N.abrupt("break",301);case 260:if("Unreplied"!==A){N.next=267;break}return N.next=263,(0,Kt.select)(zc);case 263:if(!N.sent.includes(S)){N.next=267;break}return N.next=267,(0,Kt.put)(Rr({name:"conversations",id:S,record:{unreplied:c===qi}}));case 267:return N.abrupt("break",301);case 268:return N.next=270,(0,Kt.select)(Ff(m));case 270:if(!(_e=N.sent)){N.next=283;break}return Ee=_e.message_option|R.MessageOption.MSG_OPT_DELETE,Se=T("messages",sS(sS({},_e),{},{message_option:Ee})),he=Se.entities,N.next=276,(0,Kt.put)(yr({entities:he}));case 276:if(![R.MessageTypes.MSG_TYPE_VIDEO,R.MessageTypes.MSG_TYPE_IMAGE,R.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT].includes(_e.type)){N.next=283;break}return N.next=279,(0,Kt.select)((function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId}));case 279:if(N.sent!==m){N.next=283;break}return N.next=283,(0,Kt.put)(sh());case 283:if(!C||C.latest_message_id!==m){N.next=288;break}return Oe=C.last_message_option|R.MessageOption.MSG_OPT_DELETE,ve=T("conversations",sS(sS({},C),{},{last_message_option:Oe,latest_message_content:{text:""},latest_message_from_id:i})),Te=ve.entities,N.next=288,(0,Kt.put)(yr({entities:Te}));case 288:return N.abrupt("break",301);case 289:if(!I){N.next=292;break}return N.next=292,(0,Kt.put)(YO({faqSessionId:g,sessionExpiryTime:b,conversationId:S}));case 292:return N.abrupt("break",301);case 293:if(!I){N.next=296;break}return N.next=296,(0,Kt.put)(iS("conversations",{conversation:C,mute:!0}));case 296:return N.abrupt("break",301);case 297:if(!I){N.next=300;break}return N.next=300,(0,Kt.put)(iS("conversations",{conversation:C,mute:!1}));case 300:return N.abrupt("break",301);case 301:N.next=306;break;case 303:if("message"!==t){N.next=306;break}return N.next=306,(0,Kt.call)(Li,{payload:r,type:R.ConversationTypeEnum.Normal});case 306:case"end":return N.stop()}}),rS,null,[[209,221,224,227]])}function dS(e){return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Kt.call)(uS,e);case 2:case"end":return t.stop()}}),nS)}function lS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var fS=N().mark(OS),_S=N().mark(vS),ES=(0,tt.createActions)(e({},DE.UPDATE_NOTICES_COUNT,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"add":t;return{type:r}}))),SS=ES.updateNoticesCount,hS=function(){return(0,ZE.eventChannel)((function(e){return z?J.on("message",(function(t){var r=t.data,n=r.message_type,o=r.message_content,a=r.worker_event,c=r.payload;e(a?{event:a,payload:void 0===c?{}:c}:{pushedType:n,payload:JSON.parse(o)})})):(Object.values(R.SocketConnectionStatus).forEach((function(t){J.on(t,(function(){return e({event:t})}))})),J.on("message",(function(t){if(t){var r=t.message_type,n=t.message_content;e({pushedType:r,payload:JSON.parse(n)})}}))),function(){}}))};function OS(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.event,r=e.pushedType,n=e.payload,!t){o.next=6;break}return o.next=4,(0,Kt.call)(kE,{event:t,payload:n});case 4:o.next=11;break;case 6:if(!r){o.next=11;break}return o.next=9,(0,Kt.put)(SS());case 9:return o.next=11,(0,Kt.call)(dS,{type:r,payload:n});case 11:case"end":return o.stop()}}),fS)}function vS(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Kt.call)(hS);case 2:return e=t.sent,t.next=5,(0,Kt.takeEvery)(e,OS);case 5:case"end":return t.stop()}}),_S)}const TS=e({},DE.UPDATE_NOTICES_COUNT,(function(e,t){var r=t.payload.type;return pS(pS({},e),{},{noticesCount:"add"===r?e.noticesCount+1:0})}));function mS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function gS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?mS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var bS=N().mark(IS),yS=N().mark(AS),RS=N().mark(wS),CS=!1,DS=(0,tt.createActions)(e({},DE.UPDATE_C_S_SOCKET_STATUS,(function(e){return{csSocketLogined:e.csSocketLogined,csSocketConnected:e.csSocketConnected}}))).updateCSSocketStatus,PS=function(e){return(0,ZE.eventChannel)((function(t){return QT?e.on("message",(function(e){var r=e.data,n=r.worker_event,o=r.payload;n&&t({event:n,payload:void 0===o?{}:o})})):(Object.values(R.SocketConnectionStatus).forEach((function(r){e.on(r,(function(e){return t({event:r,payload:e})}))})),e.on("message",(function(e){e&&t({event:"message",payload:e})}))),function(){}}))};function IS(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(t=e.event,r=e.payload,!t){c.next=30;break}c.t0=t,c.next=c.t0===R.SocketConnectionStatus.CONNECT?5:c.t0===R.SocketConnectionStatus.DISCONNECT?9:"ack"===c.t0?19:"reportUPLPoint"===c.t0?21:"message"===c.t0?22:30;break;case 5:return c.next=7,(0,Kt.put)(DS({csSocketConnected:!0}));case 7:return WT(),c.abrupt("break",30);case 9:return c.next=11,(0,Kt.put)(DS({csSocketConnected:!1}));case 11:if(CS){c.next=17;break}return c.next=14,(0,Kt.delay)(3e3);case 14:qT.connect(),c.next=18;break;case 17:CS=!1;case 18:return c.abrupt("break",30);case 19:return qT.dispatch("ack"),c.abrupt("break",30);case 21:return c.abrupt("break",30);case 22:if("string"!=typeof r){c.next=30;break}if(n=r.indexOf("{"),"13"!==r.slice(0,n)){c.next=30;break}o=!1;try{a=JSON.parse(r.slice(n)),o=0===a.errcode}catch(e){}return c.next=30,(0,Kt.put)(DS({csSocketLogined:o}));case 30:case"end":return c.stop()}}),bS)}function AS(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Kt.call)(PS,qT);case 2:return e=t.sent,t.next=5,(0,Kt.takeEvery)(e,IS);case 5:case"end":return t.stop()}}),yS)}function wS(){var e,t,r;return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e="mini-session";case 1:return t=60*Math.floor(10*Math.random()+20)*1e3,n.next=5,(0,Kt.delay)(t);case 5:return n.next=7,(0,R.getItem)(e);case 7:if(!(r=n.sent)||!r.user||r.user.type!==R.AccountType.SELLER){n.next=15;break}if(!qT){n.next=15;break}return CS=!0,qT.close(),n.next=14,(0,Kt.delay)(1e3);case 14:qT.connect();case 15:n.next=1;break;case 17:case"end":return n.stop()}}),RS)}const NS=e({},DE.UPDATE_C_S_SOCKET_STATUS,(function(e,t){var r=t.payload,n=r.csSocketLogined,o=r.csSocketConnected,a={};return void 0!==n&&(a.csSocketLogined=n),void 0!==o&&(a.csSocketConnected=o),gS(gS({},e),a)}));var xS=N().mark(kS);function kS(){var e,t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:e="mini-session";case 1:return c.next=4,(0,Kt.delay)(6e4);case 4:return c.next=6,(0,R.getItem)(e);case 6:return t=c.sent,c.next=9,(0,Kt.select)(VS);case 9:return r=c.sent,c.next=12,(0,Kt.select)(Xc);case 12:return n=c.sent,c.next=15,(0,Kt.select)(BS);case 15:return o=c.sent,c.next=18,(0,Kt.select)(YS);case 18:if(a=c.sent,!t||!t.token){c.next=25;break}return $({noticesCount:r,readMissedCount:n,csSocketLogined:o,csSocketConnected:a}),c.next=23,(0,Kt.put)(ti({count:0}));case 23:return c.next=25,(0,Kt.put)(SS({type:"reset"}));case 25:c.next=1;break;case 27:case"end":return c.stop()}}),xS)}function US(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MS(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?US(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):US(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var LS,jS=[XE,kS,vS,AS,wS],GS=(0,tt.handleActions)(MS(MS(MS(MS({},HE),$E),TS),NS),{reconnectFlag:!1,feedback:null,noticesCount:0,csSocketLogined:!1,csSocketConnected:!1}),FS=function(e){return e.socketReducer.feedback},HS=function(e){return e.socketReducer.reconnectFlag},VS=function(e){return e.socketReducer.noticesCount},BS=function(e){return e.socketReducer.csSocketLogined},YS=function(e){return e.socketReducer.csSocketConnected};function QS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var qS,WS=function(e){return e.mediaPreviewerReducer.mediaMap},KS=(0,er.createSelector)(es,WS,(function(e,t){return t[e]||[]})),zS=(0,tt.createActions)({ADD_MEDIA_FILE:function(e){return{medias:e.medias,conversationId:e.conversationId}},DELETE_MEDIA_FILE:function(e){return{id:e.id,conversationId:e.conversationId}},CLEAR_MEDIA_FILE:function(e){return{conversationId:e.conversationId}}}),JS=zS.addMediaFile,XS=zS.deleteMediaFile,$S=zS.clearMediaFile,ZS=(e(LS={},JS,(function(t,r){var n=r.payload,o=n.medias,a=n.conversationId,c=t.mediaMap,s=(c[a]||[]).concat(Array.isArray(o)?o:[o]);return Gi(Gi({},t),{},{mediaMap:Gi(Gi({},c),{},e({},a,s))})})),e(LS,XS,(function(t,r){var n=r.payload,o=n.id,a=n.conversationId,c=t.mediaMap,s=ue(c[a])||[];return s.splice(o,1),Gi(Gi({},t),{},{mediaMap:Gi(Gi({},c),{},e({},a,s))})})),e(LS,$S,(function(t,r){var n=r.payload.conversationId,o=t.mediaMap;return Gi(Gi({},t),{},{mediaMap:Gi(Gi({},o),{},e({},n,[]))})})),LS),eh=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?QS(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):QS(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ZS),{mediaMap:{}});function th(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var rh,nh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.showMediaPreviewModal},oh=function(e){return e.mediaPreviewModalReducer&&e.mediaPreviewModalReducer.currentPreviewMediaId},ah=(0,tt.createActions)({SHOW_MEDIA_PREVIEW_MODAL_REQUESTED:function(e){return{messageId:e.messageId}},CLOSE_MEDIA_PREVIEW_MODAL_REQUESTED:function(){return{}}}),ch=ah.showMediaPreviewModalRequested,sh=ah.closeMediaPreviewModalRequested,ih=(e(qS={},ch,(function(e,t){return{showMediaPreviewModal:!0,currentPreviewMediaId:t.payload.messageId}})),e(qS,sh,(function(e){return{showMediaPreviewModal:!1,currentPreviewMediaId:null}})),qS),uh=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?th(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):th(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},ih),{showMediaPreviewModal:!1,currentPreviewMediaId:null}),dh=function(e){return e.translatePreferenceReducer.translationSettings},lh=function(e){return e.translatePreferenceReducer.fetchSettingsStatus},ph=function(e){return e.translatePreferenceReducer.updateStatus};!function(e){e.FETCH_SHOP_TRANSLATION_SETTINGS="FETCH_SHOP_TRANSLATION_SETTINGS",e.UPDATE_SHOP_TRANSLATION_SETTINGS="UPDATE_SHOP_TRANSLATION_SETTINGS",e.UPDATE_FETCH_STATUS="UPDATE_FETCH_STATUS",e.UPDATE_SETTING_PREFERENCE_STATUS="UPDATE_SETTING_PREFERENCE_STATUS",e.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD="UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD"}(rh||(rh={}));var fh,_h,Eh=I(439).t;function Sh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Sh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Oh=N().mark(Dh),vh=N().mark(Ph),Th=N().mark(Ih),mh=(0,tt.createActions)((e(fh={},rh.FETCH_SHOP_TRANSLATION_SETTINGS,(function(e){return{shopId:e.shopId}})),e(fh,rh.UPDATE_SHOP_TRANSLATION_SETTINGS,(function(e){return{settings:e.settings}})),e(fh,rh.UPDATE_FETCH_STATUS,(function(e){return{status:e.status}})),e(fh,rh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e){return{status:e.status}})),e(fh,rh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e){return{shopId:e.shopId,source:e.source,translationPreference:e.translationPreference,autoTranslationStatus:e.autoTranslationStatus,inTranslationFeedbackWhitelist:e.inTranslationFeedbackWhitelist}})),fh)),gh=mh.fetchShopTranslationSettings,bh=mh.updateShopTranslationSettings,yh=mh.updateFetchStatus,Rh=mh.updateSettingPreferenceStatus,Ch=mh.updateShopTranslationSettingsRecord;function Dh(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload.shopId,s.prev=1,s.next=4,(0,Kt.put)(yh({status:"loading"}));case 4:return s.next=6,(0,Kt.call)(it,{subServer:"workbenchapi",parent:"shop",resource:"setting",params:{shop_id:t}});case 6:return r=s.sent,n=r.source,o=r.translation_preference,a=r.auto_translation_status,c=r.in_translation_feedback_whitelist,s.next=13,(0,Kt.put)(yh({status:"succeed"}));case 13:return s.next=15,(0,Kt.put)(Ch({shopId:t,source:n,translationPreference:o,autoTranslationStatus:a,inTranslationFeedbackWhitelist:c}));case 15:s.next=21;break;case 17:return s.prev=17,s.t0=s.catch(1),s.next=21,(0,Kt.put)(yh({status:"failed"}));case 21:case"end":return s.stop()}}),Oh,null,[[1,17]])}function Ph(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.settings,a.prev=1,a.next=4,(0,Kt.put)(Wv({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 4:return a.next=6,(0,Kt.put)(Rh({status:""}));case 6:return r=t.shop_id,n=t.auto_translation_status,o=t.translation_preference,a.next=9,(0,Kt.call)(it,{method:"PUT",subServer:"workbenchapi",parent:"shop",resource:"setting",payload:JSON.stringify(t)});case 9:return a.next=11,(0,Kt.put)(Ch({shopId:r,translationPreference:o,autoTranslationStatus:n}));case 11:return a.next=13,(0,Kt.call)(tf,zp({toast:{show:!0,type:"success",message:Eh("tips.set_preference_succeed")}}));case 13:a.next=21;break;case 15:return a.prev=15,a.t0=a.catch(1),a.next=19,(0,Kt.put)(Rh({status:"failed"}));case 19:return a.next=21,(0,Kt.call)(tf,zp({toast:{show:!0,type:"fail",message:Eh("tips.set_preference_failed")}}));case 21:case"end":return a.stop()}}),vh,null,[[1,15]])}function Ih(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(gh,Dh);case 2:return e.next=4,(0,Kt.takeEvery)(bh,Ph);case 4:case"end":return e.stop()}}),Th)}var Ah,wh=(0,tt.handleActions)((e(_h={},rh.UPDATE_SHOP_TRANSLATION_SETTINGS_RECORD,(function(e,t){var r=t.payload,n=r.shopId,o=r.source,a=r.translationPreference,c=r.autoTranslationStatus,s=r.inTranslationFeedbackWhitelist,i=hh({},e.translationSettings),u=i[n]||{};return i[n]=hh(hh({},u),{},{translationPreference:a,autoTranslationStatus:c}),o&&(i[n].source=o),s&&(i[n].inTranslationFeedbackWhitelist=s),hh(hh({},e),{},{translationSettings:i})})),e(_h,rh.UPDATE_FETCH_STATUS,(function(e,t){var r=t.payload.status;return hh(hh({},e),{},{fetchSettingsStatus:r})})),e(_h,rh.UPDATE_SETTING_PREFERENCE_STATUS,(function(e,t){var r=t.payload.status;return hh(hh({},e),{},{updateStatus:r})})),_h),{translationSettings:{},fetchSettingsStatus:"",updateStatus:""}),Nh=[Ih],xh=I(439).t;function kh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uh(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?kh(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kh(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Mh,Lh=R.LogisticsLog.ORDER_DETAIL_SHIPPING_CONFIRMED,jh=R.LogisticsLog.ORDER_DETAIL_SHIPPED,Gh=R.LogisticsLog.ORDER_DETAIL_RECEIVED,Fh=R.LogisticsLog.ORDER_DETAIL_CANCELED,Hh=R.LogisticsLog.ORDER_DETAIL_NOTIFY_SHIP,Vh=(e(Ah={},Lh,"detail_received"),e(Ah,jh,"shipped"),e(Ah,Gh,"received_by_buyer"),e(Ah,Fh,"cancelled"),e(Ah,Hh,"notify_ship"),Ah),Bh=["amount","buyer_id","buyer_is_rated","cancel_pending","cancel_reason","cancel_time","canceller","carrier","checkout_id","coin_offset","complete_time","created_at","credit_card_promotion","delivery_time","id","image","image_hash","over_rate_time","pay_by_wallet","pay_time","payment_method","payment_method_str","price_before_discount","products","products_count","rate_by_date","receivables","refund_amount","refund_serial_number","region","remark","seller_note","seller_rate_comment","seller_rate_star","serial_number","ship_by_date","shipping_fee","shop_id","show_cancel_order_btn","show_ship_warning","status","tax_amount","third_party_tns","title","tracking_number","voucher_price","wallet_discount"],Yh=["model_id","product_id","model_name","image","image_hash","rate_star","region","price","sku","count","title","rate_comment","is_pre_order","returned","id","shop_id"],Qh=function(e,t,r){var n={},o=e.status;return Yh.forEach((function(a){var c;switch(a){case"model_name":n[a]=null!==(c=e[a])&&void 0!==c&&c.includes(",")?e[a].replace(/,/g," · "):e[a];break;case"region":n[a]=t;break;case"price":n[a]=(0,R.formatPrice)(e[a],t);break;case"returned":n[a]=o===R.OrderItemStatus.RETURNED||o===R.OrderItemStatus.RETURN_RATED;break;case"rate_star":n[a]=e[a]?parseInt(e[a]):-1;break;case"id":n[a]=e.product_id;break;case"shop_id":n[a]=r;break;default:n[a]=e[a]}})),n},qh=["coin_offset","voucher_price","wallet_discount","local_shopee_coin"],Wh=function(e){return xh("common.order.cancel_reason.buyer_".concat(e>0&&e<10?e:0))},Kh=function(e){var t=e.cancel_user_id;return t===e.buyer_id?"buyer":t<=0?"system":"seller"},zh=function(e){var t=e.status,r=e.buyer_cancel_reason,n=e.cancel_reason,o=Kh(e);return t===R.OrderTabStatus.CANCELLED?"buyer"===o?Wh(r):(0,R.getCancelReason)(n):Wh(r)},Jh=15*R.ONE_DAY,Xh=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=e.price_before_discount,c=e.shipping_fee,s=e.tax_amount,i=e.shop_id,u=e.rate_by_date,d=e.complete_time,l=e.status_ext,p=e.payment_method,f=e.ship_by_date,_=i===t,E=(0,R.getOrderPayment)({order:e,region:r,isOwnOrder:_,isNewPrice:n}),S=E.shopeeCoin,h=E.payment,O=Date.now()>(u?new Date(u).getTime():new Date(d).getTime()+Jh);return Bh.forEach((function(n){switch(n){case"region":o[n]=r;break;case"created_at":case"pay_time":case"delivery_time":case"complete_time":case"cancel_time":o[n]=e[n]?(0,R.customizeTime)(e[n],{needFullFormat:!0}):"";break;case"rate_by_date":o[n]=u?(0,R.customizeTime)(u,{needFullFormat:!0}):"";break;case"over_rate_time":o[n]=O;break;case"ship_by_date":o[n]=e[n]?(0,R.customizeTime)(e[n],{needFullFormat:!0}):"--";break;case"show_ship_warning":o[n]=!!f&&R.ONE_DAY+Date.now()>new Date(f).getTime();break;case"payment_method_str":o[n]=(0,R.getPayMethod)(p);break;case"products":o[n]=e[n].map((function(e){return Qh(e,r,t)}));break;case"amount":o[n]=(0,R.formatPrice)(a-c-s,r);break;case"receivables":o[n]=h;break;case"coin_offset":o[n]=(0,R.formatPrice)(S,r,{withMinus:!0});break;case"refund_amount":case"price_before_discount":case"shipping_fee":case"tax_amount":case"credit_card_promotion":case"voucher_price":case"wallet_discount":o[n]=(0,R.formatPrice)(e[n]||0,r,{withMinus:qh.includes(n)});break;case"seller_note":o[n]=(e[n]||"").trim();break;case"cancel_reason":o[n]=zh(e);break;case"canceller":o[n]=Kh(e);break;case"show_cancel_order_btn":o[n]=(0,R.getCancelOrderDisplayStatus)(e);break;case"cancel_pending":o[n]=l===R.OrderStatusExt.ORDER_EXT_CANCEL_PENDING;break;default:o[n]=e[n]}})),o},$h=function(e){var t=[];return e.forEach((function(e){var r,n=e.flag,o=e.type,a=e.description,c=e.seller_desc,s=e.created_at,i=(0,R.getFormattedTime)(s);4&n?r=c||a:2==(3&n)?r=a:Vh[o]&&(r=xh("common.order.logistics_log.".concat(Vh[o]))),r&&t.push({created_at:i,content:r})})),t};!function(e){e[e.unpaid=1]="unpaid",e[e.to_ship=2]="to_ship",e[e.shipping=3]="shipping",e[e.completed=4]="completed",e[e.cancelled=5]="cancelled"}(Mh||(Mh={}));var Zh=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o={},a=Uh(Uh({},e),{},{status:Mh[e.order_status],products_count:e.item_count,created_at:1e3*e.create_time,serial_number:e.order_sn,estimated_escrow:e.seller_estimated_escrow/1e5,total_price:e.buyer_pay_amount/1e5}),c=a.shop_id,s=c===t,i=(0,R.getOrderPayment)({order:a,region:r,isOwnOrder:s,isNewPrice:n}),u=i.payment;return Bh.forEach((function(e){switch(e){case"region":o[e]=r;break;case"created_at":o[e]=a[e]?(0,R.customizeTime)(a[e],{needFullFormat:!0}):"";break;case"products":o[e]=a.items;break;case"receivables":o[e]=u;break;default:o[e]=a[e]}})),o};function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?eO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):eO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var rO=N().mark(dO),nO=N().mark(lO),oO=N().mark(pO),aO=N().mark(fO),cO=N().mark(_O),sO=N().mark(EO),iO=N().mark(SO),uO=N().mark(hO);function dO(e){var t,r,n,o,a,c;return N().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,r=t.id,n=t.shopId,s.next=3,(0,Kt.call)(it,{resource:"products",id:r,params:{shop_id:n,need_cache:1,cache_expires:600},cleaner:zm});case 3:return o=s.sent,o=Vu(o),a=T("products",o),c=a.entities,s.next=8,(0,Kt.put)(yr({entities:c}));case 8:return s.abrupt("return",o);case 9:case"end":return s.stop()}}),rO)}function lO(e){var t,r,n,o,a,c,s,i,u,d;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,r=t.id,n=t.shopId,o=t.isChatbotOrder,l.next=3,(0,Kt.select)(hs);case 3:return a=l.sent,l.next=6,(0,Kt.call)(it,{resource:"order",id:r,params:{shop_id:n}});case 6:return c=l.sent,l.next=9,(0,Kt.select)(Yn);case 9:return s=l.sent,i=Xh(c,n,a,!s||o),u=T("orders",i),d=u.entities,l.next=15,(0,Kt.put)(yr({entities:d}));case 15:return l.abrupt("return",i);case 16:case"end":return l.stop()}}),nO)}function pO(e,t,r,n,o){var a,c,s,i,u,d;return N().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(a=Array.isArray(e),c=a?e:[e],s=Array.from(new Set(c.map((function(e){return e.product_id})))),i=[],!a){l.next=19;break}return l.prev=5,l.next=8,(0,Kt.call)(showProducts,{payload:{productIds:s,shopId:t}});case 8:i=l.sent,l.next=17;break;case 11:return l.prev=11,l.t0=l.catch(5),u=s.map((function(e){return(0,Kt.call)(dO,{payload:{id:e,shopId:t}})})),l.next=16,(0,Kt.all)(u);case 16:i=l.sent;case 17:l.next=23;break;case 19:return l.next=21,(0,Kt.call)(dO,{payload:{id:e.product_id,shopId:t}});case 21:d=l.sent,i=[d];case 23:return l.abrupt("return",c.map((function(e){var t=i.find((function(t){return t.id===e.product_id}))||{};return $u(e,"list",r,n,t,o)})));case 24:case"end":return l.stop()}}),oO,null,[[5,11]])}function fO(e){var t,r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:return t=e.payload,r=t.id,n=t.shopId,p.next=3,(0,Kt.select)(oE(r));case 3:return o=p.sent,p.next=6,(0,Kt.select)(hs);case 6:return a=p.sent,p.next=9,(0,Kt.select)(wn);case 9:return c=p.sent,p.next=12,(0,Kt.select)(In);case 12:if(s=p.sent,!o){p.next=15;break}return p.abrupt("return",o);case 15:return p.next=17,(0,Kt.call)(it,{resource:"offers",id:r,params:{shop_id:n}});case 17:return i=p.sent,p.next=20,(0,Kt.call)(pO,i,n,a,c,s);case 20:return u=p.sent,d=T("offers",u),l=d.entities,p.next=24,(0,Kt.put)(yr({entities:l}));case 24:return p.abrupt("return",u[0]);case 25:case"end":return p.stop()}}),aO)}function _O(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.shopId,r=e.id,d.next=3,(0,Kt.select)(En);case 3:return n=d.sent,d.next=6,(0,Kt.select)(An);case 6:return o=d.sent,a="vouchers_by_ids",d.next=10,(0,Kt.call)(it,{parent:"vouchers",resource:a,params:{ids:JSON.stringify([parseInt(r)]),shop_id:t,buyer_id:o?0:n}});case 10:if(c=d.sent,!(s=c[a])||!s.length){d.next=18;break}return s=s.map((function(e){return sd(e,!1)})),i=T("vouchers",s),u=i.entities,d.next=17,(0,Kt.put)(yr({entities:u}));case 17:return d.abrupt("return",s[0]);case 18:case"end":return d.stop()}}),cO)}function EO(e){var t,r,n,o,a,c,s,i,u;return N().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return t=e.payload,r=t.id,n=t.creatorId,d.next=3,(0,Kt.select)(_s);case 3:return o=d.sent,a=o.shop_id,d.next=7,(0,Kt.call)(it,{parent:"feed",resource:"stories",params:{ids:JSON.stringify([r]),creator:n,shop_id:a,need_cache:1,cache_expire:1800}});case 7:return c=d.sent,s=c.stories[0],i=T("feedStories",s),u=i.entities,d.next=12,(0,Kt.put)(yr({entities:u}));case 12:return d.abrupt("return",s);case 13:case"end":return d.stop()}}),sO)}function SO(e){var t,r,n,o,a;return N().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.cartItems,r=e.shopId,c.next=3,(0,Kt.call)(it,{parent:"product",resource:"get",method:"POST",payload:JSON.stringify({shop_id:r,items:t.slice(0,4)})});case 3:return n=c.sent,o=n.get,a=void 0===o?[]:o,c.abrupt("return",a.map(Ju));case 7:case"end":return c.stop()}}),iO)}function hO(e){var t,r,n,o,a,c,s,i;return N().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.payload,r=t.ids,n=t.id,u.next=3,(0,Kt.select)(_s);case 3:return o=u.sent,a=o.shop_id,c=o.id,u.next=7,(0,Kt.call)(it,{parent:"conversation",resource:"messages",params:{ids:"[".concat(r.join(","),"]"),shop_id:a}});case 7:return s=u.sent,i=s.messages,u.next=11,(0,Kt.call)(Id,{list:ue(i),conversationId:c,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var r=i.findIndex((function(t){return t.id===e}));if(r>=0){var n=i[r];i.splice(r,1,tO(tO({},n),{},{content:tO(tO({},n.content),t[e])}))}}))}});case 11:return u.abrupt("return",{id:n,messages:i});case 12:case"end":return u.stop()}}),uO)}var OO,vO,TO=function(e){return e.chatbotReducer.imageUrl},mO=function(e){return e.chatbotReducer.faqSessions},gO=(0,er.createSelector)(es,mO,(function(e,t){return t[e]||{}}));function bO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?bO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):bO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.SHOW_CHATBOT_IMAGE="SHOW_CHATBOT_IMAGE",e.CLOSE_CHATBOT_MEDIA_PREVIEW="CLOSE_CHATBOT_MEDIA_PREVIEW",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.FETCH_FAQ_SESSION_SUCCEED="FETCH_FAQ_SESSION_SUCCEED"}(OO||(OO={}));const RO=(e(vO={},OO.SHOW_CHATBOT_IMAGE,(function(e,t){var r=t.payload;return yO(yO({},e),{},{imageUrl:r.url})})),e(vO,OO.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(e){return yO(yO({},e),{},{imageUrl:""})})),vO);var CO,DO=I(209),PO=I.n(DO),IO=I(411),AO=I(914),wO=I(770),NO=I(123),xO=PO()(),kO=null,UO=function(){var e=P(N().mark((function e(t,r){var n,o,a;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.shopId,o=r.conversationId,e.next=3,it({parent:"faqs",subServer:"workbenchapi",resource:"bot/orders",method:"POST",payload:JSON.stringify({data:JSON.stringify(t),shop_id:n,conversation_id:o})});case 3:return(a=e.sent).data=JSON.parse(a.data),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),MO={cid:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)(),from:R.ChatbotFromType.LandingPage,initialization:1,auth:{accountType:1},getOrderList:UO},LO=function(){return kO||((kO=new xO.ChatbotSDK({root:"messageSection",config:MO})).use(IO.Message),kO.use(AO.RelatedIntent),kO.use(wO.OrderList),kO.use(NO.OptionSelector)),kO},jO=function(e){LO().updateConfig({from:e})},GO=xO.Provider,FO=(0,tt.createActions)((e(CO={},OO.SHOW_CHATBOT_IMAGE,(function(e){return{url:e.url}})),e(CO,OO.CLOSE_CHATBOT_MEDIA_PREVIEW,(function(){return{}})),e(CO,OO.CHATBOT_INTENTS_REPORT_REQUEST,(function(e){return{reportTask:e.reportTask}})),e(CO,OO.FETCH_FAQ_SESSION_SUCCEED,(function(e){return{conversationId:e.conversationId,faqSessionId:e.faqSessionId,sessionExpiryTime:e.sessionExpiryTime}})),CO)),HO=FO.showChatbotImage,VO=FO.closeChatbotMediaPreview,BO=FO.chatbotIntentsReportRequest,YO=FO.fetchFaqSessionSucceed,QO=N().mark(rv),qO=N().mark(nv),WO=N().mark(ov),KO=N().mark(av),zO=N().mark(cv);function JO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function XO(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?JO(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JO(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $O,ZO=function(){return(0,ZE.eventChannel)((function(e){var t=LO();return t.init().then((function(){t.on("userAction",(function(t){e(t)}))})),function(){}}))};!function(e){e[e.MESSAGE=1001]="MESSAGE",e[e.SOLUTION=1002]="SOLUTION",e[e.NOT_CHATBOT=0]="NOT_CHATBOT"}($O||($O={}));var ev={message:$O.MESSAGE,solution:$O.SOLUTION},tv=function(e){if(!e)return $O.NOT_CHATBOT;var t=e.type;return ev[t]};function rv(e){var t,r,n,o,a,c,s,i,u,d,l;return N().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.api,r=e.chatbotUserMessage,n=e.passThroughData.faqSessionId,o=tv(t),!r){p.next=17;break}return p.next=5,(0,Kt.select)(_s);case 5:return a=p.sent,c=r.type,s={interaction_type:o,bot_data:JSON.stringify(t?t.params:""),faq_session_id:n},"text"===c&&(u=r.text,s=XO(XO({},s),{},{text:u}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE),"order"===c&&(s=XO(XO({},s),{},{bot_order_info:Qm(r)}),i=R.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE),p.next=12,(0,Kt.select)(Os);case 12:return d=p.sent,p.next=15,(0,Kt.select)(hs);case 15:l=p.sent,Mo().put(jo().sendMessagesRequested({payload:{conversationId:a.id,conversationUserId:a.to_id,messages:[{type:i,content:s,textContent:Ym(r,d,l)}]}}));case 17:case"end":return p.stop()}}),QO)}function nv(e){var t,r,n,o;return N().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(t=e.urlInfo)&&(r=t.url,n=t.uri_key,o=t.uri_extra,n?window.open(Bm(n,o)):r&&window.open(Hm(r))),a.next=4,(0,Kt.call)(rv,e);case 4:case"end":return a.stop()}}),qO)}function ov(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(t=e.image)){r.next=4;break}return r.next=4,(0,Kt.put)(HO({url:t.url}));case 4:case"end":return r.stop()}}),WO)}function av(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t=e.actionType,r.t0=t,r.next="sendChatbotUserMessage"===r.t0?4:"redirect"===r.t0?7:"showImage"===r.t0?10:13;break;case 4:return r.next=6,(0,Kt.call)(rv,e.data);case 6:case 9:case 12:return r.abrupt("break",13);case 7:return r.next=9,(0,Kt.call)(nv,e.data);case 10:return r.next=12,(0,Kt.call)(ov,e.data);case 13:case"end":return r.stop()}}),KO)}function cv(){var e;return N().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Kt.call)(ZO);case 2:return e=t.sent,t.next=5,(0,Kt.takeEvery)(e,av);case 5:case"end":return t.stop()}}),zO)}var sv=N().mark(uv),iv=N().mark(dv);function uv(e){var t,r,n;return N().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.reportTask,o.next=3,(0,Kt.select)(es);case 3:return r=o.sent,o.next=6,(0,Kt.select)(Ps);case 6:return n=o.sent,o.prev=7,o.next=10,(0,Kt.call)(it,{method:"POST",subServer:"workbenchapi",parent:"faqs",resource:"bot/report",payload:JSON.stringify({messages:t,conversation_id:r,shop_id:n})});case 10:o.next=14;break;case 12:o.prev=12,o.t0=o.catch(7);case 14:case"end":return o.stop()}}),sv,null,[[7,12]])}function dv(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(BO,uv);case 2:case"end":return e.stop()}}),iv)}function lv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pv(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?lv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}const fv=e({},OO.FETCH_FAQ_SESSION_SUCCEED,(function(t,r){var n=r.payload,o=n.conversationId,a=n.faqSessionId,c=n.sessionExpiryTime,s=t.faqSessions;return pv(pv({},t),{},{faqSessions:pv(pv({},s),{},e({},o,{faqSessionId:a,sessionExpiryTime:c}))})}));function _v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ev(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_v(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_v(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Sv,hv,Ov=(0,tt.handleActions)(Ev(Ev({},RO),fv),{imageUrl:"",faqSessions:{}}),vv=[cv,dv],Tv=function(e){return e.voucherReducer.status},mv=(0,er.createSelector)(dr,(function(e){return e.voucherReducer.voucherIds}),(function(e,r){return((0,t.denormalize)(r,[O],{vouchers:e})||[]).filter((function(e){return e}))})),gv=function(e){return(0,er.createSelector)(dr,(function(r){return(0,t.denormalize)(e,O,{vouchers:r})}))},bv={currentPage:0,perPage:20,total:0,hasMore:!0},yv=function(e){return(0,er.createSelector)(ir,(function(r){return(0,t.denormalize)(e,i,{orders:r})}))},Rv=function(e){return(e.orderReducer||{}).cancelReasons},Cv=function(e){return e.orderReducer.status},Dv=function(e){return e.orderReducer.fetchResult},Pv=function(e,t){return(0,er.createSelector)(Dv,(function(r){return r["".concat(e,"_").concat(t)]||{pagination:bv,result:[]}}))},Iv=(0,er.createSelectorCreator)(er.defaultMemoize,(function(e,t){return e.id===t.id}))(_s,(function(e){return e})),Av=(0,er.createSelector)(Dv,Iv,ir,(function(e,r,n){var o=r.shop_id,a=r.to_id,c=e["".concat(o,"_").concat(a)];if(!c)return[];var s=c.result||[];return(0,t.denormalize)(s,[i],{orders:n})})),wv=function(e){return(0,er.createSelector)(ur,(function(r){return(0,t.denormalize)(e,u,{products:r})}))},Nv=function(e){return(0,er.createSelector)(ur,(function(r){return(0,t.denormalize)(e,[u],{products:r})}))},xv={currentPage:0,perPage:20,total:0,hasMore:!0},kv=function(e){return e.productReducer.fetchResult},Uv=function(e){return e.productReducer.allProductsSearchStatus},Mv=function(e){return e.productReducer.sellerRecommendProducts},Lv=function(e){return e.productReducer.systemRecommendProducts},jv=function(e){return e.productReducer.groups},Gv=function(e){return e.productReducer.systemRecommendProductsFetchStatus},Fv=function(e){return e.productReducer.sellerRecommendProductsFetchStatus},Hv=function(e){return e.productReducer.fetchGroupsStatus},Vv=function(e){return(0,er.createSelector)(kv,(function(t){return t[e]||{pagination:xv,result:[]}}))},Bv=(0,er.createSelector)(kv,Cs,ur,(function(e,r,n){var o=e[r];if(!o)return[];var a=o.result||[];return(0,t.denormalize)(a,[u],{products:n})})),Yv=function(e){return e.reportReducer.beingReported};!function(e){e.REPORT_REQUESTED="REPORT_REQUESTED",e.CLEAR_REPORT_REQUESTED="CLEAR_REPORT_REQUESTED"}(Sv||(Sv={}));var Qv,qv=(0,tt.createActions)((e(hv={},Sv.REPORT_REQUESTED,(function(e){return{event_time:e.event_time,url:e.url}})),e(hv,Sv.CLEAR_REPORT_REQUESTED,(function(){return{}})),hv)),Wv=qv.reportRequested,Kv=qv.clearReportRequested,zv=N().mark(Zv),Jv=N().mark(eT);function Xv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $v(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Xv(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xv(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Zv(){var e,t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,(0,Kt.select)(Yv);case 2:if(!(e=r.sent).length){r.next=10;break}return t=ue(e),r.next=7,(0,Kt.put)(Kv());case 7:return t.sort((function(e,t){return Number(t.event_time)-Number(e.event_time)})),r.next=10,(0,Kt.call)(it,{method:"POST",subServer:"coreapi",parent:"user",resource:"report_active",payload:JSON.stringify($v($v({},t[0]),{},{platform_id:(0,R.isVisitingCNSC)()||(0,R.isVisitingKRSC)()?2:1}))});case 10:case"end":return r.stop()}}),zv)}function eT(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,Kt.delay)(6e4);case 3:return e.next=5,Zv();case 5:e.next=0;break;case 7:case"end":return e.stop()}}),Jv)}const tT=(e(Qv={},Sv.REPORT_REQUESTED,(function(e,t){var r=t.payload,n=r.event_time,o=r.url;return{beingReported:[].concat(ue(e.beingReported),[{event_time:n,url:o}])}})),e(Qv,Sv.CLEAR_REPORT_REQUESTED,(function(e){return{beingReported:[]}})),Qv);function rT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var nT=[eT],oT=(0,tt.handleActions)(function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?rT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},tT),{beingReported:[]}),aT=N().mark(fT);function cT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function sT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?cT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var iT,uT=48e4,dT=6e4,lT=!1,pT="9223372036854775807";function fT(){var e,t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S;return N().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=3,(0,Kt.delay)(dT);case 3:return e=void 0,e="mini-session",h.next=7,(0,R.getItem)(e);case 7:if(!(t=h.sent)||!t.token){h.next=58;break}return h.prev=9,h.next=12,(0,Kt.select)((function(e){return e.conversationReducer}));case 12:return r=h.sent,n=r.maxLatestReceivedMessageId,o=r.maxLatestTimestampNano,h.next=17,(0,Kt.select)(An);case 17:return a=h.sent,h.next=20,(0,Kt.select)(ls);case 20:return c=h.sent.toLowerCase(),s=!a&&["all","unread"].includes(c),i=["pinned","unread"].includes(c),u={},s?u.last_timestamp_nano=o||pT:u.last_message_id=n||pT,u.last_unread_count_sync=lT,h.next=28,(0,Kt.spawn)(it,{method:"POST",resource:"user",suffix:"sync",params:sT({},u)});case 28:return d=h.sent,h.next=31,(0,Kt.join)(d);case 31:if(l=h.sent,p=l.have_new_msg,f=l.unread_count,_=l.current_version,lT=!1,!p){h.next=44;break}return h.next=39,(0,Kt.select)((function(e){return e.conversationReducer}));case 39:if(!(h.sent.syncFetchException<3)||i){h.next=44;break}return h.next=44,(0,Kt.put)(Ws({direction:"latest",source:R.ConversationSource.SYNC}));case 44:if(!(f>-1)){h.next=53;break}return h.next=47,(0,Kt.select)(Wr);case 47:if((E=h.sent)===f){h.next=52;break}return h.next=51,(0,Kt.put)(nn({count:f}));case 51:lT=!0;case 52:a||(dT=E!==f||p?6e4:dT>=uT?uT:2*dT);case 53:_&&_!==t.version&&(S=Object.assign({},t,{version:_}),(0,R.setItem)(e,S)),h.next=58;break;case 56:h.prev=56,h.t0=h.catch(9);case 58:h.next=0;break;case 60:case"end":return h.stop()}}),aT,null,[[9,56]])}function _T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ET(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?_T(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}!function(e){e.REDIRECT_CONVERSATION_REQUESTED="REDIRECT_CONVERSATION_REQUESTED"}(iT||(iT={}));var ST=N().mark(mT),hT=N().mark(gT),OT=N().mark(bT),vT=(0,tt.createActions)(e({},iT.REDIRECT_CONVERSATION_REQUESTED,(function(e){var t=e.userId,r=e.shopId,n=e.orderId,o=e.productId,a=e.message;return{userId:t,shopId:r,orderId:n,productId:o,message:void 0===a?"":a,entryPointType:e.entryPointType}}))),TT=vT.redirectConversationRequested;function mT(e){var t;return N().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=T("conversations",e),r.next=3,(0,Kt.put)(yr({entities:t.entities}));case 3:case"end":return r.stop()}}),ST)}function gT(e){var t,r,n,o,a,c,s,i,u,d,l,p,f,_,E,S,h,O,v;return N().wrap((function(T){for(;;)switch(T.prev=T.next){case 0:return t=e.payload,r=t.userId,n=t.shopId,o=t.orderId,a=t.isFromSearch,c=void 0!==a&&a,s=t.productId,i=t.message,u=t.entryPointType,T.next=3,(0,Kt.select)(zc);case 3:return d=T.sent,T.next=6,(0,Kt.call)(it,{method:"POST",resource:"conversation",suffix:"redirection",payload:JSON.stringify({user_id:parseInt(r),shop_id:n})});case 6:if(l=T.sent,p=l.id,f=l.faking,_=l.mask,E=l.to_name,h=ET(ET({userId:r,shopId:n},S={orderId:o,productId:s}),{},{conversationId:l.id}),O=d.length,v=f||!d.includes(p),u&&Mo().put(jo().setEntryPoint({payload:{type:u,conversationId:p}})),!v){T.next=21;break}return T.next=16,(0,Kt.call)(mT,l);case 16:if(!O){T.next=19;break}return T.next=19,(0,Kt.put)(qs({conversationId:p}));case 19:T.next=23;break;case 21:return T.next=23,(0,Kt.put)(Rr({name:"conversations",id:p,record:{to_name:E,mask:_}}));case 23:if(!i){T.next=26;break}return T.next=26,(0,Kt.put)(hE({draft:i,conversationId:p}));case 26:return T.next=28,(0,Kt.call)(R.setItem,"mini-sc_redirect",h);case 28:return T.next=30,(0,Kt.select)(es);case 30:if(T.sent===p&&!v){T.next=34;break}return T.next=34,(0,Kt.put)(ai({conversation:l,sourceInfo:S}));case 34:return T.next=36,(0,Kt.select)(Vn);case 36:if(T.sent){T.next=40;break}return T.next=40,(0,Kt.call)(pa,{payload:{shouldShowWindow:!0}});case 40:if(O){T.next=43;break}return T.next=43,(0,Kt.put)(qs({conversationId:p}));case 43:return T.next=45,(0,Kt.put)(ta({shouldShowConversationDetail:!0}));case 45:!c&&Mo().put(jo().sendMessagesRequested({payload:{conversationId:l.id,messages:[{type:"text",content:{text:""},isFaking:!0}],more:{isFakingSource:!0}}}));case 46:case"end":return T.stop()}}),hT)}function bT(){return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Kt.takeEvery)(TT,gT);case 2:case"end":return e.stop()}}),OT)}var yT=[fT,bT],RT=N().mark(CT);function CT(e,t,r){return N().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Kt.takeEvery)(e,N().mark((function e(n){var o;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.payload.id){e.next=5;break}return e.next=4,(0,Kt.call)(t,n);case 4:return e.abrupt("return");case 5:return e.next=7,(0,Kt.race)({task:(0,Kt.call)(t,n),cancel:(0,Kt.take)((function(e){return e.type===r.toString()&&e.payload.id===o}))});case 7:case"end":return e.stop()}}),e)})));case 2:case"end":return n.stop()}}),RT)}var DT=N().mark(AT);function PT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function IT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?PT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function AT(e,t,r){var n,o,a,c,s=arguments;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=s.length>3&&void 0!==s[3]?s[3]:[],o=e,a=[],c=[],Array.isArray(e)&&(o=(T(r,e).entities||{})[r]||{}),t.forEach((function(e){var t=e.id,s=o[t];s?["conversations","agentConversations"].includes(r)&&(void 0!==s.faking||s.latestMessageStatus||void 0!==s.unreplied)?(delete(e=IT(IT({},s),e)).faking,delete e.latestMessageStatus,delete e.unreplied,c.push(e)):(n.length&&n.forEach((function(t){e[t]=s[t]})),a.push((0,Kt.put)(Rr({name:r,id:t,record:IT({},e)})))):c.push(e)})),c.length&&a.push((0,Kt.put)(yr({entities:T(r,c).entities}))),i.next=9,(0,Kt.all)(a);case 9:case"end":return i.stop()}}),DT)}var wT=function(e,t,r,n){switch(r){case"reset":if(n){var o=Array.isArray(t)?ue(t):[];return o.unshift(n),o}return t;case"latest":return t.concat(e.filter((function(e){return!t.includes(e)})));case"older":return e.concat(t.filter((function(t){return!e.includes(t)})));default:return t}};function NT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xT(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?NT(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NT(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var kT=function(e,t,r){if(e){var n={};return e.forEach((function(e){n[e]=!0})),(0,R.simpleEqualCheck)(r.slice(0,R.persistLimit),e)?xT(xT({},t),{},{changed:!1}):{changed:!0,conversationIds:e,conversationIdsMap:n,lastConversationId:e[e.length-1]}}return null},UT=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||"number"!=typeof e.storedTimestamp)return!1;var r=18e4,n=18e5;return Date.now()<e.storedTimestamp+(t?r:n)},MT=new(I(187).EventEmitter),LT=!1,jT=null,GT=document.location,FT="".concat(GT.protocol,"//").concat(GT.host,"/favicon.ico");function HT(){var e="t=".concat(Date.now()),t=[FT,e].join("?");jT=setTimeout((function(){le()(t,{method:"GET"}).then((function(){clearTimeout(jT),LT=!1,window.dispatchEvent(new Event("judge-online"))})).catch((function(){HT()}))}),5e3)}function VT(){if(LT)return null;LT=!0,HT()}var BT=(0,R.checkIsScChat)(),YT=new(Y())({name:"".concat((0,R.getRuntimeRegion)(),"_").concat((0,R.getRuntimeServer)(),"_chat-ws"),shouldShared:BT}),QT=YT.isShared,qT=YT.socket,WT=function(){return qT.emit("message","13".concat(JSON.stringify({country:((0,R.getRuntimeRegion)()||"").toLocaleUpperCase(),source:"newwebchat"})))};function KT(){return KT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},KT.apply(this,arguments)}var zT=["SPC_U","SPC_F","SPC_T_ID","SPC_T_IV"];function JT(e){var t={};if("function"==typeof e)for(var r=e(),n=0,o=zT;n<o.length;n++){var a=o[n];t[a]=r[a]}return t}const XT=JSON.parse('{"OB":{"test":"test.","stable":"test-stable.","staging":"staging.","liveish":"live-test.","live":"","sandbox":"sandbox.","uat":"uat."}}');var $T=[],ZT=function(){function e(e,t){var r=this;this.context=e,this.methodName=t,this.originalMethodReference=e[t],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){var e=r.boundMethodChain[r.boundMethodChain.length-1];return e.apply(void 0,arguments)},e[t]=this.wrappedMethod}e.add=function(e,t,r){(function(e,t){var r=em(e,t);return r||(r=new ZT(e,t),$T.push(r)),r})(e,t).add(r)},e.remove=function(e,t,r){var n=em(e,t);n&&n.remove(r)};var t=e.prototype;return t.add=function(e){this.methodChain.push(e),this.rebindMethodChain()},t.remove=function(e){var t=this.methodChain.indexOf(e);t>-1&&(this.methodChain.splice(t,1),this.methodChain.length>0?this.rebindMethodChain():this.destory())},t.rebindMethodChain=function(){this.boundMethodChain=[];for(var e,t=0;e=this.methodChain[t];t++){var r=this.boundMethodChain[t-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(e(r))}},t.destory=function(){var e=$T.indexOf(this);e>-1&&($T.splice(e,-1),this.context[this.methodName]=this.originalMethodReference)},e}();function em(e,t){return $T.filter((function(r){return r.context===e&&r.methodName===t}))[0]}var tm=function(){function e(){}var t=e.prototype;return t.upgrade=function(t,r){if(r.oldVersion<e.DATABASE_VERSION&&(t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_EVENTS_V1),t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS_V1)&&t.deleteObjectStore(e.OBJECT_STORE_SESSIONS_V1)),!t.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)){var n=t.createObjectStore(e.OBJECT_STORE_EVENTS,{autoIncrement:!0});n.createIndex(e.INDEX_EVENTS_FETCHED,e.INDEX_EVENTS_FETCHED,{unique:!1}),n.createIndex(e.INDEX_EVENT_TIMESTAMP,e.INDEX_EVENT_TIMESTAMP,{unique:!1})}t.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)||t.createObjectStore(e.OBJECT_STORE_SESSIONS)},t.init=function(){var t=P(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.openDB(e.DATABASE_NAME,e.DATABASE_VERSION);case 3:return this.idb=t.sent,t.abrupt("return",!0);case 7:return t.prev=7,t.t0=t.catch(0),console.warn("[IndexedDBStorage]",t.t0),t.abrupt("return",!1);case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),t.openDB=function(t,r){var n=this;return new Promise((function(o,a){var c=self.window.indexedDB.open(t,r);c.onblocked=function(){console.warn("[IndexedDBStorage] Upgrade is blocked since connection to old version exists.")},c.onerror=function(e){try{e.preventDefault()}catch(e){}a(e)},c.onsuccess=function(t){var r=t.target.result;r.objectStoreNames.contains(e.OBJECT_STORE_EVENTS)&&r.objectStoreNames.contains(e.OBJECT_STORE_SESSIONS)?(r.onerror=function(e){console.warn("[IndexedDBStorage]",e.target.errorCode)},r.onversionchange=function(){r.close(),console.warn("[IndexedDBStorage] A new version of indexedDB is ready.")},o(r)):a("Required ObjectStore cannot be found.")},c.onupgradeneeded=function(e){var t=e.target.result;try{n.upgrade(t,e)}catch(e){a(e)}}}))},t.addEvent=function(t){var r=this;return new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)},a.objectStore(e.OBJECT_STORE_EVENTS).add({data:JSON.stringify(t),timestamp:Date.now(),fetched:"f"})}))},t.getEvents=function(t){var r=this,n=[],o=[];return new Promise((function(a,c){var s=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");s.oncomplete=function(){a({keys:n,data:o})},s.onerror=function(e){c(e)},s.onabort=function(e){c(e)};var i=IDBKeyRange.only("f");s.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENTS_FETCHED).openCursor(i).onsuccess=function(e){var r=e.target.result;r&&(n.push(r.primaryKey),o.push(JSON.parse(r.value.data)),r.update(KT({},r.value,{fetched:"t"})),(-1===t||t-- >1)&&r.continue())}}))},t.resetEvents=function(t,r){var n=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(r,o){var a=n.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){r(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).openCursor(c).onsuccess=function(e){var t=e.target.result;t&&(t.update(KT({},t.value,{fetched:"f"})),t.continue())}}))},t.removeEvents=function(t){var r=this;return!t||t.length<=0?Promise.resolve(!0):new Promise((function(n,o){var a=r.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");a.oncomplete=function(){n(!0)},a.onerror=function(e){o(e)},a.onabort=function(e){o(e)};var c=IDBKeyRange.bound(t[0],t[t.length-1]);a.objectStore(e.OBJECT_STORE_EVENTS).delete(c)}))},t.getSession=function(t){var r=this;return new Promise((function(n,o){var a={},c=r.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");c.oncomplete=function(){n(a)},c.onerror=function(e){o(e)},c.onabort=function(e){o(e)};var s=c.objectStore(e.OBJECT_STORE_SESSIONS);s.get(e.KEY_SESSION).onsuccess=function(r){a=t(r.target.result),s.put(a,e.KEY_SESSION)}}))},t.getCurrentSessionId=function(){var t=this;return new Promise((function(r,n){var o={},a=t.idb.transaction(e.OBJECT_STORE_SESSIONS,"readwrite");a.oncomplete=function(){r(o.sessionId)},a.onerror=function(e){n(e)},a.onabort=function(e){n(e)},a.objectStore(e.OBJECT_STORE_SESSIONS).get(e.KEY_SESSION).onsuccess=function(e){o=e.target.result}}))},t.removeExpiredEvents=function(){var t=this;return new Promise((function(r,n){var o=t.idb.transaction(e.OBJECT_STORE_EVENTS,"readwrite");o.oncomplete=function(){r(!0)},o.onerror=function(e){n(e)},o.onabort=function(e){n(e)};var a=IDBKeyRange.upperBound(Date.now()-e.RETENTION);o.objectStore(e.OBJECT_STORE_EVENTS).index(e.INDEX_EVENT_TIMESTAMP).openCursor(a).onsuccess=function(e){var t=e.target.result;t&&(t.delete(),t.continue())}}))},e}();tm.DATABASE_NAME="data-tracking",tm.DATABASE_VERSION=3,tm.OBJECT_STORE_EVENTS_V1="events",tm.OBJECT_STORE_EVENTS="events_v2",tm.OBJECT_STORE_SESSIONS_V1="sessions",tm.OBJECT_STORE_SESSIONS="session_v2",tm.INDEX_EVENTS_FETCHED="fetched",tm.INDEX_EVENT_TIMESTAMP="timestamp",tm.KEY_SESSION="current_session",tm.RETENTION=1728e5;var rm=function(){function e(e,t){this.storage=e,this.storageKey=t}var t=e.prototype;return t.get=function(){return this.storage.get(this.storageKey)||[]},t.set=function(e){return e=e||[],this.storage.set(this.storageKey,e)},t.enqueue=function(e){var t=this.get();t.push(e),this.set(t)},t.batchDequeue=function(e){var t=this.get(),r=t.slice(0,e),n=t.slice(e);return this.set(n),r},t.putBackBatchToQueue=function(e){return this.set(e.concat(this.get()))},e}(),nm=function(){function e(){var t=this;e.supportsLocalStorage()?this.storage={get:function(e){var t=self.window.localStorage.getItem(e);return t?JSON.parse(t):void 0},set:function(e,t){var r=JSON.stringify(t);self.window.localStorage.setItem(e,r)}}:(this.backStore={},this.storage={get:function(e){return t.backStore[e]},set:function(e,r){t.backStore[e]=r}}),this.queue=new rm(this.storage,e.QUEUE_STORAGE_KEY)}e.supportsLocalStorage=function(){if(!self.window)return!1;try{return self.window.localStorage.setItem(e.CHECK_STORAGE_KEY,e.CHECK_STORAGE_KEY),self.window.localStorage.removeItem(e.CHECK_STORAGE_KEY),!0}catch(e){return!1}};var t=e.prototype;return t.addEvent=function(e){return this.queue.enqueue(e),Promise.resolve(!0)},t.getEvents=function(e){var t=-1===e?this.queue.get():this.queue.batchDequeue(e);return Promise.resolve({data:t})},t.resetEvents=function(e,t){return this.queue.putBackBatchToQueue(t),Promise.resolve(!0)},t.removeEvents=function(e){return Promise.resolve(!0)},t.getSession=function(t){var r=this.storage.get(e.SESSION_STORAGE_KEY);return r=t(r=r&&"sessionId"in r&&"sequenceId"in r&&"timestamp"in r?r:null),this.storage.set(e.SESSION_STORAGE_KEY,r),Promise.resolve(r)},t.getCurrentSessionId=function(){var t=this.storage.get(e.SESSION_STORAGE_KEY),r=t&&"sessionId"in t?t.sessionId:va()();return Promise.resolve(r)},e}();nm.QUEUE_STORAGE_KEY="bi-tracking::events",nm.SESSION_STORAGE_KEY="bi-tracking::session",nm.CHECK_STORAGE_KEY="bi-tracking::check";var om=null,am=function(){function e(){}return e.initIndexedDB=function(){var e=P(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!self.window||!self.window.indexedDB){e.next=8;break}return t=new tm,e.next=4,t.init();case 4:if(!e.sent){e.next=8;break}try{t.removeExpiredEvents()}catch(e){console.warn("[TrackerStorage]",e)}return e.abrupt("return",t);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.get=(t=P(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(om){t.next=5;break}return t.next=3,e.initIndexedDB();case 3:(om=t.sent)||(om=new nm);case 5:return t.abrupt("return",om);case 6:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),e;var t}(),cm="",sm="",im=function(){function e(){}return e.getSession=function(){var t=P(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,am.get();case 2:return r=t.sent,t.next=5,r.getSession((function(t){var r=Date.now();return null==t||r-t.timestamp>e.SESSION_DURATION?t={sessionId:va()(),timestamp:r,sequenceId:0}:(t.sequenceId+=1,t.timestamp=r),t}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.GetSessionId=function(){var e=P(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,am.get();case 2:return t=e.sent,e.next=5,t.getCurrentSessionId();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.setLatestEventId=function(e){cm=e},e.getLatestEventId=function(){return cm},e.setLatestViewPageType=function(e){sm=e},e.getLatestViewPageType=function(){return sm},e}();function um(e){var t={},r=(e=e||"").indexOf("?");if(-1!==r){var n=e.substring(r+1);(n=n.split("#")[0]).split("&").forEach((function(e){if(e){var r=e.indexOf("="),n=r>-1?e.substring(0,r):e,o=r>-1?decodeURIComponent(e.substring(r+1)):"";t[n]=o}}))}return t}function dm(e){return Object.keys(e).length<=0}function lm(e,t){return!!e&&e.split("/")[2]===t}function pm(e){var t={};return e.hasOwnProperty("affiliate_trackid")&&(t.affiliate_trackid=e.affiliate_trackid),e.hasOwnProperty("utm_source")&&(t.utm_source=e.utm_source),e.hasOwnProperty("utm_medium")&&(t.utm_medium=e.utm_medium),e.hasOwnProperty("utm_campaign")&&(t.utm_campaign=e.utm_campaign),e.hasOwnProperty("utm_term")&&(t.utm_term=e.utm_term),e.hasOwnProperty("utm_content")&&(t.utm_content=e.utm_content),t}function fm(e){var t={};return e.hasOwnProperty("event_source")&&(t.event_source=e.event_source),t}function _m(e){if(!self.document||!self.location)return null;var t=null;try{t=um(self.location.href)}catch(e){console.warn("[getParams]",e)}if(!t||dm(t))return null;var r={},n=lm(self.document.referrer,self.location.hostname);return(e&&n||!e)&&(r=fm(t)),e&&!n&&(r=pm(t)),dm(r)?null:r}function Em(e){if(e.hash&&e.hash.startsWith("#/")){var t=e.hash.lastIndexOf("#");return 0===t?e.hash.substring(1):e.hash.substring(1,t)}return e.pathname}function Sm(){return location.pathname+location.hash+location.search}function hm(){return location.host+location.pathname+location.hash}im.SESSION_DURATION=18e5;var Om=function(){function e(e){if(self.window&&self.window.addEventListener){var t={shouldTrackHistoryChange:this.shouldTrackHistoryChange,trackReplaceState:!1};this.opts=KT({},t,e),this.path=Sm(),this.pathname=Em(location),this.eventId=va()(),im.setLatestEventId(this.eventId),this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),this.handleHashChange=this.handleHashChange.bind(this),this.handleLoad=this.handleLoad.bind(this),self.history&&self.history.pushState?(ZT.add(history,"pushState",this.pushStateOverride),ZT.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState)):window.addEventListener("hashchange",this.handleHashChange),this.handleLoad()}else console.warn("[AutoTracker]","not work unsupporting browser")}var t,r=e.prototype;return r.pushStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!0)}},r.replaceStateOverride=function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleHistoryChange(!1)}},r.handlePopState=function(){this.handleHistoryChange(!0)},r.handleHashChange=function(){this.handleHistoryChange(!0)},r.handleLoad=function(){var e=this,t={isOnload:!0,referrer:self.document.referrer,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:hm()};setTimeout((function(){try{e.sendPageview(t)}catch(e){console.warn("[AutoTracker]",e)}}),300)},r.sendPageview=(t=P(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,im.getSession();case 2:return r=e.sent,n=Date.now(),o=um(t.href),a={auto_mapped_view:im.getLatestViewPageType(),auto_refer:t.referrer,auto_pathname:t.pathname,auto_url:t.href,start_time:n},dm(o)||(a.param_string=JSON.stringify(o)),c=lm(t.referrer,t.hostname),(t.isOnload&&c||!t.isOnload)&&!dm(s=fm(o))&&(a=KT({},a,s)),t.isOnload&&!c&&!dm(i=pm(o))&&(a=KT({},a,i)),u={civ_id:t.eventId,info:{auto_view_id:"browser-abs|"+t.absolutePath,data:{auto_pv_common:a},operation:"auto_view",usage_id:0},sequence_id:r.sequenceId,session_id:r.sessionId,timestamp:n,type:"v3"},e.next=13,am.get();case 13:return d=e.sent,e.next=16,d.addEvent(u);case 16:case"end":return e.stop()}}),e)}))),function(e){return t.apply(this,arguments)}),r.shouldTrackHistoryChange=function(e,t){return!(!e||!t)},r.handleHistoryChange=function(e){var t,r=this,n=this.path,o=this.pathname,a=Sm(),c=Em(location);if(n!==a&&this.opts.shouldTrackHistoryChange.call(this,a,n)&&(this.path=a,this.pathname=c,e||this.opts.trackReplaceState)){this.eventId=va()(),t=function(){im.setLatestEventId(r.eventId)},"function"==typeof requestIdleCallback?requestIdleCallback((function(){return t()})):t();var s={isOnload:!1,referrer:o,eventId:this.eventId,href:self.location.href,hostname:self.location.hostname,pathname:this.pathname,absolutePath:hm()};setTimeout((function(){try{r.sendPageview(s)}catch(e){console.warn("[AutoTracker]",e)}}),300)}},e}(),vm=function(){function e(t){this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this)}return e.prototype.sync=(t=P(regeneratorRuntime.mark((function t(){var r,n,o,a=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,am.get();case 5:return r=t.sent,t.next=8,r.getEvents(-1);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[Sender]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=22;break}return t.next=18,r.removeEvents(n.keys);case 18:this.backoff=e.BACKOFF_PERIOD,this.isSyncing=!1,t.next=26;break;case 22:return t.next=24,r.resetEvents(n.keys,n.data);case 24:this.backoff*=2,setTimeout((function(){a.isSyncing=!1,a.sync()}),this.backoff);case 26:t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[Sender]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])}))),function(){return t.apply(this,arguments)}),e;var t}();vm.BACKOFF_PERIOD=200;var Tm=function(){function e(t){this.syncPeriod=e.SYNC_PERIOD,this.isSyncing=!1,this.makePromise=t,this.sync=this.sync.bind(this),this.syncWhenIdle=this.syncWhenIdle.bind(this),this.setSyncThreadId=this.setSyncThreadId.bind(this),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)}var t=e.prototype;return t.setSyncThreadId=function(){this.syncThreadId&&clearInterval(this.syncThreadId),this.syncThreadId=setInterval(this.syncWhenIdle,this.syncPeriod)},t.syncWhenIdle=function(){window&&window.requestIdleCallback?window.requestIdleCallback(this.sync,{timeout:1e3}):this.sync()},t.sync=function(){var t=P(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!this.isSyncing){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,am.get();case 5:return r=t.sent,t.next=8,r.getEvents(e.BATCH_SIZE);case 8:if(!((n=t.sent).data.length<=0)){t.next=11;break}return t.abrupt("return");case 11:return this.isSyncing=!0,t.next=14,this.makePromise(n.data).catch((function(e){console.warn("[SenderWithInterval]",e)}));case 14:if(!(o=t.sent)||200!==o.status){t.next=21;break}return t.next=18,r.removeEvents(n.keys);case 18:this.syncPeriod>e.SYNC_PERIOD&&(this.syncPeriod=e.SYNC_PERIOD,this.setSyncThreadId()),t.next=25;break;case 21:return t.next=23,r.resetEvents(n.keys,n.data);case 23:this.syncPeriod*=2,this.setSyncThreadId();case 25:this.isSyncing=!1,t.next=32;break;case 28:t.prev=28,t.t0=t.catch(0),console.warn("[SenderWithInterval]",t.t0),this.isSyncing=!1;case 32:case"end":return t.stop()}}),t,this,[[0,28]])})));return function(){return t.apply(this,arguments)}}(),e}();Tm.SYNC_PERIOD=2e3,Tm.BATCH_SIZE=20;var mm,gm=KT({},XT.OB,{liveish:""}),bm=function(){function e(e){var t,r;this.options=e,this.endpoint=e.endpoint||(t=e.env.toLowerCase(),r=e.locale.toLowerCase(),"https://c-api-bit."+gm[t]+"shopeemobile.com/"+r+"/tr"),this.pageId=va()(),this.isOnload=!0,void 0===e.appId&&(this.options.appId=0),(void 0===e.enableAutoTrack||e.enableAutoTrack)&&(this.autoTracker=new Om),e.sendEventByInterval?this.sender=new Tm(this.post.bind(this)):this.sender=new vm(this.post.bind(this))}var t,r=e.prototype;return r.updatePageId=function(){this.pageId=va()()},r.track=function(e,t){console.warn("[TrackingV3SDK] TrackingV3SDK.track is deprecated"),this.sync({data:{type:e,timestamp:Date.now(),info:t}})},r.sync=function(){var e=P(regeneratorRuntime.mark((function e(t){var r,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.prev=1,e.next=4,this.preProcess(r);case 4:return n=e.sent,e.next=7,am.get();case 7:return o=e.sent,e.next=10,o.addEvent(n);case 10:if(this.options.sendEventByInterval){e.next=13;break}return e.next=13,this.sender.sync();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.warn("[TrackingV3SDK]",e.t0);case 18:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(t){return e.apply(this,arguments)}}(),r.post=function(){var e=P(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.convertEvents(t);case 2:if(!((r=e.sent).length>0)){e.next=8;break}return e.next=6,this.addMeta(r);case 6:return n=e.sent,e.abrupt("return",this.options.fetch(this.endpoint,{method:"POST",headers:{"X-SPC-DF":n.uuid},body:JSON.stringify(n)}));case 8:return e.abrupt("return",Promise.resolve());case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.addMeta=(t=P(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.options,n=r.platform,o=r.ua,a=r.source,c=r.meta,s=r.getCookies,!(i=JT(s)).SPC_F){e.next=6;break}e.t0=i.SPC_F,e.next=9;break;case 6:return e.next=8,im.GetSessionId();case 8:e.t0=e.sent;case 9:return u=e.t0,e.abrupt("return",{uuid:u,events:t,meta:KT({},c,{platform:n,ua:o,source:a,locale:this.options.locale.toLowerCase(),cookies:i,userid:i.SPC_U&&"-"!==i.SPC_U?parseInt(i.SPC_U,10):null,pageid:this.pageId,app_id:this.options.appId})});case 11:case"end":return e.stop()}}),e,this)}))),function(e){return t.apply(this,arguments)}),r.convertEvents=function(){var e=P(regeneratorRuntime.mark((function e(t){var r,n,o,a,c,s,i,u=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.options.v2ToV3ConverterPromise;case 2:r=e.sent,n=[],o=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}if(!(s>=a.length)){e.next=3;break}return e.abrupt("return","break");case 3:i=a[s++],e.next=10;break;case 6:if(!(s=a.next()).done){e.next=9;break}return e.abrupt("return","break");case 9:i=s.value;case 10:return t=i,e.next=13,r(t);case 13:e.sent.forEach((function(e){e.error||(u.postProcess(t,e),n.push(e))}));case 15:case"end":return e.stop()}}),e)})),a=t,c=Array.isArray(a),s=0,a=c?a:a[Symbol.iterator]();case 6:return e.delegateYield(o(),"t0",7);case 7:if("break"!==e.t0){e.next=10;break}return e.abrupt("break",12);case 10:e.next=6;break;case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.preProcess=function(){var e=P(regeneratorRuntime.mark((function e(t){var r,n,o,a,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=im.getLatestEventId(),n=this.options.preProcess(this,t),e.next=4,im.getSession();case 4:return o=e.sent,n=KT({},n,{session_id:o.sessionId,sequence_id:o.sequenceId,civ_id:r}),"v3"===t.type?t.info&&"view"===t.info.operation&&(a=t.info.page_type||"",im.setLatestViewPageType(a),n.params=_m(this.isOnload),this.isOnload=!1):"pageState"===t.type&&t.info&&(c=t.info.pageType||"",im.setLatestViewPageType(c),n.params=_m(this.isOnload),this.isOnload=!1),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),r.postProcess=function(e,t){if(t.info&&void 0===t.info.usage_id&&(t.info.usage_id=0),t.session_id=e.session_id,t.sequence_id=e.sequence_id,t.civ_id=e.civ_id,t.info&&"auto_view"===t.info.operation&&this.options.matchRoutes){var r=this.options.matchRoutes,n=r(t.info.data.auto_pv_common.auto_pathname);n&&(t.info.auto_view_id="browser|"+n);var o=t.info.data.auto_pv_common.auto_refer;if(o&&o.startsWith("/")){var a=r(o);a&&(t.info.data.auto_pv_common.auto_refer="browser|"+a)}}if(e.params&&t.info.data){var c=t.info.data.view_common||{};c=KT({},c,e.params),t.info.data.view_common=c}return t},e}();function ym(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Rm(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?ym(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ym(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Cm=function(t){var r={};for(var n in t)for(var o in t[n])r=Rm(Rm({},r),{},e({},o,{section:n,type:t[n][o]}));return r}({buyer_information_dropdown:{clickViewProfile:"more_view_profile",clickMoreReport:"more_report",clickBlockInProfile:"more_block"},buyer_information:{clickProfileMenus:"username_more_button",impressionProfileMenus:""},chat_more_dropdown:{clickClosedInProfile:"chat_more_close",markAsPinned:"pin_chat",markAsUnpinned:"unpin_chat",markAsRead:"mark_as_read",markAsUnread:"mark_as_unread",markAsDelete:"delete",markAsClose:"close",markAsRestart:"restart",markAsMute:"mute",markAsUnmute:"unmute"},conversation_window:{replyIcon:"reply_icon",deleteIcon:"delete_icon",repliedMessageBar:"replied_message_bar",repliedMessageBarCloseButton:"replied_message_bar_close_button",actionDragVideoInMediaPreivew:"",deletePreviewMediaInMediaPreivew:"",closePreviewMediaInMediaPreivew:"",impressionMediaInMediaPreivew:"preview_media",clickAddMediaInMediaPreivew:"preview_add_media",clickResendVideo:"resend_video",impressionVideoMessage:"video_play_thumbnail",impressionImageMessage:"qrcode_alert",clickCancelVideo:"cancel_video",clickAcceptOffer:"accept_offer",clickRejectOffer:"reject_offer",clickViewProductInMall:"view_in_mall",clickViewProductInSellerCenter:"view_in_seller_center",clickViewDetailInSellerCenter:"order_view_detail_button",clickHandleStoryMessage:"story",clickPlayInVideoMessage:"video_play_thumbnail",impressionResendVideo:"resend_video",clickPreviewQrcode:"open_qrcode_alert",clickOrderMessage:"order_message",clickProductMessage:"product_message",clickProductItemMessage:"item_collection_message",clickClaimVoucher:"voucher_claim",impressionPopupOrderCard:"popup_order_card",impressionOrderMessage:"order_message",impressionProductMessage:"product_message",impressionBundleDealCard:"bundle_deal_card",impressionVoucherCard:"claim_card",impressionProductListCard:"product_list_card",impressionCartCard:"cart_card",impressionRateCard:"rate_card",impressionProductCategoryCard:"product_category_card",impressionFlashSaleCard:"flash_sale_card",impressionOrderFromSourceInSpecialMessage:"order_message_source",impressionProductFromSourceInSpecialMessage:"product_message_source",clickVisitProductInSellerCenter:"product_message_source",clickVisitOrderInSellerCenter:"order_message_source",impressionOrClickUnreadBriefMessage:"latest_message",clickFlashSaleItemsDetail:"flash_sale_items",clickViewFlashSaleInMall:"flash_sale_button",clickViewBundleDealInMall:"bundle_deal_button",clickBundleDealDetail:"bundle_deal_items",clickCartButton:"cart_button",clickCartProduct:"cart_product",clickProductListMessage:"product_list_items",clickRateButton:"rate_button",clickRateProduct:"rate_product",impressionVoucherForReceiverInMinichat:"claim_card",impressionPopupProductCard:"popup_product_card"},conversation_window_pop_up:{clickCloseMediaPreviewModalFromX:"close_pop_up",clickCloseMediaPreviewModalFromBackground:"close_pop_up_background",clickPreviewLeftMedia:"left",clickPreviewRightMedia:"right",impressionAfterSwipeMedia:""},conversation_window_qrcode_pop_up:{impressionUnknowQrcode:"qrcode_alert",clickQrcodeToLearnMore:"learn_more",clickBackToChat:"back_to_chat",clickOpenQrcode:"open_image",impressionQrcode:""},conversation_window_video_pop_up:{actionFinishVideo:"video_end",clickSlideBar:"slide_bar",clickDownloadVideo:"download",clickVideoMinimize:"minimize",clickVideoExpand:"expand",impressionReloadVideoError:"reload_video",clickReloadVideo:"reload_video",clickStopVideo:"stop_video",clickRestartVideo:"restart_video"},voucher_information_tab:{impressionVoucherInWorkStation:"voucher_card"},order_information_tab:{clickViewOrderDetail:"order_view_detail",clickSendOrderLink:"order_sendlink"},chat_list_dropdown:{clickFilter:"filter",clickFilterAll:"filter_all",clickFilterUnreplied:"filter_unreplied",clickFilterUnread:"filter_unread",clickFilterPinned:"filter_pinned",clickFilterClosed:"filter_closed"},chat_list:{clickChatMore:"chat_more",clickChatUser:"chat_user"},shop_head_status_dropdown:{clickStatusOnlineButton:"status_online_button",clickStatusHangup:"status_hangup"},delete_confirmation_popup:{deleteConfirm:"delete_confirmation",cancelConfirm:"cancel_confirmation"},error_popup:{error:"error_popup"},product_card_pop_up:{clickSendPopupProductCard:"send",clickClosePopupProductCard:"close"},order_card_pop_up:{clickSendPopupOrderCard:"send",clickClosePopupOrderCard:"close"},order_card:{clickCopyOrderSN:"copy"}}),Dm=(["message_shortcuts","auto_reply","notification","translation_assistant","timestamp","performance_data","login_status","faq_assistant","seller_recom"].reduce((function(t,r){return Rm(Rm({},t),{},e({},"click_".concat(r),{section:"",type:r}))}),{}),Rm(Rm({},Cm),{},(e(mm={impressionMsgGamesFailQuota:{section:"conversation_window",type:"msg_games_fail_quota"},impressionConversationCell:{section:"",type:"chat_conversation"},clickConversationCell:{section:"",type:"chat_conversation"},operateHints:{section:"message_toolbar",type:"shortcut_result_from_auto_popup"},clickEditShortcut:{section:"message_toolbar",type:"shortcut_button_draft"},operateSearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_available"},searchShortcutsFocus:{section:"message_toolbar",type:"shortcut_button"},impressionEmptySearchShortcuts:{section:"message_toolbar",type:"shortcut_result_from_search_empty"},selectShortcutFromShortcutButton:{section:"message_toolbar",type:"shortcut_result_from_shortcut_button"},clickMuteInProfile:{section:"personal_information_dropdown",type:"mute"},clickUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionMuteInProfile:{section:"personal_information_dropdown",type:"mute"},impressionUnmuteInProfile:{section:"personal_information_dropdown",type:"unmute"},impressionSafetyTip:{section:"conversation_window",type:"safety_tip"},clickSafetyTipLearnMore:{section:"safety_tip",type:"learn_more"},clickAddFromTemplate:{section:"message_shortcuts_detail_tab",type:"add_message_template"},actionAdjustMessageShortcuts:{section:"message_shortcuts_tab",type:""},actionAdjustMessageShortcutsDetail:{section:"message_shortcuts_detail_tab",type:""},impressionClickableCard:{section:"conversation_window",type:"clickable_message"},clickClickableCard:{section:"conversation_window",type:"clickable_message"},clickRateCardSubmit:{section:"evaluation_card",type:"evaluation_submit_button"},impressionRateCard:{section:"evaluation_card",type:""},impressionRateCardFeedback:{section:"evaluation_card_feedback",type:""},clickTranslationFeedback:{section:"",type:"translation_feedback"},impressionFeedbackPopup:{section:"feedback_popup_window",type:"translation_feedback"},clickFeedbackSubmit:{section:"feedback_popup_window",type:"feedback_submit_button"},impressionFeedbackMore:{section:"feedback_popup_window",type:"feedback_tell_us_more"},clickSendMessageButton:{section:"",type:"send_message_button"},clickRestartButton:{section:"",type:"restart_conversation"},clickStickerInToolbar:{section:"message_toolbar",type:"sticker_button"},clickImageInToolbar:{section:"message_toolbar",type:"image_button"},clickVideoInToolbar:{section:"message_toolbar",type:"video_button"},clickShortcutInToolbar:{section:"message_toolbar",type:"shortcut_button"},clickSendRatingCard:{section:"",type:"appraise_button"},clickVisitSellerCenterFromShopList:{section:"",type:"visit_seller_center"},clickBackChatFromShopList:{section:"",type:"view_message"},clickShopHeadStatus:{section:"",type:"shop_head_status"},viewPage:{section:"",type:""},impressionChatRoom:{section:"conversation_window",type:""},translationShowOriginal:{section:"",type:"show_original"},translationTryAgain:{section:"",type:"try_again"}},"clickShortcutInToolbar",{section:"message_toolbar",type:"shortcut_button"}),e(mm,"clickOrdersInToolbar",{section:"message_toolbar",type:"orders_button"}),e(mm,"clickProductsInToolbar",{section:"message_toolbar",type:"products_button"}),e(mm,"clickSearchNameResult",{section:"",type:"search_name_result"}),e(mm,"clickSearchName",{type:"search_name"}),e(mm,"impressionChatIcon",{type:"chat_icon"}),e(mm,"clickChatIcon",{type:"chat_icon"}),e(mm,"clickToWebchatButton",{type:"to_webchat_button"}),e(mm,"clickFoldButton",{type:"fold_button"}),e(mm,"clickUnFoldButton",{type:"unfold_button"}),e(mm,"clickCloseButton",{type:"close_button"}),e(mm,"typeMessage",{type:"typing_message",section:"message_toolbar"}),mm)));function Pm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Im,Am=null,wm=function(e){e&&(Am=e)},Nm=null,xm=function(){var t,r;if(t=(0,R.checkIsScChat)(),window.BITrack)Nm=window.BITrack;else{var n={appId:t?1:0,fetch:le(),source:"pc",platform:"pc",ua:navigator?navigator.userAgent||navigator.vendor:"",getCookies:U().get,sendEventByInterval:!0,enableAutoTrack:!1};r=function(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?Pm(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({locale:(0,R.getRuntimeRegion)(),env:(0,R.getRuntimeServer)()},n),Im=new bm(KT({},r,{v2ToV3ConverterPromise:function(e){return[e]},preProcess:function(e,t){return t}})),Nm=Im.sync.bind(Im)}},km=function(e){var t=e.trackerName,r=e.data,n=e.operation,o=void 0===n?R.TrackerOperation.CLICK:n,a=e.page,c=e.shopId;Nm||xm();var s=function(e){var t=e.data,r=e.operation,n=e.page,o=e.shopId,a=Dm[e.trackerName],c=a.section,s=void 0===c?"":c,i=a.type,u=void 0===i?"":i,d=Am||{},l=d.shop_id,p=void 0===l?"":l,f=d.role,_=void 0===f?"":f,E=d.id,S=void 0===E?"":E,h=Object.assign({},{shopid:p||o,account_type:_||"shopee_user",account_id:S},t);return{operation:r,page_section:s,target_type:u,page_type:n||"minichat_page",data:r===R.TrackerOperation.IMPRESSION?{viewed_objects:[h]}:h}}({trackerName:t,data:r,operation:o,page:a,shopId:c});Nm({data:{type:"v3",timestamp:Date.now(),info:s}})},Um=[],Mm=function e(t){for(;(t.timeRemaining()>5||t.didTimeout)&&Um.length;){var r=Um.shift();km(r)}Um.length&&_t(e,{timeout:200})},Lm=function(e){Um.push(e),_t(Mm,{timeout:200})},jm=[];function Gm(e){if((e.timeRemaining()>5||e.didTimeout)&&jm.length){var t=ue(jm);jm=[],x.store.dispatch(BO({reportTask:t}))}jm.length&&_t(Gm,{timeout:200})}var Fm=function(e){var t;(t=jm).push.apply(t,ue(e)),_t(Gm,{timeout:200})},Hm=function(e){return e.startsWith("https://")||e.startsWith("http://")?e:"https://".concat(e)},Vm=function(e){return"https://".concat((0,R.getMallUrl)((0,R.getRuntimeRegion)())).concat(e)},Bm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.order_id,n=t.return_id;switch(e){case"order_detail_page":case"shipping_info_page":case"spl_landing_page":return Vm("/user/purchase/order/".concat(r));case"my_voucher_page":return Vm("/user/voucher-wallet");case"topay_order_detail_page":return Vm("/user/purchase?type=9");case"drc_discuss_page":return"https://".concat((0,R.getSellerCenterUrl)((0,R.getRuntimeRegion)()),"/portal/sale/return/").concat(n);case"change_mobile_number_page":return Vm("/user/account/profile");case"request_order_return_page":case"buyer_order_return_page":case"upload_evidence_page":return Vm("/user/purchase?type=8");case"return_refund_detail_page":return Vm("/return/detail/orderid/".concat(r,"?__mobile__=1"))}},Ym=function(e,t,r){return Zh(e,t,r,!0)},Qm=function(e){var t;return{checkout_id:e.checkout_id,order_sn:e.order_sn,total_price:e.default_price,currency:e.currency,order_status:String(e.order_status),item_image:(null===(t=e.items)||void 0===t?void 0:t.map((function(e){return null==e?void 0:e.image[0]})))||[e.image],list_type:e.list_type,has_request_refund:e.has_request_refund,buyer_pay_amount:e.buyer_pay_amount,seller_estimated_escrow:e.seller_estimated_escrow,shop_id:e.shop_id,order_id:e.order_id}};function qm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wm(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?qm(Object(n),!0).forEach((function(r){e(t,r,n[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Km=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SG",t=arguments.length>1?arguments[1]:void 0,r=void 0!==t&&!t;return"TW"!==e||r?R.Currencies[e]:"NT$"},zm=function(e,t){return Wm(Wm({},e),function(e,t){var r=e.original_prices,n=e.actual_prices,o=y(r.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),a=o[0],c=o[1],s=y(n.map((function(r){return(0,R.formatPrice)(r,e.country,{},t)})),2),i=s[0],u=s[1],d=a===c?a:"".concat(a," - ").concat(c),l=i===u?i:"".concat(i," - ").concat(u),p=a.includes("NaN")||i.includes("NaN");return{original_price_string:p||d===l?"":d,actual_price_string:p?"".concat(Km(e.country,t),"???"):l,storedTimestamp:Date.now()}}(e,t))};function Jm(e){return function(){var t=Array.prototype.slice.call(arguments);return e.memoize=e.memoize||{},t in e.memoize?e.memoize[t]:e.memoize[t]=e.apply(this,t)}}})(),A})(),e.exports=n(r(82677),r(26842),r(28366),r(36808),r(6222),r(99995),r(47190),r(94301),r(68214),r(52153),r(58518),r(53053),r(59065),r(67677),r(58397),r(98282),r(34857),r(20573),r(847),r(17311),r(46583),r(46811),r(31479),r(16392),r(94633),r(77217),r(87766))},26842:function(e,t,r){var n;n=(e,t,r,n)=>(()=>{var o={757:(e,t,r)=>{e.exports=r(666)},470:(e,t,r)=>{"use strict";r.d(t,{D:()=>i,t:()=>u});var n=r(661),o=r.n(n),a=r(547),c=!1,s=function(e,t){c=!0;var r=t||(0,a.CE)();o().init({lng:r,fallbackLng:r,defaultNS:"common",keySeparator:!1,debug:!1,resources:e&&e.resources||{},interpolation:{prefix:"{",suffix:"}",escapeValue:!1},react:{wait:!1,bindI18n:"languageChanged loaded",bindStore:"added removed",nsMode:"default"}})},i=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common";c||s({resources:{}},e),o().changeLanguage(e),o().addResourceBundle(e,r,t,!0,!0)},u=o().t.bind(o())},547:(e,t,r)=>{"use strict";r.d(t,{An:()=>F,CE:()=>K,Db:()=>z,E3:()=>D,Ey:()=>P,Fy:()=>V,Ht:()=>R,I7:()=>U,I9:()=>J,IE:()=>Q,Jy:()=>N,L6:()=>W,Ll:()=>k,Od:()=>M,S1:()=>i,S8:()=>y,Vm:()=>C,X7:()=>q,Y8:()=>h,YH:()=>j,dV:()=>x,jz:()=>X,k2:()=>G,nr:()=>m,qk:()=>b,r:()=>Y,u7:()=>A,wK:()=>I,xC:()=>L,z$:()=>S});var n,o,a,c,s={sg:"en",ph:"en",tw:"zh-Hant",my:"ms-MY",th:"th-TH",vn:"vi-VN",id:"id-ID",br:"pt-BR",in:"hi",cn:"zh-CN",mx:"es-MX",co:"es-CO",cl:"es-CL",ar:"es-AR",pl:"pl",es:"es-ES",fr:"fr",us:"en",kr:"en"},i=function(e,t,r){n=e.toLowerCase(),o="liveish"===t?"live-test":"stable"===t?"test-stable":t,a=r,c=s[n]||"en"},u=["my","br","mx","co","ar"],d=["id","th"],l=["us"],p=function(e){return u.includes(e)?"com.".concat(e):d.includes(e)?"co.".concat(e):l.includes(e)?"com":e},f=function(e){return"tw"===e?"xiapi":e.toLowerCase()},_=function(e){return p(e)},E=function(){return"live"===o?"shopee":"".concat(o,".shopee")},S=function(){return"cn"===n},h=function(){return"kr"===n};function O(){return v()&&!S()}function v(){var e=window.location.hostname;return e&&e.includes("cn")}var T=function(e,t){return"seller"===e?"vn"!==t||O()?"seller":"banhang":e},m=function(e,t){var r=t?t.toLowerCase():n;return"".concat(T(e,r),".").concat(f(r),".").concat(E(),".").concat("cn")},g=function(e,t){var r,a=t?t.toLowerCase():n;return O()?m(e,a):"".concat(T(e,a),".").concat((r=window.location.hostname,r&&r.includes("shopeebrasil")?"live"===o?"shopeebrasil":"".concat(o,".shopeebrasil"):E()),".").concat(_(a))},b=function(e){return g("seller",e)},y=function(){return"live"===o?"seller.shopee.cn":"seller.".concat(o,".shopee.cn")},R=function(){return"live"===o?"seller.shopee.kr":"seller.".concat(o,".shopee.kr")},C=function(){return"".concat(b(),"/webchat/api")},D=function(){return"".concat(b(),"/api")},P=function(){return g("seller-push-ws")},I=function(){return g("chat-ws")},A=function(e){var t=e?e.toLowerCase():n;return"cn"!==t&&"kr"!==t||(t="my"),v()?"".concat(f(t),".").concat("live"===o?"":"".concat(o,".")).concat("xiapibuy.com"):"".concat(E(),".").concat(_(t))},w=["sg","my","th","ph","vn","id","tw","br"],N=function(e){var t=e?e.toLowerCase():n;if(S())return"https://s-cf-sg.shopeesz.com/file/";if(h())return"https://cf.shopee.sg/file/";var r=w.includes(t);return O()&&r?"https://s-cf-".concat(t,".shopeesz.com/file/"):"https://cf.shopee.".concat(p(t),"/file/")},x=function(e){var t=e?e.toLowerCase():n;return"tw"===t&&v()?"https://cvf.shopee.cn/file/":"https://cvf.shopee.".concat(p(t),"/file/")},k=function(e){var t=e?e.toLowerCase():n,r="test-stable"===o?"staging":o;return"".concat(v()?"deo.shopeesz.com":"deo.shopeemobile.com","/shopee").concat("live"===o?"":"/test","/shopee-sticker-").concat(r,"-").concat(t)},U=function(){return"https://subaccount.".concat(E(),".com/")},M=function(){return"https://deo.shopeemobile.com/shopee/shopee-seller-live-".concat(S()||h()?"sg":n,"/downloads/")},L=function(){return"https://".concat(g("seller"),"/webchat/conversations")},j=function(){return"https://".concat(g("seller"),"/webchat")},G=function(){var e="test-stable"===o?"stable":o;return"https://deo.".concat(O()?"shopeesz":"shopeemobile",".com/shopee/shopee-seller-").concat(e,"-").concat(n,"/")},F={sg:"https://help.shopee.sg/sg/s/article/What-happens-if-I-ve-accumulated-Penalty-Points-1542975961836",my:"https://help.shopee.com.my/my/s/article/What-is-Shopee-s-Seller-Penalty-Points-system-1542971633226",th:"https://help.shopee.co.th/th/s/article/%E0%B8%A3%E0%B8%B0%E0%B8%9A%E0%B8%9A%E0%B8%84%E0%B8%B0%E0%B9%81%E0%B8%99%E0%B8%99%E0%B8%84%E0%B8%A7%E0%B8%B2%E0%B8%A1%E0%B8%9B%E0%B8%A3%E0%B8%B0%E0%B8%9E%E0%B8%A4%E0%B8%95%E0%B8%B4%E0%B8%A3%E0%B9%89%E0%B8%B2%E0%B8%99%E0%B8%84%E0%B9%89%E0%B8%B2%E0%B8%84%E0%B8%B7%E0%B8%AD%E0%B8%AD%E0%B8%B0%E0%B9%84%E0%B8%A3-1542967300368",tw:"https://help.shopee.tw/tw/s/article/%E5%A6%82%E6%9E%9C%E7%B4%AF%E7%A9%8D%E4%BA%86%E8%A8%88%E5%88%86-%E8%B3%A3%E5%AE%B6%E6%9C%83%E6%9C%89%E5%93%AA%E4%BA%9B%E6%96%B9%E9%9D%A2%E7%9A%84%E9%99%90%E5%88%B6-1542986467060",vn:"https://banhang.shopee.vn/edu/article/237",ph:"https://help.shopee.ph/ph/s/article/How-does-the-Seller-Penalty-Points-system-work-1542963021404",id:"https://seller.shopee.co.id/edu/article/1762",in:"https://seller.shopee.in/edu/courseDetail/482"},H={sg:"7a48024995c847d9a4586bab9fde57a7",id:"888adc066bf3426a8c70227470281818",mx:"e58cb9c620f54aec9e18a01632c35c05",br:"d75e2dbb49594bd19d1ea83485339a45",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",my:"b7a7ff2afd484f1dbddb3a922c7e90e7",th:"38e4b86fd0c04ae3b2c9200c7ea9c89e",ph:"bafd4812311d417c981d2690cda870bf",vn:"9e0e87184cf14246aabe6af0d78b2aa9",tw:"1bfa4a9834204eccb62858d0e2d9e083",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t=H[e];return t?"https://help.shopee.".concat(p(e),"/portal/webform/").concat(t):"https://help.shopee.".concat(p(e),"/s/contactusform")},B={sg:"cc5c96e6af6140b6920f13c6fa67ddd1",my:"2e11e4a4fd554f4aaba90814987e8d3f",th:"fab4029ae0614fdd96021ba21bdd5d56",tw:"6331df0cc3e5409c85b5f3331e385a5c",vn:"1214504dda894592a1c7ef4236912f4d",ph:"bafd4812311d417c981d2690cda870bf",id:"13a6214dacf54eeb83cea7110c6adde6",br:"23b02efbc1254721ab69549e442a6466",mx:"e58cb9c620f54aec9e18a01632c35c05",co:"a503e7f7bc4849c0824985ddd9659d33",cl:"5484e709da71430cb8980abc5cef14f0",ar:"16e6e483bc5244d9946daf570c954dc3",pl:"3e8f2872acee4938951fa12e61f5b3f6",es:"756295fca7a04f0cb25cf51821ced04f"},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"sg",t="";return t=["tw","vn"].includes(e)?"https://cs.shopee.".concat(p(e)):"https://help.shopee.".concat(p(e)),"".concat(t,"/portal/webform/").concat(B[e])},Q=function(){return o},q=function(){return n},W=function(){return a},K=function(){return c},z=function(e,t,r){var n=e||{},o=n.status,a=n.checkout_id,c=n.order_id,s=n.id,i=n.shop_id;return"unpaid"===o?"https://".concat(A(r),"/user/purchase/checkout/").concat(a,"/?shopid=").concat(i||t):"https://".concat(A(r),"/user/purchase/order/").concat(c||s,"/?shopid=").concat(i||t)},J=function(e,t,r,n){window.open("https://".concat(e?A(t):A(),"/product/").concat(n,"/").concat(r,"/"))},X=function(){return v()?"https://deo.shopeesz.com/shopee/":"https://deo.shopeemobile.com/shopee/"}},666:e=>{var t=function(e){"use strict";var t,r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function i(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(e){i=function(e,t,r){return e[t]=r}}function u(e,t,r,n){var o=t&&t.prototype instanceof S?t:S,a=Object.create(o.prototype),c=new P(n||[]);return a._invoke=function(e,t,r){var n=l;return function(o,a){if(n===f)throw new Error("Generator is already running");if(n===_){if("throw"===o)throw a;return A()}for(r.method=o,r.arg=a;;){var c=r.delegate;if(c){var s=R(c,r);if(s){if(s===E)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===l)throw n=_,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=f;var i=d(e,t,r);if("normal"===i.type){if(n=r.done?_:p,i.arg===E)continue;return{value:i.arg,done:r.done}}"throw"===i.type&&(n=_,r.method="throw",r.arg=i.arg)}}}(e,r,c),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var l="suspendedStart",p="suspendedYield",f="executing",_="completed",E={};function S(){}function h(){}function O(){}var v={};v[a]=function(){return this};var T=Object.getPrototypeOf,m=T&&T(T(I([])));m&&m!==r&&n.call(m,a)&&(v=m);var g=O.prototype=S.prototype=Object.create(v);function b(e){["next","throw","return"].forEach((function(t){i(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function r(o,a,c,s){var i=d(e[o],e,a);if("throw"!==i.type){var u=i.arg,l=u.value;return l&&"object"==typeof l&&n.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,c,s)}),(function(e){r("throw",e,c,s)})):t.resolve(l).then((function(e){u.value=e,c(u)}),(function(e){return r("throw",e,c,s)}))}s(i.arg)}var o;this._invoke=function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}}function R(e,r){var n=e.iterator[r.method];if(n===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,R(e,r),"throw"===r.method))return E;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var o=d(n,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,E;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,E):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,E)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function D(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function I(e){if(e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,c=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return c.next=c}}return{next:A}}function A(){return{value:t,done:!0}}return h.prototype=g.constructor=O,O.constructor=h,h.displayName=i(O,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,i(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(y.prototype),y.prototype[c]=function(){return this},e.AsyncIterator=y,e.async=function(t,r,n,o,a){void 0===a&&(a=Promise);var c=new y(u(t,r,n,o),a);return e.isGeneratorFunction(r)?c:c.next().then((function(e){return e.done?e.value:c.next()}))},b(g),i(g,s,"Generator"),g[a]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=I,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(D),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return s.type="throw",s.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var c=this.tryEntries[a],s=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var i=n.call(c,"catchLoc"),u=n.call(c,"finallyLoc");if(i&&u){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(i){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var c=a?a.completion:{};return c.type=e,c.arg=t,a?(this.method="next",this.next=a.finallyLoc,E):this.complete(c)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),D(r),E}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;D(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:I(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),E}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},994:t=>{"use strict";t.exports=e},602:e=>{"use strict";e.exports=t},661:e=>{"use strict";e.exports=r},349:e=>{"use strict";e.exports=n}},a={};function c(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return o[e](r,r.exports,c),r.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var r in t)c.o(t,r)&&!c.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return(()=>{"use strict";c.r(s),c.d(s,{AVAILABLE_IMAGE_TYPE:()=>Re,AVAILABLE_VIDEO_EXT:()=>De,AVAILABLE_VIDEO_TYPE:()=>Ce,AccountType:()=>le,AgentOnlineStatus:()=>y,AlertType:()=>Me,AllProductFilters:()=>oe,ApiMessageTypes:()=>Qn,BATCH_OPERATE_MAX_SELECTION:()=>Q,BatchOperates:()=>q,CHAT_MIN_TEXT_BOX_HEIGHT:()=>S,ChatBotInteractionType:()=>ke,ChatBotMessageContentSource:()=>Ue,ChatbotFromType:()=>W,ConversationSource:()=>X,ConversationTab:()=>J,ConversationTypeEnum:()=>U,Currencies:()=>r,CustomShareEvent:()=>Ve,DataFetchStatus:()=>D,DiscountType:()=>M,EvaluationErrorCode:()=>u,EvaluationStatus:()=>i,FeedbackInfo:()=>E,FetchMessageStatus:()=>v,HALF_HOUR:()=>Ko,INVALID_PRICE:()=>_t,LS:()=>fr,LogisticsLog:()=>me,LogisticsStatus:()=>ge,MAX_IMAGE_SIZE:()=>Ie,MAX_MEDIA_NUM:()=>p,MAX_SHOWING_ITEM_COUNT:()=>ce,MAX_VIDEO_SIZE:()=>Ae,MINI_MIN_TEXT_BOX_HEIGHT:()=>h,MessageErrorCode:()=>a,MessageFillStatus:()=>O,MessageOption:()=>e,MessageSendStatus:()=>o,MessageShortcutGroupType:()=>f,MessageSource:()=>$,MessageStatus:()=>l,MessageTypes:()=>n,MessagesRelatedKey:()=>T,NO_ACCESS_KEY:()=>we,ONE_DAY:()=>zo,OfferStatus:()=>N,OperationStatus:()=>P,OrderCancelReason:()=>he,OrderItemStatus:()=>_e,OrderListTabs:()=>ee,OrderListType:()=>ve,OrderPayMethod:()=>Ee,OrderStatusExt:()=>Oe,OrderTabStatus:()=>pe,OrderTabStatusIndex:()=>fe,OrderType:()=>Te,PERMISSION_DELETE_MESSAGE:()=>_,PredictionType:()=>K,ProductFiltersMap:()=>ne,ProductPromotionLabel:()=>se,ProductStatusUsingNumber:()=>te,ProductStatusUsingString:()=>re,PromotionStatus:()=>d,ReportType:()=>z,RewardType:()=>L,SECOND_TO_MILLISECOND:()=>Wo,SERVER_ERROR_CAPACITY:()=>ye,SERVER_ERROR_VALID_CONV_COUNT:()=>be,SPECIAL_VIDEO_MIME_TYPE:()=>Pe,SellerCancelOrderReason:()=>Se,ShareDataType:()=>Be,SocketConnectionStatus:()=>Y,SocketToAlertType:()=>Le,StorageKey:()=>He,SubAccountRole:()=>de,SubAccountShopStatus:()=>ue,SwitchStatus:()=>A,SystemProductFilters:()=>ae,TrackerOperation:()=>xe,TranslationFeedbackQuality:()=>t,TranslationStatus:()=>w,UnreadSource:()=>Z,UserLoginStatus:()=>I,VIEW_DETAIL_KEY:()=>Ne,VoucherOperateType:()=>B,VoucherStamp:()=>H,VoucherStatus:()=>F,VoucherTab:()=>j,VoucherTabIndex:()=>G,VoucherType:()=>V,WorkstationCommonKey:()=>je,WorkstationProductCommonKey:()=>Ge,WorkstationProductPanel:()=>ie,WorkstationVoucherCommonKey:()=>Fe,camelCase:()=>ot,cancelOrderPolicy:()=>Gn.An,capitalizeFirstLetter:()=>Yt,changeLanguage:()=>fa.D,checkEmptyObject:()=>Qe,checkEntryGuide:()=>dr,checkHeaderGuide:()=>ur,checkIsScChat:()=>ze,checkMassToolGuide:()=>ar,checkObjectId:()=>qe,checkProductDeleted:()=>Bo,checkProductInvalid:()=>qo,checkRegionFilterGuide:()=>ir,checkReplyGuide:()=>sr,checkSearchGuilde:()=>cr,checkTranslationGuilde:()=>nr,checkTranslationSettingsGuide:()=>or,convertBase64ToBlob:()=>at,countingDown:()=>Xo,customizeTime:()=>yt,debounce:()=>Xt,deepMerge:()=>ct,downloadVideoWithBlob:()=>jn,encode:()=>et,escapeRegex:()=>ao,fillMessagePreview:()=>Tn,fillWithZero:()=>$o,formatDiscount:()=>ra,formatMessageTime:()=>Pt,formatPrice:()=>Et,formatTransifyKeyWithNumber:()=>Lt,getApiServer:()=>Gn.Vm,getBrowserInfo:()=>Gt,getCDNUrl:()=>Gn.jz,getCNSCSellerCenterUrl:()=>Gn.S8,getCSChatServer:()=>Gn.wK,getCancelOrderDisplayStatus:()=>Fo,getCancelReason:()=>Go,getChatBotParams:()=>hn,getCrmPreviewParams:()=>On,getCurrentTimestampString:()=>Zo,getCustomMessageText:()=>nn,getFileServer:()=>Gn.Jy,getFormattedData:()=>Un,getFormattedTime:()=>Ct,getHasSameSourceAndTarget:()=>En,getIsMessageShortcutKeywordValid:()=>ro,getIsMessageValidToDelete:()=>Kn,getItem:()=>_r,getKRSCSellerCenterUrl:()=>Gn.Ht,getLocaleText:()=>_n,getMallOrderUrl:()=>Gn.Db,getMallUrl:()=>Gn.u7,getMediaData:()=>wn,getMessageIsRatecard:()=>fn,getMessageIsSend:()=>zn,getMessageShortcutsKeywords:()=>no,getOrderPayment:()=>io,getOrderStatusTransifyKey:()=>so,getPayMethod:()=>Po,getProductStatusTransifyKey:()=>Vo,getPushServer:()=>Gn.Ey,getReplyTrackerMessageType:()=>qn,getRuntimeLocale:()=>Gn.CE,getRuntimeRegion:()=>Gn.X7,getRuntimeServer:()=>Gn.IE,getRuntimeVersion:()=>Gn.L6,getSCApiServer:()=>Gn.E3,getSellerCenterUrl:()=>Gn.qk,getServiceLocale:()=>zt,getShopeeCNUrl:()=>Gn.nr,getShopeeCustomerService:()=>Gn.Fy,getSpammerPolicyUrl:()=>Gn.r,getSystemMessageByLocale:()=>vn,getTimestampNano:()=>ea,getTranslateFileServer:()=>Gn.k2,getTranslationLocale:()=>Wt,getUrlParam:()=>jt,getVideoServer:()=>Gn.dV,getVoucherCondition:()=>sa,getVoucherTimeText:()=>ia,getWebChatPureUrl:()=>Gn.YH,getWebChatUrl:()=>Gn.xC,goToPcMall:()=>Gn.I9,greaterThan:()=>Ke,handleBigNumber:()=>st,handleDisplayTranslation:()=>na,handleReportItem:()=>pa,handleReportItems:()=>la,hasSelectShop:()=>Xe,hasTargetMessageOption:()=>dn,hasTargetMessageOptions:()=>pn,init:()=>Gn.S1,isAbnormalProduct:()=>Yo,isDeletedMessage:()=>ln,isProductSoldout:()=>Qo,isValidBrowser:()=>Je,isValidMessageStatusToReply:()=>Yn,isValidMessageTypeToReply:()=>Hn,isVisitingCNSC:()=>Gn.z$,isVisitingKRSC:()=>Gn.Y8,makeSecurityTipsMessage:()=>Sn,memFn:()=>Zt,persistLimit:()=>hr,previewMessage:()=>un,redirectionWithAccess:()=>Jt,removeItem:()=>Sr,removeItemFromArray:()=>it,searchMessageShortcuts:()=>oo,setItem:()=>Er,simpleEqualCheck:()=>We,stickersURI:()=>Gn.Ll,subAccountURL:()=>Gn.I7,throttle:()=>$t,transPrice:()=>St,transformVideoTime:()=>Dt,unifyLocale:()=>qt,updateTimeLocale:()=>mt,validateDuration:()=>Pn,validateMediaDuration:()=>Dn,validateTypeAndSize:()=>Ln,videoURL:()=>Gn.Od,voucherIsExpired:()=>aa,voucherIsStockout:()=>ca});var e,t,r={SG:"$",TH:"฿",VN:"₫",ID:"Rp",TW:"$",MY:"RM",PH:"₱",BR:"R$",IN:"₹",CN:"¥",MX:"$",CO:"$",CL:"$",AR:"$",PL:"zł",ES:"€",FR:"€",KR:"₩",US:"$"},n={MSG_TYPE_TEXT:"text",MSG_TYPE_IMAGE:"image",MSG_TYPE_OFFER:"offer",MSG_TYPE_PRODUCT:"product",MSG_TYPE_ORDER:"order",MSG_TYPE_STICKER:"sticker",MSG_TYPE_NOTIFICATION:"notification",MSG_TYPE_WEBVIEW:"webview",MSG_TYPE_RATE_CARDS:"rate_cards",MSG_TYPE_VOUCHER:"voucher",MSG_TYPE_FEED_STORY:"feed_story",MSG_TYPE_ITEM_LIST:"item_list",MSG_TYPE_SHOPPING_CART:"shopping_cart",MSG_TYPE_FAQ:"faq",MSG_TYPE_FAQ_QUESTION:"faq_question",MSG_TYPE_FAQ_FEEDBACK:"faq_feedback",MSG_TYPE_FAQ_LIVEAGENT:"faq_liveagent",MSG_TYPE_FAQ_UNSUPPORTED:"faq_unsupported",MSG_TYPE_FAQ_FEEDBACK_PROMPT:"faq_feedback_prompt",MSG_TYPE_FAQ_LIVEAGENT_PROMPT:"faq_liveagent_prompt",MSG_TYPE_UNTATED_ORDER_REMINDER:"unrated_order_reminder",MSG_TYPE_FLASH_SALE:"flash_sale",MSG_TYPE_BUNDLE_DEAL:"bundle_deal",MSG_TYPE_BUNDLE_MESSAGE:"bundle_message",MSG_TYPE_OPTION_PACK:"option_pack",MSG_TYPE_SELECTED_OPTION:"selected_option",MSG_TYPE_ADD_ON_DEAL:"add_on_deal",MSG_TYPE_VIDEO:"video",MSG_TYPE_IMAGE_WITH_TEXT:"image_with_text",MSG_TYPE_RATE_CARD:"rating_card",MSG_TYPE_NEW_FAQ:"new_faq",MSG_TYPE_FAQ_CATEGORY_CHOICE:"faq_category_choice",MSG_TYPE_FAQ_QUESTION_LIST:"faq_question_list",MSG_TYPE_FAQ_TYPE_CHOICE:"faq_type_choice",MSG_TYPE_FAQ_CATEGORY_LIST:"faq_category_list",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE:"faq_bot_request_text",MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE:"faq_bot_request_order",FAQ_TYPE_BOT_RESPONSE_MESSAGE:"faq_bot_response",MSG_TYPE_SECURITY_TIPS:"security_tips"},o={SENDING:1,FAILED:2,SUCCEED:3},a={FORBIDDEN:28,LIMITING:29,CUSTOM_ERROR:42,BLACKLIST:43,CANCEL_ORDER:44,UNVERIFIED_PHONE_NUMBER:45,EXCEED_DAILY_LIMIT:26,UNTRUSTED_NETWORK:46,NEED_CAPTCHA:47,DFP_ERROR:48,SPAMMER:49,FAQ_EXPIRED:50,FAQ_SESSION_OLD:51,DEFAULT:-1},i={UNRATED:"unrated",RATED:"rated",EXPIRED:"expired",INVALID:"invalid"},u={RATED:"rating_card_rated",EXPIRED:"rating_card_expired"},d={UPCOMING:"upcoming",ONGOING:"ongoing",EXPIRED:"expired"},l={CENSORED_BLACKLIST:"censored_blacklist",NORMAL:"normal"},p=9,f={PERSONAL:1,TEAM:2},_=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT];!function(e){e[e.MSG_OPT_NORMAL=0]="MSG_OPT_NORMAL",e[e.MSG_OPT_AUTO_REPLY=1]="MSG_OPT_AUTO_REPLY",e[e.MSG_OPT_BLOCKED=2]="MSG_OPT_BLOCKED",e[e.MSG_OPT_CENSORED_BLACKLIST=16]="MSG_OPT_CENSORED_BLACKLIST",e[e.MSG_OPT_CENSORED_WHITELIST=32]="MSG_OPT_CENSORED_WHITELIST",e[e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER=64]="MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER",e[e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER=128]="MSG_OPT_IGNORE_UNREAD_FOR_SENDER",e[e.MSG_OPT_INVISIBLE_FOR_RECEIVER=256]="MSG_OPT_INVISIBLE_FOR_RECEIVER",e[e.MSG_OPT_INVISIBLE_FOR_SENDER=512]="MSG_OPT_INVISIBLE_FOR_SENDER",e[e.MSG_OPT_ADS=1024]="MSG_OPT_ADS",e[e.MSG_OPT_FAQ_SESSION=2048]="MSG_OPT_FAQ_SESSION",e[e.MSG_OPT_TRIGGER_FAQ=4096]="MSG_OPT_TRIGGER_FAQ",e[e.MSG_OPT_SOCIAL_MESSAGE=8192]="MSG_OPT_SOCIAL_MESSAGE",e[e.MSG_OPT_OFFWORK_AUTOREPLY=16384]="MSG_OPT_OFFWORK_AUTOREPLY",e[e.MSG_OPT_CANCELORDER_WARNING_SENT=32768]="MSG_OPT_CANCELORDER_WARNING_SENT",e[e.MSG_OPT_CANCELORDER_WARNING_RETRACT=65536]="MSG_OPT_CANCELORDER_WARNING_RETRACT",e[e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND=66496]="MSG_OPT_CANCELORDER_WARNING_NOT_SEND",e[e.MSG_OPT_CHATBOT_SESSION=131072]="MSG_OPT_CHATBOT_SESSION",e[e.MSG_OPT_TRIGGER_CHATBOT=262144]="MSG_OPT_TRIGGER_CHATBOT",e[e.MSG_OPT_PRIVATE_MESSAGE=524288]="MSG_OPT_PRIVATE_MESSAGE",e[e.MSG_OPT_SILENT_FOR_SENDER=1048576]="MSG_OPT_SILENT_FOR_SENDER",e[e.MSG_OPT_DELETE=2097152]="MSG_OPT_DELETE",e[e.MSG_OPT_RECALL=8388608]="MSG_OPT_RECALL"}(e||(e={})),function(e){e[e.bad=1]="bad",e[e.average=2]="average",e[e.good=3]="good"}(t||(t={}));var E={IMPROVED:1,WRONG:2,OFFENSIVE:4},S=156,h=88,O={FILLED:"filled",FILLING:"filling",FAILED:"failed"},v={PRELOADING:"preloading",FETCHING:"fetching"},T={TIME_NOW:"timeNow",PRELOADED:"preloaded"};function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y,R,C={NORMAL:"normal",PENDING:"pending",SUCCEED:"succeed",FAILED:"failed"},D=b(b({},C),{},{INIT_PENDING:"pendingInit",INIT_FAILED:"failedInit",TEMPORY_ERROR:"temporyError"}),P=b(b({},C),{},{BLACKLIST_ERROR:"blacklistError",INTERNAL_SERVER_ERROR:"internalServerError"}),I={SUCCEED:"succeed",FORBIDDEN_ERROR:"forbidden",INTERNAL_SERVER_ERROR:"internalServerError",LOGOUT:"logout"},A={ENABLED:"enabled",DISABLED:"disabled",NO_PERSSION:"no_permission"},w={SUCCEED:"succeed",FAILED:"failed",HISTORY:"history",SHOW:"show",PENDING:"pending"},N={PENDING:"pending",ACCEPTED:"accepted",REJECTED:"rejected",CANCELLED:"cancelled"};function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}!function(e){e[e.OFFLINE=-1]="OFFLINE",e[e.ONLINE=0]="ONLINE",e[e.HANGUP=1]="HANGUP"}(y||(y={}));var U,M={AMOUNT:"amount",PERCENTAGE:"percentage"},L={DISCOUNT:"discount",COIN_CASHBACK:"coin_cashback"},j={ONGOING:"ongoing",SCHEDULED:"scheduled"},G=(m(R={},j.ONGOING,0),m(R,j.SCHEDULED,1),R),F=k(k({},j),{},{FINISHED:"finished"}),H={USED:"used",EXPIRED:"expired",REDEEM:"redeem"},V={ITEM:"item",SHOP:"shop"},B={DETAILS:"details",CLAIM:"claim",USE:"use"},Y={CONNECT:"connect",CONNECT_ERROR:"connect_error",DISCONNECT:"disconnect",RECONNECT_ATTEMPT:"reconnect_attempt",RECONNECT_ERROR:"reconnect_error",RECONNECTING:"reconnecting",RECONNECT:"reconnect"},Q=50,q={PIN:"pin",UNPIN:"unpin",MARK_AS_READ:"mark_as_read",MARK_AS_UNREAD:"mark_as_unread",FORWARD:"forward"};!function(e){e[e.Normal=0]="Normal",e[e.Agent=1]="Agent"}(U||(U={}));var W,K,z,J={CUSTOMER:"customer",AGENT:"agent"},X={FILTER:1,SHOP:2,SHOP_LIST:3,SYNC:4,QUEUE:5,FAKING:6,LATEST:7,OLDER:8,DELETE:9,LOAD_MORE:10,SOCKET:11,PRELOAD:12},$={VIEW:1,FETCH:2,CLEAR_SEARCH:3,SHOW:4,SYNC:5,AUTO:6,SEND:7,UPDATE:8,CATCH:9},Z={PRELOAD:1,QUEUE:2,RECEIVE_TOTAL:3,RECEIVE_SINGLE:4,SYNC:5},ee={MINE:"mine",HIS:"his"},te={SOLD_OUT:-1,DELETED:0,NORMAL:1,REVIEWING:2,BANNED:3,INVALID:4,INVALID_HIDE:5,OFFENSIVE_HIDE:6,AUDITING:7,NORMAL_UNLIST:8,DELISTED:9},re={DELETED:"deleted",BANNED:"banned",NORMAL:"normal",SOLD_OUT:"sold_out",DELISTED:"delisted"},ne={sales:"sold",recent:"mtime"},oe={SALES:"sales",RECENT:"recent"},ae={RELATED:"related",TOP_RATED:"top_rated",FREQUENTLY_BOUGHT_TOGETHER:"frequently_bought_together"},ce=4,se={ADD_ON_DEAL:"add_on_deal",BUNDLE_DEAL:"bundle_deal",CAMPAIGN:"campaign",FLASH_SALES:"flash_sales",GIFT_WITH_PURCHASE:"gift_with_purchase",SHOW_DISCOUNT:"show_discount"},ie={ALL:"All",SELLER_RECOMMENDATION:"Seller_Recommendation",SYSTEM_RECOMMENDATION:"System_Recommendation"},ue={UNACCESSIBLE:"unaccessible",NONE:"none",UNALLOCATED:"unallocated"},de={MAIN_SUBACCOUNT:"main_subaccount",ADMIN_SUBACCOUNT:"admin_subaccount",NORMAL_SUBACCOUNT:"normal_subaccount"},le={SELLER:"seller",SUBACCOUNT:"subaccount"},pe={ALL:"all",UNPAID:"unpaid",TO_SHIP:"to_ship",SHIPPING:"shipping",COMPLETED:"completed",CANCELLED:"cancelled",REFUND:"refund"},fe={all:0,unpaid:1,to_ship:2,shipping:3,completed:4,cancelled:5,refund:6},_e={DELETE:0,UNRATED:1,RATED:2,RETURNED:3,RETURN_RATED:4,CANCEL:5},Ee={PAY_CREDIT_CARD:1,PAY_BANK_TRANSFER:2,PAY_OFFLINE_PAYMENT:3,PAY_IPAY88:4,PAY_FREE:5,PAY_COD:6,PAY_ESUN:7,PAY_BILL_PAYMENT:8,PAY_INDOMARET:13,PAY_KREDIVO:14,PAY_NICEPAY_CC:15,PAY_AIRPAY:18,PAY_SHOPEE_WALLET:20,PAY_SHOPEE_WALLET_V2:27,PAY_AKULAKU:21,PAY_INSTALLMENT:23,PAY_IBANKING:29},Se=[{cancel_reason_code:1,transify_key:"common.order.cancel_reason.out_of_stock"},{cancel_reason_code:3,transify_key:"common.order.cancel_reason.undeliverable_area"}],he={NONE:0,OUT_OF_STOCK:1,CUSTOMER_REQUEST:2,UNDELIVERABLE_AREA:3,CANNOT_SUPPORT_COD:4,LOST_PARCEL:5,SYSTEM_UNPAID:100,SYSTEM_UNDERPAID:101,SYSTEM_PAYMENT_REJECTED:102,LOGISTICS_REQUEST_CANCELED:200,LOGISTICS_PICKUP_FAILED:201,LOGISTICS_DELIVERY_FAILED:202,LOGISTICS_COD_REJECTED:203,BACKEND_LOGISTICS_NOT_STARTED:204,BACKEND_ESCROW_TERMINATED:300,BACKEND_INACTIVE_SELLER:301,BACKEND_SELLER_DID_NOT_SHIP:302,RULE_ENGINE_AUTO_CANCEL:400},Oe={ORDER_EXT_DELETE:0,ORDER_EXT_UNPAID:1,ORDER_EXT_PAID:2,ORDER_EXT_SHIPPED:3,ORDER_EXT_COMPLETED:4,ORDER_EXT_INVALID:6,ORDER_EXT_CANCEL_PROCESSING:7,ORDER_EXT_CANCEL_COMPLETED:8,ORDER_EXT_RETURN_PROCESSING:9,ORDER_EXT_RETURN_COMPLETED:10,ORDER_EXT_ESCROW_PAID:11,ORDER_EXT_ESCROW_CREATED:12,ORDER_EXT_ESCROW_PENDING:13,ORDER_EXT_ESCROW_VERIFIED:14,ORDER_EXT_ESCROW_PAYOUT:15,ORDER_EXT_CANCEL_PENDING:16},ve={PAID:1,UNPAID:2,COMPLETED:3,CANCELLED:4,SHIPPED:5,ALL:6,TOSHIP:7,TORECEIVE:8,TOPAY:9,TOSHIP_UNPROCESSED:10,TOSHIP_PROCESSED:11,RETURN:12,GROUP_BUY_ALL:13,GROUP_BUY_ONGOING:14,GROUP_BUY_COMPLETED:15,GROUP_BUY_INVALID:16},Te={UNKNOWN:0,SIMPLE:1,ESCROW:2},me={ORDER_DETAIL_SHIPPING_CONFIRMED:2,ORDER_DETAIL_SHIPPED:4,ORDER_DETAIL_RECEIVED:5,ORDER_DETAIL_CANCELED:6,ORDER_DETAIL_NOTIFY_SHIP:7},ge={LOGISTICS_NOT_STARTED:0,LOGISTICS_REQUEST_CREATED:1,LOGISTICS_PICKUP_DONE:2,LOGISTICS_PICKUP_RETRY:3,LOGISTICS_PICKUP_FAILED:4,LOGISTICS_DELIVERY_DONE:5,LOGISTICS_DELIVERY_FAILED:6,LOGISTICS_REQUEST_CANCELED:7,LOGISTICS_COD_REJECTED:8,LOGISTICS_READY:9,LOGISTICS_INVALID:10,LOGISTICS_LOST:11,LOGISTICS_PENDING_ARRANGE:12},be=-1,ye=0,Re=["image/png","image/jpeg","image/jpg"],Ce=["video/*",".flv",".3gp",".rm",".rmvb",".asf",".mp4",".webm"],De=["MP4","TS","FLV","WMV","ASF","RM","RMVB","MPG","MPEG","3GP","MOV","WEBM","AVI"],Pe=["application/vnd.rn-realmedia","application/vnd.rn-realmedia-vbr"],Ie=2097152,Ae=31457280,we="common.no_sc_access",Ne="conversation_detail.workstation.order_panel.manage",xe={CLICK:"click",IMPRESSION:"impression",ACTION_DRAG_VIDEO:"action_drag_video",DELETE_PREVIEW_MEDIA:"delete_preview_media",CLOSE_PREVIEW_MEDIA:"close_preview_media",ACTION_FINISH_VIDEO:"action_finish_video",VIEW:"view",ACTION_ADJUST_MESSAGE_SHORTCUT:"action_adjust_message_shortcut",ACTION_SELECT:"action_select",ACTION_SEARCH:"action_search"},ke={MESSAGE:1001,SOLUTION:1002},Ue={HEAD_HOTQUESTION_SOURCE:1,SHORTCUT_SOURCE:2,CATEGORY_HOTQUESTION_SOURCE:3,FAQ_RECOMMEND_SOURCE:4,KB_INTENT_SOURCE:5,LIVEAGENT_RECOMMENDER_SOURCE:6};!function(e){e.LandingPage="SIPDirectChatFromChatLandingPage",e.ProductPage="SIPProductPage",e.OrderPage="SIPOrderPageFromBuyer",e.ShopPage="SIPShopPage"}(W||(W={})),function(e){e[e.Faq=0]="Faq",e[e.Intent=1]="Intent"}(K||(K={})),function(e){e[e.Categories=0]="Categories",e[e.OtherFaqType=1]="OtherFaqType",e[e.Intent=2]="Intent",e[e.Question=3]="Question",e[e.ChatWithSeller=4]="ChatWithSeller"}(z||(z={}));var Me={error:"error",success:"success",normal:"normal",warn:"warn",info:"info"},Le={pending:Me.warn,error:Me.error,resolved:Me.success},je="conversation_detail.workstation.panel",Ge="".concat(je,".product"),Fe="conversation_detail.workstation.voucher_panel",He={USERID:"__chat_userid__",LAST_ACTIVE:"last-active-time",MINI_ALERT:"mini-should-show-alert"},Ve={ACK:"ack",TAB_FOCUSED:"tabFocused",CALC_CONNECTIONS:"calcConnections",CLOSE_CONNECTION:"closeConnection",SHARE_API_DATA:"shareApiData"},Be={UNREAD:"unread",UPDATE_SETTING:"updateSetting",UPDATE_OFFLINE_SETTING:"updateOfflineSetting"};function Ye(e){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ye(e)}var Qe=function(e){return!e||0===Object.keys(e).length},qe=function(e,t){return null===e&&null===t||(null==e?void 0:e.id)===(null==t?void 0:t.id)},We=function(e,t){return JSON.stringify(e)===JSON.stringify(t)},Ke=function(e,t){if(!e)return!1;if(!t)return!0;var r=(e+="").length,n=(t+="").length;if(r!==n)return r>n;var o=e.split(""),a=null;return o.forEach((function(e,r){"boolean"!=typeof a&&(a=parseInt(e)>parseInt(t[r])||parseInt(e)===parseInt(t[r])&&null)})),!!a},ze=function(){var e=window.location.hostname;return["seller","banhang","localhost"].some((function(t){return e.includes(t)}))},Je=function(){try{return!("undefined"!=typeof window&&"object"===Ye(window.process)&&"renderer"===window.process.type||"undefined"!=typeof process&&"object"===Ye(process.versions)&&process.versions.electron||"object"===("undefined"==typeof navigator?"undefined":Ye(navigator))&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}catch(e){return!0}}(),Xe=function(e){return!(null==e||!e.id)};function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ze(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return $e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$e(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(e){var t=new Uint16Array(e.length);return Array.prototype.forEach.call(t,(function(t,r,n){n[r]=e.charCodeAt(r)})),window.encodeURIComponent(window.btoa(String.fromCharCode.apply(null,new Uint8Array(t.buffer))))}var tt,rt,nt,ot=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/_([a-z])/g,(function(e,t){return t.toUpperCase()}))},at=function(e){for(var t=window.atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),a=0;a<t.length;a++)o[a]=t.charCodeAt(a);return new window.Blob([o],{type:r})},ct=function e(t,r){var n=JSON.parse(JSON.stringify(t));for(var o in r)n[o]=n[o]&&"[object Object]"===n[o].toString()?e(n[o],r[o]):r[o];return n},st=function(e){return e>=1e3?"999+":e},it=function(e,t){var r=Ze(e),n=r.indexOf(t);return n>-1&&r.splice(n,1),r},ut=c(994),dt=["PL","ES","FR"],lt=function(e){return e?e.toUpperCase():"SG"},pt=function(e){var t=e.price,r=e.country,n=function(e,t){return"TW"!==e||void 0!==t&&!t?"CL"===e?"$":(0,ut.getCurrencyConfig)(e).symbol||"":"NT$"}(r,e.isSCChat);if(dt.includes(r))return"".concat(n).concat(t).concat(n);var o=(0,ut.getCurrencyConfig)(r).symbolPosition===ut.SYMBOL_POSITION.BACK?"".concat(t).concat(n):"".concat(n).concat(t);return"MX"===r?"".concat(o," MXN"):o},ft=function(e){for(var t="",r=+e,n=["K","M","B"];r>1e3&&(t=n.shift()||"");)r/=1e3;var o=parseInt(100*+r+"")/100;return{value:r=Number.isInteger(o)?o:o.toFixed(2),unit:t}},_t="NaN",Et=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=r.withSpaces,a=void 0!==o&&o,c=r.withMinus,s=void 0!==c&&c,i=r.withUnit,u=void 0!==i&&i,d=r.withComma,l=void 0===d||d,p=lt(t),f=Number(e);if(Number.isNaN(f))return pt({price:_t,country:p,isSCChat:n});var _="",E="";if(u){var S=ft(f);_=S.unit,f=S.value}return s&&(E="-"),f=(0,ut.formatCurrency)(p,f,{symbol:"",spaceBetweenSymbol:a,noSeparator:!l}),f=pt({price:f,country:p,isSCChat:n}),"".concat(E).concat(f).concat(_)},St=function(e,t,r){return t=lt(t),pt({price:e,country:t,isSCChat:r})},ht=c(602),Ot=c.n(ht),vt=c(470).t,Tt=new(Ot()),mt=function(e){return Tt.locale.set(e)};!function(e){e.Today="today",e.Yesterday="yesterday"}(tt||(tt={})),function(e){e[e.Time=0]="Time"}(rt||(rt={})),function(e){e[e.sunday=0]="sunday",e[e.monday=1]="monday",e[e.tuesday=2]="tuesday",e[e.wednesday=3]="wednesday",e[e.thursday=4]="thursday",e[e.friday=5]="friday",e[e.saturday=6]="saturday"}(nt||(nt={}));var gt,bt=function(e){var t=e.value,r=e.date,n=e.suffix,o=e.prefix,a="",c="";if(o&&(a=vt("conversation_detail.message_list.".concat(o.type))+(void 0===o.separator?"  ":o.separator)),n){var s=n.type===rt.Time?function(e){return e.format("hh:mm")}(r):"";c=(void 0===n.separator?", ":n.separator)+s}return a+t+c};!function(e){e[e.Yesterday=0]="Yesterday",e[e.Today=1]="Today",e[e.ThisMonth=2]="ThisMonth",e[e.ThisYear=3]="ThisYear",e[e.ThisWeek=4]="ThisWeek",e[e.NONE=5]="NONE"}(gt||(gt={}));var yt=function(e,t){var r=t||{},n=r.noTodayFlag,o=r.noTimeFlag,a=r.needFullFormat,c=r.onlyKeepDate,s=r.isConvPreview,i=Tt.create(e);if(a)return bt({value:i.format("LHD"),date:i,suffix:{type:rt.Time}});if(c)return i.format("LHD");var u=["tw","cn"].includes(Tt.locale.current),d=function(e,t){var r=new Date,n=new Date(e);if(t){var o=r-n,a=(new Date).setHours(0,0,0,0);if(o<=6048e5&&o>=r.getTime()-a+864e5)return gt.ThisWeek}if(r.getFullYear()===n.getFullYear()){if(r.getMonth()===n.getMonth()){var c=r.getDate(),s=n.getDate();return c===s?gt.Today:c-1===s?gt.Yesterday:gt.ThisMonth}return gt.ThisYear}return gt.NONE}(e,s);switch(d){case gt.Today:var l=n?void 0:{type:tt.Today},p={type:rt.Time,separator:""};return bt({value:"",date:i,prefix:l,suffix:p});case gt.Yesterday:var f={type:tt.Yesterday},_=o?void 0:{type:rt.Time,separator:""};return bt({value:"",date:i,prefix:f,suffix:_});case gt.ThisWeek:return vt("common.".concat(nt[new Date(e).getDay()]));case gt.ThisMonth:case gt.ThisYear:var E=o?void 0:{type:rt.Time};return bt({value:i.format(s?u?"MM/DD":"DD/MM":"LHDS"),date:i,suffix:E});default:var S=o?void 0:{type:rt.Time};return bt({value:i.format(s?u?"YY/MM/DD":"DD/MM/YY":"LHD"),date:i,suffix:S})}},Rt="YYYY-MM-DD hh:mm",Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=Tt.create(e);return r.format(t||Rt)},Dt=function(e){var t=Math.ceil(e),r=t/3600<10?"0"+Math.floor(t/3600):Math.floor(t/3600),n=t/60%60<10?"0"+Math.floor(t/60%60):Math.floor(t/60%60),o=t%60<10?"0"+t%60:t%60;return t>=3600?"".concat(r,":").concat(n,":").concat(o):"".concat(n,":").concat(o)},Pt=function(e){var t=e.created_at,r=e.created_timestamp;return yt(t||1e3*r,{noTodayFlag:!0,noTimeFlag:!0,isConvPreview:!0})},It=c(661),At=c.n(It),wt=function(e){return 0===e||1===e?"one":e>=1e6?"many":"other"},Nt=function(e){return 1===e?"one":Number.isInteger(e)?[2,3,4].includes(e%10)&&![12,13,14].includes(e%100)?"few":![2,3,4].includes(e%10)||[12,13,14].includes(e%100)?"many":"other":"other"},xt=function(e){return e<=1?"one":"other"},kt={fr:wt,pl:Nt,default:xt},Ut={fr:function(e,t){return"".concat(wt(e),".").concat(wt(t))},pl:function(e,t){return"".concat(Nt(e),".").concat(Nt(t))},default:function(e,t){return"".concat(xt(e),"_").concat(xt(t))}},Mt=["fr","pl"],Lt=function(e,t,r){var n=At().language||"en",o=Mt.includes(n)?n:"default";return void 0!==r?"".concat(e,"_").concat(Ut[o](t,r)):"".concat(e,"_").concat(kt[o](t))},jt=function(e,t){var r=t||window.location.search,n=null;if(r){var o=r.indexOf("?")+1,a=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");n=r.substr(o).match(a)}return n?unescape(n[2]):null},Gt=function(){var e=navigator.userAgent.toLowerCase(),t=null;return e.indexOf("msie")>0&&(t=e.match(/msie [\d.]+;/gi)),e.indexOf("firefox")>0&&(t=e.match(/firefox\/[\d.]+/gi)),e.indexOf("safari")>0&&e.indexOf("chrome")<0&&(t=e.match(/safari\/[\d.]+/gi)),e.indexOf("chrome")>0&&(t=e.match(/chrome\/[\d.]+/gi)),t?t.toString():"unknown"};function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ht,Vt=["hans","hant"],Bt=["en","zh-hans","zh-hant","ms-my","th-th","vi-vn","id-id","zh-cn","pt-br","hi","es-mx","es-co","es-cl","es-es","es-ar","pl","fr"],Yt=function(e){return"".concat(e[0].toUpperCase()).concat(e.substring(1))},Qt=function(e){if(e.includes("-")){var t=e.split("-");return Vt.includes(t[1])?"".concat(t[0],"-").concat(Yt(t[1])):"".concat(t[0],"-").concat(t[1].toUpperCase())}return e},qt=function(e){var t,r=(e||"en").toLowerCase(),n="en",o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ft(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==r.return||r.return()}finally{if(s)throw a}}}}(Bt);try{for(o.s();!(t=o.n()).done;){var a=t.value;if(a.includes(r)){n=Qt(a);break}}}catch(e){o.e(e)}finally{o.f()}return n},Wt=function(e){var t=qt(e);switch(t){case"th-TH":return"th";case"vi-VN":return"vi";case"id-ID":return"id";default:return t}},Kt={en:"default","ms-MY":"ms-my","th-TH":"th","zh-Hans":"tw","zh-Hant":"tw","vi-VN":"vn","id-ID":"id","zh-CN":"cn","pt-BR":"pt-br",hi:"hi","es-MX":"es-mx","es-CO":"es-co","es-CL":"es-cl",pl:"pl","es-ES":"es-es",fr:"fr","es-AR":"es-ar"},zt=function(e){var t=qt(e);return Kt[t]||"default"},Jt=function(e){var t=e.access,r=e.isSubAccount,n=e.action,o=e.url,a=void 0===o?"":o;t&&(r?n():window.open().location=a)},Xt=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:200,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=Date.now();return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];t&&(clearTimeout(t),t=null);var i=Date.now();i-o>n?(e.apply(void 0,c),o=Date.now()):t=window.setTimeout((function(){e.apply(void 0,c),o=Date.now()}),r)}},$t=function(e,t){var r,n,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=null,s=0,i=function(){s=!1===a.leading?0:(new Date).getTime(),c=null,o=e.apply(r,n),c||(r=n=null)},u=function(){var u=(new Date).getTime();s||!1!==a.leading||(s=u);var d=t-(u-s);r=this;for(var l=arguments.length,p=new Array(l),f=0;f<l;f++)p[f]=arguments[f];return n=p,d<=0||d>t?(c&&(clearTimeout(c),c=null),s=u,o=e.apply(r,n),c||(r=n=null)):c||!1===a.trailing||(c=window.setTimeout(i,d)),o};return u},Zt=function(e,t){var r=0;return{check:function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return e.apply(void 0,Ze(o))?r+=1:this.reset(),r>=t&&(this.reset(),!0)},reset:function(){r=0}}},er="Auto-Translation",tr="modal",rr=function(e,t){var r=t.superType,n=t.secondaryType,o=e.find((function(e){return e.name===r}));if(o){var a=o.children;if(a.length){var c=a.find((function(e){return e.name===n}));return c||!1}return!1}return!1},nr=function(e){return rr(e,{superType:er,secondaryType:tr})},or=function(e){return rr(e,{superType:er,secondaryType:"settings"})},ar=function(e){return rr(e,{superType:"Mass-Tool",secondaryType:tr})},cr=function(e){return rr(e,{superType:"SearchV3",secondaryType:tr})},sr=function(e){return rr(e,{superType:"Reply",secondaryType:tr})},ir=function(e){return rr(e,{superType:"Region-Filter",secondaryType:tr})},ur=function(e){return rr(e,{superType:"MiniChat-Header",secondaryType:tr})},dr=function(e){return rr(e,{superType:"MiniChat-Entry",secondaryType:tr})},lr=c(349),pr=c.n(lr),fr={getItem:function(e,t){try{var r=window.localStorage.getItem(e);return null==r?r:t?JSON.parse(r):r}catch(e){console.warn("*** LocalStorage Error: Can not get LocalStorage *** \n".concat(e))}},setItem:function(e,t,r){try{var n=r?JSON.stringify(t):t;window.localStorage.setItem(e,n)}catch(e){console.warn("*** LocalStorage Error: Can not set LocalStorage *** \n".concat(e))}},removeItem:function(e){try{window.localStorage.removeItem(e)}catch(e){console.warn("*** LocalStorage Error: Can not remove LocalStorage *** \n".concat(e))}}},_r=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?fr.getItem(e):pr().getItem(e)},Er=function(e,t){return pr().setItem(e,t)},Sr=function(e,t){return t?fr.removeItem(e):pr().removeItem(e)},hr=pr().supports(pr().INDEXEDDB)||pr().supports(pr().WEBSQL)?1e3:100,Or=c(470).t;function vr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Tr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var mr=n.MSG_TYPE_TEXT,gr=n.MSG_TYPE_IMAGE,br=n.MSG_TYPE_OFFER,yr=n.MSG_TYPE_PRODUCT,Rr=n.MSG_TYPE_ORDER,Cr=n.MSG_TYPE_STICKER,Dr=n.MSG_TYPE_NOTIFICATION,Pr=n.MSG_TYPE_WEBVIEW,Ir=n.MSG_TYPE_VOUCHER,Ar=n.MSG_TYPE_ITEM_LIST,wr=n.MSG_TYPE_FAQ,Nr=n.MSG_TYPE_FAQ_QUESTION,xr=n.MSG_TYPE_FAQ_LIVEAGENT,kr=n.MSG_TYPE_FAQ_FEEDBACK,Ur=(n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_FAQ_UNSUPPORTED),Mr=n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Lr=n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,jr=(n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_BUNDLE_MESSAGE),Gr=(n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OPTION_PACK),Fr=n.MSG_TYPE_SELECTED_OPTION,Hr=n.MSG_TYPE_VIDEO,Vr=n.MSG_TYPE_RATE_CARDS,Br=n.MSG_TYPE_IMAGE_WITH_TEXT,Yr=n.MSG_TYPE_RATE_CARD,Qr=n.MSG_TYPE_NEW_FAQ,qr=n.MSG_TYPE_FAQ_CATEGORY_CHOICE,Wr=n.MSG_TYPE_FAQ_QUESTION_LIST,Kr=n.MSG_TYPE_FAQ_TYPE_CHOICE,zr=n.MSG_TYPE_FAQ_CATEGORY_LIST,Jr=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Xr=n.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,$r=n.FAQ_TYPE_BOT_RESPONSE_MESSAGE,Zr=N.PENDING,en=(N.ACCEPTED,N.REJECTED),tn=(N.CANCELLED,"common.unsupported_message"),rn=(m(Ht={},n.MSG_TYPE_FAQ_LIVEAGENT,"faq.live_agent"),m(Ht,n.MSG_TYPE_FAQ_UNSUPPORTED,"faq.new_unsupport_input"),m(Ht,n.MSG_TYPE_FAQ_FEEDBACK_PROMPT,"faq.feedback_prompt"),m(Ht,n.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,"faq.new_live_agent_prompt"),m(Ht,n.MSG_TYPE_VIDEO,"conversation_detail.input_field.toolbar.video.tip"),m(Ht,n.MSG_TYPE_IMAGE_WITH_TEXT,"conversation_list.conversation_cell.new_image_message"),Ht),nn=function(e){return Or(rn[e]||tn)},on=[Ar],an=[Hr,Ur,Mr,Lr,Br],cn=[gr,jr,Xr,br,yr,Rr,Ir,Yr,Cr],sn=[Wr,Kr,zr],un=function(t){var r=t.message,n=t.enableTranslation,o=t.locale,a=t.conversationShopId;if(!r)return{text:Or(tn)};var c=r.type,s=r.content,i=void 0===s?{}:s,u=r.crm_message_preview,d=void 0===u?{}:u,l=r.message_option,p=r.source,f=r.send_status;if(d.text)return{text:d.text};if(null!=i&&i.preview_text&&c===$r)return{text:i.preview_text};if(dn(l,e.MSG_OPT_CENSORED_BLACKLIST))return{text:Or("common.blacklist.replaced_text")};if(c){var _,E,S=i||{},h=S.text,O=void 0===h?"":h,v=S.title,T=S.opening,m=S.caption,g=S.translation,b=S.product_name,y=S.sticker_name,R=S.chat_product_infos,C=void 0===R?[]:R,D=S.products,P=void 0===D?[]:D,I=zn(r,{isAgent:!1,shop_id:a}),A=function(e,t,r,n){var o,a=t||{},c=a.live_agent_text,s=void 0===c?[]:c,i=a.fixed_title,u=a.faq_type_choice_translation;if(an.includes(e))o=s.length?_n(s,r):nn(e);else if(sn.includes(e))o=_n(e===Kr?u:i,r);else{var d=cn.includes(e)?"conversation_list.conversation_cell.new_".concat(e,"_message"):on.includes(e)?"common.tips.recommended".concat(n?"":"_for_you"):"";o=d?"[".concat(Or(d),"]"):Or(tn)}return o}(c,i,o,I);switch(c){case Qr:case wr:E=T||Or("faq.no_set.chat_bot_title");break;case mr:var w=En(i);E=!n||w||l===e.MSG_OPT_SOCIAL_MESSAGE||["crm","proactive_update"].includes(p)||2===f?O:(null==g?void 0:g.text)||O;break;case xr:case Nr:case kr:case Fr:case Gr:case qr:case Jr:E=O||v;break;case Hr:E="[".concat(A,"]");break;case Br:E="[".concat(A,"] ").concat(m||v||O);break;case Ur:case Mr:case Lr:case Wr:case Kr:case zr:E=A;break;case yr:E="".concat(A," ").concat(b);break;case Cr:E=y?"[".concat(y,"]"):A;break;case Ar:var N=C.map((function(e){return e.name})).join("; ");E="".concat(A," ").concat(N);break;case Dr:var x=vn(i||{},o),k=x.notification_for_sender,U=x.notification_for_receiver;E=I?k:U;break;case Yr:E="".concat(A," ").concat(Or(I?"conversation_list.preview.rate_card_sender":"rate_card.rate_out_service"));break;case br:var M=i||{},L=M.status,j=M.products_count,G=M.offer_price;if(L)if(L===Zr){var F=Or("conversation_list.preview.offer_pending_".concat(I?"sender":"receiver"));E="".concat(A," ").concat(F,": ").concat(G," x ").concat(j),I||(_=!0)}else{var H=L===en?"declined":L;E="".concat(A," ").concat(Or("conversation_detail.workstation.offer_panel.".concat(H)))}else E=A;break;case Rr:E="".concat(A," ").concat(P.map((function(e){return e.title})).join("; "));break;case Ir:var V=i||{},B=V.type,Y=V.rule_text,Q=V.discount_text;if(B){var q="[".concat(Or("conversation_detail.workstation.voucher_panel.".concat(B,"_voucher")),"]");E="".concat(q," ").concat(Q,", ").concat(Y)}else E=A;break;default:E=A}return{text:E,isPendingReceivedOffer:_}}return{text:Or(tn)}},dn=function(e,t){return(e&t)===t},ln=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return dn(t.message_option,e.MSG_OPT_DELETE)},pn=function(e,t){return t.some((function(t){return dn(e,t)}))},fn=function(e,t){return e===Pr&&t.type===Vr||e===Yr},_n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.find((function(e){return Wt(t).toLocaleLowerCase().includes(e.lang.toLocaleLowerCase())}))||e.find((function(e){return"en"===e.lang}));return(r||{}).text},En=function(e){var t=e||{},r=t.translation,n=t.mid;if(!r)return!0;var o=(void 0===n?{}:n).source_language,a=void 0===o?"":o,c=r||{},s=c.final,i=c.mid,u=c.target_language,d=void 0===u?"":u,l=c.source_language,p=void 0===l?"":l,f=s?s.target_language:d,_=s?s.source_language:p,E=i?i.source_language:a;return E?E===f:_===f&&"unknown"!==_},Sn=function(e,t){return{type:n.MSG_TYPE_SECURITY_TIPS,content:{text:""},id:e,conversation_id:t,to_id:"",from_id:"",shop_id:"",created_timestamp:Math.floor((new Date).getTime()/1e3)}},hn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.updateMaxGeneralOptionHideTime,n=void 0===r||r,o=t.updateMessageOption,a=void 0===o||o,c=e||{},s=c.created_timestamp,i=c.message_option,u=n?{max_general_option_hide_time:s}:{},d=a?{last_message_option:i}:{};return Tr(Tr({},u),d)},On=function(e){var t=e.crm_message_preview,r=void 0===t?{}:t;return r.text?{crm_message_preview:r}:{crm_message_preview:{}}},vn=function(e,t){var r=e.noti_text_of_all_languages,n=void 0===r?[]:r;if(!n.length)return e;var o=n.find((function(e){return Wt(t).toLocaleLowerCase().includes(e.language.toLocaleLowerCase())}));if(o)return o;var a=n.find((function(e){return"en"===e.language}));return a||e},Tn=function(e){var t=e.type,r=e.textContent,n=e.content,o={};switch(t){case Rr:o={products:(r||{}).products};break;case Ir:var a=r||{};o={rule_text:a.rule_text,discount_text:a.discount_text,type:a.type};break;case br:var c=r||{};o={status:c.status,products_count:c.products_count,offer_price:c.offer_price};break;case yr:o={product_name:n.product_name||(null==r?void 0:r.name)}}return Tr(Tr({},e),{},{content:Tr(Tr({},n),o)})};function mn(e,t,r,n,o,a,c){try{var s=e[a](c),i=s.value}catch(e){return void r(e)}s.done?t(i):Promise.resolve(i).then(n,o)}function gn(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){mn(a,n,o,c,s,"next",e)}function s(e){mn(a,n,o,c,s,"throw",e)}c(void 0)}))}}var bn,yn=c(757),Rn=c.n(yn),Cn=c(470).t,Dn=function(e){return Pn(e)?Cn(Lt("label.exceed_media_limit.video_duration",180),{max:180}):null},Pn=function(e){var t=e.type,r=e.duration,n=void 0===r?0:r;return"video"===t&&(n<0||n>180)},In=function(){return window.createObjectURL||window.URL.createObjectURL},An=function(e){return{type:"video",cover:"",file:e,duration:0}},wn=function(e,t){return new Promise((function(r){"image"===t?function(e,t){var r=In()(e),n=new Image;n.onload=function(){var o=n.width,a=n.height;t({type:"image",cover:r,file:e,width:o,height:a})},n.src=r}(e,r):"video"===t&&function(e,t){var r;try{r=In()(e)}catch(r){return void t(An(e))}var n=document.createElement("video");n.setAttribute("crossOrigin","anonymous"),n.setAttribute("autoplay","autoplay"),n.muted=!0,n.src=r,n.addEventListener("loadeddata",(function(){n?function(e,t,r,n){var o=document.createElement("canvas"),a=e,c=a.videoWidth,s=a.videoHeight,i=a.duration;o.width=c,o.height=s,o.getContext("2d").drawImage(e,0,0,c,s);var u={type:"video",file:t,duration:Math.ceil(i),width:c,height:s,videoUrl:r};o.toBlob?o.toBlob((function(t){u.cover=t?In()(t):"",n(u),e=null}),"image/png",.5):(u.cover=o.toDataURL?o.toDataURL("image/png"):"",n(u))}(n,e,r,t):t(An(e))})),n.addEventListener("error",(function(){t(An(e))}))}(e,r)}))},Nn=function(e){return e.size},xn=function(e){return e.type},kn=function(e){var t=xn(e);return function(e){return e.includes("video")||Pe.includes(e)}(t)?"video":function(e){return e.includes("image")}(t)?"image":null},Un=function(){var e=gn(Rn().mark((function e(t){var r;return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.map(function(){var e=gn(Rn().mark((function e(t){return Rn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wn(t,kn(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mn="common.toast.file_unsupport",Ln=function(e,t,r,n){var o=kn(e);if("all"===r&&!o||"all"!==r&&o!==r)return Cn(Mn);if("video"===o){if(!t)return Cn(Mn);if(!function(e){return Nn(e)<=Ae}(e))return Cn("label.exceed_media_limit.video_size",{max:30});if(!function(e){var t=function(e){return e.name}(e),r=(t.substr(t.lastIndexOf(".")+1)||"").toUpperCase();return De.includes(r)}(e))return Cn(Mn)}else if("image"===o){if(!function(e,t){return Nn(e)<=(t||Ie)}(e,n))return n?Cn("ps_feedback_upload_img_size_error"):Cn("common.toast.file_size_exceeds",{maxFileSize:"2MB"});if(!function(e){return Re.includes(xn(e))}(e))return Cn("feedback_modal.error.upload_image_failed.format")}return null},jn=function(e,t){var r=new XMLHttpRequest;r.open("get",e),r.responseType="blob",r.onload=function(){t(r.response)},r.send()},Gn=c(547),Fn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER],Hn=function(e){return Fn.includes(e)},Vn=[e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_CANCELORDER_WARNING_NOT_SEND],Bn=[n.MSG_TYPE_TEXT,n.MSG_TYPE_IMAGE,n.MSG_TYPE_VIDEO,n.MSG_TYPE_STICKER,n.MSG_TYPE_ITEM_LIST,n.MSG_TYPE_SHOPPING_CART,n.MSG_TYPE_UNTATED_ORDER_REMINDER,n.MSG_TYPE_ADD_ON_DEAL,n.MSG_TYPE_VOUCHER,n.MSG_TYPE_BUNDLE_DEAL,n.MSG_TYPE_FLASH_SALE,n.MSG_TYPE_OFFER,n.MSG_TYPE_ORDER,n.MSG_TYPE_PRODUCT,n.MSG_TYPE_IMAGE_WITH_TEXT],Yn=function(e,t){var r=e.type,c=e.send_status,s=e.errorCode,i=e.status,u=e.message_option;if(!t){var d=Bn.includes(r)&&!Vn.find((function(e){return dn(u,e)})),p=c!==o.SENDING&&c!==o.FAILED&&i!==l.CENSORED_BLACKLIST&&s!==a.BLACKLIST;if(d&&p){var f=(e||{}).textContent,_=void 0===f?{}:f;if(r===n.MSG_TYPE_ORDER)return!(!_||!_.id);if(r===n.MSG_TYPE_PRODUCT){var E=_,S=E.id,h=E.actual_price;return!(!S||!h)}return!0}}return!1},Qn=(m(bn={},n.MSG_TYPE_TEXT,0),m(bn,n.MSG_TYPE_IMAGE,1),m(bn,n.MSG_TYPE_OFFER,3),m(bn,n.MSG_TYPE_PRODUCT,4),m(bn,n.MSG_TYPE_ORDER,5),m(bn,n.MSG_TYPE_STICKER,6),m(bn,n.MSG_TYPE_VIDEO,18),m(bn,n.MSG_TYPE_ITEM_LIST,1011),m(bn,n.MSG_TYPE_VOUCHER,1013),m(bn,n.MSG_TYPE_SHOPPING_CART,1014),m(bn,n.MSG_TYPE_UNTATED_ORDER_REMINDER,1015),m(bn,n.MSG_TYPE_BUNDLE_DEAL,1016),m(bn,n.MSG_TYPE_FLASH_SALE,1017),m(bn,n.MSG_TYPE_ADD_ON_DEAL,1018),bn),qn=function(e){return void 0!==Qn[e]?Qn[e]:-1},Wn=[e.MSG_OPT_AUTO_REPLY,e.MSG_OPT_BLOCKED,e.MSG_OPT_CENSORED_BLACKLIST,e.MSG_OPT_IGNORE_UNREAD_FOR_RECEIVER,e.MSG_OPT_IGNORE_UNREAD_FOR_SENDER,e.MSG_OPT_INVISIBLE_FOR_RECEIVER,e.MSG_OPT_INVISIBLE_FOR_SENDER,e.MSG_OPT_ADS,e.MSG_OPT_FAQ_SESSION,e.MSG_OPT_TRIGGER_FAQ,e.MSG_OPT_OFFWORK_AUTOREPLY,e.MSG_OPT_CANCELORDER_WARNING_RETRACT,e.MSG_OPT_CHATBOT_SESSION,e.MSG_OPT_TRIGGER_CHATBOT,e.MSG_OPT_PRIVATE_MESSAGE,e.MSG_OPT_SILENT_FOR_SENDER],Kn=function(e,t,r){var n=e.type,a=e.send_status,c=e.created_timestamp,s=e.message_option,i=!0;return t&&_.includes(n)&&![o.SENDING,o.FAILED].includes(a)&&!pn(s,Wn)||(i=!1),(!r||Math.floor((new Date).getTime()/1e3)-c>=r)&&(i=!1),i},zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.isAgent,n=t.to_tob_user_id,o=t.shop_id,a=e.from_id,c=e.to_shop_id;return r?a!==n:c!==o};function Jn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var $n,Zn,eo,to=function(e,t){return t.map((function(t){return function(e,t){var r=function(e,t){var r=t.trim().toLocaleLowerCase();return e.filter((function(e){return e.trim().toLocaleLowerCase().startsWith(r)})).length}(e.tags,t),n=function(e,t){var r=ao(t),n=new RegExp(r,"gi");return(e.match(n)||[]).length}(e.content,t);return 1e4*r+1*n}(e,t)})).reduce((function(e,t){return e+t}),0)},ro=function(e){return e.trim().length>=1},no=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)return e.trim()?[e]:[];var r=e.split(",").filter((function(e){return e.trim()})),n=Ze(new Set(r));return n.sort((function(e,t){return e.length>t.length?-1:1}))},oo=function(e,t){return t.length?function(e){return e.sort((function(e,t){return e.weight>t.weight?-1:1}))}(function(e){return e.filter((function(e){return e.weight}))}(e.map((function(e){return Xn(Xn({},e),{},{weight:to(e,t)})})))):e},ao=function(e){return e.replace(/[.[\]{}()+?*^\\$?]/g,"\\$&")},co=c(470).t,so=function(e){return"common.order.status.".concat(e)},io=function(e){var t=e.order,r=e.region,n=(e.isOwnOrder,e.isNewPrice),o=t.products,a=void 0===o?[]:o,c=t.estimated_escrow,s=void 0===c?0:c,i=t.total_price,u=void 0===i?0:i,d=t.voucher_price,l=void 0===d?0:d,p=t.price_before_discount,f=void 0===p?0:p,_=t.credit_card_promotion,E=void 0===_?0:_,S=a.reduce((function(e,t){return e+(t.coin_offset||0)}),0);return{shopeeCoin:S,payment:Et(n?s||u?u:f||u:f-l-E-S,r)}},uo=Ee.PAY_CREDIT_CARD,lo=Ee.PAY_BANK_TRANSFER,po=Ee.PAY_OFFLINE_PAYMENT,fo=Ee.PAY_IPAY88,_o=Ee.PAY_FREE,Eo=Ee.PAY_COD,So=Ee.PAY_ESUN,ho=Ee.PAY_BILL_PAYMENT,Oo=Ee.PAY_INDOMARET,vo=Ee.PAY_KREDIVO,To=Ee.PAY_NICEPAY_CC,mo=Ee.PAY_AIRPAY,go=Ee.PAY_SHOPEE_WALLET,bo=Ee.PAY_SHOPEE_WALLET_V2,yo=Ee.PAY_AKULAKU,Ro=Ee.PAY_INSTALLMENT,Co=Ee.PAY_IBANKING,Do=(m($n={},uo,"cc"),m($n,lo,"bank_transfer"),m($n,po,"offline"),m($n,fo,"online"),m($n,_o,"waived"),m($n,Eo,"cod"),m($n,So,"esun"),m($n,ho,"bill_payment"),m($n,Oo,"indomaret"),m($n,vo,"kredivo"),m($n,To,"cc_installment"),m($n,mo,"airpay"),m($n,go,"shopee_wallet"),m($n,bo,"shopee_wallet_v2"),m($n,yo,"akulaku"),m($n,Ro,"installment"),m($n,Co,"ibanking"),$n),Po=function(e){var t=Do[e];return t?co("common.order.pay_method.".concat(t)):""},Io=he.NONE,Ao=he.OUT_OF_STOCK,wo=he.CUSTOMER_REQUEST,No=he.UNDELIVERABLE_AREA,xo=he.CANNOT_SUPPORT_COD,ko=he.LOST_PARCEL,Uo=he.SYSTEM_UNPAID,Mo=he.SYSTEM_UNDERPAID,Lo=he.SYSTEM_PAYMENT_REJECTED,jo=(m(Zn={},Io,"none"),m(Zn,Ao,"out_of_stock"),m(Zn,wo,"customer_request"),m(Zn,No,"undeliverable_area"),m(Zn,xo,"cannot_support_cod"),m(Zn,ko,"lost_parcel"),m(Zn,Uo,"system_unpaid"),m(Zn,Mo,"underpaid"),m(Zn,Lo,"payment_rejected"),Zn),Go=function(e){return co("common.order.cancel_reason.".concat(jo[e]||"system"))},Fo=function(e,t){var r=e.list_type,n=e.status_ext,o=e.order_type,a=e.payment_method,c=e.shipping_method,s=e.logistics_status,i=e.pickup_cutoff_time;if(n===Oe.ORDER_EXT_CANCEL_PENDING)return!1;var u=["MY","TW","VN","PH"].includes(t),d=!!i&&Date.now()>=new Date(i).getTime(),l=!0;switch(r){case ve.TOPAY:if(a===Ee.PAY_OFFLINE_PAYMENT)return l;break;case ve.TOSHIP:return d&&u&&a===Ee.PAY_COD&&s===ge.LOGISTICS_REQUEST_CREATED||(o===Te.ESCROW?(n===Oe.ORDER_EXT_RETURN_PROCESSING||c>0&&s===ge.LOGISTICS_REQUEST_CREATED&&d)&&(l=!1):o===Te.SIMPLE&&(l=!1)),l}return l},Ho=(m(eo={},te.DELETED,re.DELETED),m(eo,te.BANNED,re.BANNED),m(eo,te.SOLD_OUT,re.SOLD_OUT),m(eo,te.DELISTED,re.DELISTED),eo),Vo=function(e){return e===te.NORMAL?"conversation_detail.conversation_origin.product_origin.product_stock":"common.product.".concat(Ho[e])},Bo=function(e,t){return!(!e||t!==te.DELETED)},Yo=function(e){return void 0!==e&&e!==te.NORMAL},Qo=function(e){return void 0!==e&&e<=0},qo=function(e,t){return Yo(e)||Qo(t)},Wo=1e3,Ko=1800,zo=86400,Jo=[zo,3600,60],Xo=function(e){var t=e,r=Jo.map((function(e){var r=t>e?Math.floor(t/e):0;return t-=r*e,r}));return r.push(t),r},$o=function(e){return"".concat(e>=10?"":"0").concat(e)},Zo=function(){return Math.ceil(Date.now()/1e3).toString()},ea=function(e){return e*Math.pow(10,9)+""},ta=["zh-CN","zh-Hant","zh-Hans"],ra=function(e){var t=At().language||"en",r=qt(t);return ta.includes(r)?((100-e)/10).toFixed(e%10?1:0):"".concat(e,"%")},na=function(e,t,r,n,o){return n||t?e:e||o&&!!r},oa=c(470).t,aa=function(e){return e===F.FINISHED},ca=function(e,t){return e===t},sa=function(e,t){return Et(e,t,{withUnit:e>=1e4})},ia=function(e,t,r,n){return oa("conversation_detail.workstation.voucher_panel.".concat(n?F.ONGOING:e,"_time"),{time:e===F.SCHEDULED?Ct(t,"MM.DD.YYYY h:mm"):Ct(r,"MM.DD.YYYY")})};function ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function da(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var la=function(e,t,r){var n=e.categories,o=void 0===n?[]:n,a=e.other_faq_types,c=void 0===a?[]:a,s=e.intents,i=void 0===s?[]:s,u=e.questions,d=void 0===u?[]:u,l=[];return o.length&&o.forEach((function(e,r){l.push(pa({item:e,index:r,type:z.Categories,isNewFaq:t}))})),c.length&&c.forEach((function(e,n){l.push(pa({item:e,index:n+o.length,type:z.OtherFaqType,isNewFaq:t,locale:r}))})),i.length&&i.forEach((function(e,r){l.push(pa({item:e,index:r+o.length+c.length,type:z.Intent,isNewFaq:t}))})),d.length&&d.forEach((function(e,r){l.push(pa({item:e,index:r,type:z.Question,isNewFaq:t}))})),l},pa=function(e){var t=e.item,r=e.index,n=e.type,o=e.isNewFaq,a=e.locale,c={};switch(n){case z.Categories:c={content:t.title,location:r};break;case z.OtherFaqType:c={content:_n(t.faq_type_choice_translation,a),location:r};break;case z.Intent:var s=t;c=da(da({},JSON.parse(s.pass_through_data)),{},{content:s.text,location:r});break;case z.Question:c={content:t.text,location:r};break;case z.ChatWithSeller:c={content:t.content}}return{data:JSON.stringify(da(da({},c),{},{is_intent_prediction:n===z.Intent?K.Intent:K.Faq,is_default_hq:o?1:0})),type:1}},fa=c(470)})(),s})(),e.exports=n(r(37725),r(14906),r(58518),r(69483))}}]);