(self.miniJsonp=self.miniJsonp||[]).push([[173],{67167:(e,t,n)=>{var r;self,r=(e,t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,T,O,B)=>(()=>{var k={7757:(e,t,n)=>{e.exports=n(5666)},5945:(e,t,n)=>{"use strict";n.d(t,{default:()=>a});var r=n(885),s={};Object.entries({"input-field":["fetchMessageShortcutsGroupRequested","updateFetchMessageShortcutsGroupStatus","fetchMessageShortcutsGroupSucceeded","setCurrentGroupType","setCurrentGroupId","fetchOffersRequested","fetchOffersSucceed","updateFetchOffersRequestedStatus","replyOfferRequested","fetchAllOrdersRequested","fetchOrdersRequested","fetchOrdersSucceed","updateFetchOrdersStatus","fetchAllOrders","fetchOrders","fetchProductsRequested","fetchMyShopProducts","fetchProductsSucceed","updateMyShopProductsRequestedStatus","updateOtherShopProductsRequestedStatus","updateAllShopProductsRequestedStatus","updateMyShopSearchKeyword","updateOtherShopSearchKeyword","updateSelectedProductTab","fetchAllProductsRequested","fetchAllShopProducts","fetchProducts","initPacks","initStickers","selectSticker","updateCurrentSticker","fetchSingleStickerRequested","fetchSingleStickerSucceeded","updateFetchPacksRequestedStatus","updateFetchStickersRequestedStatus","fetchStickersRequested","fetchStickersRequestedSaga","claimVoucherRequested","fetchVouchersRequested","fetchVouchersSucceeded","updateFetchVouchersRequestedStatus"],"message-section":["updateHasConflict","deleteConversationMessageHash","deleteMessageRequested","deleteMessagePostRequested","deleteMessageIdInHash","deleteFakingMessages","deleteMessageContentAndId","setEntryPoint","evaluationRequested","showMyRateCard","showRateCard","fetchFaqMessagesRequested","fetchFaqMessagesSucceeded","updateFetchFaqMessagesRequestedStatus","updateCurrentFaqId","showFaqHistoryModal","fetchMessagesRequested","fetchMessagesSucceeded","updateFetchMessagesRequestedStatus","setSecurityTipsMessage","fetchConversationMessagesSaga","fetchMessagesRequestedWithPreloadSaga","fetchMessagesRequestedSaga","updateMessageFillStatusMap","fillMessageRequested","fillMessageContent","handleSensitiveUrl","sendMessagesFailedByOffline","resetMessagesFailedByOffline","resendOfflineMessagesOnce","resendOfflineMessagesOnceSucceed","updateResendConversationMessage","receiveMessageRequested","receiveMessageSucceeded","resetNewConversationQueue","resetOldConversationQueue","resetConversationQueue","handleNewConversationMessageQueue","handleCurrentConversationChange","setReplyToMessage","resetReplyToMessage","scrollToMessage","setScrollToMessageId","resetScrollToMessageId","setInScrollToMessage","setCurrentConversationReplyToMessage","resetCurrentConversationReplyToMessage","resendMessageRequested","sendMessagesRequested","sendMessagesSucceeded","sendingMessages","sendMessagesToPending","sendMessagesFailed","abortAllSendingMessages","cancelSendingMessageRequested","cancelSendingMessageSucceeded","sendVideoMessageRequested","sendProductsMessageRequested","handleSendSucceededMessages","handleFaqExpiredMessage","sendMessages","messageSyncUpdate","translateMessagesRequested","changeTranslateStatus","showTranslateFeedback","sendTranslateFeedback","updateMessagesRelated","updateVideoInfo","deleteVideoInfo","uploadVideoGetToken","uploadVideGetResult","uploadVideo"]}).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0];t[1].forEach((function(e){s[e]=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.payload,s=t.isLazy;return{id:n,action:e,payload:r,isLazy:s}}}))}));const a=s},4323:(e,t,n)=>{"use strict";n.d(t,{t:()=>a});var r=n(8661),s=n.n(r),a=s().t.bind(s())},5668:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xoYO4owojG {\n  color: #2673dd;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/Common/CancelOrderHint/index.css"],names:[],mappings:"AAAA;EACE,cAAc;EACd,eAAe;AACjB",sourcesContent:[".policy {\n  color: #2673dd;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={policy:"xoYO4owojG"};const i=o},2147:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ldGwUka16V {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.PpPQNYTjzu {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n","",{version:3,sources:["webpack://./src/components/Common/ScrollList/style.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,4BAA4B;AAC9B;;AAEA;EACE,MAAM;EACN,SAAS;EACT,OAAO;EACP,QAAQ;EACR,YAAY;EACZ,sBAAsB;AACxB",sourcesContent:[".root {\n  height: 100%;\n  width: 100%;\n  overflow-x: hidden;\n  overflow-y: auto;\n  box-sizing: border-box;\n  overscroll-behavior: contain;\n}\n\n.empty {\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  margin: auto;\n  box-sizing: border-box;\n}\n"],sourceRoot:""}]),o.locals={root:"ldGwUka16V",empty:"PpPQNYTjzu"};const i=o},1644:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xvgXvQJfBg {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n._louvguDj8 {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n}\n\n._louvguDj8.pcRh6o4FtL {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n\n.Gj6Kb_8akL {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/ModalHeader/index.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,eAAe;EACf,aAAa;EACb,gBAAgB;EAChB,kBAAkB;AACpB;;AAEA;EACE,eAAe;EACf,aAAa;EACb,kBAAkB;EAClB,gBAAgB;AAQlB;;AANE;IACE,cAAc;IACd,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;EACrB;;AAGF;EACE,aAAa;EACb,YAAY;EACZ,WAAW;EACX,kBAAkB;EAClB,MAAM;EACN,aAAa;EACb,eAAe;AACjB",sourcesContent:[".root {\n  width: 100%;\n  font-size: 20px;\n  height: 1.1em;\n  text-align: left;\n  position: relative;\n}\n\n.title {\n  max-width: 100%;\n  height: 1.2em;\n  line-height: 1.1em;\n  font-weight: 500;\n\n  &.has-cancel {\n    max-width: 80%;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  }\n}\n\n.cancel {\n  height: 0.7em;\n  width: 0.7em;\n  color: #bbb;\n  position: absolute;\n  top: 0;\n  right: -0.2em;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={root:"xvgXvQJfBg",title:"_louvguDj8","has-cancel":"pcRh6o4FtL",hasCancel:"pcRh6o4FtL",cancel:"Gj6Kb_8akL"};const i=o},5792:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".QOPArcVPa0 {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.e4rHNIVBIc {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.e4rHNIVBIc:focus {\n  outline: none;\n}\n","",{version:3,sources:["webpack://./src/components/UI/Modal/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,OAAO;EACP,QAAQ;EACR,MAAM;EACN,SAAS;EACT,8BAA8B;EAC9B,aAAa;EACb,uBAAuB;EACvB,mBAAmB;EACnB,YAAY;AACd;;AAEA;EACE,cAAc;EACd,kBAAkB;EAClB,gBAAgB;EAChB,sBAAsB;EACtB,0EAA0E;AAC5E;;AAEA;EACE,aAAa;AACf",sourcesContent:[".overlay {\n  position: fixed;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  background: rgba(0, 0, 0, 0.5);\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  z-index: 100;\n}\n\n.content {\n  padding: 1.5em;\n  border-radius: 3px;\n  background: #fff;\n  box-sizing: border-box;\n  box-shadow: 0 0 1em 0 rgba(0, 0, 0, 0.05), 0 1em 1em 0 rgba(0, 0, 0, 0.09);\n}\n\n.content:focus {\n  outline: none;\n}\n"],sourceRoot:""}]),o.locals={overlay:"QOPArcVPa0",content:"e4rHNIVBIc"};const i=o},1696:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ICwdhNZt8D {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.LsH14oWYoo {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.B_39Xx2sa4 {\n}\n\n.B_39Xx2sa4:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/ErrorContent/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,mBAAmB;EACnB,mBAAmB;EACnB,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".icon-wrap {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  margin-right: 0.5em;\n  line-height: 0;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"icon-wrap":"ICwdhNZt8D",iconWrap:"ICwdhNZt8D","icon-base":"LsH14oWYoo",iconBase:"LsH14oWYoo",icon:"B_39Xx2sa4 LsH14oWYoo"};const i=o},7370:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lvfGaGmEO_ {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  margin-bottom: 4px;\n}\n\n.KZ2zq28zXu {\n  margin-bottom: 0;\n  color: #ee4d2d;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Order/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,iBAAiB;EACjB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EAEE,gBAAgB;EAChB,cAAc;AAChB",sourcesContent:[".line {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  margin-bottom: 4px;\n}\n\n.status {\n  composes: line;\n  margin-bottom: 0;\n  color: #ee4d2d;\n}\n"],sourceRoot:""}]),o.locals={line:"lvfGaGmEO_",status:"KZ2zq28zXu lvfGaGmEO_"};const i=o},7625:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".C3cOkBPl3G,\n.MArSWKlROx,\n.iTQsEeB_Ll {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.MArSWKlROx {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.C3cOkBPl3G {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n}\n\n.C3cOkBPl3G.YSkZkfABAh {\n    margin-left: 0;\n  }\n\n.rTSmTpTjPo > div {\n    background:#F7F8FB;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/Product/index.css"],names:[],mappings:"AAAA;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;EACX,6BAA6B;AAC/B;;AAEA;EACE,cAAc;EACd,kBAAkB;AAKpB;;AAHE;IACE,cAAc;EAChB;;AAIA;IACE,kBAAkB;EACpB",sourcesContent:[".current-price,\n.original-price,\n.status {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.original-price {\n  color: #bbb;\n  text-decoration: line-through;\n}\n\n.current-price {\n  color: #ee4d2d;\n  margin-left: 0.5em;\n\n  &.no-origin {\n    margin-left: 0;\n  }\n}\n\n.product-deleted {\n  & > div {\n    background:#F7F8FB;\n  }\n}\n"],sourceRoot:""}]),o.locals={"current-price":"C3cOkBPl3G",currentPrice:"C3cOkBPl3G","original-price":"MArSWKlROx",originalPrice:"MArSWKlROx",status:"iTQsEeB_Ll","no-origin":"YSkZkfABAh",noOrigin:"YSkZkfABAh","product-deleted":"rTSmTpTjPo",productDeleted:"rTSmTpTjPo"};const i=o},1177:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".aPkxwEmpbc {\n  width: 100%;\n  height: 116px;\n  padding: 0.5em;\n  font-size: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #f7f8fb;\n}\n\n.Z3EF4a7S93 {\n  height: 96px;\n}\n\n.chEJ5cCbft {\n  color: #555;\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.JFRlMYQSZi {\n  height: 1px;\n  width: 100%;\n  margin-top: 8px;\n  margin-bottom: 7px;\n  transform: scaleY(0.5);\n  background-color: rgba(0, 0, 0, 0.09);\n}\n\n.UDiSvl0kP4 {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  position: relative;\n}\n\n.vXn2gIYM5j {\n  margin-top: 0.5em;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hmektzZglE {\n  cursor: pointer;\n}\n\n.HYyNk4qtp7 {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.LVBo2ECzmo {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.QEbVX7exP7,\n.afn7AObQhK,\n.DN8Uh8ITG6 {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.QEbVX7exP7 {\n  color: #555;\n}\n\n.nzIBjG_Juk {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.afn7AObQhK {\n  color: #888;\n}\n\n.DN8Uh8ITG6 {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.RtRCeE7Rd7 {\n  color: #ccc;\n  cursor: default;\n}\n\n.IPp1hvocDi {\n  color: #ccc;\n  cursor: default;\n}\n\n.g1RCCZAeWH {\n  height: 100%;\n  padding-left: 0.5em;\n}\n\n.g1RCCZAeWH._G6ZxA1qYO {\n    display: flex;\n    align-items: center;\n  }\n\n.cBomL4XnjJ {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.RsTExA8pvG {\n  padding-top: 2px;\n}\n\n.pQWcEN6WDr {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.UFWU17wVUx {\n  margin-top: 4px;\n}\n\n.JMr6x3BJJC {\n  margin-top: 0.125em;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MessageSource/common.css"],names:[],mappings:"AAAA;EACE,WAAW;EACX,aAAa;EACb,cAAc;EACd,eAAe;EACf,sBAAsB;EACtB,aAAa;EACb,kBAAkB;EAClB,sBAAsB;EACtB,8BAA8B;EAC9B,yBAAyB;AAC3B;;AAEA;EAEE,YAAY;AACd;;AAEA;EACE,WAAW;EACX,eAAe;EACf,iBAAiB;AACnB;;AAGA;EACE,WAAW;EACX,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,sBAAsB;EACtB,qCAAqC;AACvC;;AAEA;EACE,OAAO;EACP,WAAW;EACX,aAAa;EACb,kBAAkB;AACpB;;AAEA;EACE,iBAAiB;EACjB,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,eAAe;AACjB;;AAEA;EACE,UAAU;EACV,WAAW;EACX,yBAAyB;EACzB,uBAAuB;AACzB;;AAEA;EACE,sBAAsB;EACtB,uBAAuB;AACzB;;AAEA;;;EAGE,eAAe;EACf,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,cAAc;EACd,eAAe;EACf,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,YAAY;EACZ,mBAAmB;AAMrB;;AAJE;IACE,aAAa;IACb,mBAAmB;EACrB;;AAGF;EACE,eAAe;EACf,iBAAiB;EACjB,yBAAyB;EACzB,oBAAoB;EACpB,uBAAuB;EACvB,qBAAqB;EACrB,4BAA4B;EAC5B,mBAAmB;EACnB,qBAAqB;EACrB,gBAAgB;AAClB;;AAEA;EAEE,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EAEE,eAAe;AACjB;;AAEA;EAEE,mBAAmB;AACrB",sourcesContent:[".root {\n  width: 100%;\n  height: 116px;\n  padding: 0.5em;\n  font-size: 16px;\n  box-sizing: border-box;\n  display: flex;\n  border-radius: 8px;\n  flex-direction: column;\n  justify-content: space-between;\n  background-color: #f7f8fb;\n}\n\n.short-root {\n  composes: root;\n  height: 96px;\n}\n\n.header {\n  color: #555;\n  font-size: 12px;\n  line-height: 14px;\n}\n\n\n.divider {\n  height: 1px;\n  width: 100%;\n  margin-top: 8px;\n  margin-bottom: 7px;\n  transform: scaleY(0.5);\n  background-color: rgba(0, 0, 0, 0.09);\n}\n\n.body {\n  flex: 1;\n  width: 100%;\n  display: flex;\n  position: relative;\n}\n\n.footer {\n  margin-top: 0.5em;\n  display: flex;\n  justify-content: flex-end;\n}\n\n.hover {\n  cursor: pointer;\n}\n\n.img-wrapper {\n  width: 3em;\n  height: 3em;\n  border: 1px solid #f5f5f5;\n  background: transparent;\n}\n\n.img {\n  width: calc(3em - 2px);\n  height: calc(3em - 2px);\n}\n\n.label,\n.status-text,\n.link {\n  font-size: 12px;\n  line-height: 14px;\n}\n\n.label {\n  color: #555;\n}\n\n.actions {\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.status-text {\n  color: #888;\n}\n\n.link {\n  color: #395692;\n  cursor: pointer;\n  margin-left: 1.33em;\n}\n\n.deleted {\n  color: #ccc;\n  cursor: default;\n}\n\n.no-access {\n  color: #ccc;\n  cursor: default;\n}\n\n.content {\n  height: 100%;\n  padding-left: 0.5em;\n\n  &.no-model {\n    display: flex;\n    align-items: center;\n  }\n}\n\n.name {\n  font-size: 12px;\n  line-height: 14px;\n  color: rgba(0, 0, 0, .87);\n  display: -webkit-box;\n  text-overflow: ellipsis;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  white-space: normal;\n  word-break: break-all;\n  overflow: hidden;\n}\n\n.order-name {\n  composes: name;\n  padding-top: 2px;\n}\n\n.detail {\n  display: flex;\n  align-items: center;\n  position: relative;\n}\n\n.product-detail {\n  composes: detail;\n  margin-top: 4px;\n}\n\n.order-detail {\n  composes: detail;\n  margin-top: 0.125em;\n}\n"],sourceRoot:""}]),o.locals={root:"aPkxwEmpbc","short-root":"Z3EF4a7S93 aPkxwEmpbc",shortRoot:"Z3EF4a7S93 aPkxwEmpbc",header:"chEJ5cCbft",divider:"JFRlMYQSZi",body:"UDiSvl0kP4",footer:"vXn2gIYM5j",hover:"hmektzZglE","img-wrapper":"HYyNk4qtp7",imgWrapper:"HYyNk4qtp7",img:"LVBo2ECzmo",label:"QEbVX7exP7","status-text":"afn7AObQhK",statusText:"afn7AObQhK",link:"DN8Uh8ITG6",actions:"nzIBjG_Juk",deleted:"RtRCeE7Rd7","no-access":"IPp1hvocDi",noAccess:"IPp1hvocDi",content:"g1RCCZAeWH","no-model":"_G6ZxA1qYO",noModel:"_G6ZxA1qYO",name:"cBomL4XnjJ","order-name":"RsTExA8pvG cBomL4XnjJ",orderName:"RsTExA8pvG cBomL4XnjJ",detail:"pQWcEN6WDr","product-detail":"UFWU17wVUx pQWcEN6WDr",productDetail:"UFWU17wVUx pQWcEN6WDr","order-detail":"JMr6x3BJJC pQWcEN6WDr",orderDetail:"JMr6x3BJJC pQWcEN6WDr"};const i=o},5522:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".YgwCAyD4Nu {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.qu7NqjdBtM {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.zjxBy6muI4 {\n  color: #eda500;\n}\n\n.r1mvfORZKY {\n  color: #30b566;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/MetaInfo/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,eAAe;AACjB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,iBAAiB;EACjB,sBAAsB;AACxB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EAEE,cAAc;AAChB",sourcesContent:[".meta-content {\n  display: flex;\n  justify-content: center;\n  margin-top: 4px;\n}\n\n.icon {\n  width: 12px;\n  height: 14px;\n  margin-right: 6px;\n  vertical-align: middle;\n}\n\n.warn-icon {\n  composes: icon;\n  color: #eda500;\n}\n\n.success-icon {\n  composes: icon;\n  color: #30b566;\n}\n"],sourceRoot:""}]),o.locals={"meta-content":"YgwCAyD4Nu",metaContent:"YgwCAyD4Nu",icon:"qu7NqjdBtM","warn-icon":"zjxBy6muI4 qu7NqjdBtM",warnIcon:"zjxBy6muI4 qu7NqjdBtM","success-icon":"r1mvfORZKY qu7NqjdBtM",successIcon:"r1mvfORZKY qu7NqjdBtM"};const i=o},8733:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".giWDyn0pBc {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/NewMessageTip/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,mBAAmB;EACnB,eAAe;EACf,YAAY;EACZ,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,cAAc;EACd,mBAAmB;EACnB,oBAAoB;AACtB",sourcesContent:[".new-message-tip {\n  box-sizing: border-box;\n  background: #fafafa;\n  margin-top: 1em;\n  height: 28px;\n  color: #bbb;\n  font-size: 14px;\n  text-align: center;\n  padding: 6px 0;\n  margin-left: -7.5px;\n  margin-right: -7.5px;\n}\n"],sourceRoot:""}]),o.locals={"new-message-tip":"giWDyn0pBc",newMessageTip:"giWDyn0pBc"};const i=o},6322:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".ttPQqPfWBw {\n  margin-right: 0.5em;\n}\n\n.jfwEgZmTS8 {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.qLygjvHbi_ {\n}\n\n.qLygjvHbi_:hover {\n    cursor: pointer;\n  }\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/SendingStatus/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;AACrB;;AAEA;EACE,WAAW;EACX,YAAY;EACZ,cAAc;EACd,cAAc;EACd,cAAc;AAChB;;AAEA;AAMA;;AAHE;IACE,eAAe;EACjB",sourcesContent:[".sending-wrap {\n  margin-right: 0.5em;\n}\n\n.icon-base {\n  width: 14px;\n  height: 14px;\n  border: 0 none;\n  line-height: 0;\n  color: #fe4741;\n}\n\n.icon {\n  composes: icon-base;\n\n  &:hover {\n    cursor: pointer;\n  }\n}\n"],sourceRoot:""}]),o.locals={"sending-wrap":"ttPQqPfWBw",sendingWrap:"ttPQqPfWBw","icon-base":"jfwEgZmTS8",iconBase:"jfwEgZmTS8",icon:"qLygjvHbi_ jfwEgZmTS8"};const i=o},8304:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".lZX8jHufoA {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.WTt5Zxu_wD {\n  padding-bottom: 0.75em;\n}\n\n.uAjc6BXz_7 {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.n7tPV8kPwM {\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.qAGJYsVJQu {\n  justify-content: flex-start;\n}\n\n.P3ZdqDjG37 {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.ABKca6B6Ht {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.uCUlXlm0QJ {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.z_Xhr9b5fr {\n  position: relative;\n}\n\n.GdJhfJ3Op6 {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sNqF64S6Ls {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.bYxtrDTEPp {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.DLvnpF6s13 {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DLvnpF6s13:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.DcB5O9mC5j {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n}\n\n.DcB5O9mC5j:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n\n.BeN6c_qwKf .DLvnpF6s13:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n\n.h0x92TVWo6 {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.Prfii1SpEb {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n}\n\n.Prfii1SpEb::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n\n.RjM9TcwKtg {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.nLboISDstO {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.zIxwRJ1LdF {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.PMSbyVSfsf {\n  color: #ff4742;\n}\n\n.fSRVoLiSel {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.y0mvzRsyQC {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.bCeP7O7kIU {\n  width: 100%;\n  height: 100%;\n}\n\n.qUVi9b0o_d {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.GmQ6XKEO1A {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.WZc6v51Ui3 {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.dAcTlOVojQ {\n  display: flex;\n  flex-direction: row;\n}\n\n.V5XYcsiIjs {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.W5wfnXLeev {\n  margin-bottom: 0.428em;\n}\n\n.l9LJVab1Cf {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.nA662Ba2GJ {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.XPgj2M188U {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.vCA0Qf4XEs {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.ZZd9f8t9vy {\n  margin-right: 1.333em;\n}\n\n.EPXlbwcmCC {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.YcgygeHQkO {\n  height: 1em;\n  width: 1em;\n}\n\n.gOXjE4DJKC {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.aihhYFJGJZ {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.ULipY89W0D {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.CpuhigVQTg {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n}\n\n.CpuhigVQTg > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n.CpuhigVQTg > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n\n.XzkgdAK3Dj {\n  font-size: 14px;\n  color: #555;\n}\n\n.fDWC8RPEk1 {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes Sy68QEc9eS {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.ZbPw85eBry {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.z_IvwASUPS {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.d6OoDRmeTf {\n  display: flex;\n  justify-content: center;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/BaseMessage/index.css"],names:[],mappings:"AAAA;EACE,sBAAsB;EACtB,gBAAgB;AAClB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EAEE,mBAAmB;EACnB,yBAAyB;AAC3B;;AAEA;EAEE,2BAA2B;AAC7B;;AAEA;EACE,eAAe;EACf,gBAAgB;EAChB,oBAAoB;EACpB,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,oBAAoB;EACpB,cAAc;AAChB;;AAEA;EACE,YAAY;EACZ,sBAAsB;AACxB;;AAEA;EACE,oCAAoC;EACpC,4BAA4B;EAC5B,2BAA2B;EAC3B,4BAA4B;AAC9B;;AAEA;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAGF;EACE,WAAW;EACX,eAAe;EACf,cAAc;EACd,qBAAqB;EACrB,4BAA4B;AAM9B;;AAJE;IACE,cAAc;IACd,eAAe;EACjB;;AAIA;IACE,WAAW;IACX,mBAAmB;EACrB;;AAGF;EACE,gBAAgB;EAChB,uBAAuB;EACvB,iBAAiB;EACjB,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,qBAAqB;AACvB;;AAEA;EACE,oBAAoB;EACpB,kBAAkB;EAClB,WAAW;AAWb;;AATE;IACE,WAAW;IACX,WAAW;IACX,WAAW;IACX,kBAAkB;IAClB,OAAO;IACP,QAAQ;IACR,sBAAsB;EACxB;;AAGF;EACE,iBAAiB;EACjB,iBAAiB;EACjB,WAAW;EACX,eAAe;AACjB;;AAEA;EACE,kBAAkB;EAClB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,mBAAmB;EACnB,WAAW;EACX,aAAa;EACb,mBAAmB;AACrB;;AAEA;EAEE,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,uBAAuB;EACvB,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,kBAAkB;EAClB,gBAAgB;AAClB;;AAEA;EACE,WAAW;EACX,YAAY;AACd;;AAEA;EACE,aAAa;EACb,cAAc;AAChB;;AAEA;EACE,aAAa;EACb,mBAAmB;EACnB,mBAAmB;EACnB,eAAe;EACf,yBAAyB;EACzB,kBAAkB;AACpB;;AAEA;EACE,YAAY;EACZ,gBAAgB;AAClB;;AAEA;EACE,aAAa;EACb,mBAAmB;AACrB;;AAEA;EACE,aAAa;EACb,cAAc;EACd,iBAAiB;EACjB,cAAc;AAChB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,iBAAiB;EACjB,+BAA+B;AACjC;;AAEA;EACE,kBAAkB;EAClB,eAAe;EACf,WAAW;EACX,iBAAiB;AACnB;;AAEA;EACE,mBAAmB;EACnB,eAAe;EACf,WAAW;AACb;;AAEA;EACE,qBAAqB;AACvB;;AAEA;EACE,yBAAyB;EACzB,eAAe;EACf,WAAW;EACX,aAAa;EACb,mBAAmB;EACnB,2BAA2B;EAC3B,oBAAoB;AACtB;;AAEA;EACE,WAAW;EACX,UAAU;AACZ;;AAEA;EACE,eAAe;EACf,0BAA0B;EAC1B,gBAAgB;AAClB;;AAEA;EACE,eAAe;EACf,cAAc;EACd,yBAAyB;EACzB,kBAAkB;EAClB,aAAa;EACb,mBAAmB;EACnB,8BAA8B;AAChC;;AAEA;EACE,YAAY;EACZ,aAAa;EACb,mBAAmB;EACnB,2BAA2B;AAC7B;;AAEA;EACE,cAAc;EACd,aAAa;EACb,gBAAgB;AAelB;;AAbE;IACE,WAAW;IACX,YAAY;IACZ,kBAAkB;EACpB;;AAEA;IACE,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,iBAAiB;EACnB;;AAGF;EACE,eAAe;EACf,WAAW;AACb;;AAEA;EACE,aAAa;EACb,cAAc;EACd,mBAAmB;EACnB,uBAAuB;EACvB,gBAAgB;AAClB;;AAEA;EACE;IACE,qBAAqB;EACvB;;EAEA;IACE,0BAA0B;EAC5B;AACF;;AAEA;EACE,aAAa;EACb,sBAAsB;EACtB,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,wBAAwB;EACxB,eAAe;EACf,oBAAoB;EACpB,kBAAkB;EAClB,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,uBAAuB;AACzB",sourcesContent:[".root {\n  box-sizing: border-box;\n  padding: 0 7.5px;\n}\n\n.last-message {\n  padding-bottom: 0.75em;\n}\n\n.message {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.message-send {\n  composes: message;\n  align-items: center;\n  justify-content: flex-end;\n}\n\n.message-receive {\n  composes: message;\n  justify-content: flex-start;\n}\n\n.message-time {\n  font-size: 12px;\n  margin-top: 12px;\n  line-height: 1.167em;\n  color: rgba(0, 0, 0, 0.4);\n  text-align: center;\n}\n\n.product-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.product-origin-info {\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n}\n\n.image-wrapper {\n  position: relative;\n}\n\n.product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 0.75em;\n  flex-shrink: 0;\n}\n\n.sold-out {\n  opacity: 0.6;\n  filter: grayscale(50%);\n}\n\n.background-settings {\n  background-color: rgba(0, 0, 0, 0.6);\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: 1.2em 1.2em;\n}\n\n.view-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.view-mall-link {\n  color: #555;\n  font-size: 14px;\n  flex-shrink: 0;\n  text-decoration: none;\n  transition: color 0.25s ease;\n\n  &:hover {\n    color: #ee4d2d;\n    cursor: pointer;\n  }\n}\n\n.banned {\n  & .view-link:hover {\n    color: #555;\n    cursor: not-allowed;\n  }\n}\n\n.product-name {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  line-height: 1.24;\n  color: #333;\n  font-size: 14px;\n  font-weight: 500;\n  word-break: break-all;\n}\n\n.origin-price {\n  margin-right: 0.25em;\n  position: relative;\n  color: #bbb;\n\n  &::after {\n    content: '';\n    width: 100%;\n    height: 1px;\n    position: absolute;\n    left: 0;\n    top: 50%;\n    background-color: #bbb;\n  }\n}\n\n.product-price {\n  margin-top: 0.5em;\n  line-height: 1.16;\n  color: #555;\n  font-size: 12px;\n}\n\n.product-stock {\n  margin-left: 0.5em;\n  color: #888;\n}\n\n.deleted-product {\n  font-size: 14px;\n  line-height: 1.36em;\n  color: #333;\n  display: flex;\n  align-items: center;\n}\n\n.banned-product {\n  composes: product-price;\n  color: #ff4742;\n}\n\n.view-product-block {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n}\n\n.avatar-wrap {\n  width: 2.25em;\n  height: 2.25em;\n  border-radius: 50%;\n  overflow: hidden;\n}\n\n.avatar {\n  width: 100%;\n  height: 100%;\n}\n\n.avatar-placeholder {\n  width: 2.25em;\n  flex-shrink: 0;\n}\n\n.order-origin {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n}\n\n.order-origin-info {\n  flex-grow: 1;\n  overflow: hidden;\n}\n\n.order-info {\n  display: flex;\n  flex-direction: row;\n}\n\n.order-product-image {\n  width: 2.25em;\n  height: 2.25em;\n  margin-right: 1em;\n  flex-shrink: 0;\n}\n\n.status-wrap {\n  margin-bottom: 0.428em;\n}\n\n.order-status {\n  font-size: 14px;\n  color: #01bfa5;\n}\n\n.pipe {\n  margin: 0 0.428em;\n  color: rgba(136, 136, 136, 0.4);\n}\n\n.order-product-name {\n  line-height: 1.142;\n  font-size: 14px;\n  color: #555;\n  font-weight: bold;\n}\n\n.order-detail {\n  line-height: 1.16em;\n  font-size: 12px;\n  color: #888;\n}\n\n.order-sn {\n  margin-right: 1.333em;\n}\n\n.shop-information {\n  background-color: #f4f4f4;\n  font-size: 16px;\n  height: 2em;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  padding-left: 0.75em;\n}\n\n.shop-avatar {\n  height: 1em;\n  width: 1em;\n}\n\n.shop-name {\n  font-size: 12px;\n  color: rgba(0, 0, 0, 0.42);\n  margin-left: 1em;\n}\n\n.shop-origin {\n  font-size: 16px;\n  height: 3.75em;\n  background-color: #f4f4f4;\n  border-radius: 2px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.shop-origin-info {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n}\n\n.shop-origin-avatar {\n  height: 2.25em;\n  width: 2.25em;\n  margin: 0 0.75em;\n\n  & > * {\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n  }\n\n  & > div {\n    color: #fff;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-weight: bold;\n  }\n}\n\n.shop-origin-name {\n  font-size: 14px;\n  color: #555;\n}\n\n.view-shop-block {\n  display: flex;\n  flex-shrink: 0;\n  align-items: center;\n  justify-content: center;\n  margin: 0 0.75em;\n}\n\n@keyframes rotate {\n  from {\n    transform: rotateZ(0);\n  }\n\n  to {\n    transform: rotateZ(360deg);\n  }\n}\n\n.bubble {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  position: relative;\n}\n\n.offer-tips {\n  padding: 0.667em 0.857em;\n  font-size: 14px;\n  line-height: 1.143em;\n  border-radius: 2px;\n  background-color: #d7e4ff;\n}\n\n.center {\n  display: flex;\n  justify-content: center;\n}\n"],sourceRoot:""}]),o.locals={root:"lZX8jHufoA","last-message":"WTt5Zxu_wD",lastMessage:"WTt5Zxu_wD",message:"uAjc6BXz_7","message-send":"n7tPV8kPwM uAjc6BXz_7",messageSend:"n7tPV8kPwM uAjc6BXz_7","message-receive":"qAGJYsVJQu uAjc6BXz_7",messageReceive:"qAGJYsVJQu uAjc6BXz_7","message-time":"P3ZdqDjG37",messageTime:"P3ZdqDjG37","product-origin":"ABKca6B6Ht",productOrigin:"ABKca6B6Ht","product-origin-info":"uCUlXlm0QJ",productOriginInfo:"uCUlXlm0QJ","image-wrapper":"z_Xhr9b5fr",imageWrapper:"z_Xhr9b5fr","product-image":"GdJhfJ3Op6",productImage:"GdJhfJ3Op6","sold-out":"sNqF64S6Ls",soldOut:"sNqF64S6Ls","background-settings":"bYxtrDTEPp",backgroundSettings:"bYxtrDTEPp","view-link":"DLvnpF6s13",viewLink:"DLvnpF6s13","view-mall-link":"DcB5O9mC5j",viewMallLink:"DcB5O9mC5j",banned:"BeN6c_qwKf","product-name":"h0x92TVWo6",productName:"h0x92TVWo6","origin-price":"Prfii1SpEb",originPrice:"Prfii1SpEb","product-price":"RjM9TcwKtg",productPrice:"RjM9TcwKtg","product-stock":"nLboISDstO",productStock:"nLboISDstO","deleted-product":"zIxwRJ1LdF",deletedProduct:"zIxwRJ1LdF","banned-product":"PMSbyVSfsf RjM9TcwKtg",bannedProduct:"PMSbyVSfsf RjM9TcwKtg","view-product-block":"fSRVoLiSel",viewProductBlock:"fSRVoLiSel","avatar-wrap":"y0mvzRsyQC",avatarWrap:"y0mvzRsyQC",avatar:"bCeP7O7kIU","avatar-placeholder":"qUVi9b0o_d",avatarPlaceholder:"qUVi9b0o_d","order-origin":"GmQ6XKEO1A",orderOrigin:"GmQ6XKEO1A","order-origin-info":"WZc6v51Ui3",orderOriginInfo:"WZc6v51Ui3","order-info":"dAcTlOVojQ",orderInfo:"dAcTlOVojQ","order-product-image":"V5XYcsiIjs",orderProductImage:"V5XYcsiIjs","status-wrap":"W5wfnXLeev",statusWrap:"W5wfnXLeev","order-status":"l9LJVab1Cf",orderStatus:"l9LJVab1Cf",pipe:"nA662Ba2GJ","order-product-name":"XPgj2M188U",orderProductName:"XPgj2M188U","order-detail":"vCA0Qf4XEs",orderDetail:"vCA0Qf4XEs","order-sn":"ZZd9f8t9vy",orderSn:"ZZd9f8t9vy","shop-information":"EPXlbwcmCC",shopInformation:"EPXlbwcmCC","shop-avatar":"YcgygeHQkO",shopAvatar:"YcgygeHQkO","shop-name":"gOXjE4DJKC",shopName:"gOXjE4DJKC","shop-origin":"aihhYFJGJZ",shopOrigin:"aihhYFJGJZ","shop-origin-info":"ULipY89W0D",shopOriginInfo:"ULipY89W0D","shop-origin-avatar":"CpuhigVQTg",shopOriginAvatar:"CpuhigVQTg","shop-origin-name":"XzkgdAK3Dj",shopOriginName:"XzkgdAK3Dj","view-shop-block":"fDWC8RPEk1",viewShopBlock:"fDWC8RPEk1",bubble:"ZbPw85eBry","offer-tips":"z_IvwASUPS",offerTips:"z_IvwASUPS",center:"d6OoDRmeTf",rotate:"Sy68QEc9eS"};const i=o},8674:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".xQ_ZVDDSL5 {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n}.xQ_ZVDDSL5.sXjBJZAZ93 {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n\n.YDdA3QTCvb {\n  max-width: 240px;\n  line-height: 21px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/CustomMessage/index.css"],names:[],mappings:"AAAA;EACE,SAAS;EACT,sBAAsB;EACtB,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,qBAAqB;EACrB,kBAAkB;EAClB,WAAW;EACX,eAAe;EACf,yBAAyB;AAM3B,CAJE;IACE,yBAAyB;IACzB,WAAW;EACb;;AAGF;EACE,gBAAgB;EAChB,iBAAiB;AACnB",sourcesContent:[".message {\n  margin: 0;\n  box-sizing: border-box;\n  max-width: 29.5em;\n  padding: 8px;\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  border-radius: 2px;\n  color: #333;\n  font-size: 14px;\n  background-color: #f5f6f8;\n\n  &.send {\n    background-color: #d7e4ff;\n    color: #333;\n  }\n}\n\n.unsupport-faq {\n  max-width: 240px;\n  line-height: 21px;\n}\n"],sourceRoot:""}]),o.locals={message:"xQ_ZVDDSL5",send:"sXjBJZAZ93","unsupport-faq":"YDdA3QTCvb",unsupportFaq:"YDdA3QTCvb"};const i=o},699:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".zMhG2GcJB5 {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.vruaYFWPIz {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.rHWU4R6moI {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.UdG8ieRpin {\n  text-align: right;\n}\n\n.WA7EkEk7KY {\n  color: #888;\n}\n\n.VsOdpRSHy9 {\n  color: #bbb;\n}\n\n.Mseg1zlntD {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/HistoryList/index.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,gBAAgB;EAChB,mBAAmB;EACnB,oBAAoB;AACtB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,UAAU;EACV,mBAAmB;EACnB,mBAAmB;EACnB,gBAAgB;AAClB;;AAEA;EACE,iBAAiB;AACnB;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,WAAW;AACb;;AAEA;EACE,qBAAqB;EACrB,QAAQ;EACR,gBAAgB;AAClB",sourcesContent:[".list {\n  height: 645px;\n  margin-top: 24px;\n  margin-right: -21px;\n  margin-bottom: -24px;\n}\n\n.header {\n  font-size: 12px;\n  color: #bbb;\n  padding-right: 16px;\n  margin-bottom: 8px;\n}\n\n.message {\n  padding: 0;\n  margin-bottom: 16px;\n  padding-right: 16px;\n  margin-top: -4px;\n}\n\n.right {\n  text-align: right;\n}\n\n.username {\n  color: #888;\n}\n\n.stamp {\n  color: #bbb;\n}\n\n.split {\n  display: inline-block;\n  width: 0;\n  margin-left: 8px;\n}\n"],sourceRoot:""}]),o.locals={list:"zMhG2GcJB5",header:"vruaYFWPIz",message:"rHWU4R6moI",right:"UdG8ieRpin",username:"WA7EkEk7KY",stamp:"VsOdpRSHy9",split:"Mseg1zlntD"};const i=o},7539:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".IFFE2hRR3g {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}.IFFE2hRR3g.Eev1E6LFhB {\n    border: 0.25em solid #d7e4ff;\n  }.IFFE2hRR3g.Kv35x4rdMm {\n    border: 0.25em solid #f1f3f4;\n  }\n\n.P387dp5Goh {\n  width: 600px;\n  height: 672px;\n}\n\n.eefwgb8vaR {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.nCqHkv5xsO {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.KXHfh5bou2 {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/FAQHistoryMessage/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;EACZ,sBAAsB;EACtB,kBAAkB;EAClB,sBAAsB;EACtB,eAAe;EACf,yBAAyB;AAS3B,CAPE;IACE,4BAA4B;EAC9B,CAEA;IACE,4BAA4B;EAC9B;;AAGF;EACE,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,WAAW;EACX,mBAAmB;EACnB,gBAAgB;EAChB,uBAAuB;EACvB,eAAe;EACf,iBAAiB;EACjB,mBAAmB;EACnB,WAAW;AACb;;AAEA;EACE,eAAe;EACf,iBAAiB;EACjB,iBAAiB;EACjB,gBAAgB;EAChB,8BAA8B;EAC9B,cAAc;EACd,eAAe;AACjB;;AAEA;EACE,eAAe;EACf,WAAW;EACX,iBAAiB;EACjB,YAAY;EACZ,uBAAuB;EACvB,gBAAgB;EAChB,qBAAqB;EACrB,mBAAmB;EACnB,YAAY;AACd",sourcesContent:[".root {\n  width: 240px;\n  padding: 8px;\n  background-color: #fff;\n  border-radius: 2px;\n  box-sizing: border-box;\n  cursor: pointer;\n  transition: all 0.2s ease;\n\n  &.send {\n    border: 0.25em solid #d7e4ff;\n  }\n\n  &.receive {\n    border: 0.25em solid #f1f3f4;\n  }\n}\n\n.container {\n  width: 600px;\n  height: 672px;\n}\n\n.header {\n  width: 100%;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  font-size: 12px;\n  line-height: 14px;\n  margin-bottom: 16px;\n  color: #555;\n}\n\n.footer {\n  font-size: 12px;\n  line-height: 14px;\n  text-align: right;\n  padding-top: 8px;\n  border-top: 1px dashed #f1f3f4;\n  color: #395692;\n  margin-top: 8px;\n}\n\n.preview {\n  font-size: 12px;\n  color: #888;\n  line-height: 18px;\n  width: 220px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n  word-break: break-all;\n  white-space: nowrap;\n  height: 18px;\n}\n"],sourceRoot:""}]),o.locals={root:"IFFE2hRR3g",send:"Eev1E6LFhB",receive:"Kv35x4rdMm",container:"P387dp5Goh",header:"eefwgb8vaR",footer:"nCqHkv5xsO",preview:"KXHfh5bou2"};const i=o},5965:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".sWnNfV3B5s {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n}.sWnNfV3B5s.zlsgqeBenz {\n    background-color: #d7e4ff;\n  }\n\n.TfXcQ_zrLr {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/OrderMessage/index.css"],names:[],mappings:"AAAA;EACE,eAAe;EACf,kBAAkB;EAClB,yBAAyB;EACzB,gBAAgB;EAChB,YAAY;EACZ,iBAAiB;AAKnB,CAHE;IACE,yBAAyB;EAC3B;;AAGF;EACE,cAAc;EACd,0BAA0B;EAC1B,eAAe;AACjB",sourcesContent:[".order {\n  font-size: 14px;\n  border-radius: 2px;\n  background-color: #f5f6f8;\n  max-width: 240px;\n  padding: 8px;\n  line-height: 16px;\n\n  &.send {\n    background-color: #d7e4ff;\n  }\n}\n\n.link {\n  color: #395692;\n  text-decoration: underline;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={order:"sWnNfV3B5s",send:"zlsgqeBenz",link:"TfXcQ_zrLr"};const i=o},1500:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".E_OLrXNoEk {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.LDttZcGOz6 {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.wf9mOd836y {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.fI2ODdwFGy {\n  color: #ee4d2d;\n}\n\n.lPtsH0BIt2 {\n  color: #ccc;\n  cursor: default;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/ConversationMessages/PondMessage/index.css"],names:[],mappings:"AAAA;EACE,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,qBAAqB;EACrB,eAAe;EACf,uBAAuB;AACzB;;AAEA;EACE,uBAAuB;EACvB,6BAA6B;EAC7B,YAAY;EACZ,iBAAiB;EACjB,YAAY;EACZ,qBAAqB;EACrB,gBAAgB;EAChB,uBAAuB;EACvB,WAAW;EACX,eAAe;EACf,kBAAkB;EAClB,mBAAmB;AACrB;;AAEA;EACE,mBAAmB;EACnB,iBAAiB;AACnB;;AAEA;EACE,cAAc;AAChB;;AAEA;EACE,WAAW;EACX,eAAe;AACjB",sourcesContent:[".root {\n  background: #f5f6f8;\n  padding: 8px;\n  width: 224px;\n  word-break: break-all;\n  font-size: 14px;\n  box-sizing: content-box;\n}\n\n.option {\n  box-sizing: content-box;\n  border-top: 1px solid #e8e8e8;\n  height: 36px;\n  line-height: 36px;\n  width: 224px;\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  color: #888;\n  cursor: pointer;\n  text-align: center;\n  white-space: nowrap;\n}\n\n.title {\n  padding-bottom: 8px;\n  line-height: 21px;\n}\n\n.primary {\n  color: #ee4d2d;\n}\n\n.invalid {\n  color: #ccc;\n  cursor: default;\n}\n"],sourceRoot:""}]),o.locals={root:"E_OLrXNoEk",option:"LDttZcGOz6",title:"wf9mOd836y",primary:"fI2ODdwFGy",invalid:"lPtsH0BIt2"};const i=o},6496:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".EfqwjCbjYK {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.lRBlAKma_w {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.MxoUoxkjhX {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/UnreadBriefMessages/index.css"],names:[],mappings:"AAAA;EACE,OAAO;EACP,SAAS;EACT,WAAW;EACX,aAAa;EACb,WAAW;EACX,YAAY;EACZ,eAAe;EACf,eAAe;EACf,mBAAmB;EACnB,mBAAmB;EACnB,sBAAsB;EACtB,oCAAoC;AACtC;;AAEA;EACE,iBAAiB;EACjB,YAAY;EACZ,gBAAgB;EAChB,mBAAmB;EACnB,uBAAuB;AACzB;;AAEA;EACE,eAAe;EACf,qBAAqB;EACrB,WAAW;EACX,YAAY;EACZ,cAAc;EACd,YAAY;EACZ,WAAW;AACb",sourcesContent:[".root {\n  left: 0;\n  bottom: 0;\n  color: #fff;\n  display: flex;\n  width: 100%;\n  padding: 8px;\n  font-size: 14px;\n  cursor: pointer;\n  align-items: center;\n  flex-direction: row;\n  box-sizing: border-box;\n  background-color: rgba(0, 0, 0, 0.4);\n}\n\n.new-message {\n  line-height: 16px;\n  flex-grow: 1;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n\n.new-message-arrow {\n  cursor: pointer;\n  display: inline-block;\n  width: 12px;\n  height: 12px;\n  flex-shrink: 0;\n  flex-grow: 0;\n  color: #fff;\n}\n"],sourceRoot:""}]),o.locals={root:"EfqwjCbjYK","new-message":"lRBlAKma_w",newMessage:"lRBlAKma_w","new-message-arrow":"MxoUoxkjhX",newMessageArrow:"MxoUoxkjhX"};const i=o},1337:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(7537),s=n.n(r),a=n(3645),o=n.n(a)()(s());o.push([e.id,".N1x9FHSgsu {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.AbLCooIIar {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.cmgkmzn7la {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.kRvCnxx7Qk {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n","",{version:3,sources:["webpack://./src/modules-mini/message-section/components/index.css"],names:[],mappings:"AAAA;EACE,YAAY;EACZ,YAAY;AACd;;AAEA;EACE,kBAAkB;EAClB,OAAO;EACP,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,eAAe;EACf,4BAA4B;AAC9B;;AAEA;EACE,kBAAkB;EAClB,YAAY;EACZ,WAAW;EACX,YAAY;EACZ,eAAe;AACjB",sourcesContent:[".message-section {\n  height: 100%;\n  flex-grow: 1;\n}\n\n.layers {\n  position: absolute;\n  left: 0;\n  right: 0;\n  bottom: 0;\n}\n\n.grid {\n  outline: 0 none;\n  overscroll-behavior: contain;\n}\n\n.iconWrapper {\n  position: absolute;\n  bottom: 40px;\n  right: 20px;\n  height: 36px;\n  cursor: pointer;\n}\n"],sourceRoot:""}]),o.locals={"message-section":"N1x9FHSgsu",messageSection:"N1x9FHSgsu",layers:"AbLCooIIar",grid:"cmgkmzn7la",iconWrapper:"kRvCnxx7Qk"};const i=o},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,s,a){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(r)for(var i=0;i<this.length;i++){var c=this[i][0];null!=c&&(o[c]=!0)}for(var l=0;l<e.length;l++){var u=[].concat(e[l]);r&&o[u[0]]||(void 0!==a&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=a),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),s&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=s):u[4]="".concat(s)),t.push(u))}},t}},7537:e=>{"use strict";e.exports=function(e){var t=e[1],n=e[3];if(!n)return t;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),a="/*# ".concat(s," */"),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([a]).join("\n")}return[t].join("\n")}},5666:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",o=s.asyncIterator||"@@asyncIterator",i=s.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var s=t&&t.prototype instanceof h?t:h,a=Object.create(s.prototype),o=new w(r||[]);return a._invoke=function(e,t,n){var r=d;return function(s,a){if(r===g)throw new Error("Generator is already running");if(r===f){if("throw"===s)throw a;return O()}for(n.method=s,n.arg=a;;){var o=n.delegate;if(o){var i=M(o,n);if(i){if(i===A)continue;return i}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===d)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=g;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?f:p,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(e,n,o),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=l;var d="suspendedStart",p="suspendedYield",g="executing",f="completed",A={};function h(){}function m(){}function E(){}var v={};v[a]=function(){return this};var S=Object.getPrototypeOf,_=S&&S(S(T([])));_&&_!==n&&r.call(_,a)&&(v=_);var y=E.prototype=h.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function b(e,t){function n(s,a,o,i){var c=u(e[s],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(d).then((function(e){l.value=e,o(l)}),(function(e){return n("throw",e,o,i)}))}i(c.arg)}var s;this._invoke=function(e,r){function a(){return new t((function(t,s){n(e,r,t,s)}))}return s=s?s.then(a,a):a()}}function M(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method))return A;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var s=u(r,e.iterator,n.arg);if("throw"===s.type)return n.method="throw",n.arg=s.arg,n.delegate=null,A;var a=s.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,A):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,A)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var s=-1,o=function n(){for(;++s<e.length;)if(r.call(e,s))return n.value=e[s],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:O}}function O(){return{value:t,done:!0}}return m.prototype=y.constructor=E,E.constructor=m,m.displayName=c(E,i,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,E):(e.__proto__=E,c(e,i,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},C(b.prototype),b.prototype[o]=function(){return this},e.AsyncIterator=b,e.async=function(t,n,r,s,a){void 0===a&&(a=Promise);var o=new b(l(t,n,r,s),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(y),c(y,i,"Generator"),y[a]=function(){return this},y.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=T,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function s(r,s){return i.type="throw",i.arg=e,n.next=r,s&&(n.method="next",n.arg=t),!!s}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],i=o.completion;if("root"===o.tryLoc)return s("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),l=r.call(o,"finallyLoc");if(c&&l){if(this.prev<o.catchLoc)return s(o.catchLoc,!0);if(this.prev<o.finallyLoc)return s(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return s(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return s(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n];if(s.tryLoc<=this.prev&&r.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,A):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),A},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),A}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var s=r.arg;I(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:T(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),A}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},3379:e=>{"use strict";var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var a={},o=[],i=0;i<e.length;i++){var c=e[i],l=r.base?c[0]+r.base:c[0],u=a[l]||0,d="".concat(l," ").concat(u);a[l]=u+1;var p=n(d),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var f=s(g,r);r.byIndex=i,t.splice(i,0,{identifier:d,updater:f,references:1})}o.push(d)}return o}function s(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,s){var a=r(e=e||[],s=s||{});return function(e){e=e||[];for(var o=0;o<a.length;o++){var i=n(a[o]);t[i].references--}for(var c=r(e,s),l=0;l<a.length;l++){var u=n(a[l]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}a=c}}},569:e=>{"use strict";var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,n)=>{"use strict";e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var a=n.sourceMap;a&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(a))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},5327:e=>{for(var t=[],n=0;n<256;++n)t[n]=(n+256).toString(16).substr(1);e.exports=function(e,n){var r=n||0,s=t;return[s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],"-",s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]],s[e[r++]]].join("")}},5217:e=>{var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}},1171:(e,t,n)=>{var r=n(5217),s=n(5327);e.exports=function(e,t,n){var a=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[a+i]=o[i];return t||s(o)}},6512:e=>{"use strict";e.exports=y},1361:e=>{"use strict";e.exports=f},6359:e=>{"use strict";e.exports=d},2236:e=>{"use strict";e.exports=O},3710:e=>{"use strict";e.exports=M},6572:e=>{"use strict";e.exports=_},2066:e=>{"use strict";e.exports=b},9977:e=>{"use strict";e.exports=v},5330:e=>{"use strict";e.exports=p},8310:e=>{"use strict";e.exports=I},8661:e=>{"use strict";e.exports=E},8550:e=>{"use strict";e.exports=w},8156:t=>{"use strict";t.exports=e},9424:e=>{"use strict";e.exports=T},4756:e=>{"use strict";e.exports=n},4236:e=>{"use strict";e.exports=o},2779:e=>{"use strict";e.exports=i},3202:e=>{"use strict";e.exports=c},2167:e=>{"use strict";e.exports=a},8252:e=>{"use strict";e.exports=A},5447:e=>{"use strict";e.exports=t},4944:e=>{"use strict";e.exports=h},8509:e=>{"use strict";e.exports=g},5600:e=>{"use strict";e.exports=S},2511:e=>{"use strict";e.exports=u},1501:e=>{"use strict";e.exports=r},2760:e=>{"use strict";e.exports=B},3162:e=>{"use strict";e.exports=s},4321:e=>{"use strict";e.exports=x},8720:e=>{"use strict";e.exports=C},1855:e=>{"use strict";e.exports=l},4672:e=>{"use strict";e.exports=m},907:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:()=>r})},885:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(181);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,s,a=[],o=!0,i=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(e){i=!0,s=e}finally{try{o||null==n.return||n.return()}finally{if(i)throw s}}return a}}(e,t)||(0,r.Z)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var r=n(907);function s(e,t){if(e){if("string"==typeof e)return(0,r.Z)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.Z)(e,t):void 0}}}},R={};function P(e){var t=R[e];if(void 0!==t)return t.exports;var n=R[e]={id:e,exports:{}};return k[e](n,n.exports,P),n.exports}P.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return P.d(t,{a:t}),t},P.d=(e,t)=>{for(var n in t)P.o(t,n)&&!P.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},P.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),P.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},P.nc=void 0;var D={};return(()=>{"use strict";P.r(D),P.d(D,{default:()=>wd,getModule:()=>Id});var e={};function t(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}P.r(e),P.d(e,{HIGHLIGHT_TIMEOUT:()=>un,abortAllSendingMessages:()=>_s,cancelSendingMessageRequested:()=>ys,cancelSendingMessageSucceeded:()=>Cs,changeTranslateStatus:()=>$s,deleteConversationMessageHash:()=>Xn,deleteFakingMessages:()=>Io,deleteMessageContentAndId:()=>wo,deleteMessageIdInHash:()=>xo,deleteMessagePostRequested:()=>Mo,deleteMessageRequested:()=>bo,deleteVideoInfo:()=>gr,evaluationRequested:()=>He,fetchConversationMessagesSaga:()=>zt,fetchFaqMessagesRequested:()=>Ca,fetchFaqMessagesSucceeded:()=>ba,fetchMessagesRequested:()=>Ut,fetchMessagesRequestedSaga:()=>Jt,fetchMessagesRequestedWithPreloadSaga:()=>Kt,fetchMessagesSucceeded:()=>Ht,fillMessageContent:()=>St,fillMessageRequested:()=>Et,handleCurrentConversationChange:()=>uo,handleFaqExpiredMessage:()=>Rs,handleNewConversationMessageQueue:()=>oo,handleSendSucceededMessages:()=>ks,handleSensitiveUrl:()=>Aa,makeServiceList:()=>yr,messageSyncUpdate:()=>Do,receiveMessageRequested:()=>Za,receiveMessageSucceeded:()=>Qa,reducerMap:()=>Qo,replaceHttpLinkWithHttps:()=>ur,resendMessageRequested:()=>Tn,resendOfflineMessagesOnce:()=>Un,resendOfflineMessagesOnceSucceed:()=>Hn,resetConversationQueue:()=>Ja,resetCurrentConversationReplyToMessage:()=>vn,resetMessagesFailedByOffline:()=>Gn,resetNewConversationQueue:()=>Xa,resetOldConversationQueue:()=>Ka,resetReplyToMessage:()=>gn,resetScrollToMessageId:()=>hn,sagas:()=>Zo,scrollToMessage:()=>fn,scrollToMessageSaga:()=>Sn,sendMessages:()=>Ps,sendMessagesFailed:()=>Ss,sendMessagesFailedByOffline:()=>qn,sendMessagesRequested:()=>hs,sendMessagesSucceeded:()=>ms,sendMessagesToPending:()=>vs,sendTranslateFeedback:()=>ta,sendVideoMessageRequested:()=>bs,sendingMessages:()=>Es,setCurrentConversationReplyToMessage:()=>En,setEntryPoint:()=>qo,setInScrollToMessage:()=>mn,setReplyToMessage:()=>pn,setScrollToMessageId:()=>An,setSecurityTipsMessage:()=>Vt,showFaqHistoryModal:()=>Ia,showMyRateCard:()=>qe,showRateCard:()=>Ge,showTranslateFeedback:()=>ea,translateMessagesRequested:()=>Js,updateCurrentFaqId:()=>xa,updateFetchFaqMessagesRequestedStatus:()=>Ma,updateFetchMessagesRequestedStatus:()=>Yt,updateHasConflict:()=>Yo,updateMessageFillStatusMap:()=>mt,updateMessagesRelated:()=>It,updateResendConversationMessage:()=>Vn,updateVideoInfo:()=>pr,uploadMonitor:()=>hr,uploadVideGetResult:()=>Sr,uploadVideo:()=>Cr,uploadVideoGetToken:()=>mr,watchDeleteMessage:()=>Bo,watchEvaluation:()=>Ve,watchFaqHistorySagas:()=>Oa,watchFetchMessage:()=>en,watchFill:()=>Ct,watchNewConversationMessageQueue:()=>io,watchOffline:()=>Wn,watchOldConversationMessageQueue:()=>co,watchReceive:()=>po,watchReplySaga:()=>bn,watchResend:()=>Bn,watchSend:()=>qs,watchSendWithCancel:()=>Ls,watchTranslate:()=>ua});var n=P(8156),r=P.n(n),s=P(5447);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t,n){return t&&c(e.prototype,t),n&&c(e,n),e}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function f(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}function A(e){return A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},A(e)}var h=P(4756),m=P(1501),E=P.n(m),v=P(3162),S=P.n(v),_=P(2167),y=P.n(_),C=P(4236),b=P.n(C),M=P(2779),x=P.n(M),I=P(3202),w=P.n(I),T=P(1855),O=P(2511),B=P(6359),k=P.n(B),R=P(3379),N=P.n(R),j=P(7795),F=P.n(j),L=P(569),q=P.n(L),G=P(3565),U=P.n(G),H=P(9216),Y=P.n(H),V=P(4589),W=P.n(V),z=P(1337),Z={};Z.styleTagTransform=W(),Z.setAttributes=U(),Z.insert=q().bind(null,"head"),Z.domAPI=F(),Z.insertStyleElement=Y(),N()(z.Z,Z);const Q=z.Z&&z.Z.locals?z.Z.locals:void 0;var X=r().createContext({});X.displayName="ImgCacheContext",P(5330);var K=P(8509),J={closeMediaPreview:O.closeChatbotMediaPreview};const $=(0,h.connect)((function(e){return{imageUrl:(0,O.chatbotImageSelector)(e)}}),J)(K.ChatbotProvider);var ee=P(1361),te=P.n(ee),ne=P(6496),re={};re.styleTagTransform=W(),re.setAttributes=U(),re.insert=q().bind(null,"head"),re.domAPI=F(),re.insertStyleElement=Y(),N()(ne.Z,re);const se=ne.Z&&ne.Z.locals?ne.Z.locals:void 0,ae=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.shopId,r=t.id,s=t.conversation_id;(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:r,conversation_id:s},shopId:n})}},{key:"render",value:function(){var e=this.props,t=e.username,n=e.message,s=e.onClick,a=e.shopId,o=e.enableTranslation,i=e.locale,c=n.id,l=n.conversation_id,u=(0,T.previewMessage)({message:(0,T.fillMessagePreview)(n),enableTranslation:o,locale:i,conversationShopId:a}).text;return r().createElement("div",{className:se.root,onClick:function(){(0,O.$tracker)({trackerName:"impressionOrClickUnreadBriefMessage",data:{message_id:c,conversation_id:l},shopId:a}),s&&s()}},r().createElement("div",{className:se.newMessage},t,": ",u),r().createElement(S(),{svg:te(),className:se.newMessageArrow}))}}]),n}(r().PureComponent);var oe=P(8304),ie={};ie.styleTagTransform=W(),ie.setAttributes=U(),ie.insert=q().bind(null,"head"),ie.domAPI=F(),ie.insertStyleElement=Y(),N()(oe.Z,ie);const ce=oe.Z&&oe.Z.locals?oe.Z.locals:void 0;var le=P(8252),ue=P(907),de=P(181);function pe(e){return function(e){if(Array.isArray(e))return(0,ue.Z)(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||(0,de.Z)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ge=P(7757),fe=P.n(ge),Ae=P(4944),he=P(1171),me=P.n(he);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}T.MessageTypes.MSG_TYPE_OFFER,T.MessageTypes.MSG_TYPE_ORDER;var Se,_e,ye=T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,Ce={1:"product_entry_point",2:"order_entry_point",3:"shop_entry_point",8:"product_inactive_seller",10:"lowest_price_guaranteed",11:"poor_fulfilment"},be=function(e){var t=e.id,n=e.recipientID,r=e.message,s=e.redirectInfo,a=e.conversationId,o=e.entryPoint,i=e.replyToMessageId,c=e.shopId,l=t||me()(),u=r.content,d=r.type,p=r.textContent,g={id:l,type:d,content:u,isFaking:r.isFaking,to_id:n,shop_id:c,request_id:l,created_timestamp:Math.floor(Date.now()/1e3),chat_send_option:{force_send_cancel_order_warning:!1,comply_cancel_order_warning:!1}};if(i&&(g.content=ve(ve({},g.content),{},{quoted_msg_id:i})),p&&d===ye&&(g.textContent=p),o&&o.type&&o.conversationId===a?g.entry_point=Ce[o.type]:g.entry_point="direct_chat_entry_point",s){var f=s.orderId,A=s.productId,h=s.conversationId,m=s.shopId;if(parseInt(a)===parseInt(h)){if(g.conversation_id=a,f){var E=parseInt(f);g=ve(ve({},g),{},{order_id:E,source_content:{order_id:E,shop_id:m},source_type:"order"})}if(A){var v=parseInt(A);g=ve(ve({},g),{},{product_id:v,source_content:{product_id:v,shop_id:m},source_type:"product"})}}}return g},Me=function(e,t){return e===t?0:(0,T.greaterThan)(e,t)?1:-1},xe=T.MessageTypes.MSG_TYPE_ITEM_LIST,Ie=T.MessageTypes.MSG_TYPE_ADD_ON_DEAL,we=T.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Te=T.MessageTypes.MSG_TYPE_FLASH_SALE,Oe=(o(Se={},xe,{listKey:"chat_product_infos",cleaner:O.itemListDetailCleaner}),o(Se,Ie,{listKey:"add_on_deal_item_list",cleaner:O.addOnDealItemDetailCleaner}),o(Se,we,{listKey:"bundle_deal_item_list",cleaner:O.bundleDealItemDetailCleaner}),o(Se,Te,{listKey:"flash_sale_item",cleaner:O.flashSaleItemDetailCleaner}),Se),Be=[xe,Ie,we,Te],ke=function(e){var t=e.type,n=e.content,r=e.country,s=n.shop_id;if(Oe[t]){var a=Oe[t],o=a.listKey,i=a.cleaner,c=e.content[o];e.content[o]=c.slice(0,T.MAX_SHOWING_ITEM_COUNT).map((function(e){return i(e,r,s)}))}if(t===xe){var l=n.chat_product_infos;e.content.exceedMaxCount=l.length>T.MAX_SHOWING_ITEM_COUNT}else if(t===Ie){var u=n.add_on_deal_rule;e.content.add_on_deal_rule=(0,O.addOnDealRuleCleaner)(u,r)}else if(t===we){var d=n.bundle_rule;e.content.bundle_rule=(0,O.bundleDealRuleCleaner)(d,r)}},Re=function(e){Array.isArray(e)?e.forEach((function(e){ke(e),e.quoted_msg&&ke(e.quoted_msg)})):(ke(e),e.quoted_msg&&ke(e.quoted_msg))};!function(e){e.DELETE_CONVERSATION_MESSAGE_HASH="DELETE_CONVERSATION_MESSAGE_HASH",e.SET_ENTRY_POINT="SET_ENTRY_POINT",e.EVALUATION_REQUESTED="EVALUATION_REQUESTED",e.FETCH_FAQ_MESSAGES_REQUESTED="FETCH_FAQ_MESSAGES_REQUESTED",e.FETCH_FAQ_MESSAGES_SUCCEEDED="FETCH_FAQ_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS",e.UPDATE_CURRENT_FAQ_ID="UPDATE_CURRENT_FAQ_ID",e.SHOW_FAQ_HISTORY_MODAL="SHOW_FAQ_HISTORY_MODAL",e.FETCH_MESSAGES_REQUESTED="FETCH_MESSAGES_REQUESTED",e.FETCH_MESSAGES_SUCCEEDED="FETCH_MESSAGES_SUCCEEDED",e.UPDATE_FETCH_MESSAGES_REQUESTED_STATUS="UPDATE_FETCH_MESSAGES_REQUESTED_STATUS",e.HANDLE_SENSITIVE_URL="HANDLE_SENSITIVE_URL",e.SEND_MESSAGES_FAILED_BY_OFFLINE="SEND_MESSAGES_FAILED_BY_OFFLINE",e.RESET_MESSAGES_FAILED_BY_OFFLINE="RESET_MESSAGES_FAILED_BY_OFFLINE",e.RESEND_OFFLINE_MESSAGES_ONCE="RESEND_OFFLINE_MESSAGES_ONCE",e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED="RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED",e.FILL_MESSAGE_REQUESTED="FILL_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_REQUESTED="RECEIVE_MESSAGE_REQUESTED",e.RECEIVE_MESSAGE_SUCCEEDED="RECEIVE_MESSAGE_SUCCEEDED",e.RESET_NEW_CONVERSATION_QUEUE="RESET_NEW_CONVERSATION_QUEUE",e.RESET_OLD_CONVERSATION_QUEUE="RESET_OLD_CONVERSATION_QUEUE",e.RESET_CONVERSATION_QUEUE="RESET_CONVERSATION_QUEUE",e.RESEND_MESSAGE_REQUESTED="RESEND_MESSAGE_REQUESTED",e.SEND_MESSAGES_REQUESTED="SEND_MESSAGES_REQUESTED",e.SEND_MESSAGES_SUCCEEDED="SEND_MESSAGES_SUCCEEDED",e.SENDING_MESSAGES="SENDING_MESSAGES",e.SEND_MESSAGES_TO_PENDING="SEND_MESSAGES_TO_PENDING",e.SEND_MESSAGES_FAILED="SEND_MESSAGES_FAILED",e.ABORT_ALL_SENDING_MESSAGES="ABORT_ALL_SENDING_MESSAGES",e.CANCEL_SENDING_MESSAGE_REQUESTED="CANCEL_SENDING_MESSAGE_REQUESTED",e.CANCEL_SENDING_MESSAGE_SUCCEEDED="CANCEL_SENDING_MESSAGE_SUCCEEDED",e.SEND_VIDEO_MESSAGE_REQUESTED="SEND_VIDEO_MESSAGE_REQUESTED",e.SEND_PRODUCTS_MESSAGE_REQUESTED="SEND_PRODUCTS_MESSAGE_REQUESTED",e.TRANSLATE_MESSAGES_REQUESTED="TRANSLATE_MESSAGES_REQUESTED",e.CHANGE_TRANSLATE_STATUS="CHANGE_TRANSLATE_STATUS",e.UPDATE_VIDEO_INFO="UPDATE_VIDEO_INFO",e.DELETE_VIDEO_INFO="DELETE_VIDEO_INFO",e.MESSAGE_SYNC_UPDATE="MESSAGE_SYNC_UPDATE",e.SHOW_TRANSLATE_FEEDBACK="SHOW_TRANSLATE_FEEDBACK",e.SEND_TRANSLATE_FEEDBACK="SEND_TRANSLATE_FEEDBACK",e.UPDATE_MESSAGE_FILL_STATUS_MAP="UPDATE_MESSAGE_FILL_STATUS_MAP",e.CHATBOT_INTENTS_REPORT_REQUEST="CHATBOT_INTENTS_REPORT_REQUEST",e.UPDATE_HAS_CONFLICT="UPDATE_HAS_CONFLICT",e.UPDATE_MESSAGES_RELATED="UPDATE_MESSAGES_RELATED"}(_e||(_e={}));var Pe=fe().mark(qe),De=fe().mark(Ge),Ne=fe().mark(Ye),je=fe().mark(Ve);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){var r,s;return fe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,(0,Ae.select)((0,O.rateCardSelector)(e));case 2:if((r=a.sent)&&r.status!==T.EvaluationStatus.UNRATED){a.next=8;break}return s="webview"===n?{parent:"rating_cards",parentId:e,resource:"get"}:{subServer:"workbenchapi",resource:"rating_card",id:e},a.next=7,(0,Ae.call)(O.fetch,Le(Le({},s),{},{params:t}));case 7:r=a.sent;case 8:return a.abrupt("return",r);case 9:case"end":return a.stop()}}),Pe)}function Ge(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A;return fe().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.ids,n=e.shopId,r=e.type,s=Array.isArray(t)?t:[t],a={},"0"!==n&&(a.shop_id=n),h.next=6,(0,Ae.select)(O.isSubAccountSelector);case 6:return o=h.sent,h.next=9,(0,Ae.select)(O.currentUserShopIdSelector);case 9:if(h.sent===parseInt(n)||o){h.next=23;break}return i=[],s.forEach((function(e){return i.push((0,Ae.call)(qe,e,a,r))})),h.next=15,(0,Ae.all)(i);case 15:if(c=h.sent,"rating_card"!==r){h.next=20;break}return l=(0,O.normalize)("rateCards",c),u=l.entities,h.next=20,(0,Ae.put)((0,O.updateEntities)({entities:u}));case 20:return h.abrupt("return",c);case 23:return d="rating_cards",a.ids="[".concat(s.join(","),"]"),h.next=27,(0,Ae.call)(O.fetch,{resource:d,params:a});case 27:if(p=h.sent,g=p[d],"rating_card"!==r){h.next=33;break}return f=(0,O.normalize)("rateCards",p[d]),A=f.entities,h.next=33,(0,Ae.put)((0,O.updateEntities)({entities:A}));case 33:return h.abrupt("return",g||[]);case 34:case"end":return h.stop()}}),De)}var Ue,He=(0,le.createActions)(o({},_e.EVALUATION_REQUESTED,(function(e){var t=e.messageId,n=e.grade,r=e.reason;return{messageId:t,grade:n,reason:void 0===r?[]:r,otherReason:e.otherReason}}))).evaluationRequested;function Ye(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m;return fe().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:return t=e.payload,n=t.messageId,r=t.grade,s=t.reason,a=t.otherReason,E.next=3,(0,Ae.select)((0,O.getMessageSelector)(n));case 3:if(o=E.sent,i=o.from_shop_id,c=o.textContent,l=o.type,u=l===T.MessageTypes.MSG_TYPE_WEBVIEW,d=c.id,E.prev=7,p={grade:r,reason:s},g={},u?g={parent:"rating_cards",resource:"evaluate"}:(p.other_reason=a,g={subServer:"workbenchapi",parent:"rating_card"}),i&&(p.shop_id=i),!u){E.next=19;break}return E.next=15,(0,Ae.call)(O.fetch,Le(Le({method:"PUT"},g),{},{parentId:d,payload:JSON.stringify(p)}));case 15:return E.next=17,(0,Ae.put)((0,O.updateRecord)({name:"rateCards",id:d,record:{grade:r,status:T.EvaluationStatus.RATED}}));case 17:E.next=24;break;case 19:return E.next=21,(0,Ae.call)(O.fetch,Le(Le({method:"PUT"},g),{},{parentId:d,payload:JSON.stringify(p)}));case 21:return f=E.sent,E.next=24,(0,Ae.put)((0,O.updateRecord)({name:"rateCards",id:d,record:{grade:r,status:T.EvaluationStatus.RATED,reason_ids:f.reason_ids,other_reason:f.other_reason}}));case 24:E.next=34;break;case 26:return E.prev=26,E.t0=E.catch(7),h=Date.now(),null!==E.t0&&void 0!==E.t0&&null!==(A=E.t0.error)&&void 0!==A&&A.error_code&&((m=E.t0.error.error_code)===T.EvaluationErrorCode.RATED&&(h=T.EvaluationStatus.RATED),m===T.EvaluationErrorCode.EXPIRED&&(h=T.EvaluationStatus.EXPIRED)),E.next=32,(0,Ae.put)((0,O.updateRecord)({name:"rateCards",id:d,record:{status:h}}));case 32:return E.next=34,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:E.t0}));case 34:case"end":return E.stop()}}),Ne,null,[[7,26]])}function Ve(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeLatest)(He,Ye);case 2:case"end":return e.stop()}}),je)}function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ze=fe().mark(St),Qe=fe().mark(_t),Xe=fe().mark(yt),Ke=fe().mark(Ct),Je="source-",$e="source",et=T.MessageFillStatus.FILLED,tt=T.MessageFillStatus.FAILED,nt=T.MessageFillStatus.FILLING,rt=T.MessageTypes.MSG_TYPE_PRODUCT,st=T.MessageTypes.MSG_TYPE_ORDER,at=T.MessageTypes.MSG_TYPE_OFFER,ot=T.MessageTypes.MSG_TYPE_VOUCHER,it=T.MessageTypes.MSG_TYPE_FEED_STORY,ct=T.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,lt=T.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,ut=T.MessageTypes.MSG_TYPE_SHOPPING_CART,dt=T.MessageTypes.MSG_TYPE_RATE_CARD,pt=T.MessageTypes.MSG_TYPE_RATE_CARDS,gt=T.MessageTypes.MSG_TYPE_WEBVIEW,ft=T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,At=[rt,st,at,ot,dt,it,ct,lt,ut,gt,ft],ht=(0,le.createActions)((o(Ue={},_e.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e){return{status:e.status,messageIds:e.messageIds}})),o(Ue,_e.FILL_MESSAGE_REQUESTED,(function(e){return{message:e.message,isSource:e.isSource}})),Ue)),mt=ht.updateMessageFillStatusMap,Et=ht.fillMessageRequested,vt=function(e,t,n){var r,s=t["".concat(e,"_id")];return e===ct&&(s=t.order_id),e===dt?t.card_id:e===ft?null==t||null===(r=t.bot_order_info)||void 0===r?void 0:r.order_id:s||n};function St(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S=arguments;return fe().wrap((function(_){for(;;)switch(_.prev=_.next){case 0:return t=S.length>1&&void 0!==S[1]?S[1]:{},n=t.sync,r=void 0!==n&&n,s=t.reFillType,a=e[0].conversation_id,_.next=5,(0,Ae.select)(O.isSubAccountSelector);case 5:return o=_.sent,_.next=8,(0,Ae.select)(O.curConvsMessageSelector);case 8:return i=_.sent,_.next=11,(0,Ae.select)(O.currentUserIdSelector);case 11:return c=_.sent,_.next=14,(0,Ae.select)((0,O.getConversationShopId)(a));case 14:return l=_.sent,_.next=17,(0,Ae.select)(O.messageFillStatusMapSelector);case 17:return u=_.sent,d={},p=[],g=[],s?(f=e[0],A="".concat(s===$e?Je:"").concat(f.id),d={messageId:[A]},p=[A]):e.forEach((function(e){var t=e.type,n=e.content,r=e.id,s=e.source_type,a=e.source_content,f=void 0===a?{}:a,A=i.find((function(e){var t=e.id;return r===t})),h=!1,m=!1;if(null!=A&&A.textContent){h=!0;var E=A.content,v=A.textContent,S=void 0===v?{}:v;switch(t){case gt:m=E.type===pt&&S.status===T.EvaluationStatus.UNRATED;break;case dt:m=S.status===T.EvaluationStatus.UNRATED;break;case at:m=S.status===T.OfferStatus.PENDING;break;case lt:m=!1;break;default:At.includes(t)&&(m=!0)}}else h=u[r]===nt;if(null!=A&&A.sourceContent&&(m=!0),!h||m){var _;if(s&&f){var y=f["".concat(s,"_id")];if(y&&![-1,0].includes(y)){var C="".concat(Je).concat(r);m?g.push(C):p.push(C),_=vt(s,f,C),(d[_]||(d[_]=[]))&&d[_].push(C)}}if(At.includes(t)&&n){var b=!1;switch(t){case st:b=o&&l!==n.shop_id;break;case dt:b=c!==e.to_id}b||(m?g.push(r):p.push(r),_=vt(t,n,r),(d[_]||(d[_]=[]))&&d[_].push(r))}}})),_.next=24,(0,Ae.put)(mt({status:nt,messageIds:p}));case 24:if(h=Object.keys(d),!r){_.next=32;break}return m=[],h.forEach((function(t){var n=d[t];m.push((0,Ae.call)(_t,e,n,g))})),_.next=30,(0,Ae.all)(m);case 30:_.next=39;break;case 32:if(!h.length){_.next=39;break}return E=h.shift(),v=d[E],_.next=37,(0,Ae.spawn)(_t,e,v,g);case 37:_.next=32;break;case 39:case"end":return _.stop()}}),Ze)}function _t(e,t,n){var r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R,P,D,N,j;return fe().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:a=t[0],o=a,(i=a.includes(Je))&&(o=a.split(Je)[1]),c=e.find((function(e){return e.id===o})),u=(l=c).content,d=l.type,p=l.source_type,g=l.source_content,h=(A=i?g:u)["".concat(f=i?p:d,"_id")],(m=d===ft?null==u||null===(r=u.bot_order_info)||void 0===r?void 0:r.shop_id:A.shop_id)||(m=c.to_shop_id),F.prev=11,F.t0=f,F.next=F.t0===rt?15:F.t0===st||F.t0===ct||F.t0===ft?19:F.t0===at?23:F.t0===ot?27:F.t0===it?31:F.t0===ut?35:F.t0===dt?39:F.t0===lt?44:F.t0===gt?48:62;break;case 15:return F.next=17,(0,Ae.call)(O.showProduct,{payload:{id:h,shopId:m}});case 17:return E=F.sent,F.abrupt("break",62);case 19:return F.next=21,(0,Ae.call)(O.showOrder,{payload:{id:h||u.order_id||(null==u||null===(s=u.bot_order_info)||void 0===s?void 0:s.order_id),shopId:m,isChatbotOrder:f===ft}});case 21:return E=F.sent,F.abrupt("break",62);case 23:return F.next=25,(0,Ae.call)(O.showOffer,{payload:{id:h,shopId:m}});case 25:return E=F.sent,F.abrupt("break",62);case 27:return F.next=29,(0,Ae.call)(O.showVoucher,{shopId:m,id:h});case 29:return E=F.sent,F.abrupt("break",62);case 31:return F.next=33,(0,Ae.call)(O.showFeedStory,{payload:{id:h,creatorId:u.creator_id}});case 33:return E=F.sent,F.abrupt("break",62);case 35:return F.next=37,(0,Ae.call)(O.showCartReminder,{cartItems:u.cart_items,shopId:m});case 37:return E=F.sent,F.abrupt("break",62);case 39:return F.next=41,(0,Ae.call)(Ge,{shopId:m,ids:u.card_id,type:d});case 41:return v=F.sent,E=v[0],F.abrupt("break",62);case 44:return F.next=46,(0,Ae.call)(O.showFaqHistory,{payload:{id:o,ids:u.messages.slice(0,3)}});case 46:return E=F.sent,F.abrupt("break",62);case 48:if(S=u.url,y=(_=void 0===S?"":S).split("/"),(C=y[y.length-2])!==pt){F.next=61;break}return b={},M=(0,T.getUrlParam)("id",_),t.forEach((function(e){e.includes(Je)||(b[e]={content:ze(ze({},u),{},{id:M,type:C})})})),F.next=57,(0,Ae.put)((0,O.batchUpdateRecord)({name:"messages",records:b}));case 57:return F.next=59,(0,Ae.call)(Ge,{ids:[M],shopId:(0,T.getUrlParam)("shop_id",_),type:d});case 59:x=F.sent,E=x[0];case 61:return F.abrupt("break",62);case 62:if(E){F.next=66;break}return F.next=65,(0,Ae.put)(mt({status:tt,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 65:return F.abrupt("return");case 66:I={},w=pe(t);case 68:if(!w.length){F.next=78;break}return B=w.shift(),F.next=72,(0,Ae.select)((0,O.getMessageSelector)(B));case 72:k=F.sent,R={},P={type:f,content:E},B.includes(Je)&&!(0,T.simpleEqualCheck)(P,null==k?void 0:k.sourceContent)?(R=I[B.split(Je)[1]]||{},I[B.split(Je)[1]]=ze(ze({},R),{},{sourceContent:P})):(0,T.simpleEqualCheck)(E,null==k?void 0:k.textContent)||(R=I[B]||{},I[B]=ze(ze({},R),{},{textContent:E})),F.next=68;break;case 78:return F.next=80,(0,Ae.put)((0,O.batchUpdateRecord)({name:"messages",records:I}));case 80:D=e.filter((function(e){var n;return t.includes(null===(n=e.quoted_msg)||void 0===n?void 0:n.id)}));case 81:if(!D.length){F.next=90;break}return N=D.shift(),F.next=85,(0,Ae.select)((0,O.getMessageSelector)(N.quoted_msg.id));case 85:return j=F.sent,F.next=88,(0,Ae.put)((0,O.updateRecord)({name:"messages",id:N.id,record:{quoted_msg:ze({},j)}}));case 88:F.next=81;break;case 90:return F.next=92,(0,Ae.put)(mt({status:et,messageIds:t}));case 92:F.next=98;break;case 94:return F.prev=94,F.t1=F.catch(11),F.next=98,(0,Ae.put)(mt({status:tt,messageIds:t.filter((function(e){return!n.includes(e)}))}));case 98:case"end":return F.stop()}}),Qe,null,[[11,94]])}function yt(e){var t,n,r;return fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.message,r=t.isSource,s.next=3,(0,Ae.call)(St,[n],{reFillType:r?$e:"content"});case 3:case"end":return s.stop()}}),Xe)}function Ct(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Et,yt);case 2:case"end":return e.stop()}}),Ke)}const bt=o({},_e.UPDATE_MESSAGE_FILL_STATUS_MAP,(function(e,t){var n=t.payload,r=n.status,s=n.messageIds,a=Object.assign({},e.messageFillStatusMap);return s.forEach((function(e){r===et?delete a[e]:a[e]=r})),ze(ze({},e),{},{messageFillStatusMap:ze({},a)})}));function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var It=(0,le.createActions)(o({},_e.UPDATE_MESSAGES_RELATED,(function(e){return{conversationId:e.conversationId,updateKey:e.updateKey,updateValue:e.updateValue}}))).updateMessagesRelated;const wt=o({},_e.UPDATE_MESSAGES_RELATED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.updateKey,a=n.updateValue,i=e.messagesRelatedMap,c=i[r]||{},l=c[s];return xt(xt({},e),{},{messagesRelatedMap:xt(xt({},i),{},o({},r,xt(xt({},c),{},o({},s,"object"===g(l)&&a&&"object"===g(a)?xt(xt({},l),a):a))))})}));var Tt,Ot=["offset"];function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rt=fe().mark(zt),Pt=fe().mark(Zt),Dt=fe().mark(Qt),Nt=fe().mark(Xt),jt=fe().mark(Kt),Ft=fe().mark(Jt),Lt=fe().mark($t),qt=fe().mark(en),Gt=(0,le.createActions)({FETCH_MESSAGES_REQUESTED:function(e){return{conversationId:e.conversationId,reset:e.reset,direction:e.direction,messageId:e.messageId,cachedLatestId:e.cachedLatestId,cachedOldestId:e.cachedOldestId,source:e.source,isPreload:e.isPreload,messageList:e.messageList}},FETCH_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,messageIds:e.messageIds,limit:e.limit,persist:e.persist,status:e.status,messageRequestIds:e.messageRequestIds,direction:e.direction,reset:e.reset,cachedOldestId:e.cachedOldestId,shouldAutoFetch:e.shouldAutoFetch}},UPDATE_FETCH_MESSAGES_REQUESTED_STATUS:function(e){return{status:e.status}},SET_SECURITY_TIPS_MESSAGE:function(e){return{messageId:e.messageId,conversationId:e.conversationId}}}),Ut=Gt.fetchMessagesRequested,Ht=Gt.fetchMessagesSucceeded,Yt=Gt.updateFetchMessagesRequestedStatus,Vt=Gt.setSecurityTipsMessage,Wt=function(e){var t=e.conversationId,n=e.shopId,r=e.offset,s=e.limit,a=void 0===s?20:s,o=e.direction,i=void 0===o?"older":o,c=(e.source,{shop_id:n,offset:r,limit:"around"===i?Math.ceil(a/2):a,direction:i});return new Promise((function(e,n){(0,O.fetch)({parent:"conversations",parentId:t,resource:"messages",params:c}).then((function(t){var n=t.messages,r=void 0===n?[]:n;Re(r),e({messages:r,limit:a})})).catch((function(e){n(e)}))}))};function zt(e){var t,n,r;return fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.msgId,n=e.shopId,s.next=3,(0,Ae.call)(O.fetch,{parent:"conversation",resource:"get_messages",params:{message_id:t,shop_id:n,limit:10,direction:"around"}});case 3:return r=s.sent,Re((null==r?void 0:r.get_messages)||[]),s.abrupt("return",r);case 6:case"end":return s.stop()}}),Rt)}function Zt(e,t){var n,r;return fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,Ae.select)((0,O.getConvsMessagesRelatedSelector)(e));case 2:return r=s.sent,s.abrupt("return",null===(n=r.preloaded)||void 0===n?void 0:n[t]);case 4:case"end":return s.stop()}}),Pt)}function Qt(e){var n,r,s,a,i;return fe().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return n=e.payload,c.next=3,(0,Ae.call)(Jt,{payload:kt(kt({},n),{},{isPreload:!0,reset:!1,direction:"older"})});case 3:if(!(r=c.sent)){c.next=21;break}return s=r.offset,a=t(r,Ot),i=n.conversationId,c.next=9,(0,Ae.call)(Zt,i,s);case 9:if(c.sent!==T.FetchMessageStatus.FETCHING){c.next=19;break}return c.next=13,(0,Ae.put)(Ht(kt({},a)));case 13:return c.next=15,(0,Ae.put)(It({conversationId:i,updateKey:T.MessagesRelatedKey.PRELOADED,updateValue:o({},s,null)}));case 15:return c.next=17,(0,Ae.fork)(Qt,{payload:n});case 17:c.next=21;break;case 19:return c.next=21,(0,Ae.put)(It({conversationId:i,updateKey:T.MessagesRelatedKey.PRELOADED,updateValue:o({},s,a)}));case 21:case"end":return c.stop()}}),Dt)}function Xt(e){var t,n,r,s;return fe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e.reset||"around"===e.direction){a.next=8;break}return a.next=3,(0,Ae.select)((function(e){return e.messageReducer}));case 3:return t=a.sent,n=t.messagesRelatedMap,r=e.conversationId,s=n[r]||{},a.abrupt("return",0===(s.all||[]).length);case 8:return a.abrupt("return","older"===e.direction);case 9:case"end":return a.stop()}}),Nt)}function Kt(e){var t;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,Xt(t);case 3:if(!n.sent){n.next=13;break}return n.next=7,(0,Ae.call)(Jt,{payload:t});case 7:if(!n.sent){n.next=11;break}return n.next=11,(0,Ae.fork)(Qt,{payload:t});case 11:n.next=15;break;case 13:return n.next=15,(0,Ae.call)(Jt,{payload:t});case 15:case"end":return n.stop()}}),jt)}function Jt(e){var t,n,r,s,a,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R;return fe().wrap((function(P){for(;;)switch(P.prev=P.next){case 0:return t=e.payload,n=t.conversationId,r=t.reset,s=t.direction,a=t.messageId,i=t.source,c=t.isPreload,l=t.shouldFillSync,u=t.messageList,P.prev=1,P.next=4,(0,Ae.select)((function(e){return e.conversationReducer}));case 4:return d=P.sent,p=d.persist,P.next=8,(0,Ae.select)((0,O.getConversationShopId)(n));case 8:return g=P.sent,P.next=11,(0,Ae.select)((function(e){return e.messageReducer}));case 11:if(f=P.sent,A=f.messagesRelatedMap,h=A[n]||{},!r||"around"===s){P.next=20;break}m=0,s="older",E=!0,P.next=33;break;case 20:P.t0=s,P.next="older"===P.t0?23:"latest"===P.t0?26:"around"===P.t0?29:32;break;case 23:return m=h.oldestMessageId,E=h.hasMoreOlderMessage,P.abrupt("break",33);case 26:return m=h.latestMessageId,E=h.hasMoreLatestMessage,P.abrupt("break",33);case 29:return m=a,E=!0,P.abrupt("break",33);case 32:return P.abrupt("break",33);case 33:if(void 0!==E){P.next=40;break}return P.next=36,(0,Ae.select)(O.messageHttpStatusSelector);case 36:P.sent.includes("failed")&&(s="older"),P.next=42;break;case 40:if(E){P.next=42;break}return P.abrupt("return");case 42:if(c){P.next=45;break}return P.next=45,(0,Ae.put)(Yt({status:r||"around"===s?T.DataFetchStatus.INIT_PENDING:T.DataFetchStatus.PENDING}));case 45:if(!c){P.next=50;break}return P.next=48,(0,Ae.put)(It({conversationId:n,updateKey:T.MessagesRelatedKey.PRELOADED,updateValue:o({},m,T.FetchMessageStatus.PRELOADING)}));case 48:P.next=66;break;case 50:return P.next=52,(0,Ae.call)(Zt,n,m);case 52:if(!(_=P.sent)){P.next=66;break}if(_!==T.FetchMessageStatus.PRELOADING){P.next=60;break}return P.next=57,(0,Ae.put)(It({conversationId:n,updateKey:T.MessagesRelatedKey.PRELOADED,updateValue:o({},m,T.FetchMessageStatus.FETCHING)}));case 57:return P.abrupt("return",!1);case 60:if(_===T.FetchMessageStatus.FETCHING){P.next=66;break}return P.next=63,(0,Ae.put)(Ht(kt({},_)));case 63:return P.next=65,(0,Ae.put)(It({conversationId:n,updateKey:T.MessagesRelatedKey.PRELOADED,updateValue:o({},m,null)}));case 65:return P.abrupt("return",!0);case 66:if(!u||!u.length){P.next=71;break}v=u,S=20,P.next=76;break;case 71:return P.next=73,(0,Ae.call)(Wt,{conversationId:n,shopId:g,offset:m,direction:s,source:i});case 73:y=P.sent,v=y.messages,S=y.limit;case 76:if(v.sort((function(e,t){return t.id-e.id})),C=v.map((function(e){return e.id})),!v.length){P.next=88;break}return b=pe(v),v.forEach((function(e){var t=e.quoted_msg;if(t){if(b.some((function(e){return e.id===t.id}))||(0,T.isDeletedMessage)(t))return;b=[].concat(pe(b),[t])}})),P.next=83,(0,Ae.select)(O.messageEntitiesSelector);case 83:return M=P.sent,P.next=86,(0,Ae.call)(O.updateOrReplaceAction,M,b,"messages",["content"]);case 86:return P.next=88,(0,Ae.call)(St,b,{isSync:l});case 88:if(x=new Map,I=v.reduce((function(e,t){var n=t.request_id,r=t.id;return e.has(n)||e.set(n,r),e}),x),w={reset:r,limit:S,offset:m,direction:s,messageIds:C,conversationId:n,persist:p,status:T.DataFetchStatus.SUCCEED,messageRequestIds:I},!c){P.next=93;break}return P.abrupt("return",w);case 93:return B=!1,(k=h.cachedLatestId)||(k=(h.all||[])[0],w.cachedLatestId=k),k&&r&&(R=C[C.length-1]||m,(0,T.greaterThan)(R,k)?B=!0:w.cachedLatestId=null),w.shouldAutoFetch=B,P.next=100,(0,Ae.put)(Ht(w));case 100:if(!B){P.next=103;break}return P.next=103,(0,Ae.fork)(Jt,{payload:{direction:"older",conversationId:n}});case 103:if(!("around"===s||u&&u.length)||!a){P.next=111;break}return O.EventBus.emit("scrollToMessage",a),P.next=107,(0,Ae.select)(O.isNavigateToUnreadMessageSelector);case 107:if(!P.sent){P.next=111;break}return P.next=111,(0,Ae.put)((0,O.setNavigateToUnreadMessageId)({navigateToUnreadMessageId:a}));case 111:return P.abrupt("return",w);case 114:if(P.prev=114,P.t1=P.catch(1),c){P.next=119;break}return P.next=119,(0,Ae.put)(Yt({status:r?T.DataFetchStatus.INIT_FAILED:T.DataFetchStatus.FAILED}));case 119:case"end":return P.stop()}}),Ft,null,[[1,114]])}function $t(e){var t,n,r,s,a,o,i,c,l,u;return fe().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=e.payload,n=t.conversationId,"older"===t.direction){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,(0,Ae.select)((0,O.getConversationShopId)(n));case 6:return r=d.sent,d.next=9,(0,Ae.select)((0,O.shopSelector)(r));case 9:if(s=d.sent,a=s?s.country:(0,T.getRuntimeRegion)(),!["br","tw"].includes(a.toLowerCase())){d.next=33;break}return d.next=14,(0,Ae.select)(O.messagesRelatedMapSelector);case 14:if(o=d.sent,!(i=o[n])){d.next=33;break}if(!i.securityTipsMessageId){d.next=19;break}return d.abrupt("return");case 19:if(i.hasMoreOlderMessage){d.next=33;break}return d.next=22,(0,Ae.select)(O.messageEntitiesSelector);case 22:if(c=d.sent,l=(0,T.makeSecurityTipsMessage)(me()(),n),!i.oldestMessageId){d.next=29;break}return d.next=27,(0,Ae.select)((0,O.getMessageSelector)(i.oldestMessageId));case 27:(u=d.sent)&&(l.created_timestamp=u.created_timestamp);case 29:return d.next=31,(0,Ae.call)(O.updateOrReplaceAction,c,[l],"messages");case 31:return d.next=33,(0,Ae.put)(Vt({messageId:l.id,conversationId:n}));case 33:case"end":return d.stop()}}),Lt)}function en(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Ut,Kt);case 2:return e.next=4,(0,Ae.takeEvery)(Ht,$t);case 4:case"end":return e.stop()}}),qt)}const tn=(o(Tt={},Ht,(function(e,t){var n=t.payload,r=n.limit,s=n.status,a=n.conversationId,i=n.messageIds,c=n.persist,l=n.messageRequestIds,u=n.direction,d=n.reset,p=n.cachedLatestId,g=n.shouldAutoFetch,f=e.messagesRelatedMap,A=f[a]||{},h={};switch(u){case"older":h.hasMoreOlderMessage=i.length>=r;break;case"latest":h.latestMessageId=i[0],h.hasMoreLatestMessage=i.length>=r;break;case"around":h.latestMessageId=i[0],h.hasMoreOlderMessage=!0,h.hasMoreLatestMessage=!0,A={}}d&&"around"!==u&&(h.hasMoreLatestMessage=!1);var m=(A.all||[]).map((function(e){return l.has(e)?l.get(e):e})),E=A.failed||[],v=function(e,t){for(var n,r=e.length,s=t.length,a=0,o=0,i=new Array(r+s).fill(0);a<r||o<s;)n=a===r?t[o++]:o===s?e[a++]:/^\d+$/.test(e[a])?(0,T.greaterThan)(e[a],t[o])?e[a++]:t[o++]:e[a++],i[a+o-1]=n;return pe(new Set(i))}(m,i);return h.oldestMessageId=g?i[i.length-1]:v[v.length-1],p&&(h.cachedLatestId=p),kt(kt({},e),{},{status:s,messagesRelatedMap:kt(kt({},f),{},o({},a,kt(kt({},A),{},{all:v,failed:E.filter((function(e){return!l.has(e)}))},h))),persist:c})})),o(Tt,Yt,(function(e,t){var n=t.payload.status;return kt(kt({},e),{},{status:n})})),o(Tt,Vt,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageId,a="messagesRelatedMap",i=e[a],c=i[r]||{};return kt(kt({},e),{},o({},a,kt(kt({},i),{},o({},r,kt(kt({},c),{},{securityTipsMessageId:s})))))})),Tt);var nn,rn=P(885),sn=P(4672),an=P(4323).t,on=fe().mark(bn);function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un=1500,dn=(0,le.createActions)({SET_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId}},RESET_REPLY_TO_MESSAGE:function(){return{}},SCROLL_TO_MESSAGE:function(e){return{messageId:e.messageId}},SET_SCROLL_TO_MESSAGE_ID:function(e){return{messageId:e.messageId}},RESET_SCROLL_TO_MESSAGE_ID:function(){},SET_IN_SCROLL_TO_MESSAGE:function(e){return{inScrollToMessage:e.inScrollToMessage}},SET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{messageId:e.messageId,currentConversationId:e.currentConversationId}},RESET_CURRENT_CONVERSATION_REPLY_TO_MESSAGE:function(e){return{currentConversationId:e.currentConversationId}}}),pn=dn.setReplyToMessage,gn=dn.resetReplyToMessage,fn=dn.scrollToMessage,An=dn.setScrollToMessageId,hn=dn.resetScrollToMessageId,mn=dn.setInScrollToMessage,En=dn.setCurrentConversationReplyToMessage,vn=dn.resetCurrentConversationReplyToMessage,Sn=fe().mark((function e(t){var n,r,s;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,Ae.select)(O.curMessagesRelatedSelector);case 3:if(e.sent.all.includes(n)){e.next=14;break}return e.next=7,(0,Ae.select)(O.currentConversationSelector);case 7:return r=e.sent,e.next=10,(0,Ae.call)(Jt,{payload:{conversationId:r.id,direction:"around",reset:!0,messageId:n,shouldFillSync:!0}});case 10:return e.next=12,(0,Ae.put)(mn({inScrollToMessage:!0}));case 12:e.next=22;break;case 14:return e.next=16,(0,Ae.select)((0,O.getMessageSelector)(n));case 16:if(s=e.sent,!(0,T.isDeletedMessage)(s)){e.next=21;break}return e.next=20,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({toast:{show:!0,type:"fail",message:an("message.notfound")}}));case 20:return e.abrupt("return");case 21:O.EventBus.emit("scrollToMessage",n);case 22:return e.next=24,(0,Ae.put)(An({messageId:n}));case 24:return e.next=26,(0,Ae.delay)(un);case 26:return e.next=28,(0,Ae.select)(O.scrollToMessageIdSelector);case 28:if(e.sent!==n){e.next=32;break}return e.next=32,(0,Ae.put)(hn());case 32:case"end":return e.stop()}}),e)})),_n=fe().mark((function e(t){var n,r;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.payload.messageId,e.next=3,(0,Ae.select)(O.currentConversationIdSelector);case 3:return r=e.sent,e.next=6,(0,Ae.put)(En({currentConversationId:r,messageId:n}));case 6:case"end":return e.stop()}}),e)})),yn=fe().mark((function e(){var t;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.select)(O.currentConversationIdSelector);case 2:return t=e.sent,e.next=5,(0,Ae.put)(vn({currentConversationId:t}));case 5:case"end":return e.stop()}}),e)}));const Cn=(o(nn={},En,(function(e,t){var n=t.payload,r=n.currentConversationId,s=void 0===r?"":r,a=n.messageId,i=void 0===a?"":a;return s&&i?ln(ln({},e),{},{reply:ln(ln({},e.reply),{},{toMessageId:ln(ln({},e.reply.toMessageId),{},o({},s,i))})}):e})),o(nn,vn,(function(e,t){var n=t.payload.currentConversationId,r=void 0===n?"":n;return r?ln(ln({},e),{},{reply:ln(ln({},e.reply),{},{toMessageId:ln(ln({},e.reply.toMessageId),{},o({},r,""))})}):e})),o(nn,An,(function(e,t){return ln(ln({},e),{},{reply:ln(ln({},e.reply),{},{scrollToMessageId:t.payload.messageId})})})),o(nn,hn,(function(e){return ln(ln({},e),{},{reply:ln(ln({},e.reply),{},{scrollToMessageId:""})})})),o(nn,mn,(function(e,t){return ln(ln({},e),{},{reply:ln(ln({},e.reply),{},{inScrollToMessage:t.payload.inScrollToMessage})})})),nn);function bn(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(fn,Sn);case 2:return e.next=4,(0,Ae.takeEvery)(gn,yn);case 4:return e.next=6,(0,Ae.takeEvery)(pn,_n);case 6:case"end":return e.stop()}}),on)}var Mn,xn,In=fe().mark(On),wn=fe().mark(Bn),Tn=(0,le.createActions)(o({},_e.RESEND_MESSAGE_REQUESTED,(function(e){return{conversationId:e.conversationId,message:e.message}}))).resendMessageRequested;function On(e){var t,n,r,s,a;return fe().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,o.next=3,(0,Ae.select)((0,O.getConversation)(n));case 3:if("closed"!==o.sent.status){o.next=9;break}return o.next=8,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({type:"conversation-closed-tip"}));case 8:case 13:return o.abrupt("return");case 9:if(s=r.type,a=r.content,s!==T.MessageTypes.MSG_TYPE_VIDEO||a.video_url){o.next=14;break}return o.next=13,(0,Ae.put)(bs({conversationId:n,message:r,isResend:!0}));case 14:return o.next=16,(0,Ae.put)(hs({conversationId:n,messages:[r],more:{isResend:!0}}));case 16:case"end":return o.stop()}}),In)}function Bn(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Tn,On);case 2:case"end":return e.stop()}}),wn)}function kn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pn=fe().mark(Yn),Dn=fe().mark(Vn),Nn=fe().mark(Wn);function jn(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Fn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fn(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Fn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ln=(0,le.createActions)((o(Mn={},_e.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}})),o(Mn,_e.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(){return{}})),o(Mn,_e.RESEND_OFFLINE_MESSAGES_ONCE,(function(){return{}})),o(Mn,_e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e){return{conversationId:e.conversationId,messageIds:e.messageIds}})),Mn)),qn=Ln.sendMessagesFailedByOffline,Gn=Ln.resetMessagesFailedByOffline,Un=Ln.resendOfflineMessagesOnce,Hn=Ln.resendOfflineMessagesOnceSucceed;function Yn(){var e,t,n,r,s,a,o,i,c;return fe().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,(0,Ae.select)(O.offlineMessagesSelector);case 2:e=l.sent,t=Object.entries(e),n=[],r=fe().mark((function e(){var t,r,o,i,c,l;return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a[s],r=(0,rn.Z)(t,2),o=r[0],i=r[1],e.next=4,(0,Ae.select)((0,O.getMessagesSelector)(i));case 4:c=e.sent,l=i.map((function(e,t){return{conversationId:o,requestIds:[e],messages:[c[t]]}})).filter((function(e){return e.messages[0]})),n=n.concat(l);case 7:case"end":return e.stop()}}),e)})),s=0,a=t;case 7:if(!(s<a.length)){l.next=12;break}return l.delegateYield(r(),"t0",9);case 9:s++,l.next=7;break;case 12:o=jn(n),l.prev=13,o.s();case 15:if((i=o.n()).done){l.next=23;break}return c=i.value,l.next=19,Ps(c);case 19:return l.next=21,(0,Ae.delay)(400);case 21:l.next=15;break;case 23:l.next=28;break;case 25:l.prev=25,l.t1=l.catch(13),o.e(l.t1);case 28:return l.prev=28,o.f(),l.finish(28);case 31:return l.next=33,(0,Ae.put)(Gn());case 33:case"end":return l.stop()}}),Pn,null,[[13,25,28,31]])}function Vn(e){var t,n;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.conversationId,n=e.messageIds,r.next=3,(0,Ae.put)(Hn({conversationId:t,messageIds:n}));case 3:case"end":return r.stop()}}),Dn)}function Wn(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Un,Yn);case 2:case"end":return e.stop()}}),Nn)}window.addEventListener("judge-online",(function(){sn.store.dispatch(Un())}));const zn=(o(xn={},_e.SEND_MESSAGES_FAILED_BY_OFFLINE,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.offlineMessages,i=(a[r]||[]).concat(s);return Rn(Rn({},e),{},{offlineMessages:Rn(Rn({},a),{},o({},r,pe(new Set(i))))})})),o(xn,_e.RESET_MESSAGES_FAILED_BY_OFFLINE,(function(e){return Rn(Rn({},e),{},{offlineMessages:{}})})),o(xn,_e.RESEND_OFFLINE_MESSAGES_ONCE_SUCCEED,(function(e,t){var n=t.payload,r=n.conversationId,s=n.messageIds,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).filter((function(e){return!s.includes(e)})),l=(i.failed||[]).filter((function(e){return!s.includes(e)})),u=(i.sending||[]).filter((function(e){return!s.includes(e)}));return Rn(Rn({},e),{},{messagesRelatedMap:Rn(Rn({},a),{},o({},r,Rn(Rn({},i),{},{all:c,failed:l,sending:u})))})})),xn);function Zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zn(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xn=(0,le.createActions)(o({},_e.DELETE_CONVERSATION_MESSAGE_HASH,(function(e){return{conversationId:e.conversationId}}))).deleteConversationMessageHash;const Kn=o({},_e.DELETE_CONVERSATION_MESSAGE_HASH,(function(e,t){var n=t.payload.conversationId,r=e.messagesRelatedMap;return delete r[n],Qn(Qn({},e),{},{messagesRelatedMap:Qn({},r)})}));var Jn,$n,er=P(9977),tr=P.n(er);function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr=fe().mark(mr),ar=fe().mark(Er),or=fe().mark(vr),ir=fe().mark(Sr),cr=fe().mark(Cr),lr=function(e){return e?e/3*1e3:8e3},ur=function(e){var t="http:";return e.startsWith(t)?e.replace(t,"https:"):e},dr=(0,le.createActions)((o(Jn={},_e.UPDATE_VIDEO_INFO,(function(e){var t=e.id,n=e.info;return{id:t,info:void 0===n?{}:n}})),o(Jn,_e.DELETE_VIDEO_INFO,(function(e){return{id:e.id}})),Jn)),pr=dr.updateVideoInfo,gr=dr.deleteVideoInfo,fr="get_config_error",Ar="query_result_error";function hr(e,t){(0,O.fetch)({method:"POST",subServer:"coreapi",parent:"video",resource:"monitor",payload:JSON.stringify({step:e,reason:t})}).catch((function(){return{}}))}function mr(e){var t,n,r,s,a;return fe().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,(0,Ae.select)((0,O.getConversationShopId)(e));case 3:return t=o.sent,o.next=6,(0,Ae.call)(O.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"preupload",payload:JSON.stringify({conversation_id:e,shop_id:t})});case 6:if(n=o.sent,r=n.is_allowed,s=n.data,a=void 0===s?{}:s,r){o.next=14;break}return o.next=13,(0,Ae.call)(hr,fr,"Not Allowed");case 13:return o.abrupt("return",null);case 14:return o.abrupt("return",a);case 17:return o.prev=17,o.t0=o.catch(0),o.next=21,(0,Ae.call)(hr,fr);case 21:return o.abrupt("return",!1);case 22:case"end":return o.stop()}}),sr,null,[[0,17]])}function Er(e){var t,n,r,s,a;return fe().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=performance.now(),n=e.file,r=e.onProgress,s=e.serviceList,a=new(tr())(s),o.next=5,a.upload({mediaFile:n,mediaType:er.MediaType.video});case 5:return a.on(er.UploaderEvents.mediaProgress,(function(e){return r(.95*e.percent*100)})),o.next=8,a.done().then((function(e){var n=performance.now();return(0,O.collectAsyncTask)(O.ReportPoint.VIDEO_UPLOAD,n-t),{error:!1,data:e}})).catch((function(){return hr("upload_error"),!1}));case 8:return o.abrupt("return",o.sent);case 9:case"end":return o.stop()}}),ar)}function vr(e){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,Ae.call)(O.fetch,{method:"POST",subServer:"coreapi",parent:"video",resource:"report_upload",payload:JSON.stringify(e)});case 3:return t.abrupt("return",!0);case 6:return t.prev=6,t.t0=t.catch(0),t.next=10,(0,Ae.call)(hr,"report_upload_error");case 10:return t.abrupt("return",!1);case 11:case"end":return t.stop()}}),or,null,[[0,6]])}function Sr(e){var t;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(0,Ae.call)(O.fetch,{subServer:"coreapi",parent:"video",resource:"upload_status",params:{vid:e}});case 3:return t=n.sent,n.abrupt("return",t);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,(0,Ae.call)(hr,Ar);case 11:return n.abrupt("return",{});case 12:case"end":return n.stop()}}),ir,null,[[0,7]])}var _r=function(e){var t=e.video,n=e.thumbnail,r=e.duration;return{video_url:t,thumb_url:n,thumb_width:e.width,thumb_height:e.height,duration_seconds:Math.ceil(r/1e3)}};function yr(e,t){var n=[];return e.forEach((function(e,r){var s=e.service_id,a=e.token,o=e.upload_domain,i=e.domain,c=e.bucket,l=e.slice_size;n.push({vid:t,bucket:c,sliceSize:l,biz:120,env:"live",country:"VN",serviceID:s,serviceIndex:r,authorization:a,domain:ur(i),uploadDomain:ur(o)})})),n}function Cr(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b;return fe().wrap((function(M){for(;;)switch(M.prev=M.next){case 0:return t=new Error("upload fail"),n=e.id,r=e.file,s=e.duration,a=e.onProgress,o=void 0===a?function(){return{}}:a,M.next=4,(0,Ae.select)((0,O.selectVideoInfoByKey)(n));case 4:return i=M.sent,l=(c=i||{}).vid,(u=c.services).forEach((function(e,t){"txcloud"===e.service_id&&u.unshift(u.splice(t,1)[0])})),M.next=9,(0,Ae.call)(Er,{file:r,serviceList:yr(u,l),onProgress:o});case 9:if(d=M.sent){M.next=12;break}throw t;case 12:if(p=u[0],g=p.service_id,f=p.domain,A="txcloud"===g,h=d.data.video,m=h.md5,E=h.extendId,v=h.url,!A||v){M.next=17;break}throw t;case 17:return M.next=19,(0,Ae.call)(vr,{vid:l,md5:m,service_id:g,extend_id:E,file_size:r.size,video_url:v||"".concat(f,"/").concat(l,".ori.mp4")});case 19:if(M.sent){M.next=22;break}throw t;case 22:return M.next=24,(0,Ae.delay)(lr(s));case 24:S=180;case 25:if(!(S>0)){M.next=58;break}return M.next=28,(0,Ae.select)((0,O.selectVideoInfoByKey)(n));case 28:if("successful"!==(i=M.sent).status){M.next=31;break}return M.abrupt("return",_r(i.uploadResult));case 31:if("failed"!==i.status){M.next=35;break}return M.next=34,(0,Ae.call)(hr,Ar,"failed");case 34:throw t;case 35:return M.next=37,(0,Ae.call)(Sr,l);case 37:if(_=M.sent,(y=_.status)&&"reported"!==y){M.next=45;break}return M.next=42,(0,Ae.delay)(3e3);case 42:S-=3,M.next=56;break;case 45:return M.next=47,(0,Ae.put)(pr({id:n,info:{status:y}}));case 47:if("successful"!==y){M.next=53;break}return(C=performance.getEntriesByName("REPORT_UPLOAD_".concat(l),"mark")[0])&&(performance.mark("SERVICE_DONE_".concat(l)),b=performance.getEntriesByName("SERVICE_DONE_".concat(l))[0].startTime-C.startTime,performance.clearMarks("REPORT_UPLOAD_".concat(l)),performance.clearMarks("SERVICE_DONE_".concat(l)),(0,O.collectAsyncTask)(O.ReportPoint.SERVICE_DONE,b)),M.abrupt("return",_r(_));case 53:return M.next=55,(0,Ae.call)(hr,Ar,y);case 55:throw t;case 56:M.next=25;break;case 58:return M.next=60,(0,Ae.call)(hr,"push_timeout",status);case 60:throw t;case 61:case"end":return M.stop()}}),cr)}const br=(o($n={},_e.UPDATE_VIDEO_INFO,(function(e,t){var n=t.payload,r=n.id,s=n.info,a=e.videoMap[r]||{};return rr(rr({},e),{},{videoMap:rr(rr({},e.videoMap),{},o({},r,rr(rr({},a),s)))})})),o($n,_e.DELETE_VIDEO_INFO,(function(e,t){var n=t.payload.id,r=e.videoMap;return delete r[n],rr(rr({},e),{},{videoMap:rr({},r)})})),$n);var Mr,xr=function(e,t,n){return e===t&&(new Date).getTime()<=n/1e6},Ir=P(4323).t,wr=fe().mark(xs),Tr=fe().mark(Is),Or=fe().mark(ws),Br=fe().mark(Os),kr=fe().mark(ks),Rr=fe().mark(Rs),Pr=fe().mark(Ps),Dr=fe().mark(Ns),Nr=fe().mark(js),jr=fe().mark(Fs),Fr=fe().mark(Ls),Lr=fe().mark(qs);function qr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ur,Hr=T.MessageTypes.MSG_TYPE_IMAGE,Yr=T.MessageTypes.MSG_TYPE_TEXT,Vr=T.MessageTypes.MSG_TYPE_WEBVIEW,Wr=T.MessageTypes.MSG_TYPE_VIDEO,zr=(T.MessageTypes.MSG_TYPE_ITEM_LIST,T.MessageTypes.MSG_TYPE_RATE_CARDS),Zr=T.MessageTypes.MSG_TYPE_RATE_CARD,Qr=T.MessageTypes.MSG_TYPE_FAQ_QUESTION,Xr=T.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,Kr=T.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Jr=T.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,$r=T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,es=T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,ts=T.MessageErrorCode.DEFAULT,ns=T.MessageErrorCode.FORBIDDEN,rs=T.MessageErrorCode.LIMITING,ss=T.MessageErrorCode.CUSTOM_ERROR,as=T.MessageErrorCode.BLACKLIST,os=T.MessageErrorCode.CANCEL_ORDER,is=T.MessageErrorCode.UNVERIFIED_PHONE_NUMBER,cs=T.MessageErrorCode.EXCEED_DAILY_LIMIT,ls=T.MessageErrorCode.UNTRUSTED_NETWORK,us=T.MessageErrorCode.NEED_CAPTCHA,ds=T.MessageErrorCode.DFP_ERROR,ps=T.MessageErrorCode.SPAMMER,gs=T.MessageErrorCode.FAQ_EXPIRED,fs=T.MessageErrorCode.FAQ_SESSION_OLD;Ur="mini-sc_redirect";var As=(0,le.createActions)({SEND_MESSAGES_REQUESTED:function(e){var t=e.id,n=e.conversationId,r=e.messages,s=e.more;return{id:t,conversationId:n,messages:r,more:void 0===s?{}:s}},SEND_MESSAGES_SUCCEEDED:function(e){return{conversationId:e.conversationId,requestIdToMessageId:e.requestIdToMessageId}},SENDING_MESSAGES:function(e){var t=e.conversationId,n=e.requestIds,r=e.isCancelable;return{conversationId:t,requestIds:n,isCancelable:void 0!==r&&r}},SEND_MESSAGES_TO_PENDING:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},SEND_MESSAGES_FAILED:function(e){return{conversationId:e.conversationId,requestIds:e.requestIds}},ABORT_ALL_SENDING_MESSAGES:function(){return{}},CANCEL_SENDING_MESSAGE_REQUESTED:function(e){return{id:e.id,conversationId:e.conversationId}},CANCEL_SENDING_MESSAGE_SUCCEEDED:function(e){return{id:e.id,conversationId:e.conversationId}},SEND_VIDEO_MESSAGE_REQUESTED:function(e){var t=e.conversationId,n=e.message,r=e.isResend;return{conversationId:t,message:n,isResend:void 0!==r&&r}}}),hs=As.sendMessagesRequested,ms=As.sendMessagesSucceeded,Es=As.sendingMessages,vs=As.sendMessagesToPending,Ss=As.sendMessagesFailed,_s=As.abortAllSendingMessages,ys=As.cancelSendingMessageRequested,Cs=As.cancelSendingMessageSucceeded,bs=As.sendVideoMessageRequested;function Ms(e,t){return delete e.errorCode,delete e.error,Gr(Gr({},e),{},{chat_send_option:{force_send_cancel_order_warning:t,comply_cancel_order_warning:!t}})}function xs(e){var t,n,r,s,a,o,i;return fe().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,n=t.conversationId,r=t.message,s=t.isResend,c.next=3,(0,Ae.call)(mr,n);case 3:if(null!==(a=c.sent)){c.next=8;break}return c.next=7,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({toast:{show:!0,type:"fail",message:Ir("toast.chat_bot_limit")}}));case 7:case 11:return c.abrupt("return");case 8:if(!1!==a){c.next=12;break}return c.next=11,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:null}));case 12:return o=s?r.id:me()(),i=Gr({},a),s&&(i.precent=0),c.next=17,(0,Ae.put)(pr({id:o,info:i}));case 17:return c.next=19,(0,Ae.put)(hs({id:o,conversationId:n,messages:[Gr(Gr({},r),{},{type:Wr})],more:{isResend:s}}));case 19:case"end":return c.stop()}}),wr)}function Is(e,t){return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ae.delay)(1e3);case 2:return n.next=4,(0,Ae.put)(vs({conversationId:e,requestIds:t}));case 4:case"end":return n.stop()}}),Tr)}function ws(e,t){var n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m;return fe().wrap((function(E){for(;;)switch(E.prev=E.next){case 0:if(n=e.type,r=e.request_id,s=e.content,a=s.url,o=s.file,i=s.duration_seconds,c=s.video_url,l=n===Wr,E.prev=2,n!==Hr||a){E.next=24;break}return(u=new window.FormData).append("file",o),u.append("conversation_id",t),E.next=9,(0,Ae.call)(O.fetch,{method:"POST",subServer:"coreapi",resource:"images",payload:u});case 9:d=E.sent,p=d.url,g=d.thumbnail,f=d.thumb_width,A=d.thumb_height,h=d.file_server_id,e.content.url_hash=p.split("/").pop(),e.content.url=p,e.content.thumb_url=g,e.content.thumb_width=f,e.content.thumb_height=A,e.content.file_server_id=h,delete e.content.file,E.next=30;break;case 24:if(!l||c){E.next=30;break}return E.next=27,(0,Ae.call)(Cr,{id:r,file:o,duration:i,onProgress:function(e){sn.store.dispatch(pr({id:r,info:{percent:e}}))}});case 27:m=E.sent,e.content=Gr(Gr({},e.content),m),delete e.content.file;case 30:return E.abrupt("return",!0);case 33:if(E.prev=33,E.t0=E.catch(2),E.t1=l,!E.t1){E.next=39;break}return E.next=39,(0,Ae.put)(pr({id:r,info:{percent:void 0}}));case 39:return E.abrupt("return",!1);case 40:case"end":return E.stop()}}),Or,null,[[2,33]])}var Ts=["request_id","to_id","type","content","shop_id","order_id","source","chat_send_option","source_content","source_type","entry_point"];function Os(e,t,n){var r,s,a,o,i,c,l,u;return fe().wrap((function(d){for(;;)switch(d.prev=d.next){case 0:return r="",s={},Ts.forEach((function(t){e[t]&&(s[t]=e[t]),s[t]&&s[t].localUrl&&(r=s[t].localUrl,delete s[t].localUrl)})),e.retryRequestId&&(s.request_id=e.retryRequestId),a=JSON.stringify(Gr(Gr({},s),{},{device_id:n,source:(0,T.checkIsScChat)()?"minichat":"pc_mall"})),o=Math.floor(Date.now()/1e3),d.prev=6,i={},d.next=10,(0,Ae.select)(O.captchaSignatureSelector);case 10:if(!(c=d.sent)){d.next=15;break}return i["X-Dfp-Access-S"]=c,d.next=15,(0,Ae.call)(O.updateCaptchaSignatureSaga,(0,O.updateCaptchaSignature)({signature:""}));case 15:return d.next=17,(0,Ae.call)(O.fetch,{method:"POST",resource:"messages",payload:a,headers:i});case 17:return l=d.sent,r&&(l.content.localUrl=r),t&&(0,T.removeItem)(Ur),d.abrupt("return",Gr(Gr({},l),{},{created_at:new Date,created_timestamp:o}));case 23:d.prev=23,d.t0=d.catch(6),d.t1=!0,d.next=d.t1===d.t0 instanceof O.Forbidden?28:d.t1===d.t0 instanceof O.Limiting?30:d.t1===d.t0 instanceof O.CustomError?32:d.t1===d.t0 instanceof O.Blacklist?34:d.t1===d.t0 instanceof O.CancelOrderWarning?37:d.t1===d.t0 instanceof O.UnverifiedPhoneNumber?39:d.t1===("message_exceed_daily_limit"===d.t0.message)?41:d.t1===("request_block_errorrequest block error."===d.t0.message)?43:d.t1===("need_captcha"===d.t0.message)?45:d.t1===("dfp_block_error"===d.t0.message)||d.t1===("captcha_error"===d.t0.message)?47:d.t1===("soft_spammer_error"===d.t0.message)?49:d.t1===("faq_session_expire"===d.t0.message)?51:d.t1===fs?53:56;break;case 28:return u=ns,d.abrupt("break",57);case 30:return u=rs,d.abrupt("break",57);case 32:return u=ss,d.abrupt("break",57);case 34:return u=as,e.message_option=T.MessageOption.MSG_OPT_CENSORED_BLACKLIST,d.abrupt("break",57);case 37:return u=os,d.abrupt("break",57);case 39:return u=is,d.abrupt("break",57);case 41:return u=cs,d.abrupt("break",57);case 43:return u=ls,d.abrupt("break",57);case 45:return u=us,d.abrupt("break",57);case 47:return u=ds,d.abrupt("break",57);case 49:return u=ps,d.abrupt("break",57);case 51:return u=gs,d.abrupt("break",57);case 53:return d.next=55,(0,Ae.spawn)(Rs,!1);case 55:return d.abrupt("break",57);case 56:u=ts;case 57:return r&&(e.content.localUrl=r),d.abrupt("return",Gr(Gr({},e),{},{requestId:e.request_id,created_timestamp:o,errorCode:u,error:d.t0}));case 59:case"end":return d.stop()}}),Br,null,[[6,23]])}var Bs=function(e){return e.content&&e.content.translation&&e.content.translation.text};function ks(e,t){var n,r,s,a,i,c,l,u,d,p,g,f,A,h,m,E;return fe().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return n=[],r=[],v.next=4,(0,Ae.select)(O.currentConversationIdSelector);case 4:if((s=v.sent)===t){v.next=12;break}return v.next=8,(0,Ae.select)((0,O.getConvsMessagesRelatedSelector)(t));case 8:return n=v.sent,v.next=11,(0,Ae.select)((0,O.getMessagesSelector)(n.all));case 11:r=v.sent;case 12:return v.next=14,(0,Ae.put)(mt({conversationId:t,status:T.MessageFillStatus.FILLED,messageIds:e.map((function(e){return e.id}))}));case 14:return v.next=16,(0,Ae.select)(O.curConvsMessageSelector);case 16:if(a=v.sent,i=(0,O.normalize)("messages",a).entities.messages||{},c=[],l=e.map((function(e){var n,o=e.request_id,l=e.id,u=(e.content,e.type);if(i[o]){u===Wr&&c.push((0,Ae.put)(gr({id:o}))),c.push((0,Ae.put)((0,O.deleteRecord)({name:"messages",id:o})));var d=Gr(Gr({},i[o]),{},{translateStatus:Bs(e)?T.TranslationStatus.SHOW:T.TranslationStatus.FAILED});return i[l]?null:(0,T.deepMerge)(d,e)}if((n=s!==t?r.filter((function(e){return e&&e.retryRequestId===o})):a.filter((function(e){return e.retryRequestId===o}))).length){var p=n[0].request_id;c.push((0,Ae.put)((0,O.deleteRecord)({name:"messages",id:p})));var g=Gr(Gr({},i[p]),{},{translateStatus:Bs(e)?T.TranslationStatus.SHOW:T.TranslationStatus.FAILED}),f=i[l]?null:(0,T.deepMerge)(g,e);return f&&f.retryRequestId&&(f.original_request_id=p),f}return null})).filter(Boolean),l.length){v.next=22;break}return v.abrupt("return");case 22:return v.next=24,(0,Ae.call)(O.updateOrReplaceAction,i,l,"messages");case 24:return v.next=26,(0,Ae.put)(ms({conversationId:t,requestIdToMessageId:l.reduce((function(e,t){return t.original_request_id?Gr(Gr({},e),{},o({},t.original_request_id,t.id)):Gr(Gr({},e),{},o({},t.request_id,t.id))}),{})}));case 26:return l.sort((function(e,t){return t.id-e.id})),v.next=29,(0,Ae.all)(c);case 29:return u=l[0],d=u.id,p=u.created_at,g=u.created_timestamp,f=u.type,A=u.message_option,h=u.to_shop_id,m=(0,T.fillMessagePreview)(l[0]),E=m.content,v.next=33,(0,Ae.put)((0,O.updateRecord)({name:"conversations",id:t,record:{latest_message_id:d,latest_message_type:f,latest_message_content:E,latest_message_to_shop_id:h,last_message_time:p,last_message_option:A,last_message_time_nano:(0,T.getTimestampNano)(g),max_general_option_hide_time:g,crm_message_preview:{},unread_count:0,flag:"normal"}}));case 33:case"end":return v.stop()}}),kr)}function Rs(e){return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ae.put)((0,O.showModal)({type:"CONFIRM_MODAL",actions:{confirm:{label:{key:"common.ok"},handler:function(){sn.store.dispatch((0,O.closeModal)())}}},additions:{content:{key:"faq.expired".concat(e?".chat_with_seller":"")},modalStyle:{width:"348px",minWidth:"348px"},contentStyle:{paddingBottom:0,lineHeight:"20px"},confirmStyle:{width:"auto",padding:"0 16px",height:"32px",lineHeight:"32px"}}}));case 2:case"end":return t.stop()}}),Rr)}function Ps(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R,P,D,N,j;return fe().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:if(t=e.conversationId,n=e.requestIds,r=e.messages,s=e.more,o=(a=void 0===s?{}:s).isRedirect,i=a.isCancelable,c=a.isFakingSource,r[0].content.type===zr||r[0].type===Zr){F.next=5;break}return F.next=5,(0,Ae.put)(Es({conversationId:t,requestIds:n,isCancelable:i}));case 5:if(!c){F.next=7;break}return F.abrupt("return");case 7:if(l=r.length,F.t0=!i,!F.t0){F.next=12;break}return F.next=12,(0,Ae.spawn)(Is,t,n);case 12:return u=0,d=[],p=[],g=[],F.next=18,(0,Ae.select)(O.networkStatusSelector);case 18:return f=F.sent,F.next=21,(0,Ae.call)(T.getItem,"device_id");case 21:if(A=F.sent,"offline"!==f){F.next=28;break}h=r.map((function(e){return Gr(Gr({},e),{},{requestId:e.request_id})})),g.push.apply(g,pe(h)),p.push.apply(p,pe(h)),F.next=57;break;case 28:if(!(u<l)){F.next=57;break}return m=r[u],F.next=32,(0,Ae.call)(ws,m,t);case 32:if(E=F.sent,v=void 0,E){F.next=39;break}v=Gr(Gr({},m),{},{requestId:m.request_id}),p.push(v),F.next=54;break;case 39:return F.next=41,(0,Ae.call)(Os,m,o,A);case 41:if(!(v=F.sent).errorCode){F.next=52;break}if(S=m.type,_=m.content,!(S===Vr&&_&&_.type===zr||S===Zr)){F.next=49;break}return F.next=47,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:v.error}));case 47:F.next=50;break;case 49:p.push(v);case 50:F.next=53;break;case 52:d.push(v);case 53:v.error&&v.error.offlineError&&g.push(v);case 54:u++,F.next=28;break;case 57:if(!d.length){F.next=61;break}return d.forEach((function(e){e.send_status=T.MessageSendStatus.SUCCEED})),F.next=61,(0,Ae.call)(ks,d,t);case 61:if(!p.length){F.next=118;break}return F.next=64,(0,Ae.select)(O.currentConversationIdSelector);case 64:if(F.sent!==t){F.next=78;break}if(y=p.find((function(e){return e.errorCode===us})),!y){F.next=72;break}return F.next=70,(0,Ae.put)((0,O.updateCaptchaVisible)({visible:!0,resendMessagePayload:{conversationId:t,messageId:y.id}}));case 70:F.next=78;break;case 72:if(C=[ts,ss],b=p.find((function(e){return C.includes(e.errorCode)})),F.t1=b,!F.t1){F.next=78;break}return F.next=78,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:b.error}));case 78:return M=[],p.forEach((function(e){var t=e.errorCode,n=e.error,r=e.request_id,s=e.type,a=e.content,o=e.to_id,i=e.from_id,c=e.shop_id,l=e.conversation_id,u=e.message_option;t===rs&&M.push((0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:n})));var d={errorCode:t,translateStatus:T.TranslationStatus.FAILED,retryRequestId:me()()};s===Wr&&(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,trackerName:"impressionResendVideo",data:{message_id:0,conversation_id:l,is_sender:!0,from_user_id:i,to_user_id:o,video_original_duration:a.duration_seconds},shopId:c}),(s===Yr&&t===as||[Wr,Hr].includes(s))&&(d.content=a),(0,T.hasTargetMessageOption)(u,T.MessageOption.MSG_OPT_CENSORED_BLACKLIST)&&(d.message_option=u),M.push((0,Ae.put)((0,O.updateRecord)({name:"messages",id:r,record:d})))})),F.next=82,(0,Ae.all)(M);case 82:return x=p.map((function(e){return e.requestId})),F.next=85,(0,Ae.put)(Ss({conversationId:t,requestIds:x}));case 85:if(I=[os,ls,ds,cs,ps,gs,fs],w=p.find((function(e){return I.includes(e.errorCode)})),!w){F.next=118;break}return F.next=90,(0,Ae.select)(O.currentConversationShopSelectors);case 90:B=F.sent,k=(B||{}).country,R=k&&k.toLowerCase(),F.t2=w.errorCode,F.next=F.t2===os?96:F.t2===cs?102:F.t2===ps?105:F.t2===gs?108:F.t2===fs?111:114;break;case 96:return F.next=98,(0,Ae.select)((0,O.getMessageSelector)(w.request_id));case 98:return P=F.sent,F.next=101,(0,Ae.put)((0,O.showModal)({type:"Cancel_ORDER_WARNING_MODAL",title:{key:"cancel_order.modal.title"},additions:{content:{key:"cancel_order.modal.content"},region:R||"sg"},actions:{cancel:{label:{key:"cancel_order.modal.send_it"},handler:function(){sn.store.dispatch((0,O.closeModal)());var e=Ms(P,!0);sn.store.dispatch(Tn({conversationId:t,message:e}))}},confirm:{label:{key:"cancel_order.modal.not_send"},handler:function(){sn.store.dispatch((0,O.closeModal)());var e=Ms(P,!1);sn.store.dispatch(Tn({conversationId:t,message:e}))}}}}));case 101:return F.abrupt("break",118);case 102:return F.next=104,(0,Ae.put)((0,O.showModal)({type:"CONFIRM_MODAL",additions:{content:{key:"label.exceed.daily.limit.warning"}},actions:{confirm:{label:{key:"label.modal.confirm"},handler:function(){return sn.store.dispatch((0,O.closeModal)())}}}}));case 104:return F.abrupt("break",118);case 105:return F.next=107,(0,Ae.put)((0,O.showModal)({type:"SPAMMER_MODAL",title:{key:"modal.translation_spammer.title"},additions:{content:{key:"modal.translation_spammer.content"},region:R||"sg"},actions:{confirm:{label:{key:"common.ok"},handler:function(){return sn.store.dispatch((0,O.closeModal)())}}}}));case 107:return F.abrupt("break",118);case 108:return F.next=110,(0,Ae.spawn)(Rs,!0);case 110:return F.abrupt("break",118);case 111:return F.next=113,(0,Ae.spawn)(Rs,!1);case 113:return F.abrupt("break",118);case 114:return D=w.errorCode===ds,N='<a style="color: #395692" target="blank" href="'.concat((0,T.getShopeeCustomerService)(R),'">').concat(Ir("text.shopee_cs"),"</a>"),F.next=118,(0,Ae.put)((0,O.showModal)({type:"CONFIRM_MODAL",title:{key:"modal.title.".concat(D?"common_error":"untrusted_network")},additions:{withCloseIcon:!0,renderContentAsHtml:!0,content:Ir("modal.content.".concat(D?"common_error_hint":"untrusted_network"),{someone:N})},actions:{confirm:{label:{key:"common.ok"}}}}));case 118:if(!g.length){F.next=123;break}return j=g.map((function(e){return e.requestId})),F.next=122,(0,Ae.put)(qn({conversationId:t,requestIds:j}));case 122:(0,O.networkJudge)();case 123:case"end":return F.stop()}}),Pr)}var Ds=[Qr,Xr,Kr,Jr,$r,es];function Ns(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R,P,D,N,j,F,L,q,G,U,H,Y,V;return fe().wrap((function(W){for(;;)switch(W.prev=W.next){case 0:if(n=e.payload,r=n.id,s=n.conversationId,a=n.messages,o=n.more,i=null===(t=a[0])||void 0===t?void 0:t.type,!Ds.includes(i)){W.next=18;break}return W.next=5,(0,Ae.select)(O.currentFaqSessionInfoSelector);case 5:if(l=W.sent,u=l.faqSessionId,d=l.sessionExpiryTime,void 0!==u){W.next=12;break}return W.next=11,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:null}));case 11:case 17:case 29:return W.abrupt("return");case 12:if(p=(null===(c=a[0])||void 0===c?void 0:c.content)||{},g=p.faq_session_id,xr(u,g,d)){W.next=18;break}return f="0"===d||u===g&&(new Date).getTime()>d/1e6,W.next=17,(0,Ae.spawn)(Rs,f);case 18:if(!(0,T.checkIsScChat)()){W.next=21;break}return W.next=21,(0,Ae.put)((0,O.reportRequested)({event_time:(Date.parse(new Date)/1e3).toString(),url:window.location.href}));case 21:return W.next=23,(0,Ae.select)((0,O.getConversation)(s));case 23:if(A=W.sent,h=A.to_id,m=o.isResend,E=o.isFakingSource,!m){W.next=30;break}return W.next=29,Ps({conversationId:s,messages:a,requestIds:[a[0].request_id],more:{isCancelable:!!r}});case 30:return W.next=32,(0,Ae.select)(O.inlocationSelector);case 32:return v=W.sent,W.next=35,(0,Ae.select)(O.inScrollToMessageSelector);case 35:return S=W.sent,W.next=38,(0,Ae.select)(O.isNavigateToUnreadMessageSelector);case 38:if(_=W.sent,!(v||S||_)){W.next=57;break}if(W.t0=_,!W.t0){W.next=45;break}return W.next=45,(0,Ae.put)((0,O.setNavigateToUnreadMessage)({isNavigateToUnreadMessage:!1}));case 45:if(W.t1=S,!W.t1){W.next=49;break}return W.next=49,(0,Ae.put)(mn({inScrollToMessage:!1}));case 49:if(W.t2=v,!W.t2){W.next=53;break}return W.next=53,(0,Ae.put)((0,O.updateLocationMode)({inlocation:!1}));case 53:return W.next=55,(0,Ae.put)(Xn({conversationId:s}));case 55:return W.next=57,(0,Ae.call)(Jt,{payload:{conversationId:s,reset:!0,source:T.MessageSource.SEND}});case 57:return W.next=59,(0,Ae.select)(O.entryPointSelector);case 59:return y=W.sent,W.next=62,(0,Ae.call)(T.getItem,Ur);case 62:return C=W.sent,b=A.shop_id,M=a.map((function(e){var t;return be({id:r,recipientID:h,message:e,redirectInfo:C,conversationId:s,replyToMessageId:null==e||null===(t=e.replyToMessage)||void 0===t?void 0:t.id,shopId:b,entryPoint:y})})),W.next=67,(0,Ae.select)(O.currentUserIdSelector);case 67:return x=W.sent,W.next=70,(0,Ae.select)(O.currentUserSelector);case 70:return I=W.sent,w=M.map((function(e,t){var n,r=Gr({},e);r.from_id=x;var s,o=r.type,i=r.content;if(["product","order","voucher"].includes(o)){var c="".concat(o,"_id"),l=i[c],u=a.find((function(e){return e.content[c]===l}));u&&(r.textContent=u.textContent)}else o===Yr&&(r.translateStatus=T.TranslationStatus.PENDING);return null!==(n=a[t])&&void 0!==n&&n.replyToMessage&&(r.quoted_msg=null===(s=a[t])||void 0===s?void 0:s.replyToMessage),r.from_user_name=I.username||I.name,r})),W.next=74,(0,Ae.select)(O.curConvsMessageSelector);case 74:if(B=W.sent,k=B.filter((function(e){return e.hasMessageSource&&!e.isFaking})),R=B.filter((function(e){return e.hasMessageSource&&e.isFaking})),P=k.length,!(D=R.length)){W.next=86;break}return N=[],j=R[D-1],E||(w[0].sourceContent=j.sourceContent),R.forEach((function(e){N.push((0,Ae.put)((0,O.deleteRecord)({name:"messages",id:e.id})))})),W.next=86,(0,Ae.all)(N);case 86:return F=(0,O.normalize)("messages",w),W.next=89,(0,Ae.put)((0,O.updateEntities)({entities:F.entities}));case 89:if(!E){W.next=98;break}if(L=w[0]||{},q=L.source_content||{},G=k[P-1],U=(null==G?void 0:G.source_content)||{},H=U.shop_id,Y=U.product_id,V=U.order_id,q.shop_id!==H||q.product_id!==Y||q.order_id!==V){W.next=96;break}return W.abrupt("return");case 96:return W.next=98,(0,Ae.call)(St,w);case 98:return W.next=100,Ps({conversationId:s,messages:M,requestIds:F.result,more:{isRedirect:!!C,isCancelable:!!r,isFakingSource:E}});case 100:case"end":return W.stop()}}),Dr)}function js(){var e,t;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,Ae.select)(O.messagesRelatedMapSelector);case 2:return e=n.sent,t=[],Object.entries(e).forEach((function(e){var n=(0,rn.Z)(e,2),r=n[0],s=n[1].sending||[];s.length&&t.push((0,Ae.put)(Ss({conversationId:r,requestIds:s})))})),n.next=7,(0,Ae.all)(t);case 7:case"end":return n.stop()}}),Nr)}function Fs(e){var t,n,r;return fe().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.id,r=t.conversationId,s.next=3,(0,Ae.put)(Cs({id:n,conversationId:r}));case 3:return s.next=5,(0,Ae.put)((0,O.deleteRecord)({name:"messages",id:n}));case 5:case"end":return s.stop()}}),jr)}function Ls(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,O.takeEveryWithCancel)(hs,Ns,Cs);case 2:case"end":return e.stop()}}),Fr)}function qs(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(ys,Fs);case 2:return e.next=4,(0,Ae.takeEvery)(bs,xs);case 4:return e.next=6,(0,Ae.takeLatest)(_s,js);case 6:case"end":return e.stop()}}),Lr)}const Gs=(o(Mr={},Es,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=n.isCancelable,i=e.messagesRelatedMap,c=i[r]||{},l=c.sending||[];l=a?l.concat(s):l;var u=c.all||[],d=c.failed||[];return Gr(Gr({},e),{},{messagesRelatedMap:Gr(Gr({},i),{},o({},r,Gr(Gr({},c),{},{all:s.reverse().filter((function(e){return!u.includes(e)})).concat(u),failed:d.filter((function(e){return!s.includes(e)})),sending:l})))})})),o(Mr,vs,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.sending||[],l=i.all||[],u=i.failed||[],d=s.filter((function(e){return l.includes(e)&&!u.includes(e)}));return Gr(Gr({},e),{},{messagesRelatedMap:Gr(Gr({},a),{},o({},r,Gr(Gr({},i),{},{sending:c.concat(d)})))})})),o(Mr,ms,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIdToMessageId,a=e.messagesRelatedMap,i=a[r]||{},c=(i.all||[]).map((function(e){return s[e]?s[e]:e})),l=i.sending||[];return Gr(Gr({},e),{},{messagesRelatedMap:Gr(Gr({},a),{},o({},r,Gr(Gr({},i),{},{all:c,offset:c[c.length-1],sending:l.filter((function(e){return!s.hasOwnProperty(e)}))})))})})),o(Mr,Ss,(function(e,t){var n=t.payload,r=n.conversationId,s=n.requestIds,a=e.messagesRelatedMap,i=a[r]||{},c=i.failed||[],l=i.sending||[];return Gr(Gr({},e),{},{messagesRelatedMap:Gr(Gr({},a),{},o({},r,Gr(Gr({},i),{},{sending:l.filter((function(e){return!s.includes(e)})),failed:c.concat(s)})))})})),o(Mr,Cs,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],l=i.sending||[];return Gr(Gr({},e),{},{messagesRelatedMap:Gr(Gr({},a),{},o({},s,Gr(Gr({},i),{},{all:c.filter((function(e){return e!==r})),sending:l.filter((function(e){return e!==r}))})))})})),Mr);var Us,Hs=P(4323).t,Ys=fe().mark(aa),Vs=fe().mark(oa),Ws=fe().mark(ca),zs=fe().mark(la),Zs=fe().mark(ua);function Qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qs(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ks=(0,le.createActions)((o(Us={},_e.TRANSLATE_MESSAGES_REQUESTED,(function(e){return{messageId:e.messageId,toggle:e.toggle,isIDAndPcmall:e.isIDAndPcmall}})),o(Us,_e.CHANGE_TRANSLATE_STATUS,(function(e){return{messageId:e.messageId,status:e.status,changeMidStatus:e.changeMidStatus}})),o(Us,_e.SHOW_TRANSLATE_FEEDBACK,(function(e){return{messageId:e.messageId,translationSource:e.translationSource}})),o(Us,_e.SEND_TRANSLATE_FEEDBACK,(function(e){return{quality:e.quality,messageId:e.messageId,translationModel:e.translationModel,feedbacks:e.feedbacks,otherSuggestion:e.otherSuggestion}})),Us)),Js=Ks.translateMessagesRequested,$s=Ks.changeTranslateStatus,ea=Ks.showTranslateFeedback,ta=Ks.sendTranslateFeedback,na=function(e,t){return(0,Ae.put)((0,O.updateRecord)({name:"messages",id:e,record:t}))};function ra(e,t,n,r,s,a,o,i,c,l){var u={step2_target_language:i,step2_translation_status:!!c},d=e||!s?Xs(Xs({},{step1_target_language:a,step1_translation_status:!!o}),u):u;(0,O.$tracker)({trackerName:"translationTryAgain",data:Xs({message_id:t,conversation_id:n,message_type:0,is_sender:r,original_language:l},d)})}function sa(e,t,n,r,s){var a=e||!s?{step1_translation_status:!1,step2_translation_status:!1}:{step2_translation_status:!1};(0,O.$tracker)({trackerName:"translationTryAgain",data:Xs({message_id:t,conversation_id:n,message_type:0,is_sender:r},a)})}function aa(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R,P,D;return fe().wrap((function(N){for(;;)switch(N.prev=N.next){case 0:return t=e.payload,n=t.messageId,r=t.toggle,s=t.isIDAndPcmall,N.next=3,(0,Ae.select)((0,O.getMessageSelector)(n));case 3:if(N.t0=N.sent,N.t0){N.next=6;break}N.t0={};case 6:return a=N.t0,o=a.conversation_id,N.next=10,(0,Ae.select)((0,O.getConversation)(o));case 10:return i=N.sent,c=i.shop_id,l=(0,T.getMessageIsSend)(a,i),u=a.content||{},d=u.text,p=u.translation,g=u.mid,f=(g||{}).text,N.prev=15,A={},r?A.toggleTranslateStatus=T.TranslationStatus.PENDING:A.translateStatus=T.TranslationStatus.PENDING,N.next=20,na(n,A);case 20:return N.next=22,(0,Ae.call)(O.fetch,{method:"POST",resource:"messages",suffix:"retry_translate",payload:JSON.stringify({shop_id:c,message_id:n,conversation_id:o})});case 22:if(h=N.sent,E=(m=h||{}).translated,v=m.middle_translated,_=(S=E||{}).translated_text,y=S.target_language,C=S.source_language,M=(b=v||{}).translated_text,x=b.target_language,I=b.source_language,B=(w=r?!!M:!!_)?T.TranslationStatus.SUCCEED:T.TranslationStatus.FAILED,k=r?{toggleTranslateStatus:B}:{translateStatus:B},R=r?Xs(Xs({},v),{},{text:M}):Xs(Xs({},E),{},{text:_}),P=w?R:Xs(Xs({},R),{},{text:""}),ra(r,n,o,l,f,x,M,y,_,I||C),s){N.next=37;break}return N.next=36,na(n,Xs(Xs({},k),{},{content:{text:d,translation:P,mid:Xs(Xs({},v),{},{text:M})}}));case 36:return N.abrupt("return");case 37:return N.next=39,na(n,Xs(Xs({},k),{},{content:{text:d,translation:r?p:P,mid:r?P:g}}));case 39:N.next=47;break;case 41:return N.prev=41,N.t1=N.catch(15),sa(r,n,o,l,f),D=r?{toggleTranslateStatus:T.TranslationStatus.FAILED}:{translateStatus:T.TranslationStatus.FAILED},N.next=47,na(n,Xs(Xs({},D),{},{content:{text:d,translation:r?p:Xs(Xs({},p),{},{text:""}),mid:r?Xs(Xs({},g),{},{text:""}):g}}));case 47:case"end":return N.stop()}}),Ys,null,[[15,41]])}function oa(e){var t,n,r,s,a;return fe().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.messageId,r=t.status,s=t.changeMidStatus,a=s?{toggleTranslateStatus:r}:{translateStatus:r},o.next=4,na(n,a);case 4:case"end":return o.stop()}}),Vs)}var ia={shopee_en:"local_en",shopee_cn:"cn_en",shopee_kr:"kr_en"};function ca(e){var t,n,r,s,a,o,i,c;return fe().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return t=e.payload,n=t.messageId,r=t.translationSource,l.next=3,(0,Ae.select)((0,O.getMessageSelector)(n));case 3:if(l.t0=l.sent,l.t0){l.next=6;break}l.t0={};case 6:return s=l.t0,a=s.conversation_id,l.next=10,(0,Ae.select)((0,O.getConversation)(a));case 10:return o=l.sent,i=o.shop_id,c=(0,T.getMessageIsSend)(s,o),l.next=15,(0,Ae.put)((0,O.showModal)({type:"EVALUTE_MODAL",title:{key:"modal.translation_feedback.title"},actions:{cancel:{label:{key:"common.cancel"},shape:"default",handler:function(){sn.store.dispatch((0,O.closeModal)())}},confirm:{label:{key:"common.submit"},handler:function(e){sn.store.dispatch((0,O.closeModal)()),sn.store.dispatch(ta(Xs({messageId:n,translationModel:ia[r]},e)))}}},additions:{trackerData:{data:{message_id:n,conversation_id:a,message_type:T.ApiMessageTypes[T.MessageTypes.MSG_TYPE_TEXT],is_sender:c},shopId:Number(i)}}}));case 15:case"end":return l.stop()}}),Ws)}function la(e){var t,n,r,s,a,o,i,c,l,u,d,p;return fe().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:return t=e.payload,n=t.quality,r=t.messageId,s=t.translationModel,a=t.feedbacks,o=t.otherSuggestion,g.prev=1,g.next=4,(0,Ae.select)((0,O.getMessageSelector)(r));case 4:if(g.t0=g.sent,g.t0){g.next=7;break}g.t0={};case 7:return i=g.t0,g.next=10,(0,Ae.select)(O.isSubAccountSelector);case 10:return c=g.sent,l=i.conversation_id,g.next=14,(0,Ae.select)((0,O.getConversation)(l));case 14:return u=g.sent,d=u.shop_id,p={quality:n,message_id:r,conversation_id:l,translation_model:s,feedbacks:a,other_suggestion:o,to_shop_id:String(i.from_shop_id)},c&&(p.shop_id=d.toString()),g.next=20,(0,Ae.call)(O.fetch,{method:"POST",resource:"translation",suffix:"feedback",payload:JSON.stringify(p)});case 20:return g.next=22,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({toast:{show:!0,type:"success",message:Hs("common.toast.translation_feedback")}}));case 22:g.next=26;break;case 24:g.prev=24,g.t1=g.catch(1);case 26:case"end":return g.stop()}}),zs,null,[[1,24]])}function ua(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Js,aa);case 2:return e.next=4,(0,Ae.takeEvery)($s,oa);case 4:return e.next=6,(0,Ae.takeEvery)(ea,ca);case 6:return e.next=8,(0,Ae.takeEvery)(ta,la);case 8:case"end":return e.stop()}}),Zs)}var da,pa,ga=fe().mark(ha),fa=fe().mark(ma),Aa=(0,le.createActions)(o({},_e.HANDLE_SENSITIVE_URL,(function(e){return{href:e.href}}))).handleSensitiveUrl;function ha(e){var t;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.href,n.next=3,(0,Ae.put)((0,O.showModal)({type:"CONFIRM_MODAL",title:{key:"common.navigation.cofirm_titile"},actions:{cancel:{label:{key:"common.cancel"},handler:function(){sn.store.dispatch((0,O.closeModal)())}},confirm:{label:{key:"common.navigation.confirm"},handler:function(){sn.store.dispatch((0,O.closeModal)());var e=window.open();e.opener=null,e.location=t}}},additions:{content:{key:"common.navigation.cofirm_content"},modalStyle:{width:"352px"},contentStyle:{paddingTop:"8px",paddingBottom:"13px"}}}));case 3:case"end":return n.stop()}}),ga)}function ma(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Aa,ha);case 2:case"end":return e.stop()}}),fa)}function Ea(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function va(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ea(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ea(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Sa=fe().mark(Ta),_a=fe().mark(Oa),ya=(0,le.createActions)((o(da={},_e.FETCH_FAQ_MESSAGES_REQUESTED,(function(e){var t=e.sourceId,n=e.shopId,r=e.reset;return{sourceId:t,shopId:n,reset:void 0!==r&&r}})),o(da,_e.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e){var t=e.messageIds,n=e.sourceId,r=e.faqHistoryStatus,s=e.offset,a=e.hasMore;return{messageIds:t,sourceId:n,faqHistoryStatus:r,offset:s,hasMore:void 0===a||a}})),o(da,_e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e){return{status:e.status}})),o(da,_e.UPDATE_CURRENT_FAQ_ID,(function(e){return{id:e.id}})),o(da,_e.SHOW_FAQ_HISTORY_MODAL,(function(e){return{sourceId:e.sourceId,shopId:e.shopId}})),da)),Ca=ya.fetchFaqMessagesRequested,ba=ya.fetchFaqMessagesSucceeded,Ma=ya.updateFetchFaqMessagesRequestedStatus,xa=ya.updateCurrentFaqId,Ia=ya.showFaqHistoryModal,wa=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return new Promise((function(s,a){(0,O.fetch)({parent:"conversation",resource:"bundle_message",params:{shop_id:t,offset:n,limit:r,source_id:e}}).then((function(e){var t=e.bundle_message,n=e.total;Re(t),s({messages:t,total:n})})).catch((function(e){a(e)}))}))};function Ta(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A;return fe().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:return t=e.payload,n=t.sourceId,r=t.shopId,s=t.reset,h.prev=1,h.next=4,(0,Ae.put)(xa({id:n}));case 4:return h.next=6,(0,Ae.select)(O.currentFaqHistorySeletor);case 6:if(a=h.sent,o=a.offset,i=void 0===o?0:o,!(void 0!==(c=a.hasMore)&&!c||s&&i)){h.next=13;break}return h.abrupt("return",null);case 13:return h.next=15,(0,Ae.put)(Ma({status:s?T.DataFetchStatus.INIT_PENDING:T.DataFetchStatus.PENDING}));case 15:return h.next=17,wa(n,r,i);case 17:return l=h.sent,u=l.messages,d=l.total,p=i+u.length,u.sort((function(e,t){return Me(e.id,t.id)})),u=u.filter((function(e){return"webview"!==e.type})),g=(0,O.normalize)("messages",u),f=g.result,A=g.entities,h.next=26,(0,Ae.put)((0,O.updateEntities)({entities:A}));case 26:return h.next=28,(0,Ae.call)(St,u);case 28:return h.next=30,(0,Ae.put)(ba({sourceId:n,offset:p,hasMore:p<d,faqHistoryStatus:T.DataFetchStatus.SUCCEED,messageIds:f}));case 30:h.next=36;break;case 32:return h.prev=32,h.t0=h.catch(1),h.next=36,(0,Ae.put)(Ma({status:s?T.DataFetchStatus.INIT_FAILED:T.DataFetchStatus.FAILED}));case 36:case"end":return h.stop()}}),Sa,null,[[1,32]])}function Oa(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Ca,Ta);case 2:case"end":return e.stop()}}),_a)}const Ba=(o(pa={},_e.FETCH_FAQ_MESSAGES_SUCCEEDED,(function(e,t){var n=t.payload,r=n.messageIds,s=n.sourceId,a=n.faqHistoryStatus,i=n.offset,c=n.hasMore,l=e.faqHistoryHash,u=(l[s]||{all:[]}).all,d=Array.from(new Set(u.concat(r)));return va(va({},e),{},{faqHistoryHash:va(va({},l),{},o({},s,{all:d,offset:i,hasMore:c})),faqHistoryStatus:a})})),o(pa,_e.UPDATE_FETCH_FAQ_MESSAGES_REQUESTED_STATUS,(function(e,t){var n=t.payload.status;return va(va({},e),{},{faqHistoryStatus:n})})),o(pa,_e.UPDATE_CURRENT_FAQ_ID,(function(e,t){var n=t.payload.id;return va(va({},e),{},{faqId:n})})),pa);function ka(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ra(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){i=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(i)throw a}}}}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pa=fe().mark(so),Da=fe().mark(ao),Na=fe().mark(oo),ja=fe().mark(io),Fa=fe().mark(co),La=fe().mark(uo),qa=fe().mark(po);function Ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ga(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ga(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ha,Ya=T.MessageTypes.MSG_TYPE_OFFER,Va=T.MessageTypes.MSG_TYPE_VIDEO,Wa=T.MessageTypes.MSG_TYPE_NOTIFICATION,za=(0,le.createActions)({RECEIVE_MESSAGE_REQUESTED:function(e){return{message:e.message}},RECEIVE_MESSAGE_SUCCEEDED:function(e){return{conversationId:e.conversationId,message:e.message}},RESET_NEW_CONVERSATION_QUEUE:function(){return{}},RESET_OLD_CONVERSATION_QUEUE:function(){return{}},RESET_CONVERSATION_QUEUE:function(){return{}}}),Za=za.receiveMessageRequested,Qa=za.receiveMessageSucceeded,Xa=za.resetNewConversationQueue,Ka=za.resetOldConversationQueue,Ja=za.resetConversationQueue,$a=2e3,eo=$a,to=$a,no=[],ro=[];function so(e){var t,n,r,s,a,o,i,c,l,u,d;return fe().wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(t=e.content,n=e.from_id,r=e.send_by_yourself,s=e.conversation_id,o=(a=t||{}).offer_id,i=a.model_id,c=a.shop_id,l=a.product_id,r){p.next=5;break}return p.next=5,(0,Ae.put)((0,O.getPendingOffersCountRequested)({buyerId:n,shopId:c,productId:l}));case 5:return u=[],d={},p.next=9,(0,Ae.select)((0,O.relatedOfferIdsSelector)(s,i,o,l));case 9:return p.sent.forEach((function(e){var t=e.id;d[t]=Ua(Ua({},e),{},{status:T.OfferStatus.CANCELLED})})),u.push((0,Ae.put)((0,O.batchUpdateRecord)({name:"offers",records:d}))),p.next=14,(0,Ae.all)(u);case 14:case"end":return p.stop()}}),Pa)}function ao(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v,S,_,y,C,b,M,x,I,w,B,k,R,P,D,N,j;return fe().wrap((function(F){for(;;)switch(F.prev=F.next){case 0:return t=e.payload.message,n=t.id,r=t.type,s=t.request_id,a=t.conversation_id,o=t.send_by_yourself,t.content,i=t.created_timestamp,c=t.to_shop_id,Be.includes(r)&&Re(t),F.next=5,(0,Ae.select)((function(e){return e.conversationReducer}));case 5:return l=F.sent,u=l.conversationIdsMap,d=l.currentConversationId,p=l.currentConversationCanRead,F.next=11,(0,Ae.select)((0,O.getConversation)(a));case 11:if(g=F.sent,f=g.id&&void 0!==g.faking,u&&u[a.toString()]||f){F.next=18;break}no.push(t),F.next=106;break;case 18:if(r!==Ya){F.next=22;break}return F.next=22,(0,Ae.call)(so,t);case 22:if(A=d===a,h=(0,T.getChatBotParams)(t,{updateMaxGeneralOptionHideTime:o}),m=(0,T.getCrmPreviewParams)(t),!A){F.next=105;break}return F.next=28,(0,Ae.select)(O.curConvsMessageSelector);case 28:if(E=F.sent,!o){F.next=74;break}v=!1,S=!1,_=!1,y=ka(E),F.prev=34,y.s();case 36:if((C=y.n()).done){F.next=46;break}if(b=C.value,M=b.id,x=b.retryRequestId,S=M===s,_=x===s,!((v=M===n)||S||_)){F.next=44;break}return F.abrupt("break",46);case 44:F.next=36;break;case 46:F.next=51;break;case 48:F.prev=48,F.t0=F.catch(34),y.e(F.t0);case 51:return F.prev=51,y.f(),F.finish(51);case 54:if(v){F.next=72;break}if(!S&&!_){F.next=60;break}return F.next=58,(0,Ae.call)(ks,[t],a);case 58:F.next=72;break;case 60:return F.next=62,(0,Ae.call)(O.updateOrReplaceAction,E,[t],"messages",["content"]);case 62:return F.next=64,(0,Ae.call)(St,[t],{sync:!0});case 64:return F.next=66,(0,Ae.select)((0,O.getMessageSelector)(t.id));case 66:return I=F.sent,w=(0,T.fillMessagePreview)(I),B=w.content,F.next=70,(0,Ae.put)((0,O.updateRecord)({name:"conversations",id:a,record:Ua(Ua({latest_message_id:n,latest_message_type:r,latest_message_content:B,latest_message_to_shop_id:c,last_message_time_nano:(0,T.getTimestampNano)(i)},h),m)}));case 70:return F.next=72,(0,Ae.put)(Qa({conversationId:a,message:t}));case 72:F.next=97;break;case 74:if(r!==Va){F.next=77;break}return F.next=77,(0,Ae.put)(pr({id:s,info:{shouldPreload:!0}}));case 77:return F.next=79,(0,Ae.call)(O.updateOrReplaceAction,E,[t],"messages",["content"]);case 79:return F.next=81,(0,Ae.call)(St,[t],{sync:!0});case 81:return F.next=83,(0,Ae.select)((0,O.getMessageSelector)(t.id));case 83:return k=F.sent,R=(0,T.fillMessagePreview)(k),P=R.content,F.next=87,(0,Ae.select)(O.currentConversationSelector);case 87:if(D=F.sent,N=D.unread_count,j=p?N:N+1,0!==N||p||r===Wa){F.next=93;break}return F.next=93,(0,Ae.spawn)(O.handleUnreadCountChangeAction,(0,O.updateUnreadCount)({type:O.unreadCountActions.RECEIVE_UNREADABLE_MESSAGE,conversation:D}));case 93:return F.next=95,(0,Ae.put)((0,O.updateRecord)({name:"conversations",id:a,record:Ua(Ua({unread_count:j,latest_message_id:n,latest_message_type:r,latest_message_content:P,latest_message_to_shop_id:c,last_message_time_nano:(0,T.getTimestampNano)(i)},h),m)}));case 95:return F.next=97,(0,Ae.put)(Qa({conversationId:a,message:t}));case 97:if(!f){F.next=100;break}return F.next=100,(0,Ae.call)(O.fetchConversationsRequestedSaga,(0,O.fetchConversationsRequested)({direction:"latest"}));case 100:if(o||!p){F.next=103;break}return F.next=103,(0,Ae.call)(O.markMessagesRequestedSaga,(0,O.markMessagesRequested)({conversationId:a,isRead:!0,latestMessageId:n}));case 103:F.next=106;break;case 105:ro.push(t);case 106:case"end":return F.stop()}}),Da,null,[[34,48,51,54]])}function oo(){var e,t,n,r,s,a,o,i=arguments;return fe().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=i.length>0&&void 0!==i[0]&&i[0],!(t=no.length)){c.next=19;break}return c.next=5,(0,Ae.select)(O.isSubAccountSelector);case 5:return n=c.sent,r=no.splice(0,t).sort((function(e,t){return e.created_timestamp-t.created_timestamp})),c.next=9,(0,Ae.select)((function(e){return e.conversationReducer}));case 9:if(s=c.sent,a=s.maxLatestTimestampNano,o=s.maxLatestReceivedMessageId,!(n?(0,T.greaterThan)(r[0].id,o):a<=r[0].created_timestamp*Math.pow(10,9))){c.next=19;break}return c.next=16,(0,Ae.call)(O.fetchConversationsRequestedSaga,(0,O.fetchConversationsRequested)({direction:"latest"}));case 16:if(!e){c.next=19;break}return c.next=19,(0,Ae.spawn)(O.handleUnreadCountChangeAction,(0,O.updateUnreadCount)({type:O.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 19:case"end":return c.stop()}}),Na)}function io(){var e,t;return fe().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,(0,Ae.delay)(eo);case 3:if(e=no.length){n.next=8;break}eo=8e3===eo?eo:2*eo,n.next=20;break;case 8:if(eo=$a,t=no[e-1].id,Ha===t){n.next=14;break}return Ha=t,n.next=14,(0,Ae.spawn)(O.handleUnreadCountChangeAction,(0,O.updateUnreadCount)({type:O.unreadCountActions.REFRESH_TOTAL_UNREAD_CONVERSATION_COUNT}));case 14:return n.next=16,(0,Ae.select)(O.showChatWindowSelector);case 16:if(!n.sent){n.next=20;break}return n.next=20,(0,Ae.call)(oo,!0);case 20:n.next=0;break;case 22:case"end":return n.stop()}}),ja)}function co(){var e;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,(0,Ae.delay)(to);case 3:if(e=ro.length){t.next=8;break}to=8e3===to?to:2*to,t.next=9;break;case 8:return t.delegateYield(fe().mark((function t(){var n,r,s,a,o,i;return fe().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,Ae.put)((0,O.updateFetchConversationsDirection)({direction:"latest"}));case 2:return n=ro.splice(0,e),to=$a,r=Array.from(new Set(n.map((function(e){return e.conversation_id})))),t.next=7,(0,Ae.select)((0,O.getConversations)(r));case 7:return s=t.sent,a={},o=0,n.forEach((function(e){var t=e.id,n=e.type,r=e.content,i=e.created_timestamp,c=e.conversation_id,l=e.send_by_yourself,u=e.to_shop_id,d=(0,T.getChatBotParams)(e,{updateMaxGeneralOptionHideTime:l}),p=(0,T.getCrmPreviewParams)(e),g=Ua(Ua({latest_message_id:t,latest_message_type:n,latest_message_content:r,latest_message_to_shop_id:u,last_message_time_nano:(0,T.getTimestampNano)(i)},d),p),f=a[c],A=!l&&n!==Wa;if(f)t>f.latest_message_id?a[c]=Ua(Ua(Ua({},f),g),{},{unread_count:A?f.unread_count+1:f.unread_count}):a[c]=Ua(Ua({},f),{},{unread_count:A?f.unread_count+1:f.unread_count});else{var h=s.find((function(e){return e.id===c}))||{},m=h.unread_count,E=void 0===m?0:m;h.shop_id,a[c]=Ua(Ua({},g),{},{unread_count:A?E+1:E}),A&&0===E&&(o+=1)}})),i=Object.keys(a).map((function(e){return Ua(Ua({},a[e]),{},{id:e})})),t.next=14,(0,Ae.call)(O.fetchMessagePreview,{list:i,conversationId:1===i.length&&i[0].id,handleSave:function(e){var t=e.records;Object.keys(t).forEach((function(e){var n=a[e];n&&(a[e]=Ua(Ua({},n),{},{latest_message_content:t[e]}))}))}});case 14:return t.next=16,(0,Ae.put)((0,O.batchUpdateRecord)({name:"conversations",records:a,checkProp:"latest_message_id"}));case 16:return t.next=18,(0,Ae.spawn)(O.handleUnreadCountChangeAction,(0,O.updateUnreadCount)({type:O.unreadCountActions.MESSAGE_QUEUE_UPDATE,messageQueueUpdate:{totalIncrease:o}}));case 18:case"end":return t.stop()}}),t)}))(),"t0",9);case 9:t.next=0;break;case 11:case"end":return t.stop()}}),Fa)}function lo(){var e=no.length,t=ro.length;e&&no.splice(0,e),t&&ro.splice(0,t)}function uo(e){var t,n,r,s,a,o,i,c,l,u,d,p;return fe().wrap((function(g){for(;;)switch(g.prev=g.next){case 0:if(!(t=ro.filter((function(t){return t.conversation_id===e}))).length){g.next=15;break}return t.forEach((function(e){var t=ro.findIndex((function(t){return t.id===e.id}));ro.splice(t,1)})),n=t.sort((function(e,t){return t.latest_message_id-e.latest_message_id})),r=n[0],s=r.id,a=r.type,o=r.content,i=r.created_timestamp,c=r.send_by_yourself,l=(0,T.getChatBotParams)(r,{updateMaxGeneralOptionHideTime:c}),u=(0,T.getCrmPreviewParams)(r),d=o,g.next=11,(0,Ae.call)(O.fetchMessagePreview,{list:[r],conversationId:e,handleSave:function(e){var t=e.records,n=Object.keys(t)[0];n===s&&(d=Ua(Ua({},o),t[n]))}});case 11:return p=Ua(Ua({latest_message_id:s,latest_message_type:a,latest_message_content:d,last_message_time_nano:(0,T.getTimestampNano)(i)},l),u),g.next=14,(0,Ae.put)((0,O.updateRecord)({name:"conversations",id:e,record:p}));case 14:return g.abrupt("return",s);case 15:return g.abrupt("return",null);case 16:case"end":return g.stop()}}),La)}function po(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Za,ao);case 2:return e.next=4,(0,Ae.takeEvery)(Ja,lo);case 4:case"end":return e.stop()}}),qa)}const go=o({},Qa,(function(e,t){var n,r=t.payload,s=r.conversationId,a=r.message,i=a.id,c=a.request_id,l=e.messagesRelatedMap,u=l[s]||{},d=u.all,p=void 0===d?[]:d,g=u.sending,f=void 0===g?[]:g;return n=p.includes(i)?p:[i].concat(p).filter((function(e){return e!==c})),Ua(Ua({},e),{},{messagesRelatedMap:Ua(Ua({},l),{},o({},s,Ua(Ua({},u),{},{all:n,sending:f.filter((function(e){return!f.includes(c)}))})))})}));var fo=P(4323).t;function Ao(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ao(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ao(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var mo,Eo=fe().mark(Io),vo=fe().mark(wo),So=fe().mark(To),_o=fe().mark(Oo),yo=fe().mark(Bo);mo="mini-sc_redirect";var Co=(0,le.createActions)({DELETE_MESSAGE_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_POST_REQUESTED:function(e){return{messageId:e.messageId}},DELETE_MESSAGE_ID_IN_HASH:function(e){return{id:e.id,conversationId:e.conversationId}}}),bo=Co.deleteMessageRequested,Mo=Co.deleteMessagePostRequested,xo=Co.deleteMessageIdInHash;function Io(e){var t,n,r,s;return fe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.conversationId,a.next=3,(0,Ae.select)((0,O.getConversationFakingMessages)(t));case 3:if(!(n=a.sent).length){a.next=13;break}return r=[],n.forEach((function(e){r.push((0,Ae.call)(wo,{id:e.id,conversationId:t}))})),a.next=9,(0,Ae.all)(r);case 9:return a.next=11,(0,Ae.call)(T.getItem,mo);case 11:(null==(s=a.sent)?void 0:s.conversationId)===t&&(0,T.removeItem)(mo);case 13:case"end":return a.stop()}}),Eo)}function wo(e){var t,n;return fe().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.id,n=e.conversationId,r.next=3,(0,Ae.put)(xo({id:t,conversationId:n}));case 3:return r.next=5,(0,Ae.put)((0,O.deleteRecord)({name:"messages",id:t}));case 5:case"end":return r.stop()}}),vo)}function To(e){var t,n,r,s;return fe().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.messageId,a.next=3,(0,Ae.select)((0,O.getMessageSelector)(t));case 3:return n=a.sent,r=n.type,s=n.conversation_id,a.next=7,(0,Ae.put)((0,O.showModal)({type:"CONFIRM_MODAL",title:{key:"message.delete.title"},actions:{cancel:{label:fo("common.cancel"),handler:function(){sn.store.dispatch((0,O.closeModal)()),(0,O.$tracker)({trackerName:"cancelConfirm",data:{message_id:t,message_type:(0,T.getReplyTrackerMessageType)(r),conversation_id:s}})}},confirm:{label:fo("common.confirm"),handler:function(){sn.store.dispatch((0,O.closeModal)()),sn.store.dispatch(Mo({messageId:t})),(0,O.$tracker)({trackerName:"deleteConfirm",data:{message_id:t,message_type:(0,T.getReplyTrackerMessageType)(r),conversation_id:s}})}}}}));case 7:case"end":return a.stop()}}),So)}function Oo(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E;return fe().wrap((function(v){for(;;)switch(v.prev=v.next){case 0:return t=e.payload.messageId,v.prev=1,v.next=4,(0,Ae.select)(O.deleteConfigSelector);case 4:return n=v.sent,v.next=7,(0,Ae.select)((0,O.getMessageSelector)(t));case 7:return r=v.sent,v.next=10,(0,Ae.call)(O.fetch,{method:"POST",parent:"messages",resource:"delete",payload:JSON.stringify({msg_id:t,type:r.type,delete_config_version:n.deleteConfigVersion})});case 10:return s=v.sent,a=r.message_option|T.MessageOption.MSG_OPT_DELETE,o=(0,O.normalize)("messages",ho(ho({},r),{},{message_option:a})),i=o.entities,v.next=15,(0,Ae.put)((0,O.updateEntities)({entities:i}));case 15:return v.next=17,(0,Ae.select)((0,O.getConversation)(r.conversation_id));case 17:if((c=v.sent).latest_message_id!==r.id){v.next=22;break}return l=(0,O.normalize)("conversations",ho(ho({},c),{},{last_message_option:a,latest_message_content:{text:""},latest_message_from_id:r.from_id})),u=l.entities,v.next=22,(0,Ae.put)((0,O.updateEntities)({entities:u}));case 22:if(d=s.config_version,n.deleteConfigVersion!==d){v.next=25;break}return v.abrupt("return");case 25:return v.next=27,(0,Ae.select)(O.currentUserSelector);case 27:return p=v.sent,g=(s.region_config||[]).find((function(e){return e.region===p.country})),f=!1,A=0,g&&g.duration&&(f=!0,A=g.duration),v.next=34,(0,Ae.put)((0,O.updateDelPermission)({hasDeletePermission:f,deleteConfigVersion:d,deleteConfigDuration:A}));case 34:v.next=45;break;case 36:return v.prev=36,v.t0=v.catch(1),v.next=40,(0,Ae.select)((0,O.getMessageSelector)(t));case 40:return h=v.sent,m=h.type,E=h.conversation_id,v.next=44,(0,Ae.call)(O.setToastInformationSaga,(0,O.setToastInformation)({error:v.t0}));case 44:(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,trackerName:"error",data:{message_id:t,message_type:(0,T.getReplyTrackerMessageType)(m),conversation_id:E,error_reason:v.t0.message}});case 45:case"end":return v.stop()}}),_o,null,[[1,36]])}function Bo(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(bo,To);case 2:return e.next=4,(0,Ae.takeEvery)(Mo,Oo);case 4:case"end":return e.stop()}}),yo)}const ko=o({},xo,(function(e,t){var n=t.payload,r=n.id,s=n.conversationId,a=e.messagesRelatedMap,i=a[s]||{},c=i.all||[],l=i.sending||[],u=i.failed||[];return ho(ho({},e),{},{messagesRelatedMap:ho(ho({},a),{},o({},s,ho(ho({},i),{},{all:c.filter((function(e){return e!==r})),sending:l.filter((function(e){return e!==r})),failed:u.filter((function(e){return e!==r}))})))})}));var Ro=fe().mark(No),Po=fe().mark(jo),Do=(0,le.createActions)(o({},_e.MESSAGE_SYNC_UPDATE,(function(e){return{conversation:e.conversation}}))).messageSyncUpdate;function No(e){var t,n,r,s,a,o,i,c,l,u,d,p,g,f,A,h,m,E,v;return fe().wrap((function(S){for(;;)switch(S.prev=S.next){case 0:return t=e.payload.conversation,n=t.id,r=t.shop_id,S.prev=2,S.next=5,(0,Ae.select)((0,O.getConvsMessagesRelatedSelector)(n));case 5:if(a=S.sent,o=a.all,i=void 0===o?[]:o,c=a.timeNow,l=a.oldestMessageId,0!==i.length){S.next=9;break}return S.abrupt("return");case 9:return S.next=11,(0,Ae.call)(O.fetch,{subServer:"coreapi",parent:"conversation",resource:"updated_message_list",params:{shop_id:r,conversation_id:n,last_update_time:c||"0"}});case 11:if(u=S.sent,d=u.messages,p=void 0===d?[]:d,g=u.page_result,p.sort((function(e,t){return t.id-e.id})),!(p.length>0)){S.next=18;break}return f=(0,O.normalize)("messages",p),A=f.entities,S.next=18,(0,Ae.put)((0,O.updateEntities)({entities:A}));case 18:if(h=null===(s=p[0])||void 0===s?void 0:s.id,E=(m=g||{}).has_more,!(v=m.next_last_update_time)){S.next=23;break}return S.next=23,(0,Ae.put)(It({conversationId:n,updateKey:T.MessagesRelatedKey.TIME_NOW,updateValue:v}));case 23:if(!(E&&l<h&&p.length>0)){S.next=26;break}return S.next=26,(0,Ae.call)(No,{payload:{conversation:t}});case 26:S.next=35;break;case 28:if(S.prev=28,S.t0=S.catch(2),!(S.t0 instanceof O.CustomError)){S.next=35;break}return S.next=33,(0,Ae.put)(It({conversationId:n,updateKey:T.MessagesRelatedKey.TIME_NOW,updateValue:"0"}));case 33:return S.next=35,(0,Ae.put)(Ut({conversationId:n,reset:!0}));case 35:case"end":return S.stop()}}),Ro,null,[[2,28]])}function jo(){return fe().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Ae.takeEvery)(Do,No);case 2:case"end":return e.stop()}}),Po)}function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qo=(0,le.createActions)(o({},_e.SET_ENTRY_POINT,(function(e){return{type:e.type,conversationId:e.conversationId}}))).setEntryPoint;const Go=o({},_e.SET_ENTRY_POINT,(function(e,t){var n=t.payload;return Lo(Lo({},e),{},{entryPoint:n})}));function Uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Yo=(0,le.createActions)(o({},_e.UPDATE_HAS_CONFLICT,(function(e){return{hasConflict:e.hasConflict}}))).updateHasConflict;const Vo=o({},_e.UPDATE_HAS_CONFLICT,(function(e,t){var n=t.payload.hasConflict;return Ho(Ho({},e),{},{toBottomHasConflict:n})}));function Wo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wo(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Zo=[en,qs,Bn,po,ma,ua,Ct,Wn,Ve,Ls,Oa,co,io,bn,Bo,jo],Qo={messageReducer:(0,le.handleActions)(zo(zo(zo(zo(zo(zo(zo(zo(zo(zo(zo(zo(zo({},Go),Vo),tn),Gs),go),Kn),zn),br),Ba),bt),Cn),wt),ko),{entryPoint:{},toBottomHasConflict:!1,status:"pendingInit",messagesRelatedMap:{},messageFillStatusMap:{},videoMap:{1234:{percentage:"10",size:"1300"}},offlineMessages:{},faqHistoryHash:{},faqId:null,faqHistoryStatus:"",reply:{toMessageId:{},inScrollToMessage:!1,scrollToMessageId:""}})},Xo={setReplyToMessage:pn,deleteMessageRequested:bo,updateHasConflict:Yo};const Ko=(0,h.connect)((function(e){return{scrollToMessageId:(0,O.scrollToMessageIdSelector)(e),hasReplyPermission:(0,O.hasReplyPermissionSelector)(e),hasDeletePermission:(0,O.hasDeletePermissionSelector)(e),currentConversationId:(0,O.currentConversationIdSelector)(e),deleteConfigDuration:(0,O.deleteConfigDurationSelector)(e)}}),Xo)((function(e){return r().createElement(K.MessageToolbar,e)}));var Jo=P(5600),$o=P(5668),ei={};ei.styleTagTransform=W(),ei.setAttributes=U(),ei.insert=q().bind(null,"head"),ei.domAPI=F(),ei.insertStyleElement=Y(),N()($o.Z,ei);const ti=$o.Z&&$o.Z.locals?$o.Z.locals:void 0;var ni=P(4323).t;const ri=function(e){var t=e.code,s=(0,n.useRef)(null),a=function(){var t=e.region;window.open("".concat(T.cancelOrderPolicy[t]||T.cancelOrderPolicy.sg))};(0,n.useEffect)((function(){if(s&&s.current){var e=s.current.firstElementChild;if(e)return e.className=ti.policy,e.addEventListener("click",a),function(){e.removeEventListener("click",a)}}}),[s]);var o=(0,T.hasTargetMessageOption)(t,T.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),i=(0,T.hasTargetMessageOption)(t,T.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT);if(!o&&!i)return null;var c=o?ni("cancel_order.meta.not_send"):i?ni("cancel_order.meta.send_it"):"";return r().createElement("span",{ref:s,className:ti.root,dangerouslySetInnerHTML:{__html:c}})};var si=P(6572),ai=P.n(si),oi=P(6512),ii=P.n(oi),ci=P(5522),li={};li.styleTagTransform=W(),li.setAttributes=U(),li.insert=q().bind(null,"head"),li.domAPI=F(),li.insertStyleElement=Y(),N()(ci.Z,li);const ui=ci.Z&&ci.Z.locals?ci.Z.locals:void 0;var di=P(4323).t,pi=T.MessageTypes.MSG_TYPE_OFFER;const gi=(0,h.connect)((function(e){return{currentConversationToName:(0,O.currentConversationToNameSelector)(e)}}),{})((function(e){var t=e.message;if(!t)return r().createElement(r().Fragment,null);var n,s=e.currentConversationToName,o=e.buyerId,i=e.shop,c=t.type,l=t.textContent,u=t.to_id,d=t.errorCode,p=t.message_option,g=u===o;if(c===pi&&l){var f=l.buyer_id===o,A=l.status,h=function(e,t){if([T.OfferStatus.ACCEPTED,T.OfferStatus.REJECTED].includes(e)){var n=e.slice(0,e.length-2);return t?g?null:di("conversation_detail.message_list.".concat(n,"_offer")):g?di("conversation_detail.message_list.".concat(n,"_offer_user"),{username:s}):null}if(T.OfferStatus.CANCELLED)return t?di("conversation_detail.message_list.cancel_offer",{username:s}):di("conversation_detail.message_list.cancel_offer_self")}(A,f);switch(A){case T.OfferStatus.ACCEPTED:h&&(n=r().createElement(Jo.Alert,{content:h,type:T.AlertType.normal,showIcon:!0,icon:r().createElement(S(),{className:ui.successIcon,svg:ii()})}));break;case T.OfferStatus.REJECTED:case T.OfferStatus.CANCELLED:h&&(n=r().createElement(Jo.Alert,{content:h,type:T.AlertType.normal}))}}var m={showIcon:!0,icon:r().createElement(S(),{className:ui.warnIcon,svg:ai()}),type:T.AlertType.normal};if(d===T.MessageErrorCode.FORBIDDEN)n=r().createElement(Jo.Alert,a({content:di("conversation_detail.message_list.error_message_blocked",{username:s})},m));else if(d===T.MessageErrorCode.BLACKLIST)n=r().createElement(Jo.Alert,a({content:r().createElement(K.BlacklistHint,null)},m));else if(d===T.MessageErrorCode.UNVERIFIED_PHONE_NUMBER)n=r().createElement(Jo.Alert,a({content:di("conversation_detail.message_list.unverified_phone_number")},m));else if(g&&((0,T.hasTargetMessageOption)(p,T.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND)||(0,T.hasTargetMessageOption)(p,T.MessageOption.MSG_OPT_CANCELORDER_WARNING_SENT))){var E=i&&i.country?i.country.toLowerCase():"sg";n=r().createElement(Jo.Alert,a({content:r().createElement(ri,{code:p,region:E})},m))}return n?r().createElement("span",{className:ui.metaContent},n):r().createElement(r().Fragment,null)}));var fi=P(8733),Ai={};Ai.styleTagTransform=W(),Ai.setAttributes=U(),Ai.insert=q().bind(null,"head"),Ai.domAPI=F(),Ai.insertStyleElement=Y(),N()(fi.Z,Ai);const hi=fi.Z&&fi.Z.locals?fi.Z.locals:void 0;var mi=P(4323).t;const Ei=r().memo((function(){return r().createElement("div",{className:hi.newMessageTip},r().createElement("span",{className:hi.newMessageContent},mi("conversation_detail.message_list.unread_messages")))}));var vi=P(8720),Si=P.n(vi),_i=P(1696),yi={};yi.styleTagTransform=W(),yi.setAttributes=U(),yi.insert=q().bind(null,"head"),yi.domAPI=F(),yi.insertStyleElement=Y(),N()(_i.Z,yi);const Ci=_i.Z&&_i.Z.locals?_i.Z.locals:void 0;var bi=P(2066),Mi=P.n(bi),xi=P(4323).t,Ii=r().memo((function(e){var t=e.message,n=e.resendMessage,s=t.send_status,a=t.errorCode,o=t.message_option,i=s===T.MessageSendStatus.FAILED,c=a===T.MessageErrorCode.BLACKLIST,l=(0,T.hasTargetMessageOption)(o,T.MessageOption.MSG_OPT_CANCELORDER_WARNING_NOT_SEND),u=r().createElement("div",{className:Ci.iconWrap},r().createElement(S(),{svg:Mi(),className:Ci.iconBase}));return i?c?u:r().createElement("div",{className:Ci.iconWrap},r().createElement(Si(),{content:xi("conversation_detail.message_list.resend")},r().createElement(S(),{svg:Mi(),className:Ci.icon,onClick:n}))):l?u:r().createElement(r().Fragment,null)}));Ii.displayName="ErrorContent";const wi=Ii;var Ti=P(6322),Oi={};Oi.styleTagTransform=W(),Oi.setAttributes=U(),Oi.insert=q().bind(null,"head"),Oi.domAPI=F(),Oi.insertStyleElement=Y(),N()(Ti.Z,Oi);const Bi=Ti.Z&&Ti.Z.locals?Ti.Z.locals:void 0;var ki=P(3710),Ri=P.n(ki),Pi=P(4323).t,Di=T.MessageTypes.MSG_TYPE_VIDEO,Ni=T.MessageTypes.MSG_TYPE_IMAGE,ji=T.MessageTypes.MSG_TYPE_STICKER,Fi=r().memo((function(e){var t=e.type,n=e.status,s=e.videoUploaded,a=e.handleCancelMessage;return n===T.MessageSendStatus.SENDING?r().createElement("div",{className:Bi.sendingWrap},t!==Di||s?[Ni,ji].includes(t)?null:r().createElement(K.LoadingSpin,{theme:"dark"}):r().createElement(Si(),{content:Pi("common.cancel")},r().createElement(S(),{svg:Ri(),className:Bi.icon,onClick:a}))):null}));const Li=(0,h.connect)((function(e,t){var n=!1;return t.type===Di&&(n="successful"===((0,O.selectVideoInfoByKey)(t.requestId)(e)||{}).status),{videoUploaded:n}}),{})(Fi);var qi=P(4321),Gi=P.n(qi),Ui=P(8310),Hi=P.n(Ui),Yi=P(1177),Vi={};Vi.styleTagTransform=W(),Vi.setAttributes=U(),Vi.insert=q().bind(null,"head"),Vi.domAPI=F(),Vi.insertStyleElement=Y(),N()(Yi.Z,Vi);const Wi=Yi.Z&&Yi.Z.locals?Yi.Z.locals:void 0;var zi=P(7370),Zi={};Zi.styleTagTransform=W(),Zi.setAttributes=U(),Zi.insert=q().bind(null,"head"),Zi.domAPI=F(),Zi.insertStyleElement=Y(),N()(zi.Z,Zi);const Qi=zi.Z&&zi.Z.locals?zi.Z.locals:void 0;var Xi=P(4323).t,Ki=r().memo((function(e){var t=e.isSend,n=e.isScChat,s=e.content,a=e.sourceDesc,o=e.isSubAccount,i=e.shopId,c=e.hasAccess,l=e.messageId,u=e.buyerShopId,d=e.conversationId,p=e.visitShopSellerCenterRequested,g="";o||(g="https://".concat((0,T.getSellerCenterUrl)(),"/portal/sale/").concat(s.id));var f=(0,T.getMallOrderUrl)(s,t?u:i),A=s.id,h=s.image,m=s.status,E=s.image_hash,v=s.refund_serial_number,S=s.serial_number,_=s.receivables,y=Hi()(Wi.shortRoot,c?Wi.hover:""),C="".concat(Xi("common.order.order_id"),": ").concat("refund"===m?v:S),b="".concat(Xi("conversation_detail.message_list.order_total"),": ").concat(_);return r().createElement("div",{className:y,onClick:function(){(0,O.$tracker)({shopId:i,trackerName:"clickVisitOrderInSellerCenter",data:{order_id:A,conversation_id:d,message_id:l}}),n?(0,T.redirectionWithAccess)({access:c,isSubAccount:o,action:function(){return p({shopId:i,orderId:A})},url:g}):window.open(f)}},r().createElement("div",{className:Wi.header},a),r().createElement("div",{className:Wi.divider}),r().createElement("div",{className:Wi.body},r().createElement("div",{className:Wi.detail},r().createElement("div",{className:Wi.imgWrapper},r().createElement(Gi(),{src:h,hash:E,className:Wi.img})),r().createElement("div",{className:Wi.content},r().createElement("div",{className:Qi.line},C),r().createElement("div",{className:Qi.line},b),r().createElement("div",{className:Qi.status},Xi((0,T.getOrderStatusTransifyKey)(m)))))))}));Ki.displayName="OrderMessageSource";const Ji=Ki;var $i=P(7625),ec={};ec.styleTagTransform=W(),ec.setAttributes=U(),ec.insert=q().bind(null,"head"),ec.domAPI=F(),ec.insertStyleElement=Y(),N()($i.Z,ec);const tc=$i.Z&&$i.Z.locals?$i.Z.locals:void 0;var nc=P(4323).t,rc=T.ProductStatusUsingNumber.DELETED,sc=r().memo((function(e){var t=e.isScChat,n=e.content,s=e.sourceDesc,a=e.isSubAccount,i=void 0!==a&&a,c=e.hasAccess,l=void 0!==c&&c,u=e.messageId,d=e.conversationId,p=e.visitShopSellerCenterRequested,g=n.id,f=n.status,A=n.shop_id,h=n.region,m=n.name,E=n.image,v=n.image_hash,S=n.original_price,_=n.actual_price,y=f===rc,C=i?"":"https://".concat((0,T.getSellerCenterUrl)(),"/portal/product/").concat(g),b="https://".concat((0,T.getMallUrl)(h),"/product/").concat(A,"/").concat(g),M=function(e){(0,O.$tracker)({shopId:A,trackerName:e,data:{itemid:g,message_id:u,conversation_id:d}})},x=function(){y||(M("clickViewProductInMall"),window.open(b))},I=Hi()(Wi.link,o({},Wi.deleted,y)),w=y?r().createElement(K.UnavailableProduct,{className:tc.productDeleted}):r().createElement(r().Fragment,null,r().createElement("div",{className:Wi.header},s),r().createElement("div",{className:Wi.divider}),r().createElement("div",{className:Wi.body},r().createElement("div",{className:Wi.imgWrapper},r().createElement(Gi(),{src:E,hash:v,className:Wi.img})),r().createElement("div",{className:Wi.content},r().createElement("div",{className:Wi.name,title:m},m),r().createElement("div",{className:Wi.productDetail},S&&r().createElement("div",{className:tc.originalPrice},S),r().createElement("div",{className:Hi()(tc.currentPrice,o({},tc.noOrigin,!S))},_)))));return t?r().createElement("div",{className:Wi.root},w,r().createElement("div",{className:Wi.footer},r().createElement("div",{className:I,onClick:x},nc("conversation_detail.workstation.conversation_origin.view_in_mall")),l&&r().createElement("div",{className:I,onClick:function(){y||(M("clickViewProductInSellerCenter"),(0,T.redirectionWithAccess)({access:l,isSubAccount:i,action:function(){return p({shopId:A,itemId:g})},url:C}))}},nc("conversation_detail.workstation.conversation_origin.view_in_seller_center")))):r().createElement("div",{className:Hi()(Wi.shortRoot,Wi.hover),onClick:x},w)}));sc.displayName="ProductMessageSource";const ac=sc;var oc=P(4323).t,ic=r().memo((function(e){var t=e.isSend,s=e.message,a=e.shopId,i=e.isScChat,c=e.isSubAccount,l=void 0!==c&&c,u=e.shopAccess,d=(u=void 0===u?{}:u).hasViewOrderAccess,p=void 0!==d&&d,g=u.hasViewProductAccess,f=void 0!==g&&g,A=e.visitShopSellerCenterRequested,h=s.sourceContent,m=s.id,E=s.source_type,v=s.conversation_id,S="order"===E,_="product"===E;if((0,n.useEffect)((function(){var e,t=o({message_id:m,conversation_id:v},"".concat(E,"_id"),null==h||null===(e=h.content)||void 0===e?void 0:e.id);S&&(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionOrderFromSourceInSpecialMessage",data:t}),_&&(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,shopId:a,trackerName:"impressionProductFromSourceInSpecialMessage",data:t})}),[]),!h)return null;var y=h.content.shop_id===a,C=oc("source.".concat(t?"buyer_view_enquiring":"seller_view_enquiring"),{object:oc("object.product")}),b=oc("source.".concat(t?y?"seller_view_chatting":"buyer_view_enquiring":y?"seller_view_enquiring":"buyer_view_chatting"),{object:oc("object.order")});return"product"===E?r().createElement(ac,{isScChat:i,messageId:m,conversationId:v,content:h.content,isSubAccount:l,sourceDesc:C,hasAccess:!!f,visitShopSellerCenterRequested:A}):"order"===E?r().createElement(Ji,{shopId:a,isSend:t,isScChat:i,messageId:m,sourceDesc:b,isSubAccount:l,buyerShopId:t?s.to_shop_id:s.from_shop_id,conversationId:v,content:h.content,hasAccess:!!p,visitShopSellerCenterRequested:A}):null}));ic.displayName="MessageSource";var cc={visitShopSellerCenterRequested:O.visitShopSellerCenterRequested};const lc=(0,h.connect)((function(e){return{shopAccess:(0,O.shopAccessSelector)(e)}}),cc)(ic);var uc,dc;function pc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fc=T.MessageTypes.MSG_TYPE_ORDER,Ac=T.MessageTypes.MSG_TYPE_PRODUCT,hc=T.MessageTypes.MSG_TYPE_OFFER,mc=T.MessageTypes.MSG_TYPE_VOUCHER,Ec=T.MessageTypes.MSG_TYPE_VIDEO,vc=T.MessageTypes.MSG_TYPE_TEXT,Sc=T.MessageTypes.MSG_TYPE_BUNDLE_DEAL,_c=T.MessageTypes.MSG_TYPE_FLASH_SALE,yc=T.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Cc=T.MessageTypes.MSG_TYPE_ITEM_LIST,bc=T.MessageTypes.MSG_TYPE_SHOPPING_CART,Mc=T.MessageTypes.MSG_TYPE_RATE_CARD,xc=(o(uc={},hc,"impressionOfferMessage"),o(uc,fc,"impressionOrderMessage"),o(uc,Ac,"impressionProductMessage"),o(uc,mc,"impressionVoucherMessage"),o(uc,Ec,"impressionVideoMessage"),o(dc={},Sc,"impressionBundleDealCard"),o(dc,_c,"impressionFlashSaleCard"),o(dc,mc,"impressionVoucherCard"),o(dc,Cc,"impressionProductListCard"),o(dc,Ac,"impressionProductMessage"),o(dc,yc,"impressionRateCard"),o(dc,bc,"impressionCartCard"),o(dc,Ec,"impressionVideoMessage"),o(dc,fc,"impressionOrderMessage"),dc),Ic=function(e){var t=e.message,n=e.conversationShopId,r=e.isSend,s=e.extraParams,a=void 0===s?{}:s,o=t.id,i=t.type,c=t.content,l=t.source,u=t.to_id,d=t.from_id,p=t.request_id,g=t.crm_activity_id,f=t.textContent,A=void 0===f?{}:f,h=t.conversation_id,m={crm_activity_id:g||"",from_source:g?"CRM":""},E=c["".concat(i,"_id")];switch(i){case vc:m={message_type:T.ApiMessageTypes[vc],is_sender:r};break;case Sc:m.bundle_deal_id=c.bundle_deal_id;break;case _c:m.flash_sale_id=c.flash_sale_id;break;case yc:m.order_id=c.order_id;break;case Ac:m={product_id:E,product_shopid:n};break;case fc:m={order_id:E,order_shopid:n};break;case hc:m={offer_id:E,product_id:c.product_id,offer_shopid:n};break;case mc:var v=A,S=v.status,_=void 0===S?"":S,y=v.claimed;m.voucher_id=c.voucher_id,r||(m=gc(gc({},m),{},{source:l,voucher_status:_===T.VoucherStatus.FINISHED?"expired":y?"claimed":"unclaimed",is_sender:r,promotion_id:c.voucher_id,promotion_shopid:n}));break;case Ec:m={message_id:o===p?0:o,is_sender:r,to_user_id:u,from_user_id:d,video_original_duration:c.duration_seconds};break;case Mc:m={is_sender:r}}return{data:gc(gc({conversation_id:h,message_id:o},a),m),shopId:n}};function wc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tc=T.MessageTypes.MSG_TYPE_WEBVIEW,Oc=T.MessageTypes.MSG_TYPE_NOTIFICATION,Bc=T.MessageTypes.MSG_TYPE_OFFER,kc=T.MessageTypes.MSG_TYPE_VIDEO,Rc=T.MessageTypes.MSG_TYPE_TEXT,Pc=T.MessageTypes.MSG_TYPE_NEW_FAQ,Dc=T.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,Nc=T.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,jc=["index","timeFlag","lastMessageFlag","messageFillStatus","messageSourceFillStatus","newMessageFlag"],Fc=[Pc,Dc,Nc];const Lc=function(e){var t=function(t){p(s,t);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(s);function s(e,t){var r;i(this,s),r=n.call(this,e,t);var a=e.index,c=e.message,l=e.newMessageFlag,d=e.exposedMessageIds,p=void 0===d?[]:d,g=e.addExposedMessageId,f=e.locale,A=e.currentFaqSessionInfo,h=A.faqSessionId,m=A.sessionExpiryTime,E=e.conversationShopId,v=c.id,S=c.type,_=c.content,y=c.faq_session_id;(0===a||S===Bc||l)&&(r.needRemeasure=!0),r.handleReload=r.handleReload.bind(u(r)),r.handleResendMessage=r.handleResendMessage.bind(u(r)),r.handleCancelMessage=r.handleCancelMessage.bind(u(r)),r.handleMessageIsSend=r.handleMessageIsSend.bind(u(r)),r.timer=null,r.messageNode=null,r.shouldExpose=!0,r.clearTimer=r.clearTimer.bind(u(r)),r.handleMouseEnter=r.handleMouseEnter.bind(u(r)),r.handleMouseLeave=r.handleMouseLeave.bind(u(r)),r.state={isHover:!1};var C=Fc.includes(S);if(r.needExpose="function"==typeof IntersectionObserver&&(xc[S]&&!p.includes(v)||C),r.needExpose){var b={root:document.querySelector("#messagesContainer"),threshold:.5};r.observer=new IntersectionObserver((function(e){var t=e[0];if(t&&t.isIntersecting&&t.intersectionRatio>=.5){if(r.timer||!r.shouldExpose||C||(r.shouldExpose=!1,r.timer=setTimeout((function(){(0,O.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({operation:T.TrackerOperation.IMPRESSION,trackerName:xc[S]},Ic({message:c,conversationShopId:E,isSend:r.handleMessageIsSend(c)}))),r.clearTimer(),g&&g(v)}),1e3)),C&&r.shouldExpose){r.shouldExpose=!1;var n=_.intents,s=void 0===n?[]:n,a=_.categories,i=void 0===a?[]:a,l=_.other_faq_types,u=void 0===l?[]:l,d=_.questions,p=void 0===d?[]:d;(s.length||i.length||u.length||p.length)&&xr(h,y,m)&&(0,O.collectChatbotReportTask)((0,T.handleReportItems)(_,S===Pc,f))}}else t&&t.intersectionRatio<=0&&(r.shouldExpose=!0)}),b)}return r}return l(s,[{key:"componentDidMount",value:function(){var e=this.props,t=e.message,n=e.hasSourceMessageMap;void 0===n[t.id]&&(n[t.id]=t.hasMessageSource),this.needExpose&&this.observer.observe(this.messageNode),this.measureMessage()}},{key:"componentWillUnmount",value:function(){this.clearTimer(),this.needExpose&&this.observer.unobserve(this.messageNode)}},{key:"componentDidUpdate",value:function(e){var t=this,n=e.hasSourceMessageMap,r=e.message,s=e.showWarningMessageIds,a=this.props,o=a.message,i=a.showWarningMessageIds,c=!1;if(r.type===Bc)c=(r.textContent&&r.textContent.status)!==(o.textContent&&o.textContent.status);else{var l=["hasMessageSource","newMessageFlag","errorCode","status","send_status"];o.type!==Tc&&l.push("content"),(c=l.some((function(e){return r[e]!==o[e]})))||(c=jc.some((function(n){return t.props[n]!==e[n]})))}n[o.id]!==o.hasMessageSource&&(c=!0,n[o.id]=o.hasMessageSource),r.type===Rc&&s.indexOf(r.id)!==i.indexOf(o.id)&&(c=!0),!(0,T.isDeletedMessage)(r)&&(0,T.isDeletedMessage)(o)&&(c=!0),c&&(this.needRemeasure=c),this.measureMessage()}},{key:"clearTimer",value:function(){this.timer&&(clearTimeout(this.timer),this.timer=null)}},{key:"handleReload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.message,r=t.fillMessageRequested;r({message:n,isSource:e})}},{key:"measureMessage",value:function(){this.needRemeasure&&(this.props.measure(),this.needRemeasure=!1)}},{key:"handleResendMessage",value:function(){var e=this.props,t=e.message,n=e.resendMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;t.type===kc&&(0,O.$tracker)({shopId:s,trackerName:"clickResendVideo",data:{message_id:a,conversation_id:r}}),n({conversationId:r,message:t})}},{key:"handleCancelMessage",value:function(){var e=this.props,t=e.message,n=e.cancelSendingMessageRequested,r=e.conversationId,s=e.conversationShopId,a=t.id;(0,O.$tracker)({shopId:s,trackerName:"clickCancelVideo",data:{message_id:a,conversation_id:r}}),n({id:a,conversationId:r})}},{key:"handleMessageIsSend",value:function(e){var t=this.props.conversationBuyerId;return e.to_id===t}},{key:"getMessageClass",value:function(e){var t=e.isSend,n=e.isSystem,r=e.isChatbot,s=e.isSecurityTips;return n?ce.message:r||s?"":t?ce.messageSend:ce.messageReceive}},{key:"renderMessage",value:function(t){var n=this,s=this.props,a=s.message,o=s.measure,i=s.timeFlag,c=s.isScChat,l=s.isSubAccount,u=s.newMessageFlag,d=s.isLastSystemMessage,p=s.showWarningMessageIds,g=s.shop,f=s.conversationId,A=s.conversationShopId,h=s.conversationBuyerId,m=s.conversationStatus,E=s.isInFaqHistoryModal,v=void 0!==E&&E,S=s.messageFillStatus,_=s.messageSourceFillStatus,y=a.isFaking,C=a.type,b=a.hasMessageSource,M=a.send_status,x=a.content,I=void 0===x?{}:x,w=a.from_shop_id,O=a.request_id,B=a.sourceContent,k=C===T.MessageTypes.MSG_TYPE_TEXT&&!t&&-1!==p.indexOf(a.id),R=C===T.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,P=C===Oc||(0,T.getMessageIsRatecard)(C,I)&&(t||l),D=C===T.MessageTypes.MSG_TYPE_SECURITY_TIPS,N=this.getMessageClass({isSend:t,isSystem:P,isChatbot:R,isSecurityTips:D}),j=R?"":ce.bubble,F=!(b||i||d||P)||i&&P?"4px":"8px",L=(g&&g.country?g.country:"SG").toLowerCase(),q="closed"===m,G=(0,T.isDeletedMessage)(a);return r().createElement(r().Fragment,null,u&&r().createElement(Ei,null),i&&r().createElement("div",{className:ce.messageTime},i),b&&r().createElement("div",{className:ce.center,style:{marginTop:i?"1.5em":"0.75em"}},_?r().createElement(K.Processor,{status:_,messageType:"source",content:B,reloadRequest:function(){return n.handleReload(!0)},isScChat:c}):r().createElement(lc,{message:a,isSubAccount:l,isScChat:c,shopId:A,isSend:t,region:L})),!y&&r().createElement("div",{style:{marginTop:F},className:N},t&&r().createElement(wi,{isClosed:q,message:a,resendMessage:this.handleResendMessage}),t&&!P&&r().createElement(Li,{type:C,status:M,requestId:O,handleCancelMessage:this.handleCancelMessage}),G?r().createElement(K.DeletedMessage,{isSend:t}):r().createElement(Ko,{isSend:t,message:a,isInFaqHistoryModal:v,isClosed:q,isHoverBaseMsg:this.state.isHover},r().createElement("div",{className:j},S?r().createElement(K.Processor,{status:S,messageType:C===Tc?I.type:C,content:I,reloadRequest:function(){return n.handleReload()},isScChat:c}):r().createElement(e,{message:a,isScChat:c,isSend:t,measure:o,isSubAccount:l,shop:g,region:L,conversationId:f,conversationShopId:A,conversationBuyerId:h,conversationStatus:m,isInFaqHistoryModal:v,handleMessageIsSend:this.handleMessageIsSend})))),r().createElement(gi,{message:a,buyerId:h,shop:g}),k&&r().createElement(K.TextWarning,{shopId:w,region:L}))}},{key:"handleMouseEnter",value:function(){this.setState({isHover:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHover:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.style,s=t.message,a=t.isLastMessage,o=t.className,i=this.renderMessage(this.handleMessageIsSend(s)),c="".concat(ce.root," ").concat(a?ce.lastMessage:""," ").concat(o);return r().createElement("div",{style:n,className:c,ref:function(t){return e.messageNode=t},onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},i)}}]),s}(r().PureComponent);return t.defaultProps={showWarningMessageIds:[]},t},qc=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e)}}),null)((function(e){var t=e.isSend,s=e.message,a=e.locale,o=e.conversationId,i=e.conversationBuyerId,c=s.type,l=s.content,u=s.textContent,d=s.id;return(0,n.useEffect)((function(){"game_quota_reach"===l.notification_type&&(0,O.$tracker)({operation:T.TrackerOperation.IMPRESSION,trackerName:"impressionMsgGamesFailQuota",data:{conversation_id:o,convo_userid:i,message_id:d,is_sender:t}})}),[]),r().createElement(K.SystemMessage,{type:c,locale:a,isSend:t,content:l,textContent:u||{}})})));var Gc={handleSensitiveUrl:Aa,changeTranslateStatus:$s,translateMessagesRequested:Js,scrollToMessage:fn,showTranslateFeedback:ea};const Uc=Lc((0,h.connect)((function(e){return{shopTranslationSettings:(0,O.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,O.currentConversationTranslationAccessSelector)(e),locale:(0,O.localeSelector)(e)}}),Gc)((function(e){var t=e.isScChat,n=e.isSend,s=e.shopTranslationSettings,a=e.measure,o=e.handleSensitiveUrl,i=e.changeTranslateStatus,c=e.translateMessagesRequested,l=e.message,u=e.conversationShopId,d=e.currentConversationTranslationAccess,p=e.scrollToMessage,g=e.conversationId,f=e.conversationBuyerId,A=e.showTranslateFeedback,h=e.handleMessageIsSend,m=e.locale,E=l.send_status,v=l.message_option,S=l.content,_=l.id,y=l.country,C=l.translateStatus,b=l.toggleTranslateStatus,M=l.type,x=l.quoted_msg,I=l.source,w=(S||{}).translation,O=(w=void 0===w?{}:w).text,B=s[u]||{},k=B.translationPreference,R=B.autoTranslationStatus,P=B.source,D=B.inTranslationFeedbackWhitelist,N=R===T.SwitchStatus.ENABLED,j=(0,T.handleDisplayTranslation)(N,n,O,t,d);return r().createElement(K.TextMessage,{buyerId:f,shopId:u,sendStatus:E,messageOption:v,enableTranslation:j,translationPreference:k,translationSource:P,id:_,measure:a,translateStatus:C,toggleTranslateStatus:b,handleSensitiveUrl:o,changeTranslateStatus:i,translateMessagesRequested:c,content:S,isScChat:t,enableAutoTranslation:N,isSend:n,country:y,type:M,replyToMessage:x,scrollToMessage:p,conversationId:g,messageSource:I,showTranslateFeedback:A,inTranslationFeedbackWhitelist:D,handleMessageIsSend:h,locale:m})})));function Hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vc={showMediaPreviewModalRequested:O.showMediaPreviewModalRequested,scrollToMessage:fn};const Wc=Lc((0,h.connect)((function(){return{}}),Vc)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.scrollToMessage,c=e.handleMessageIsSend,l=e.conversationShopId,u=o.id,d=o.request_id,p=o.content,g=o.quoted_msg,f=o.conversation_id,A=(0,n.useContext)(X),h={data:{conversation_id:f,message_id:u===d?0:u},shopId:l};(0,n.useEffect)((function(){p.unknown_qr_code&&!t&&(0,O.$tracker)(Yc({operation:T.TrackerOperation.IMPRESSION,trackerName:"impressionImageMessage"},h))}),[]);var m=function(){return a({messageId:u})};return r().createElement(K.ImageMessage,{isSend:t,imgCache:A,id:u,request_id:d,content:p,measure:s,replyToMessage:g,scrollToMessage:i,handleMessageIsSend:c,openPreviewModal:m,handleOpenQrCode:function(){m(),(0,O.$tracker)(Yc({trackerName:"clickPreviewQrcode"},h))}})})));var zc=P(8550),Zc=P.n(zc),Qc=P(5945),Xc=function(e,t){var n=e.id,r=e.status,s=e.shop_id,a=e.region;(0,T.checkProductDeleted)(n,r)||(window.open("https://".concat((0,T.getMallUrl)(a),"/product/").concat(s,"/").concat(n,"/")),t&&t(e))};const Kc=Lc((function(e){var t=e.isSend,n=e.message,s=e.measure,a=e.conversationShopId,o=e.conversationStatus,i=n.id,c=n.textContent,l=void 0===c?{}:c,u=n.conversation_id;return r().createElement(K.OfferMessage,{id:i,isSend:t,measure:s,onReply:function(e){(0,O.$tracker)({trackerName:e.isAccept?"clickAcceptOffer":"clickRejectOffer",data:{itemid:l.id,conversation_id:u,message_id:i},shopId:a}),function(e){Zc().put(Qc.default.replyOfferRequested({payload:e}))}(e)},textContent:l,handleClickItem:Xc,conversationClosed:"closed"===o})}));function Jc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var $c={visitShopSellerCenterRequested:O.visitShopSellerCenterRequested};const el=Lc((0,h.connect)((function(e){return{shopAccess:(0,O.shopAccessSelector)(e)}}),$c)((function(e){var t=e.isScChat,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.isSend,i=e.message,c=e.shopAccess,l=void 0===c?{}:c,u=e.conversationShopId,d=l.hasViewProductAccess,p=i.textContent,g=p||{},f=g.id,A=g.status,h=g.shop_id,m=g.region,E=(0,T.checkProductDeleted)(f,A),v=h===u,S=t||!v||!n||d;return r().createElement(K.ProductMessage,{item:p,isSend:a,deleted:E,hasAccess:S,handleClickMessage:function(){S&&!E&&((0,O.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jc(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"impressionProductMessage"},Ic({message:i,isSend:a,conversationShopId:u,extraParams:{itemid:f}}))),v?n?(0,T.redirectionWithAccess)({access:!0,isSubAccount:!0,action:function(){return s({shopId:h,itemId:f})}}):t?window.open("https://".concat((0,T.getSellerCenterUrl)((0,T.isVisitingCNSC)()?"cn":m),"/portal/product/").concat(f)):window.open("https://".concat((0,T.getMallUrl)(m),"/product/").concat(h,"/").concat(f,"/")):window.open("https://".concat((0,T.getMallUrl)(m),"/product/").concat(h,"/").concat(f,"/")))}})})));var tl=P(5965),nl={};nl.styleTagTransform=W(),nl.setAttributes=U(),nl.insert=q().bind(null,"head"),nl.domAPI=F(),nl.insertStyleElement=Y(),N()(tl.Z,nl);const rl=tl.Z&&tl.Z.locals?tl.Z.locals:void 0;var sl=P(4323).t;function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var il={visitShopSellerCenterRequested:O.visitShopSellerCenterRequested,copySucceedFeedback:O.copySucceedFeedback};const cl=Lc((0,h.connect)((function(e){return{shopAccess:(0,O.shopAccessSelector)(e)}}),il)((function(e){var t=e.isSubAccount,n=e.isSend,s=e.visitShopSellerCenterRequested,a=e.message,i=e.shopAccess,c=void 0===i?{}:i,l=e.conversationShopId,u=e.region,d=e.copySucceedFeedback,p=e.isScChat,g=a.content,f=a.textContent,A=(a.type,g||{}),h=A.shop_id,m=A.order_id,E=A.bot_order_info,v=(E=void 0===E?{}:E).shop_id,S=E.order_id,_=c.hasViewOrderAccess,y=void 0!==_&&_,C=h||v,b=m||S,M=C===l;return!M&&t?r().createElement("div",{className:Hi()(rl.order,o({},rl.send,n))},r().createElement("span",{className:rl.link,onClick:function(){window.open((0,T.getMallOrderUrl)({id:m},C,u))}},sl("conversation_detail.message_list.order_not_in_your_shop"))):r().createElement(K.OrderMessage,{region:u,hasViewOrderAccess:y,isSend:n,isScChat:p,textContent:f,handleClickMessage:function(){if(!M)return window.open((0,T.getMallOrderUrl)(f,C,u)),null;(0,O.$tracker)(ol({trackerName:"clickOrderMessage"},Ic({message:a,isSend:n,conversationShopId:l}))),(0,T.redirectionWithAccess)({access:y,isSubAccount:t,action:function(){return s({shopId:C,orderId:b})},url:"https://".concat((0,T.getSellerCenterUrl)(u),"/portal/sale/").concat(b)})},copySucceedFeedback:function(){d(),(0,O.$tracker)(ol({trackerName:"clickCopyOrderSN"},Ic({message:a,isSend:n,conversationShopId:l})))}})})));var ll={scrollToMessage:fn};const ul=Lc((0,h.connect)((function(){return{}}),ll)((function(e){var t=e.region,s=e.message,a=e.isSend,o=e.scrollToMessage,i=e.conversationBuyerId,c=e.handleMessageIsSend,l=s.send_status,u=s.request_id,d=s.id,p=s.content,g=s.quoted_msg,f=a&&l===T.MessageSendStatus.SENDING,A=(0,n.useContext)(X);return r().createElement(K.StickerMessage,{imgCache:A,isSending:f,id:d,content:p,country:t,request_id:u,isSend:a,replyToMessage:g,scrollToMessage:o,conversationBuyerId:i,handleMessageIsSend:c})})));function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gl={visitShopSellerCenterRequested:O.visitShopSellerCenterRequested};const fl=Lc((0,h.connect)((function(e){return{isSubAccount:(0,O.isSubAccountSelector)(e),shopAccess:(0,O.shopAccessSelector)(e),shop:(0,O.currentConversationShopSelectors)(e)}}),gl)((function(e){var t=e.isSend,s=e.visitShopSellerCenterRequested,a=e.isSubAccount,o=e.message,i=e.shopAccess,c=e.shop.country,l=void 0===c?"":c,u=e.conversationShopId,d=Ic({message:o,isSend:t,conversationShopId:u});(0,n.useEffect)((function(){!t&&(0,O.$tracker)(pl({operation:T.TrackerOperation.IMPRESSION,trackerName:"impressionVoucherForReceiverInMinichat"},d))}),[]);var p=i.hasViewVoucherAccess,g=o.content,f=o.textContent,A=void 0===f?{}:f,h=o.id,m=A.country,E=A.id,v=A.url,S=g.shop_id,_=(g.source,function(){var e;v&&(S=(0,T.getUrlParam)("shop_id",v),(0,T.getUrlParam)("source",v)),e={messageId:h},Zc().put(Qc.default.claimVoucherRequested({payload:e})),(0,O.$tracker)(pl({trackerName:"clickClaimVoucher"},d))});return r().createElement(K.VoucherMessage,{voucher:A,isSend:t,shopRegion:l,isSubAccount:a,hasViewVoucherAccess:p,onOperatorClick:function(e){switch(e){case T.VoucherOperateType.DETAILS:!function(){v&&(S=(0,T.getUrlParam)("shop_id",v));var e="https://".concat((0,T.getSellerCenterUrl)(m),"/portal/marketing/vouchers/").concat(E);a?s({url:e,shopId:S}):window.open(e)}();break;case T.VoucherOperateType.CLAIM:_();break;case T.VoucherOperateType.USE:v&&(S=(0,T.getUrlParam)("shop_id",v)),window.open("https://".concat((0,T.getMallUrl)(m),"/shop/").concat(S))}}})})));function Al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const hl=Lc((function(e){var t=e.isSend,n=e.message,s=e.region,a=e.conversationShopId,i=n.type,c=n.content,l=function(e){var r=e.id;(0,O.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Al(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickProductListMessage"},Ic({message:n,isSend:t,conversationShopId:a,extraParams:{itemid:r}})))};return r().createElement(K.ProductsMessage,{region:s,type:i,isSend:t,content:c,handleClickItem:function(e){Xc(e,l)}})})),ml=Lc((0,h.connect)((function(e){return{currentUser:(0,O.currentUserSelector)(e)}}),{})((function(e){var t=e.measure,s=e.isSend,a=e.conversation,o=e.message,i=o.id,c=o.conversation_id,l=o.request_id,u=o.textContent,d=(0,n.useContext)(X);return r().createElement(K.FeedStoryMessage,{imgCache:d,id:i,requestId:l,measure:t,isSend:s,textContent:u,handleTrackStory:function(){(0,O.$tracker)({shopId:a.shop_id,trackerName:"clickHandleStoryMessage",data:{story_id:u.id,message_id:i,conversation_id:c}})}})})));function El(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?El(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):El(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Sl=Lc((function(e){var t=e.measure,n=e.isSend,s=e.message,a=e.region,o=e.conversationShopId,i=s.content,c=i.cart_items,l=void 0===c?[]:c,u=i.shop_id,d=s.textContent,p=void 0===d?[]:d,g=function(e){var t=e.id;(0,O.$tracker)(vl({trackerName:"clickCartProduct"},Ic({message:s,isSend:n,conversationShopId:o,extraParams:{itemid:t}})))};return r().createElement(K.CartReminderMessage,{isSend:n,measure:t,products:p,cartItemsCount:l.length,handleClickItem:function(e){Xc(e,g)},handleClickMessage:function(){var e=function(e,t){var n=e.map((function(e){var n=e.model_id,r=e.item_id,s=e.group_id,a={shopId:t,itemId:r};return n&&(a.modelId=n),s&&"0"!==s&&(a.itemGroupId=s),a}));return(0,T.encode)(JSON.stringify(n))}(l,u);window.open("https://".concat((0,T.getMallUrl)(a),"/cart?referrerItems=").concat(e,"&source=seller_chat")),(0,O.$tracker)(vl({trackerName:"clickCartButton"},Ic({message:s,isSend:n,conversationShopId:o})))}})}));P(4323).t;var _l=function(e,t){return e>t},yl=function(e){return e[e.length-1]},Cl=function(e,t){return e?function(){}:t},bl=function(e,t){return e.length===t.length&&e.every((function(e,n){var r=t[n];return JSON.stringify(e)===JSON.stringify(r)}))},Ml={sendMessagesRequested:hs};const xl=Lc((0,h.connect)((function(){return{}}),Ml)((function(e){var t=e.isSend,n=e.measure,s=e.sendMessagesRequested,a=e.message,o=e.conversationShopId,i=e.conversationBuyerId,c=e.conversationId,l=e.isInFaqHistoryModal,u=a.content,d=a.faq_session_id,p=Cl(l,s);return r().createElement(K.FaqMessage,{isSend:t,measure:n,sendMessagesRequested:p,content:u,conversationId:c,shopId:o,conversationUserId:i,faqSessionId:d})})));var Il=P(8674),wl={};wl.styleTagTransform=W(),wl.setAttributes=U(),wl.insert=q().bind(null,"head"),wl.domAPI=F(),wl.insertStyleElement=Y(),N()(Il.Z,wl);const Tl=Il.Z&&Il.Z.locals?Il.Z.locals:void 0;var Ol=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(n);function n(){return i(this,n),t.apply(this,arguments)}return l(n,[{key:"render",value:function(){var e=this.props,t=e.conversationId,n=e.conversationShopId,s=e.conversationBuyerId,a=e.sendMessagesRequested,o=e.isSend,i=e.isInFaqHistoryModal,c=e.message,l=void 0===c?{}:c,u=l.type,d=Cl(i,a),p=u===T.MessageTypes.MSG_TYPE_FAQ_UNSUPPORTED;return r().createElement("div",null,r().createElement("div",{className:Hi()(Tl.message,o?Tl.send:"",p?Tl.unsupportFaq:"")},(0,T.getCustomMessageText)(l.type)),p&&r().createElement(K.FaqButton,{isSend:o,conversationId:t,shopId:n,conversationUserId:s,sendMessagesRequested:d}))}}]),n}(r().PureComponent),Bl={sendMessagesRequested:hs};const kl=Lc((0,h.connect)(null,Bl)(Ol));var Rl={sendMessagesRequested:hs};const Pl=Lc((0,h.connect)((function(){return{}}),Rl)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.message,a=e.conversationShopId,o=e.conversationBuyerId,i=e.conversationId,c=e.isInFaqHistoryModal,l=s.id,u=s.content,d=s.faq_session_id,p=Cl(c,t);return r().createElement(K.FaqFeedbackPromptMessage,{id:l,content:u,sendMessagesRequested:p,conversationId:i,conversationUserId:o,isSend:n,shopId:a,faqSessionId:d})})));var Dl={sendMessagesRequested:hs};const Nl=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e)}}),Dl)((function(e){var t=e.sendMessagesRequested,n=e.isSend,s=e.conversationShopId,a=e.conversationBuyerId,o=e.conversationId,i=e.isInFaqHistoryModal,c=e.message,l=e.locale,u=c.content,d=c.faq_session_id,p=Cl(i,t);return r().createElement(K.FaqLiveAgentPromptMessage,{sendMessagesRequested:p,isSend:n,conversationId:o,shopId:s,conversationUserId:a,content:u,locale:l,faqSessionId:d})})));function jl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const Fl=Lc((function(e){var t=e.region,n=e.measure,s=e.isSend,a=void 0!==s&&s,i=e.message,c=e.conversationShopId,l=i.content,u=function(e){var t=e.id;(0,O.$tracker)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jl(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({trackerName:"clickBundleDealDetail"},Ic({message:i,isSend:a,conversationShopId:c,extraParams:{itemid:t}})))};return r().createElement(K.BundleDealMessage,{region:t,measure:n,isSend:a,content:l,handleClickItem:function(e){Xc(e,u)}})})),Ll=Lc((function(e){var t=e.measure,n=e.isSend,s=void 0!==n&&n,a=e.message.content;return r().createElement(K.FlashSaleMessage,{measure:t,isSend:s,content:a,handleClickItem:Xc})}));function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ul={visitShopSellerCenterRequested:O.visitShopSellerCenterRequested};const Hl=Lc((0,h.connect)((function(e){return{shopAccess:(0,O.shopAccessSelector)(e)}}),Ul)((function(e){var t=e.isSend,n=e.isSubAccount,s=e.visitShopSellerCenterRequested,a=e.message,o=e.shopAccess,i=void 0===o?{}:o,c=e.region,l=e.conversationShopId,u=i.hasViewOrderAccess,d=a.content,p=d.order_id,g=d.shop_id,f=a.textContent,A=Ic({message:a,isSend:t,conversationShopId:l});return r().createElement(K.RateReminderMessage,{isSend:t,textContent:f,hasViewOrderAccess:u,handleClickMessage:function(){t?(0,T.redirectionWithAccess)({access:u,isSubAccount:n,action:function(){return s({shopId:g,orderId:p})},url:"https://".concat((0,T.getSellerCenterUrl)((0,T.isVisitingCNSC)()?"cn":c),"/portal/sale/").concat(p)}):window.open("https://".concat((0,T.getMallUrl)(c),"/user/purchase/order/").concat(p,"/?shopid=").concat(g))},trackRateButton:function(){(0,O.$tracker)(Gl({trackerName:"clickRateButton"},A))},trackRateProduct:function(){(0,O.$tracker)(Gl({trackerName:"clickRateProduct"},A))}})})));var Yl=P(9424),Vl=P.n(Yl),Wl=P(2236),zl=P.n(Wl),Zl=P(1644),Ql={};Ql.styleTagTransform=W(),Ql.setAttributes=U(),Ql.insert=q().bind(null,"head"),Ql.domAPI=F(),Ql.insertStyleElement=Y(),N()(Zl.Z,Ql);const Xl=Zl.Z&&Zl.Z.locals?Zl.Z.locals:void 0,Kl=function(e){var t=e.title,n=e.closeModal,s=e.noCancel,a="".concat(Xl.root," ").concat(s?"":Xl.hasCancel);return r().createElement("div",{className:a},r().createElement("div",{className:Xl.title},t),!s&&r().createElement(S(),{svg:zl(),className:Xl.cancel,onClick:n}))};var Jl=P(5792),$l={};$l.styleTagTransform=W(),$l.setAttributes=U(),$l.insert=q().bind(null,"head"),$l.domAPI=F(),$l.insertStyleElement=Y(),N()(Jl.Z,$l);const eu=Jl.Z&&Jl.Z.locals?Jl.Z.locals:void 0;var tu=function(e){var t,s=e.label,a=e.title,o=e.children,i=e.closeable,c=e.onClick,l=e.className,u=e.getModalVisible,d=e.onClose,p=(0,n.useState)(!1),g=(0,rn.Z)(p,2),f=g[0],A=g[1],h=function(){var e=f;A(!e),"function"==typeof u&&u(!e),"function"==typeof d&&e&&d()};return t="#".concat(window.miniChatContainerId),r().createElement("div",{className:eu.root},r().createElement("div",{onClick:function(e){return function(e){var t=function(){e.stopPropagation(),h()};"function"==typeof c?c(t):t()}(e)}},s),r().createElement(Vl(),{isOpen:f,className:eu.content,overlayClassName:eu.overlay,shouldReturnFocusAfterClose:!1,onRequestClose:i?h:null,parentSelector:function(){return document.querySelector(t)}},r().createElement("div",{className:l},r().createElement(Kl,{title:a,closeModal:h}),o)))};tu.defaultProps={closeable:!1};const nu=tu;var ru=P(2760),su=P.n(ru),au=P(2147),ou={};ou.styleTagTransform=W(),ou.setAttributes=U(),ou.insert=q().bind(null,"head"),ou.domAPI=F(),ou.insertStyleElement=Y(),N()(au.Z,ou);const iu=au.Z&&au.Z.locals?au.Z.locals:void 0,cu="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPAAAADwCAMAAAAJixmgAAABIFBMVEUAAADr7vnt8Prt8Pnt8fvt8fvt8PvEpaPs8Prt8fvt8Pvo7Pbo7fjr7/nn7Pfs7/rv8f3h5fDg5PDi5/Hn6/To6/Te4+7s7/np7fni5vHo7Pjm6vfk6fbf4/De4/Dc4O3d4u3i5/TZ3uvP1OHZ3ura3urvWz7y9f7/gmrW2ufvWz7Y3enxXUDW2uj4bVLyYET/g2vvWz7xXkL+eF70ZUn2Zkr+d13w8/zj5/Dm6vTj5vH3a0//gGf5blP4bVHN09/L0N3y9f7S1+Po7PbX2+fl6fPw8vvP1OHr7vfd4eza3+rs7/ng5e/u8Pre4u3U2eXv8/zj5/Hi5vH////Y3enl5/LwWz7yYUX09fn2Z0z/f2f5bVL8c1n4+fv/eV/u8Pak0IEiAAAAP3RSTlMABwwZEhYkBSAQHAQzLzcrJ0JKPi4pRx86Oj5CRlRQWE1PXe3Lp+rn6djDsJNrD6aLg/PHWSXwh4Ht37uejXhSf/O8AAAHjUlEQVR42uzWS2oDMRBF0TfTMkImctMI9z8T24FsokXbJvtfRqwWxJ+JZzao7tnBpSiqBAAAAAAAAAAAAAAAAABPuLaqWic72uNFKzuqFFzJjOk3+ZIZ4zkZZMbhlBxkxm5JRpnRx7jEOMmKKSa9zBjnpNat7b7gVySswd1d73C82KtM9Ro83vUWfZn7NXjSPzecV6UG+9Trb3p3p+xbZQoPK9wsWVChXOd95669MWtkQ5gzK73dnNWlHuFH3liv+ty7lRXhfb0fm58X2nxq5YL3zXvm+8eeHewmCwQBHB9YNEqXGq1iuPkqXwhkjUiKpIkX0vd/i8+NG6sG1llbBlb9zUUOHv4ZwmXIelUxdO0fMaCgD/6knD4Ea702/Nrwa8P933BKONTB7ohPw1U45SP3GV7pQbT6ETGQPokBHTeaXYrkllNiQIaFs2she+BgP6yzfNhgFtZjqZ6twe60SZpu6YYumGuCtSzd8OCj0ZYYtMzxGBu4/FmCWRDdstWzKtgN3m/b6tkUPOAYG2LQmnGAstGzJ9iZzFE2evYE+xOcjZ41wc4CSRCDlnhDJCHEhm7aC2YjJKFnzYb9JZLQsycYS+hZE8ywhJ41wd4AKSYGLXE9pFjPmmBnjBTrWRMMLlKsZ0+w82zB4ODECenE0B5ksJ5FGwZ4cxASYtCqt9uSJCYd6FqiZ9mGexwsL9Wz1Uxdqps9SPD1pbrZQwTXXarJJElxx5wY/7HxUk3l6y5pVUqp+DLVfKkmUtzhuzyp4sJM46Xah1p9CE7Lc9+FEXfaxAUSO2Oy96J4VyO7tlN4YzCHOt0HJ+W1RBd7Hf3RjEGN7oP3p70m6meKqVV0wWrFLpMnbWhLZqg4RsaZVJVSlRmINMYAbz4//uZq350Hi1LaHx/U59o0+L3BCDz+8xSM4aDz4H0pCVV/HpyjcI25zy8MAKAnwcn5hiuVmyEmDwJ+GCQPoPPgC9Xp/Za5KHMpOAyKA38u/wX1lRa5gcn8MGjLNoKze0f1VrmJhRmnPxsuqvKoWJsYDhenQfD6E6x6q93ayOjM8Paw3gSr93mfr+8KVpa3+PDX/nNXvz9pA3Ecx48KgkxnFIZTBB1gFkP2eG5Prr1eKXeUNjCW7Nn+//9idz1+iPZKvx3Iyes0NkJi3n5aZflMVe+QQVVXrqqbGROs/gP/FVccdNgRkCnB6o6OeyHAwSWjgv9wuBKMtYNgnuPkDy7CFMxYmM+/5HACYqGt42/MAimYEuz+inE4aK9ZwTO4AoDsfT/BfOqOBo4wcqcsXzASzAqmWsHQeW404VQpxz5kgHZjlsuG4GDgvPJ7HqwBrM2P5pIazEdOkjGjAgIyJDhN6OhMqQgua46G+cFTZ27ghVzuHXpjZ847wIUDRxkyusLdZTEqwzY2PTicr8uidYvneoKADAmONIeqLJdGr3hOrAmc2JBgHbWjFyVRD/fXEwRiRHCkE6p9SbLfjvR9zxNTGsGPztgRxhEhUeIZxi8fIRiDF1YDc5GWjA4MmDjKgWi46obWm8RPMajLhGDdHUsH0ozoRQMJ9IfaiGDNxEzWDEkabyB8R/tEtmciawKShg2E3l4XJiQCHw1vLHBCfP2hY+ErAjF34eFIoCTVSLIAExsfTFIXVu+pouxMCNbGSMRP5Q6FyoEs7GYNPpSFvQzBQ8lCe5yYEB96dKauQP00xBV+IBADFtZgrsD8NDNX6KHyYSxMPWGC0wSe8IRAzF2YeFKE9dQ7rtE+J/a3B4eeEGI95gk/EYTRwZGaeMPAT6j8zhbGWuFECPzUl38UEYTZwdFUYjgZn0pP6N0tnFLMAonjJDSQflpov/AW2RiHgcTk9frBsyDWL8MWNjpYIGGMkZffZ+HcAyzJ8GBbFCuc4PnMMpeGwqr4YBa2BcIWKJFPu08oZ2tAG5sRbCcfVexzlozPlsXZJzYjWMeOYSriXh+KMTVgY6wF33iZ7FP+EiXxr4IrD4eysPhQ/Gg917elVXE/a5cpwfZmmBAqEaJqlR5V+vtb2M5zcvv2uCiulCz05gpFnJOdU2dZ3PvW6bQbtbNP1WIBIejC8NKr8+tGq9PJuXD+4GfFnaVW4/r8SnTvQqF0fHrRvlvAbzyx+JGdx0jpde7WtS9Oj0tbzC5W6rX71rrcC0OLu3asJayK71oJ7mv1ShH9J6tar7W/JLB3qbv8XGpLd49E6bcTfJHatXrVyjvs8cfbSx0bAFqb5DLW7pFY9zLV7cdj6NQnldPmbRr7jTWU+54KFpe36ZqnlROUTeGoftPcxN6Jru7mti/mLuPiB3HV3OymflTYWFs9u8mia++UCl3pXiw0+t2u7L3J6Kya0vyhdP45o3/t3U0OgkAMhuFSRkUGhUQN7llzB+9/KoOTKCFE4/9k+j5dddl8m26a9t3ph7p+N3F8Qr3w8+G21TZRVZvNPc1KWqGTdDfJG6fs6mjsH6tf5STwZROTw33NG0of5l2acZk4LwzJRbSMUzvUyNB/gIrLTXGyMEacMaJrU1RETRERr4aEzSMzw0uQGSFX3gRBJFa3+vtlOL6MbAEAAAAAAAAAAAAAAID0nAFUiEuaAG9VMQAAAABJRU5ErkJggg==";var lu=P(4323).t,uu=function(e){var t=(0,n.useRef)(null),s=(0,n.useRef)(0),a=(0,T.throttle)((function(n){var r=e.loadMoreOffset,a=e.onLoadMore,o=e.onScroll,i=e.status,c=t.current,l=c.scrollHeight,u=c.scrollTop,d=c.clientHeight;if(i===T.DataFetchStatus.PENDING)return!1;l-u-d<=r&&s.current<u&&a&&a(),s.current=u,o&&o()}),200),o=e.listData,i=e.customRootClass,c=e.makeItem,l=e.status,u=e.emptyImage,d=e.emptyText,p=e.emptyClassName;return r().createElement("div",{className:Hi()(iu.root,i),onScroll:a,ref:t},l===T.DataFetchStatus.SUCCEED||l===T.DataFetchStatus.PENDING||l===T.DataFetchStatus.FAILED?o.length>0?o.map((function(e,t){return c(e,t)})):r().createElement(su(),{classname:p||iu.empty,image:u||cu,text:d||lu("common.scroll_list.no_data")}):"")};uu.defaultProps={loadMoreOffset:10,emptyImage:cu};const du=E()(uu),pu=function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=s.textContent,o=s.id;return r().createElement(K.EvaluationMessage,{measure:t,content:a,onSubmit:function(e){return n(e)},messageId:o})};var gu={evaluationRequested:He};const fu=Lc((0,h.connect)((function(){return{}}),gu)((function(e){return r().createElement(pu,e)})));var Au=P(699),hu={};hu.styleTagTransform=W(),hu.setAttributes=U(),hu.insert=q().bind(null,"head"),hu.domAPI=F(),hu.insertStyleElement=Y(),N()(Au.Z,hu);const mu=Au.Z&&Au.Z.locals?Au.Z.locals:void 0;var Eu=T.MessageTypes.MSG_TYPE_WEBVIEW,vu=T.MessageTypes.MSG_TYPE_RATE_CARDS,Su={},_u=r().createContext({});const yu=function(e){var t=e.isScChat,s=e.currentUser,a=e.isSubAccount,o=e.messageList,i=e.fillMessageRequested,c=e.messageHttpStatus,l=e.fetchFaqMessagesRequested,u=e.sourceId,d=e.shop,p=e.conversationId,g=e.conversationShopId,f=e.conversationBuyerId,A=e.conversationStatus,h=e.handleMessageIsSend,m=e.messagesFillStatusMap,E=e.currentFaqSessionInfo,v=function(){},S=(0,n.useRef)({});return r().createElement("div",{className:mu.list},r().createElement(_u.Provider,{value:S.current},r().createElement(du,{makeItem:function(e,n){if(e&&e.content){var o=e.id,c=e.type,u=e.content,S=void 0===u?{}:u,_=e.to_id,y=e.from_user_name,C=e.created_timestamp,b=_===f,M=(0,T.customizeTime)(1e3*C),x=id(c);return e.type===Eu&&S.type===vu&&_===s.id&&(x=fu),r().createElement("div",{key:o,className:mu.baseMessage},function(e,t,n){var s=[r().createElement("span",{key:"name",className:mu.username},e),r().createElement("span",{key:"split",className:mu.split}),r().createElement("span",{key:"time",className:mu.stamp},t)],a="".concat(mu.header," ").concat(n?mu.right:"");return r().createElement("div",{className:a},n?s.reverse():s)}(y,M,b),r().createElement(x,{className:mu.message,index:n,shop:d,message:e,isScChat:t,newMessageFlag:!1,currentUser:s,isSubAccount:a,hasSourceMessageMap:Su,fillMessageRequested:i,fetchFaqMessagesRequested:l,conversationId:p,conversationShopId:g,conversationBuyerId:f,conversationStatus:A,measure:v,replyOfferRequested:v,evaluationRequested:v,claimVoucherRequested:v,sendMessagesRequested:v,resendMessageRequested:v,translateMessagesRequested:v,messageFillStatus:m[o],handleMessageIsSend:h,isInFaqHistoryModal:!0,currentFaqSessionInfo:E}))}},listData:o,status:c,onLoadMore:function(){return l({sourceId:u,shopId:g})},onRefresh:function(){return l({sourceId:u,shopId:g,reset:!o.length})}})))};var Cu={changeTranslateStatus:$s,fillMessageRequested:Et};const bu=(0,h.connect)((function(e){return{sourceId:(0,O.faqIdSelector)(e),isScChat:(0,O.isScChatSelector)(e),isSubAccount:(0,O.isSubAccountSelector)(e),messageList:(0,O.faqHistoryMessagesSelector)(e),currentUser:(0,O.currentUserSelector)(e),messageHttpStatus:(0,O.faqHistoryhttpStatusSelector)(e),currentConversation:(0,O.currentConversationSelector)(e),conversationId:(0,O.currentConversationIdSelector)(e),conversationShopId:(0,O.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,O.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,O.currentConversationStatusSelectors)(e),shop:(0,O.currentConversationShopSelectors)(e),messagesFillStatusMap:(0,O.messageFillStatusMapSelector)(e),currentFaqSessionInfo:(0,O.currentFaqSessionInfoSelector)(e)}}),Cu)((function(e){return r().createElement(yu,e)}));var Mu=P(7539),xu={};xu.styleTagTransform=W(),xu.setAttributes=U(),xu.insert=q().bind(null,"head"),xu.domAPI=F(),xu.insertStyleElement=Y(),N()(Mu.Z,xu);const Iu=Mu.Z&&Mu.Z.locals?Mu.Z.locals:void 0;var wu=P(4323).t;const Tu=function(e){var t=e.isSend,n=e.message,s=e.updateCurrentFaqId,a=e.conversationShopId,o=e.fetchFaqMessagesRequested,i=e.handleMessageIsSend,c=e.locale,l=n.id,u=n.content.messages,d=void 0===u?[]:u,p=n.textContent,g=(void 0===p?{messages:[]}:p).messages,f=(void 0===g?[]:g).filter((function(e){return"webview"!==e.type})).map((function(e){var t=function(e){var t=(0,T.previewMessage)({message:e,enableTranslation:!1,locale:c,conversationShopId:a}).text;return{username:e.from_user_name,content:t}}(e),n=t.username,s=t.content;return r().createElement("div",{key:"faq-".concat(e.id),className:Iu.preview},"".concat(n,": ").concat(s))}));return r().createElement(nu,{onClose:function(){return s({id:null})},title:wu("conversation_list.conversation_cell.new_bundle_message_message"),className:Iu.container,label:r().createElement("div",{onClick:function(){return o({sourceId:l,shopId:a,reset:!0})},className:Hi()(Iu.root,t?Iu.send:Iu.receive)},r().createElement("div",{className:Iu.header},wu("conversation_list.conversation_cell.new_bundle_message_message")),r().createElement("div",{style:{height:"".concat(18*(d.length>3?3:d.length),"px")}},f),r().createElement("div",{className:Iu.footer},wu("faq_history.see_all")))},r().createElement(bu,{fetchFaqMessagesRequested:o,handleMessageIsSend:i}))};var Ou={fetchFaqMessagesRequested:Ca,updateCurrentFaqId:xa};const Bu=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e)}}),Ou)((function(e){return r().createElement(Tu,e)})));var ku=P(1500),Ru={};Ru.styleTagTransform=W(),Ru.setAttributes=U(),Ru.insert=q().bind(null,"head"),Ru.domAPI=F(),Ru.insertStyleElement=Y(),N()(ku.Z,Ru);const Pu=ku.Z&&ku.Z.locals?ku.Z.locals:void 0;var Du=T.MessageTypes.MSG_TYPE_SELECTED_OPTION,Nu=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).renderOption=r.renderOption.bind(u(r)),r.sendMessage=r.sendMessage.bind(u(r)),r}return l(n,[{key:"sendMessage",value:function(e){var t=e.request_live_agent,n=e.payload,r=e.text,s=this.props;(0,s.sendMessagesRequested)({conversationId:s.conversationId,messages:[{type:Du,content:{text:r,payload:n,request_live_agent:t}}]})}},{key:"renderOption",value:function(e,t){var n,s=this,a=e.text,i=e.variant,c=this.props,l=c.message,u=c.currentConversationMaxOptionHideTime,d=l.created_timestamp<u,p=Hi()(Pu.option,(o(n={},Pu.primary,1===i),o(n,Pu.invalid,d),n));return r().createElement("div",{key:t,className:p,title:a,onClick:function(){if(d)return null;s.sendMessage(e)}},a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSensitiveUrl,s=t.message,a=s.content,o=a.title,i=a.options,c=void 0===i?[]:i,l=s.message_option;return r().createElement("div",{className:Pu.root},r().createElement("div",{className:Pu.title},r().createElement(K.Text,{text:o,messageOption:l,handleSensitiveUrl:n})),c.map((function(t,n){return e.renderOption(t,n)})))}}]),n}(n.PureComponent),ju={handleSensitiveUrl:Aa,sendMessagesRequested:hs};const Fu=Lc((0,h.connect)((function(e){return{conversation:(0,O.currentConversationSelector)(e),currentConversationMaxOptionHideTime:(0,O.currentConversationMaxOptionHideTimeSelectors)(e)}}),ju)(Nu)),Lu=Lc((function(e){var t=e.isSend,n=e.message.content;return r().createElement(K.AddOnDealMessage,{content:n,isSend:t,handleClickItem:Xc})}));var qu={showMediaPreviewModalRequested:O.showMediaPreviewModalRequested,scrollToMessage:fn};const Gu=(0,h.connect)((function(e,t){return{videoInfo:(0,O.selectVideoInfoByKey)(t.message.request_id)(e)}}),qu)((function(e){var t=e.isSend,n=e.videoInfo,s=e.showMediaPreviewModalRequested,a=e.message,o=e.conversationShopId,i=e.scrollToMessage,c=e.conversationBuyerId,l=e.handleMessageIsSend,u=a.id,d=a.conversation_id,p=a.to_id,g=a.from_id,f=a.request_id,A=a.content,h=a.send_status,m=a.quoted_msg,E=t&&h===T.MessageSendStatus.SENDING;return r().createElement(K.VideoMessage,{id:u,isSend:t,content:A,isSending:E,videoInfo:n,onPlayVideo:function(e){(0,O.$tracker)({trackerName:"clickPlayInVideoMessage",data:{message_id:u===f?0:u,conversation_id:d,is_sender:t,to_user_id:p,from_user_id:g,video_original_duration:A.duration_seconds},conversationShopId:o}),s({messageId:e})},replyToMessage:m,scrollToMessage:i,conversationBuyerId:c,handleMessageIsSend:l})})),Uu=Lc((function(e){return r().createElement(Gu,e)}));var Hu={handleSensitiveUrl:Aa,showMediaPreviewModalRequested:O.showMediaPreviewModalRequested};const Yu=Lc((0,h.connect)((function(){return{}}),Hu)((function(e){var t=e.isSend,s=e.measure,a=e.showMediaPreviewModalRequested,o=e.message,i=e.handleSensitiveUrl,c=e.conversationShopId,l=o.content,u=o.id,d=o.request_id,p=o.message_option,g=o.business_tag,f=(0,n.useContext)(X),A={shopId:c,data:{message_id:u,business_tag:g}};return r().createElement(K.ImageWithTextMessage,{content:l,measure:s,messageId:u,requestId:d,isSend:t,imgCache:f,messageOption:p,handleSensitiveUrl:i,showMediaPreviewModalRequested:a,trackerData:A})})));var Vu={evaluationRequested:He};const Wu=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e),currentUser:(0,O.currentUserSelector)(e)}}),Vu)((function(e){var t=e.measure,n=e.evaluationRequested,s=e.message,a=e.conversationId,o=e.isSend,i=e.locale,c=e.isInFaqHistoryModal,l=e.currentUser,u=e.conversationShopId,d=s.id,p=s.from_shop_id,g=s.textContent,f=s.to_id;return r().createElement(K.RateCardMessage,{measure:t,rateShopId:p,onSubmit:n,conversationId:a,isSend:o,textContent:g,locale:i,isInFaqHistoryModal:c,isSelfReceived:f===l.id,conversationShopId:u,messageId:d})})));function zu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zu(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qu={sendMessagesRequested:hs};const Xu=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e)}}),Qu)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.faq_session_id,g=Cl(l,i);return r().createElement(K.NewFaqMessage,{isSend:n,sendMessagesRequested:g,content:d,conversationId:s,shopId:a,conversationUserId:o,locale:u,handleSendMessage:function(e){var t=e.type,n=e.content;g({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:t,content:Zu(Zu({},n),{},{faq_session_id:p})}]})},faqSessionId:p})})));function Ku(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ku(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ku(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $u=T.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,ed=T.MessageTypes.MSG_TYPE_FAQ_QUESTION,td=T.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,nd={sendMessagesRequested:hs};const rd=Lc((0,h.connect)((function(e){return{locale:(0,O.localeSelector)(e)}}),nd)((function(e){var t=e.isSend,n=void 0!==t&&t,s=e.conversationId,a=e.conversationShopId,o=e.conversationBuyerId,i=e.sendMessagesRequested,c=e.message,l=e.isInFaqHistoryModal,u=e.locale,d=c.content,p=c.type,g=c.faq_session_id,f=Cl(l,i);return r().createElement(K.FaqListMessage,{isSend:n,content:d,type:p,locale:u,handleSendMessage:function(e){f({conversationId:s,conversationUserId:o,messages:[{shopId:a,type:p===$u?ed:td,content:Ju(Ju({},e),{},{faq_session_id:g})}]})}})}))),sd=Lc((0,h.connect)((function(e){return{currentBuyerShopId:(0,O.currentBuyerShopIdSelector)(e)}}),null)((function(e){var t=e.isSend,n=e.message,s=e.currentBuyerShopId,a=e.conversationId,o=e.measure,i=n.content.bot_data,c=n.faq_session_id;return r().createElement(K.ChatbotMessage,{isSend:t,message:i,shopId:s,conversationId:a,measure:o,faqSessionId:c})})));var ad,od=(o(ad={},T.MessageTypes.MSG_TYPE_TEXT,Uc),o(ad,T.MessageTypes.MSG_TYPE_IMAGE,Wc),o(ad,T.MessageTypes.MSG_TYPE_OFFER,Kc),o(ad,T.MessageTypes.MSG_TYPE_ORDER,cl),o(ad,T.MessageTypes.MSG_TYPE_STICKER,ul),o(ad,T.MessageTypes.MSG_TYPE_PRODUCT,el),o(ad,T.MessageTypes.MSG_TYPE_NOTIFICATION,qc),o(ad,T.MessageTypes.MSG_TYPE_VOUCHER,fl),o(ad,T.MessageTypes.MSG_TYPE_ITEM_LIST,hl),o(ad,T.MessageTypes.MSG_TYPE_FEED_STORY,ml),o(ad,T.MessageTypes.MSG_TYPE_SHOPPING_CART,Sl),o(ad,T.MessageTypes.MSG_TYPE_FAQ,xl),o(ad,T.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_QUESTION,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_FEEDBACK,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_FEEDBACK_PROMPT,Pl),o(ad,T.MessageTypes.MSG_TYPE_FAQ_LIVEAGENT_PROMPT,Nl),o(ad,T.MessageTypes.MSG_TYPE_UNTATED_ORDER_REMINDER,Hl),o(ad,T.MessageTypes.MSG_TYPE_BUNDLE_MESSAGE,Bu),o(ad,T.MessageTypes.MSG_TYPE_BUNDLE_DEAL,Fl),o(ad,T.MessageTypes.MSG_TYPE_FLASH_SALE,Ll),o(ad,T.MessageTypes.MSG_TYPE_OPTION_PACK,Fu),o(ad,T.MessageTypes.MSG_TYPE_SELECTED_OPTION,Uc),o(ad,T.MessageTypes.MSG_TYPE_ADD_ON_DEAL,Lu),o(ad,T.MessageTypes.MSG_TYPE_VIDEO,Uu),o(ad,T.MessageTypes.MSG_TYPE_IMAGE_WITH_TEXT,Yu),o(ad,T.MessageTypes.MSG_TYPE_RATE_CARD,Wu),o(ad,T.MessageTypes.MSG_TYPE_NEW_FAQ,Xu),o(ad,T.MessageTypes.MSG_TYPE_FAQ_CATEGORY_CHOICE,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_TYPE_CHOICE,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_QUESTION_LIST,rd),o(ad,T.MessageTypes.MSG_TYPE_FAQ_CATEGORY_LIST,rd),o(ad,T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_TEXT_MESSAGE,Uc),o(ad,T.MessageTypes.MSG_TYPE_FAQ_TYPE_BOT_REQUEST_ORDER_MESSAGE,(function(e){return r().createElement(cl,e)})),o(ad,T.MessageTypes.FAQ_TYPE_BOT_RESPONSE_MESSAGE,sd),o(ad,T.MessageTypes.MSG_TYPE_SECURITY_TIPS,Lc(K.SecurityTipsMessage)),ad);const id=function(e){return od[e]||kl};var cd=function(e,t){var n=(0,rn.Z)(e,2),r=n[0],s=n[1];return r<=t&&s>=t},ld=function(e,t){return e&&e.length&&t?e.findIndex((function(e){return e.id===t})):null},ud=T.MessageTypes.MSG_TYPE_TEXT,dd=T.MessageTypes.MSG_TYPE_WEBVIEW,pd=T.MessageTypes.MSG_TYPE_NOTIFICATION,gd=T.MessageTypes.MSG_TYPE_RATE_CARDS,fd=T.MessageTypes.MSG_TYPE_SHOPPING_CART,Ad="#message-virtualized-list",hd=function(e){p(n,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(n);function n(e){var r;return i(this,n),(r=t.call(this,e)).keyMapper=r.keyMapper.bind(u(r)),r.getListRef=r.getListRef.bind(u(r)),r.scrollUpHandler=(0,T.memFn)(_l,10),r.handleWheel=r.handleWheel.bind(u(r)),r.rowRenderer=r.rowRenderer.bind(u(r)),r.handleScroll=r.handleScroll.bind(u(r)),r.handleGoToBottom=r.handleGoToBottom.bind(u(r)),r.handleRowsRender=r.handleRowsRender.bind(u(r)),r.handleScrollToMessage=r.handleScrollToMessage.bind(u(r)),r.addExposedMessageId=r.addExposedMessageId.bind(u(r)),r.handleAutoSizerResized=r.handleAutoSizerResized.bind(u(r)),r.handleConversationChanged=r.handleConversationChanged.bind(u(r)),r.handleMsgListChanged=r.handleMsgListChanged.bind(u(r)),r.handleMsgListLengthUnchange=r.handleMsgListLengthUnchange.bind(u(r)),r.debounceMarkMessage=(0,T.debounce)(r.handleMarkMessage.bind(u(r)),300),r.debounceFetchMoreMessage=(0,T.debounce)(r.fetchMoreMessage.bind(u(r)),300),r.dobouceUpdateCurrentConversationCanRead=(0,T.debounce)(r.updateCurrentConversationCanRead.bind(u(r)),100),r.containerProps={onWheel:r.handleWheel},r._cache=new(w())({fixedWidth:!0,keyMapper:r.keyMapper}),r.imgCache={},r.listNode=null,r.startIndex=0,r.stopIndex=0,r.scrollTop=0,r.containerHeight=0,r.targetMsgRow=0,r.targetRowInfo=null,r.exposedMessageIds=[],r.hasSourceMessageMap={},r.stickyScrollPosition=null,r.messageScrollDirection=null,r.unreadMsgIdChanged=!1,r.state={firstUnreadMsgId:null,shouldRenderNewMessageTip:!1},r}return l(n,[{key:"addExposedMessageId",value:function(e){this.exposedMessageIds.push(e)}},{key:"getListRef",value:function(e){this.listNode=e}},{key:"keyMapper",value:function(e){var t=this.props.messageList[e];return t&&t.id}},{key:"onMeasure",value:function(e,t){var n,r;t(),this.targetRowInfo&&cd(this.targetRowInfo.range,e)&&(null===(n=this.listNode)||void 0===n||null===(r=n.scrollToRow)||void 0===r||r.call(n,this.targetRowInfo.index))}},{key:"cleanTargetRowInfo",value:function(){this.targetRowInfo=null}},{key:"componentDidMount",value:function(){this.onAppendMessage(),this.shouldScrollToBottom=!0,O.EventBus.on("scrollToMessage",this.handleScrollToMessage)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this,r=Object.keys(e),s=Object.keys(this.props);return r.length!==s.length||t.shouldRenderNewMessageTip!==this.state.shouldRenderNewMessageTip||t.firstUnreadMsgId!==this.state.firstUnreadMsgId||r.some((function(t){var r,s,a=e[t],o=n.props[t],i=!1;switch(t){case"currentConversation":i=a.id!==o.id;break;case"unreadMessageIds":s=o,i=!((r=a).length===s.length&&r.every((function(e,t){return e===s[t]})));break;case"messageList":i=!bl(a,o);break;default:i=a!==o}return i}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.conversationId,n=e.messageList,r=e.unreadMessageIds,s=e.navigateToUnreadMessageId,a=e.currentConversation,o=this.props,i=o.conversationId,c=o.messageList,l=o.unreadMessageIds,u=o.navigateToUnreadMessageId,d={};if(this.conversationChanged=t!==i,(this.conversationChanged||l.length&&!r.length)&&(d.shouldRenderNewMessageTip=!1),this.unreadMsgIdChanged=u!==s,this.unreadMsgIdChanged){var p=function(e,t,n){var r=null,s=[];return e&&n&&(s=t.filter((function(t){var r=(0,T.getMessageIsSend)(t,e);return t&&!r&&(0,T.greaterThan)(t.id,n)})).map((function(e){return e.id}))),s.length&&(r=s[0]),r}(a,n,s);d.firstUnreadMsgId=p}this.conversationChanged?this.handleConversationChanged():c.length!==n.length?this.handleMsgListChanged(e):this.handleMsgListLengthUnchange(e),(0,T.checkEmptyObject)(d)||this.setState(d)}},{key:"componentDidUpdate",value:function(){var e=this;if(this.conversationChanged)this.conversationChanged=!1,this.onAppendMessage();else if(this.messageScrollDirection)1===this.messageScrollDirection?this.onAppendMessage():-1===this.messageScrollDirection&&this.onPrependMessage(),this.messageScrollDirection=null;else if(this.unreadMsgIdChanged){var t=this.props.messageList,n=this._cache._cellHeightCache,r=t.findIndex((function(t){return t.id===e.state.firstUnreadMsgId}));if(r>=0){var s=t.slice(r,t.length);if(s.length){var a=0;if(s.forEach((function(e){a+=n[e.id]})),a<this.containerHeight){var o,i,c=t.length-1;this.targetRowInfo={index:c,range:[this.startIndex,c]},null===(o=this.listNode)||void 0===o||null===(i=o.scrollToRow)||void 0===i||i.call(o,c)}}}}}},{key:"componentWillUnmount",value:function(){O.EventBus.removeListener("scrollToMessage",this.handleScrollToMessage)}},{key:"handleAutoSizerResized",value:function(e){var t=e.height;if(this.containerHeight){var n=t-this.containerHeight;if(n<0){var r=document.getElementById(Ad);r&&(r.scrollTop=r.scrollTop-n)}}this.containerHeight=t,this.shouldScrollToBottom&&t&&(this.shouldScrollToBottom=!1,this.onAppendMessage())}},{key:"handleScrollToMessage",value:function(e){var t=this.props.isNavigateToUnreadMessage,n=ld(this.props.messageList,e);if(n>=0){var r,s,a=t?n+1:n;this.targetMsgRow=a,null===(r=this.listNode)||void 0===r||null===(s=r.scrollToRow)||void 0===s||s.call(r,a)}}},{key:"handleConversationChanged",value:function(){var e,t,n=this.props,r=n.messageList;(0,n.setCurrentConversationCanRead)({canRead:!0}),this.scrollTop=0,this.startIndex=0,this.stopIndex=0,this.cleanTargetRowInfo(),this.scrollUpHandler.reset(),this.hasSourceMessageMap={},this.shouldScrollToBottom=!0,null===(e=this.listNode)||void 0===e||null===(t=e.forceUpdateGrid)||void 0===t||t.call(e);var s=ld(r,this.state.firstUnreadMsgId);s>-1&&this._cache.clear(s)}},{key:"handleMsgListLengthUnchange",value:function(e){var t,n,r=e.messageList,s=e.hasMoreOlderMessage,a=(e.unreadMessageIds,e.currentConversationCanRead,this.props),o=a.messageList,i=(a.unreadMessageIds,a.hasMoreOlderMessage),c=function(e,t,n,r){var s=e.slice(n,r+1),a=t.slice(n,r+1);return!bl(s,a)}(o,r,this.startIndex,this.stopIndex);(c||i&&!s)&&(null===(t=this.listNode)||void 0===t||null===(n=t.forceUpdateGrid)||void 0===n||n.call(t));var l=yl(r),u=yl(o);if(l&&u){var d=l.type,p=l.request_id,g=l.errorCode,f=l.message_option,A=l.textContent,h=l.send_status,m=u.request_id,E=u.retryRequestId,v=u.errorCode,S=u.message_option,_=u.send_status,y=u.textContent;switch(d){case ud:p!==m&&p!==E||!(h!==_||g!==v&&g===T.MessageErrorCode.BLACKLIST||f!==S&&0!==f)||(this.messageScrollDirection=1);break;case fd:!y&&A&&(this.messageScrollDirection=1)}}}},{key:"handleMsgListChanged",value:function(e){var t,n,r,s,a,o=this.props.messageList,i=e.currentConversation,c=e.messageList,l=e.unreadMessageIds,u=e.currentConversationCanRead,d=o.length,p=c.length,g=yl(c),f=g&&(0,T.getMessageIsSend)(g,i),A=!0,h=function(e,t){for(var n=e.length-1;n>=0;){var r=e[n];if(!t.includes(r.id))return n;n--}}(c,l);(u||!l.length||f||this.stopIndex>=h)&&(A=!1),this.setState({shouldRenderNewMessageTip:A}),t=c,s=(n=o).length,a=t.length,!s&&a||null!==(r=n[0])&&void 0!==r&&r.isFaking||(s?n[0].id:null)===(a?t[0].id:null)?!f&&d&&d-1!==this.stopIndex||(this.cleanTargetRowInfo(),this.messageScrollDirection=1,this.onAppendMessage()):(this.cleanTargetRowInfo(),this.stickyScrollPosition={index:this.startIndex+p-d,stickyScrollTop:this.scrollTop},this.messageScrollDirection=-1)}},{key:"handleWheel",value:function(e){this.targetRowInfo&&e.deltaY<0&&this.cleanTargetRowInfo()}},{key:"handleMarkMessage",value:function(){var e=this.props.unreadMessageIds.length;if(e){var t=this.props,n=t.showChatWindow,r=t.showConversationDetail,s=t.messageList,a=t.unreadMessageIds,o=t.markMessagesRequested,i=t.currentConversation,c=i.status,l=i.id,u=a[e-1],d=ld(s,u);n&&r&&"closed"!==c&&this.stopIndex>=d&&o({isRead:!0,conversationId:l,latestMessageId:u})}}},{key:"onAppendMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?"end":t,r=e.index,s=void 0===r?null:r,a=this.props,o=a.inScrollToMessage,i=a.messageList,c=a.isNavigateToUnreadMessage;if(!o&&i.length&&!c){var l,u,d,p,g,f,A=null,h=s||i.length-1,m="end"===n;m?this.targetRowInfo={index:h,range:[this.startIndex,h]}:A=null===(l=this.listNode)||void 0===l||null===(u=l.getOffsetForRow)||void 0===u?void 0:u.call(l,{index:h,alignment:n}),m?null===(d=this.listNode)||void 0===d||null===(p=d.scrollToRow)||void 0===p||p.call(d,h<0?0:h):null===(g=this.listNode)||void 0===g||null===(f=g.scrollToPosition)||void 0===f||f.call(g,A)}}},{key:"onPrependMessage",value:function(){var e,t,n,r,s=this.stickyScrollPosition||{},a=s.index,o=s.stickyScrollTop,i=(null===(e=this.listNode)||void 0===e||null===(t=e.getOffsetForRow)||void 0===t?void 0:t.call(e,{index:a,alignment:"start"}))||0;null===(n=this.listNode)||void 0===n||null===(r=n.scrollToPosition)||void 0===r||r.call(n,i+o)}},{key:"handleGoToBottom",value:function(){var e=this.props,t=e.conversationId,n=e.inScrollToMessage,r=e.fetchRequested,s=e.deleteConversationMessageHash,a=e.setInScrollToMessage,o=e.currentConversation,i=e.isNavigateToUnreadMessage,c=e.setNavigateToUnreadMessage;n||i?(n&&a({inScrollToMessage:!1}),i&&c({isNavigateToUnreadMessage:!1}),t&&s({conversationId:t}),r({conversation:o,needReset:!0}),this.shouldScrollToBottom=!0):this.onAppendMessage()}},{key:"fetchMoreMessage",value:function(e){var t=this.props,n=t.messageList,r=t.fetchRequested,s=t.conversationId;n.length&&r({direction:e,conversationId:s})}},{key:"updateCurrentConversationCanRead",value:function(e){var t=this.props,n=t.currentConversationCanRead,r=t.setCurrentConversationCanRead;e!==n&&r({canRead:e})}},{key:"handleScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop,s=this.props,a=s.messageList,o=s.inScrollToMessage,i=s.hasMoreOlderMessage,c=s.hasMoreLatestMessage,l=s.handleComponentScroll,u=s.isNavigateToUnreadMessage,d=s.setNavigateToUnreadMessage;if(n>0&&(this.targetRowInfo&&this.scrollUpHandler.check(this.scrollTop,r)&&this.cleanTargetRowInfo(),this.scrollTop>r?(l("up"),!1!==i&&r<200&&0!==t&&this.debounceFetchMoreMessage("older")):(l("down"),(o||u)&&c&&r>n-t-30&&this.debounceFetchMoreMessage("latest"))),this.stopIndex>0){var p,g=a.length,f=r>0?n-r-t<=60||(null===(p=this.targetRowInfo)||void 0===p?void 0:p.index)===g-1:!(g>0)||this.stopIndex>=g-1;this.dobouceUpdateCurrentConversationCanRead(f),f&&u&&d({isNavigateToUnreadMessage:!1})}this.scrollTop=r}},{key:"handleRowsRender",value:function(e){var t,n,r=e.startIndex,s=e.stopIndex;this.startIndex=r,this.stopIndex=s,this.debounceMarkMessage(),this.targetRowInfo&&cd(this.targetRowInfo.range,r)?this.targetRowInfo.range=[r,this.targetRowInfo.range[1]]:this.cleanTargetRowInfo(),this.targetMsgRow>0&&(null===(t=this.listNode)||void 0===t||null===(n=t.scrollToRow)||void 0===n||n.call(t,this.targetMsgRow),this.targetMsgRow=null)}},{key:"rowRenderer",value:function(e){var t=this,n=e.index,s=(e.key,e.parent),a=e.style,o=this.props.messageList[n];if(!o)return null;var i=this.props,c=i.shop,l=i.isScChat,u=i.currentUser,d=i.isSubAccount,p=i.messageList,g=i.hasMoreOlderMessage,f=i.resendMessageRequested,A=i.fillMessageRequested,h=i.cancelSendingMessageRequested,m=i.showWarningMessageIds,E=i.conversationId,v=i.conversationShopId,S=i.conversationBuyerId,_=i.conversationStatus,y=i.messagesFillStatusMap,C=i.currentFaqSessionInfo,b=p[n-1]||{},M=b.type,I=b.to_id,w=b.content,O=void 0===w?{}:w,B=b.created_timestamp,k=o.type,R=o.content,P=void 0===R?{}:R,D=o.to_id,N=o.id,j=o.created_timestamp,F=id(k),L=y[N],q=y["source-".concat(N)];k===dd&&(P.type===gd?D===u.id?F=fu:(F=qc,L=null,q=null):(L=null,q=null));var G=M===pd||(0,T.getMessageIsRatecard)(M,O)&&(u.id!==I||d),U=1e3*j,H=1e3*B,Y=U&&!H||U-H>3e5||0===n&&!g?(0,T.customizeTime)(U):null,V=0===n;return r().createElement(x(),{key:N,parent:s,rowIndex:n,columnIndex:0,cache:this._cache},(function(e){var s=e.measure;return r().createElement(F,{index:n,style:a,shop:c,message:o,measure:function(){return t.onMeasure(n,s)},timeFlag:Y,isScChat:l,isSubAccount:d,isLastMessage:n===p.length-1,newMessageFlag:N===t.state.firstUnreadMsgId&&!V,isLastSystemMessage:G,hasSourceMessageMap:t.hasSourceMessageMap,resendMessageRequested:f,fillMessageRequested:A,addExposedMessageId:t.addExposedMessageId,exposedMessageIds:t.exposedMessageIds,cancelSendingMessageRequested:h,showWarningMessageIds:m,conversationId:E,conversationShopId:v,conversationBuyerId:S,conversationStatus:_,messageFillStatus:L,messageSourceFillStatus:q,currentFaqSessionInfo:C})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locale,s=t.isScChat,a=t.messageList,o=void 0===a?[]:a,i=t.unreadMessageIds,c=void 0===i?[]:i,l=t.currentConversation,u=t.shopTranslationSettings,d=t.messagesFillStatusMap,p=t.currentConversationTranslationAccess,g=t.currentConversationCanRead,f=t.toBottomHasConflict,A=(t.shop,l.status),h=l.shop_id,m=l.to_name,E=l.to_id,v=l.latest_message_from_id,_=o.filter((function(e){return c.includes(e.id)})),C=_.length?_[_.length-1]:null,M=o.length||1,x=E!==v,I=(C||{}).content,w=(void 0===I?{}:I).translation,O=(w=void 0===w?{}:w).text,B=(u[h]||{}).autoTranslationStatus===T.SwitchStatus.ENABLED,R=(0,T.handleDisplayTranslation)(B,x,O,s,p),P="closed"===A;return r().createElement("div",{className:Q.messageSection,id:"messageSection"},r().createElement(b(),{onResize:this.handleAutoSizerResized},(function(t){var n=t.width,s=t.height;return r().createElement($,null,r().createElement(X.Provider,{value:e.imgCache},r().createElement(y(),{width:n,height:s,ref:e.getListRef,rowCount:M,rowHeight:e._cache.rowHeight,className:Q.grid,containerProps:e.containerProps,containerStyle:{},estimatedRowSize:37,overscanRowCount:10,deferredMeasurementCache:e._cache,onScroll:e.handleScroll,rowRenderer:e.rowRenderer,onRowsRendered:e.handleRowsRender,differProp:d,id:Ad})))})),r().createElement("div",{className:Q.layers},!f&&!g&&r().createElement("div",{id:"toBottomButton",className:Q.iconWrapper,onClick:this.handleGoToBottom},r().createElement(S(),{svg:k()})),this.state.shouldRenderNewMessageTip&&!P&&r().createElement(ae,{locale:n,shopId:h,username:m,message:C||{},onClick:this.handleGoToBottom,enableTranslation:R})))}}]),n}(r().Component);const md=E()(hd,{dataKey:"messageList",penddingController:function(e,t,n){return!t||n!==T.DataFetchStatus.INIT_PENDING},scrollController:function(e,t,n,r,s,a,o){var i=e!==t;i&&(o&&r===T.DataFetchStatus.FAILED&&o(),n(e));var c=a.current;c&&clearTimeout(c),a.current=setTimeout((function(){i&&!r.toLowerCase().includes("init")&&s(T.DataFetchStatus.SUCCEED)}),10)}});var Ed=["fetchMessagesRequested","messageHttpStatus"];function vd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vd(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _d=function(e){p(s,e);var n=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var s=A(this).constructor;n=Reflect.construct(r,arguments,s)}else n=r.apply(this,arguments);return f(this,n)}}(s);function s(e){var t;return i(this,s),(t=n.call(this,e)).fetchRequested=t.fetchRequested.bind(u(t)),t}return l(s,[{key:"fetchRequested",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needReset,n=void 0!==t&&t,r=e.direction,s=this.props,a=s.messageList,o=s.currentConversation,i=s.fetchMessagesRequested,c={conversationId:o.id,direction:"up"===r||"older"===r?"older":"latest"};if(n)c.read=!0,c.reset=!0;else if(!a.length)return;i(Sd({},c))}},{key:"render",value:function(){var e=this.props,n=(e.fetchMessagesRequested,e.messageHttpStatus),s=t(e,Ed);return r().createElement(md,a({},s,{status:n,fetchRequested:this.fetchRequested}))}}]),s}(r().PureComponent),yd={markMessagesRequested:O.markMessagesRequested,fetchMessagesRequested:Ut,resendMessageRequested:Tn,fillMessageRequested:Et,setCurrentConversationCanRead:O.setCurrentConversationCanRead,cancelSendingMessageRequested:ys,deleteConversationMessageHash:Xn,setInScrollToMessage:mn,setNavigateToUnreadMessage:O.setNavigateToUnreadMessage};const Cd=(0,h.connect)((function(e){return{isScChat:(0,O.isScChatSelector)(e),hasMoreOlderMessage:(0,O.hasMoreOlderMessageSelector)(e),hasMoreLatestMessage:(0,O.hasMoreLatestMessageSelector)(e),isSubAccount:(0,O.isSubAccountSelector)(e),messageList:(0,O.curConvsMessageSelector)(e),showChatWindow:(0,O.showChatWindowSelector)(e),unreadMessageIds:(0,O.unreadMessageIdsSelector)(e),messageHttpStatus:(0,O.messageHttpStatusSelector)(e),showConversationDetail:(0,O.showConversationDetailSelector)(e),currentConversationCanRead:(0,O.currentConversationCanReadSelector)(e),showWarningMessageIds:(0,O.showWarningMessageIdsSelector)(e),conversationId:(0,O.currentConversationIdSelector)(e),conversationShopId:(0,O.currentConversationShopIdSelectors)(e),conversationBuyerId:(0,O.currentConversationBuyerIdSelectors)(e),conversationStatus:(0,O.currentConversationStatusSelectors)(e),shop:(0,O.currentConversationShopSelectors)(e),inScrollToMessage:(0,O.inScrollToMessageSelector)(e)||(0,O.inlocationSelector)(e),shopTranslationSettings:(0,O.shopTranslationSettingsSelector)(e),currentConversationTranslationAccess:(0,O.currentConversationTranslationAccessSelector)(e),messagesFillStatusMap:(0,O.messageFillStatusMapSelector)(e),locale:(0,O.localeSelector)(e),currentFaqSessionInfo:(0,O.currentFaqSessionInfoSelector)(e),toBottomHasConflict:(0,O.toBottomHasConflictSelector)(e),isNavigateToUnreadMessage:(0,O.isNavigateToUnreadMessageSelector)(e),navigateToUnreadMessageId:(0,O.navigateToUnreadMessageIdSelector)(e)}}),yd)(_d);var bd=Qo,Md=Zo,xd=t(e,["reducerMap","sagas"]),Id=function(){return{id:"message-section",reducerMap:bd,sagas:Md,actionsMap:xd,retained:!0}};function wd(e){return r().createElement(s.DynamicModuleLoader,{modules:[Id()]},r().createElement(Cd,e))}})(),D})(),e.exports=r(n(67294),n(99591),n(50558),n(34012),n(20590),n(31427),n(78330),n(54818),n(36032),n(26842),n(37764),n(74010),n(37521),n(13283),n(47865),n(53053),n(34857),n(28366),n(58518),n(70249),n(77996),n(90167),n(56462),n(75282),n(33640),n(86134),n(41037),n(94184),n(847),n(83253),n(80862),n(82365))},56462:e=>{e.exports='<svg data-name="图层 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><g data-name="Layer 1"><path d="M512 1024A512.2 512.2 0 01312.75 40.2a512.12 512.12 0 01398.6 943.5A507.07 507.07 0 01512 1024zm0-960a447.88 447.88 0 00-316.8 764.8A448 448 0 10686.45 99.2 444.4 444.4 0 00512 64z"></path><path d="M448 736a31.55 31.55 0 01-22.6-9.4l-192-192a32 32 0 1145.3-45.3L448 658.7l297.4-297.4a32 32 0 1145.3 45.3l-320 320A32 32 0 01448 736z"></path></g></svg>'},47865:e=>{e.exports='<svg viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M5.99996 8.14645L11.1464 3L11.8535 3.70711L6.70707 8.85355C6.31655 9.24408 5.68338 9.24408 5.29286 8.85355L0.146408 3.70711L0.853516 3L5.99996 8.14645Z" fill="white"></path></svg>'},74010:e=>{e.exports='<svg width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#filter0_d_92_10269)"><circle cx="18" cy="17" r="17" fill="#FAFAFA"></circle></g><path d="M18 17.1464L23.1464 12L23.8535 12.7071L18.7071 17.8536C18.3165 18.2441 17.6834 18.2441 17.2929 17.8536L12.1464 12.7071L12.8535 12L18 17.1464Z" fill="#EE4D2D"></path><path d="M18 22.1464L23.1464 17L23.8535 17.7071L18.7071 22.8536C18.3165 23.2441 17.6834 23.2441 17.2929 22.8536L12.1464 17.7071L12.8535 17L18 22.1464Z" fill="#EE4D2D"></path><defs><filter id="filter0_d_92_10269" x="0" y="0" width="36" height="36" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"></feFlood><feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"></feColorMatrix><feOffset dy="1"></feOffset><feGaussianBlur stdDeviation="0.5"></feGaussianBlur><feComposite in2="hardAlpha" operator="out"></feComposite><feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"></feColorMatrix><feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_92_10269"></feBlend><feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_92_10269" result="shape"></feBlend></filter></defs></svg>'},10416:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zm4.175 7.614l2.651-2.652-1.06-1.06-2.652 2.651-2.652-2.651-1.06 1.06 2.651 2.652-2.651 2.652 1.06 1.06 2.652-2.651 2.652 2.651 1.06-1.06-2.651-2.652zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2z"></path></svg>'},13829:e=>{e.exports='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.0001 13.4001C10.5347 13.4001 13.4001 10.5347 13.4001 7.0001C13.4001 3.46548 10.5347 0.600098 7.0001 0.600098C3.46548 0.600098 0.600098 3.46548 0.600098 7.0001C0.600098 10.5347 3.46548 13.4001 7.0001 13.4001ZM3.72691 4.78757L5.93944 7.0001L3.72691 9.21262L4.78757 10.2733L7.0001 8.06076L9.21262 10.2733L10.2733 9.21262L8.06076 7.0001L10.2733 4.78757L9.21262 3.72691L7.0001 5.93944L4.78757 3.72691L3.72691 4.78757Z" fill="black" fill-opacity="0.26"></path></svg>'},9293:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.409 8.553L5.288 8.682l-1.061 1.06 3.182 3.183 6.364-6.364-1.06-1.061-5.304 5.303zM7.5 1.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},81951:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="chat-icon"><path d="M17.77 8.536l-2.121-2.122-2.122 2.122 2.122 2.12 2.12-2.12zm-2.829 2.828l-2.12-2.121-6.109 6.108-.212 2.333 2.333-.212 6.108-6.108zm1.415-5.657l2.12 2.121a1 1 0 010 1.415l-8.935 8.936a1 1 0 01-.617.289l-2.333.212a1 1 0 01-1.087-1.086l.212-2.334a1 1 0 01.289-.617l8.936-8.936a1 1 0 011.415 0z"></path></svg>'},92281:e=>{e.exports='<svg viewBox="0 0 18 19" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 9.5a8 8 0 11-16 0 8 8 0 0116 0zm-7.2 1H8.3v-5h1.5v5zm-1.5 3h1.5V12H8.3v1.5z"></path></svg>'},84931:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M15.69 11.919a1.985 1.985 0 01-.033 1.981 1.985 1.985 0 01-1.722.981H2.002a1.982 1.982 0 01-1.72-.981 1.985 1.985 0 01-.033-1.981L6.216 1.038c.176-.325.44-.594.762-.779a2.02 2.02 0 011.983.002c.322.183.586.453.763.778l5.965 10.88zm-7.721.962a1 1 0 000-2 1 1 0 000 2zm1-8.015v-.011a1 1 0 00-2 0v.039c0 .058.006.115.017.173l.486 4.37a.5.5 0 00.994-.001l.486-4.37a.932.932 0 00.017-.174v-.026z"></path></svg>'},4903:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.626 5.209a.373.373 0 010 .527L2.043 7.32A1.866 1.866 0 004.68 9.957l1.583-1.583a.373.373 0 11.527.528L5.21 10.485a2.612 2.612 0 11-3.694-3.694L3.098 5.21a.373.373 0 01.528 0zm4.22-1.056a.373.373 0 010 .528L4.682 7.847a.373.373 0 11-.528-.528L7.32 4.153a.373.373 0 01.528 0zm2.639-2.638a2.612 2.612 0 010 3.694L8.902 6.79a.373.373 0 01-.528-.527L9.957 4.68A1.866 1.866 0 007.32 2.043L5.736 3.626a.373.373 0 01-.528-.528l1.583-1.583a2.612 2.612 0 013.694 0z" fill-opacity=".4"></path></svg>'},73707:e=>{e.exports='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><mask id="path-1-inside-1_434_6291" fill="white"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 3C8 2.44772 8.44772 2 9 2H9.5H14.5H15C15.5523 2 16 2.44772 16 3V5H14.5V3.5H9.5V5H8V3Z"></path></mask><path fill-rule="evenodd" clip-rule="evenodd" d="M8 3C8 2.44772 8.44772 2 9 2H9.5H14.5H15C15.5523 2 16 2.44772 16 3V5H14.5V3.5H9.5V5H8V3Z" fill="#D8D8D8"></path><path d="M16 5V6H17V5H16ZM14.5 5H13.5V6H14.5V5ZM14.5 3.5H15.5V2.5H14.5V3.5ZM9.5 3.5V2.5H8.5V3.5H9.5ZM9.5 5V6H10.5V5H9.5ZM8 5H7V6H8V5ZM9 1C7.89543 1 7 1.89543 7 3H9V3V1ZM9.5 1H9V3H9.5V1ZM14.5 1H9.5V3H14.5V1ZM14.5 3H15V1H14.5V3ZM15 3H17C17 1.89543 16.1046 1 15 1V3ZM15 3V5H17V3H15ZM16 4H14.5V6H16V4ZM15.5 5V3.5H13.5V5H15.5ZM9.5 4.5H14.5V2.5H9.5V4.5ZM10.5 5V3.5H8.5V5H10.5ZM8 6H9.5V4H8V6ZM7 3V5H9V3H7Z" fill="#888888" mask="url(#path-1-inside-1_434_6291)"></path><rect x="4.375" y="4.875" width="15.25" height="0.75" fill="#D8D8D8" stroke="#888888" stroke-width="0.75"></rect><path d="M19 7V21C19 21.5523 18.5523 22 18 22H6C5.44772 22 5 21.5523 5 21L5 7" stroke="#888888" stroke-width="1.5"></path><rect x="9.5" y="9" width="1.5" height="9" fill="#888888"></rect><rect x="13" y="9" width="1.5" height="9" fill="#888888"></rect></svg>'},71417:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><g id="2.æä½æ§/16x16/question-mark"><path id="Exclude" fill-rule="evenodd" clip-rule="evenodd" d="M8 1C11.866 1 15 4.13401 15 8C15 11.866 11.866 15 8 15C4.13401 15 1 11.866 1 8C1 4.13401 4.13401 1 8 1ZM8 2C4.68629 2 2 4.68629 2 8C2 11.3137 4.68629 14 8 14C11.3137 14 14 11.3137 14 8C14 4.68629 11.3137 2 8 2ZM7.98751 10.2375C8.40172 10.2375 8.73751 10.5733 8.73751 10.9875C8.73751 11.4017 8.40172 11.7375 7.98751 11.7375C7.57329 11.7375 7.23751 11.4017 7.23751 10.9875C7.23751 10.5733 7.57329 10.2375 7.98751 10.2375ZM8.117 4.60513C9.97012 4.60513 10.7746 6.50497 9.94298 7.72186C9.76926 7.97607 9.56587 8.14547 9.2705 8.31455L9.11487 8.39945L8.95825 8.47994C8.56296 8.68261 8.49391 8.75809 8.49391 9.02099C8.49391 9.29713 8.27005 9.52099 7.99391 9.52099C7.71777 9.52099 7.49391 9.29713 7.49391 9.02099C7.49391 8.34167 7.76504 7.99682 8.35914 7.66626L8.76655 7.45066C8.94241 7.35025 9.04308 7.26634 9.11736 7.15765C9.52116 6.56675 9.11397 5.60513 8.117 5.60513C7.41792 5.60513 6.82815 6.01273 6.75716 6.55276L6.75 6.66245L6.74194 6.75233C6.69961 6.98557 6.49546 7.16245 6.25 7.16245C5.97386 7.16245 5.75 6.93859 5.75 6.66245C5.75 5.44257 6.87194 4.60513 8.117 4.60513Z"></path></g></svg>'},82233:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M5.75 2.75v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75h-12A.75.75 0 012 15.5v-12a.75.75 0 01.75-.75h3zM7.25 2h3a.75.75 0 01.75.75v.75H6.5v-.75A.75.75 0 017.25 2zM9 12.5v-1.486l-2 2 2 2V14a4 4 0 10-4-4h1.5A2.5 2.5 0 119 12.5z"></path></svg>'},77277:e=>{e.exports='<svg viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M0.526796 5.89526L5.06797 1.44829C5.34696 1.17508 5.80442 1.34136 5.86418 1.7049L5.87069 1.78573V3.90409C9.29568 4.07198 11.7085 6.06944 12.9601 8.9607C13.4242 10.033 13.6596 11.1334 13.6 11.8187C13.5006 12.9599 12.6184 12.8868 12.057 11.9203L11.9937 11.8049C11.0822 10.0423 9.1664 8.76383 6.21574 7.98789L5.87069 7.90059V10.4758C5.87069 10.8613 5.44132 11.0735 5.13868 10.8707L5.07597 10.8209L0.534796 6.57779C0.360041 6.4145 0.337747 6.15096 0.469967 5.9622L0.526796 5.89526L5.06797 1.44829L0.526796 5.89526ZM4.92621 2.90923L1.54052 6.22468L4.92621 9.38812V7.30838C4.92621 7.00779 5.2033 6.78368 5.49725 6.84654C8.98702 7.59279 11.3655 8.95666 12.5992 10.9582C12.5121 10.4806 12.3402 9.90622 12.0933 9.33593C10.9235 6.63347 8.66035 4.83718 5.39849 4.83718C5.16664 4.83718 4.97381 4.67011 4.93382 4.44979L4.92621 4.3649V2.90923Z" fill="#888"></path></svg>'},19768:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path fill-rule="evenodd" clip-rule="evenodd" d="M6.994.994a6 6 0 014.584 9.87l3.28 3.28a.5.5 0 01-.639.764l-.069-.058-3.278-3.278A6 6 0 116.994.993zm0 1a5 5 0 100 10 5 5 0 000-10z"></path></svg>'},11772:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="chat-icon"><path d="M511 1C228.2 1-1 230.2-1 513s229.2 512 512 512 512-229.2 512-512S793.8 1 511 1zm313.3 380.4l-362 362c-16.7 16.7-43.7 16.7-60.3 0L200.9 542.3c-16.7-16.7-16.7-43.7 0-60.3 16.7-16.7 43.7-16.7 60.3 0l171 171L764 321.1c16.7-16.7 43.7-16.7 60.3 0 16.7 16.6 16.7 43.7 0 60.3z"></path></svg>'},50357:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><g fill-rule="evenodd"><path d="M2.05 13H1V4a1 1 0 011-1h9.738v2h3.481a1 1 0 01.97.757L17 9v4h-1.05a2.5 2.5 0 00-4.9 0h-4.1a2.5 2.5 0 00-4.9 0zM12 6v2h3.807l-.524-2H12z"></path><circle cx="4.5" cy="13.5" r="1.5"></circle><circle cx="13.5" cy="13.5" r="1.5"></circle></g></svg>'},68291:e=>{e.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm-1.5 4.5v1.5h9v-1.5h-9zm0 3.25v1.5h6V10h-6zm3-8.5h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75z"></path></svg>'},37364:e=>{e.exports='<svg viewBox="0 0 24 26" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M16.556 19.4c-.152 1.243-.91 2.24-2.085 2.738a5.258 5.258 0 01-2.226.38 7.213 7.213 0 01-3.032-.78c-.34-.174-.84-.517-1.216-.83-.086-.072-.13-.136-.047-.252.088-.132.436-.635.49-.718.074-.113.196-.118.307-.031.016.012.129.1.152.116.9.701 2.063 1.227 3.354 1.276 1.628-.021 2.81-.747 3.02-1.87.232-1.237-.755-2.298-2.657-2.89-.604-.189-2.124-.793-2.405-.957-1.325-.772-1.942-1.784-1.854-3.03.135-1.728 1.747-3.022 3.793-3.03a6.937 6.937 0 012.694.55c.298.126.854.424 1.053.57.138.102.128.215.073.303-.08.134-.321.508-.418.664-.07.107-.158.119-.283.04a5.673 5.673 0 00-3.091-.954c-1.398.028-2.452.853-2.521 1.984-.018 1.022.763 1.763 2.422 2.33 3.425 1.092 4.723 2.377 4.477 4.391zM12.329 1.645c2.217 0 4.024 2.09 4.109 4.705H8.221c.084-2.615 1.891-4.705 4.108-4.705zm8.417 24.225c1.17-.032 2.12-.978 2.22-2.15l.007-.142.83-16.71v-.026a.492.492 0 00-.492-.492h-5.326c-.13-3.453-2.613-6.207-5.656-6.207-3.043 0-5.525 2.754-5.655 6.207H1.34a.492.492 0 00-.481.53l.756 16.645.011.209c.116 1.158.962 2.09 2.113 2.134l16.922.002h.085z"></path></svg>'},23384:e=>{e.exports='<svg viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M6 2.25v1.5h6v-1.5h3a.75.75 0 01.75.75v12a.75.75 0 01-.75.75H3a.75.75 0 01-.75-.75V3A.75.75 0 013 2.25h3zm1.5-.75h3a.75.75 0 01.75.75V3h-4.5v-.75a.75.75 0 01.75-.75zm1.09 5.09v2a3.704 3.704 0 01-.415-.125 1.33 1.33 0 01-.36-.195 1.013 1.013 0 01-.255-.29.795.795 0 01-.1-.41c0-.353.098-.605.295-.755.197-.15.475-.225.835-.225zm-1.28 4.24H6.17a2.49 2.49 0 00.165.99c.117.287.282.528.495.725.213.197.47.348.77.455.3.107.63.163.99.17v.78h.43v-.78c.333-.013.643-.068.93-.165a2.23 2.23 0 00.75-.42 1.93 1.93 0 00.505-.69c.123-.277.185-.602.185-.975 0-.36-.067-.663-.2-.91a1.904 1.904 0 00-.53-.62 2.957 2.957 0 00-.76-.41c-.287-.107-.58-.2-.88-.28V6.59c.36 0 .622.09.785.27.163.18.252.44.265.78h1.14a1.99 1.99 0 00-.175-.86 1.721 1.721 0 00-.47-.61 1.996 1.996 0 00-.695-.36c-.267-.08-.55-.12-.85-.12v-.78h-.43v.78c-.3 0-.587.043-.86.13a2.302 2.302 0 00-.725.375c-.21.163-.377.367-.5.61a1.845 1.845 0 00-.185.845c0 .367.067.673.2.92s.308.452.525.615c.217.163.46.297.73.4.27.103.542.192.815.265v2.42c-.46-.013-.79-.147-.99-.4-.2-.253-.297-.6-.29-1.04zm1.71 1.44V9.94c.153.04.303.087.45.14.147.053.278.123.395.21.117.087.21.193.28.32a.96.96 0 01.105.47c0 .4-.115.692-.345.875-.23.183-.525.288-.885.315z"></path></svg>'},8343:e=>{e.exports='<svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="8.99984" cy="8.99984" r="8.58333" fill="black" fill-opacity="0.5" stroke="white" stroke-width="0.5"></circle><path fill-rule="evenodd" clip-rule="evenodd" d="M12.1703 8.60016C12.4369 8.80016 12.4369 9.20016 12.1703 9.40016L7.94806 12.5668C7.61844 12.814 7.14806 12.5789 7.14806 12.1668L7.14806 5.83349C7.14806 5.42147 7.61844 5.18628 7.94806 5.4335L12.1703 8.60016Z" fill="white"></path></svg>'},90167:e=>{e.exports='<svg viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg"><path d="M6 9.75C6.41421 9.75 6.75 9.41421 6.75 9C6.75 8.58579 6.41421 8.25 6 8.25C5.58579 8.25 5.25 8.58579 5.25 9C5.25 9.41421 5.58579 9.75 6 9.75Z"></path><path d="M6.5 7.5V2.5H5.5V7.5H6.5Z"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12 6C12 9.31371 9.31371 12 6 12C2.68629 12 0 9.31371 0 6C0 2.68629 2.68629 0 6 0C9.31371 0 12 2.68629 12 6ZM6 11C8.76142 11 11 8.76142 11 6C11 3.23858 8.76142 1 6 1C3.23858 1 1 3.23858 1 6C1 8.76142 3.23858 11 6 11Z"></path></svg>'},33640:e=>{e.exports='<svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" class="chat-icon"><path d="M8 16A8 8 0 118 0a8 8 0 010 16zm.8-7V4H7.3v5h1.5zm0 3v-1.5H7.3V12h1.5z"></path></svg>'}}]);